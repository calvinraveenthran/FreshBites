/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement){cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close()}d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&f.type(b)==="object"){for(var e in b){b_(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border"){for(;e<g;e+=2){c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0}}return d+"px"}d=by(a,b);if(d<0||d==null){d=a.style[b]}if(bt.test(d)){return d}d=parseFloat(d)||0;if(c){for(;e<g;e+=2){d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0)}}return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c,i[c][d])}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c){return null}var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d){e.access(a,c,l,d[l],1,h,f)}g=1}else{if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c){for(;l<m;l++){c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i)}}g=1}}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)}},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++){if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return !!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent){for(n in {submit:1,change:1,focusin:1}){m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o}}j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div><table "+n+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++){h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]))}f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d){return f.queue(this[0],a)}return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++){e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this){if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++){s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s)}r.length&&j.push({elem:m,matches:r})}}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace)){c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l){continue}if(typeof l=="string"){if(!_.test(l)){l=b.createTextNode(l)}else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--){p=p.lastChild}if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i){f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}}var u;if(!f.support.appendChecked){if(l[0]&&typeof(u=l.length)=="number"){for(i=0;i<u;i++){bn(l[i])}}else{bn(l)}}l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return !a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type))){e.push(h.parentNode?h.parentNode.removeChild(h):h)}else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(by){return by(a,c)}},swap:function(a,b,c){var d={},e,f;for(f in b){d[f]=a.style[f],a.style[f]=b[f]}e=c.call(a);for(f in b){a.style[f]=d[f]}return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})}},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bx[d]+b]=e[d]||e[d-2]||e[0]}return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR){return bR.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=bZ(bT,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){b_(g,a[g],c,e)}}return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg){cg[a](0,1)}}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(ct("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(ct("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand" in k){l=k.expand(a[g]),delete a[g];for(i in l){i in a||(a[i]=l[i])}}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return -Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a)){return d?{top:d.top,left:d.left}:{top:0,left:0}}var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed"){break}d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static"){k+=h.offsetTop,l+=h.offsetLeft}f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)})}var c=this[0],d=c&&c.ownerDocument;if(!d){return null}if(c===d.body){return f.offset.bodyOffset(c)}return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b){return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e]}h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e]){return i[d]}return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){function j(a,n){var m=a.nodeName.toLowerCase();if("area"===m){var l=a.parentNode,k=l.name,d;return !a.href||!k||l.nodeName.toLowerCase()!=="map"?!1:(d=f("img[usemap=#"+k+"]")[0],!!d&&h(d))}return(/input|select|textarea|button|object/.test(m)?!a.disabled:"a"==m?a.href||n:n)&&h(a)}function h(a){return !f(a).parents().andSelf().filter(function(){return f.curCSS(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),f.fn.extend({propAttr:f.fn.prop||f.fn.attr,_focus:f.fn.focus,focus:function(a,d){return typeof a=="number"?this.each(function(){var b=this;setTimeout(function(){f(b).focus(),d&&d.call(b)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.curCSS(this,"position",1))&&/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?f(document):a},zIndex:function(l){if(l!==e){return this.css("zIndex",l)}if(this.length){var k=f(this[0]),b,a;while(k.length&&k[0]!==document){b=k.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){a=parseInt(k.css("zIndex"),10);if(!isNaN(a)&&a!==0){return a}}k=k.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.each(["Width","Height"],function(n,m){function a(o,r,q,p){return f.each(l,function(){r-=parseFloat(f.curCSS(o,"padding"+this,!0))||0,q&&(r-=parseFloat(f.curCSS(o,"border"+this+"Width",!0))||0),p&&(r-=parseFloat(f.curCSS(o,"margin"+this,!0))||0)}),r}var l=m==="Width"?["Left","Right"]:["Top","Bottom"],k=m.toLowerCase(),b={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+m]=function(d){return d===e?b["inner"+m].call(this):this.each(function(){f(this).css(k,a(this,d)+"px")})},f.fn["outer"+m]=function(d,o){return typeof d!="number"?b["outer"+m].call(this,d):this.each(function(){f(this).css(k,a(this,d,!0,o)+"px")})}}),f.extend(f.expr[":"],{data:function(a,l,k){return !!f.data(a,k[3])},focusable:function(a){return j(a,!isNaN(f.attr(a,"tabindex")))},tabbable:function(a){var k=f.attr(a,"tabindex"),c=isNaN(k);return(c||k>=0)&&j(a,!c)}}),f(function(){var a=document.body,d=a.appendChild(d=document.createElement("div"));d.offsetHeight,f.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=d.offsetHeight===100,f.support.selectstart="onselectstart" in d,a.removeChild(d).style.display="none"}),f.extend(f.ui,{plugin:{add:function(a,n,m){var l=f.ui[a].prototype;for(var k in m){l.plugins[k]=l.plugins[k]||[],l.plugins[k].push([n,m[k]])}},call:function(l,k,o){var n=l.plugins[k];if(!n||!l.element[0].parentNode){return}for(var m=0;m<n.length;m++){l.options[n[m][0]]&&n[m][1].apply(l.element,o)}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c)},hasScroll:function(a,m){if(f(a).css("overflow")==="hidden"){return !1}var l=m&&m==="left"?"scrollLeft":"scrollTop",k=!1;return a[l]>0?!0:(a[l]=1,k=a[l]>0,a[l]=0,k)},isOverAxis:function(k,d,l){return k>d&&k<d+l},isOver:function(a,o,n,m,l,k){return f.ui.isOverAxis(a,n,l)&&f.ui.isOverAxis(o,m,k)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){if(f.cleanData){var j=f.cleanData;f.cleanData=function(a){for(var l=0,k;(k=a[l])!=null;l++){try{f(k).triggerHandler("remove")}catch(c){}}j(a)}}else{var h=f.fn.remove;f.fn.remove=function(a,d){return this.each(function(){return d||(!a||f.filter(a,[this]).length)&&f("*",this).add([this]).each(function(){try{f(this).triggerHandler("remove")}catch(c){}}),h.call(f(this),a,d)})}}f.widget=function(a,o,n){var m=a.split(".")[0],l;a=a.split(".")[1],l=m+"-"+a,n||(n=o,o=f.Widget),f.expr[":"][l]=function(b){return !!f.data(b,a)},f[m]=f[m]||{},f[m][a]=function(d,c){arguments.length&&this._createWidget(d,c)};var k=new o;k.options=f.extend(!0,{},k.options),f[m][a].prototype=f.extend(!0,k,{namespace:m,widgetName:a,widgetEventPrefix:f[m][a].prototype.widgetEventPrefix||a,widgetBaseClass:l},n),f.widget.bridge(a,f[m][a])},f.widget.bridge=function(b,a){f.fn[b]=function(l){var k=typeof l=="string",d=Array.prototype.slice.call(arguments,1),c=this;return l=!k&&d.length?f.extend.apply(null,[!0,l].concat(d)):l,k&&l.charAt(0)==="_"?c:(k?this.each(function(){var n=f.data(this,b),m=n&&f.isFunction(n[l])?n[l].apply(n,d):n;if(m!==n&&m!==e){return c=m,!1}}):this.each(function(){var m=f.data(this,b);m?m.option(l||{})._init():f.data(this,b,new a(l,this))}),c)}},f.Widget=function(d,c){arguments.length&&this._createWidget(d,c)},f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,l){f.data(l,this.widgetName,this),this.element=f(l),this.options=f.extend(!0,{},this.options,this._getCreateOptions(),a);var k=this;this.element.bind("remove."+this.widgetName,function(){k.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(k,b){var a=k;if(arguments.length===0){return f.extend({},this.options)}if(typeof k=="string"){if(b===e){return this.options[k]}a={},a[k]=b}return this._setOptions(a),this},_setOptions:function(a){var d=this;return f.each(a,function(k,c){d._setOption(k,c)}),this},_setOption:function(d,c){return this.options[d]=c,d==="disabled"&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,o,n){var m,l,k=this.options[a];n=n||{},o=f.Event(o),o.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),o.target=this.element[0],l=o.originalEvent;if(l){for(m in l){m in o||(o[m]=l[m])}}return this.element.trigger(o,n),!(f.isFunction(k)&&k.call(this.element[0],o,n)===!1||o.isDefaultPrevented())}}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=!1;e(document).mouseup(function(b){f=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===e.data(b.target,a.widgetName+".preventClickEvent")){return e.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(f){return}this._mouseStarted&&this._mouseUp(a),this._mouseDownEvent=a;var j=this,h=a.which==1,c=typeof this.options.cancel=="string"&&a.target.nodeName?e(a.target).closest(this.options.cancel).length:!1;if(!h||c||!this._mouseCapture(a)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){j.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==!1;if(!this._mouseStarted){return a.preventDefault(),!0}}return !0===e.data(a.target,this.widgetName+".preventClickEvent")&&e.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return j._mouseMove(b)},this._mouseUpDelegate=function(b){return j._mouseUp(b)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.preventDefault(),f=!0,!0},_mouseMove:function(a){return !e.browser.msie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&e.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(k,j){k.ui=k.ui||{};var q=/left|center|right/,p=/top|center|bottom/,o="center",n={},m=k.fn.position,l=k.fn.offset;k.fn.position=function(c){if(!c||!c.of){return m.apply(this,arguments)}c=k.extend({},c);var s=k(c.of),r=s[0],f=(c.collision||"flip").split(" "),e=c.offset?c.offset.split(" "):[0,0],d,a,t;return r.nodeType===9?(d=s.width(),a=s.height(),t={top:0,left:0}):r.setTimeout?(d=s.width(),a=s.height(),t={top:s.scrollTop(),left:s.scrollLeft()}):r.preventDefault?(c.at="left top",d=a=0,t={top:c.of.pageY,left:c.of.pageX}):(d=s.outerWidth(),a=s.outerHeight(),t=s.offset()),k.each(["my","at"],function(){var b=(c[this]||"").split(" ");b.length===1&&(b=q.test(b[0])?b.concat([o]):p.test(b[0])?[o].concat(b):[o,o]),b[0]=q.test(b[0])?b[0]:o,b[1]=p.test(b[1])?b[1]:o,c[this]=b}),f.length===1&&(f[1]=f[0]),e[0]=parseInt(e[0],10)||0,e.length===1&&(e[1]=e[0]),e[1]=parseInt(e[1],10)||0,c.at[0]==="right"?t.left+=d:c.at[0]===o&&(t.left+=d/2),c.at[1]==="bottom"?t.top+=a:c.at[1]===o&&(t.top+=a/2),t.left+=e[0],t.top+=e[1],this.each(function(){var B=k(this),A=B.outerWidth(),z=B.outerHeight(),y=parseInt(k.curCSS(this,"marginLeft",!0))||0,x=parseInt(k.curCSS(this,"marginTop",!0))||0,w=A+y+(parseInt(k.curCSS(this,"marginRight",!0))||0),v=z+x+(parseInt(k.curCSS(this,"marginBottom",!0))||0),u=k.extend({},t),b;c.my[0]==="right"?u.left-=A:c.my[0]===o&&(u.left-=A/2),c.my[1]==="bottom"?u.top-=z:c.my[1]===o&&(u.top-=z/2),n.fractions||(u.left=Math.round(u.left),u.top=Math.round(u.top)),b={left:u.left-y,top:u.top-x},k.each(["left","top"],function(C,h){k.ui.position[f[C]]&&k.ui.position[f[C]][h](u,{targetWidth:d,targetHeight:a,elemWidth:A,elemHeight:z,collisionPosition:b,collisionWidth:w,collisionHeight:v,offset:e,my:c.my,at:c.at})}),k.fn.bgiframe&&B.bgiframe(),B.offset(k.extend(u,{using:c.using}))})},k.ui.position={fit:{left:function(a,r){var h=k(window),f=r.collisionPosition.left+r.collisionWidth-h.width()-h.scrollLeft();a.left=f>0?a.left-f:Math.max(a.left-r.collisionPosition.left,a.left)},top:function(a,r){var h=k(window),f=r.collisionPosition.top+r.collisionHeight-h.height()-h.scrollTop();a.top=f>0?a.top-f:Math.max(a.top-r.collisionPosition.top,a.top)}},flip:{left:function(a,v){if(v.at[0]===o){return}var u=k(window),t=v.collisionPosition.left+v.collisionWidth-u.width()-u.scrollLeft(),s=v.my[0]==="left"?-v.elemWidth:v.my[0]==="right"?v.elemWidth:0,r=v.at[0]==="left"?v.targetWidth:-v.targetWidth,e=-2*v.offset[0];a.left+=v.collisionPosition.left<0?s+r+e:t>0?s+r+e:0},top:function(a,v){if(v.at[1]===o){return}var u=k(window),t=v.collisionPosition.top+v.collisionHeight-u.height()-u.scrollTop(),s=v.my[1]==="top"?-v.elemHeight:v.my[1]==="bottom"?v.elemHeight:0,r=v.at[1]==="top"?v.targetHeight:-v.targetHeight,e=-2*v.offset[1];a.top+=v.collisionPosition.top<0?s+r+e:t>0?s+r+e:0}}},k.offset.setOffset||(k.offset.setOffset=function(a,w){/static/.test(k.curCSS(a,"position"))&&(a.style.position="relative");var v=k(a),u=v.offset(),t=parseInt(k.curCSS(a,"top",!0),10)||0,s=parseInt(k.curCSS(a,"left",!0),10)||0,r={top:w.top-u.top+t,left:w.left-u.left+s};"using" in w?w.using.call(a,r):v.css(r)},k.fn.offset=function(a){var d=this[0];return !d||!d.ownerDocument?null:a?k.isFunction(a)?this.each(function(b){k(this).offset(a.call(this,b,k(this).offset()))}):this.each(function(){k.offset.setOffset(this,a)}):l.call(this)}),function(){var a=document.getElementsByTagName("body")[0],w=document.createElement("div"),v,u,t,s,r;v=document.createElement(a?"div":"body"),t={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&k.extend(t,{position:"absolute",left:"-1000px",top:"-1000px"});for(var f in t){v.style[f]=t[f]}v.appendChild(w),u=a||document.documentElement,u.insertBefore(v,u.firstChild),w.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",s=k(w).offset(function(d,c){return c}).offset(),v.innerHTML="",u.removeChild(v),r=s.top+s.left+(a?2000:0),n.fractions=r>21&&r<22}()})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var e=this.options;return this.helper||e.disabled||d(a.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(a),this.handle?(e.iframeFix&&d(e.iframeFix===!0?"iframe":e.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(d(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var e=this.options;return this.helper=this._createHelper(a),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),d.ui.ddmanager&&(d.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),d.ui.ddmanager&&!e.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a),this._mouseDrag(a,!0),d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,f){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!f){var e=this._uiHash();if(this._trigger("drag",a,e)===!1){return this._mouseUp({}),!1}this.position=e.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return d.ui.ddmanager&&d.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var l=!1;d.ui.ddmanager&&!this.options.dropBehaviour&&(l=d.ui.ddmanager.drop(this,a)),this.dropped&&(l=this.dropped,this.dropped=!1);var k=this.element[0],j=!1;while(k&&(k=k.parentNode)){k==document&&(j=!0)}if(!j&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!l||this.options.revert=="valid"&&l||this.options.revert===!0||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,l)){var h=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){h._trigger("stop",a)!==!1&&h._clear()})}else{this._trigger("stop",a)!==!1&&this._clear()}return !1},_mouseUp:function(a){return this.options.iframeFix===!0&&d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a),d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var e=!this.options.handle||!d(this.options.handle,this.element).length?!0:!1;return d(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(e=!0)}),e},_createHelper:function(a){var f=this.options,e=d.isFunction(f.helper)?d(f.helper.apply(this.element[0],[a])):f.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo(f.appendTo=="parent"?this.element[0].parentNode:f.appendTo),e[0]!=this.element[0]&&!/(fixed|absolute)/.test(e.css("position"))&&e.css("position","absolute"),e},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),d.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window"){this.containment=[a.containment=="document"?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var l=d(a.containment),k=l[0];if(!k){return}var j=l.offset(),h=d(k).css("overflow")!="hidden";this.containment=[(parseInt(d(k).css("borderLeftWidth"),10)||0)+(parseInt(d(k).css("paddingLeft"),10)||0),(parseInt(d(k).css("borderTopWidth"),10)||0)+(parseInt(d(k).css("paddingTop"),10)||0),(h?Math.max(k.scrollWidth,k.offsetWidth):k.offsetWidth)-(parseInt(d(k).css("borderLeftWidth"),10)||0)-(parseInt(d(k).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(h?Math.max(k.scrollHeight,k.offsetHeight):k.offsetHeight)-(parseInt(d(k).css("borderTopWidth"),10)||0)-(parseInt(d(k).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=l}else{a.containment.constructor==Array&&(this.containment=a.containment)}},_convertPositionTo:function(a,m){m||(m=this.position);var l=a=="absolute"?1:-1,k=this.options,j=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(j[0].tagName);return{top:m.top+this.offset.relative.top*l+this.offset.parent.top*l-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:j.scrollTop())*l),left:m.left+this.offset.relative.left*l+this.offset.parent.left*l-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:j.scrollLeft())*l)}},_generatePosition:function(t){var s=this.options,r=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,q=/(html|body)/i.test(r[0].tagName),p=t.pageX,o=t.pageY;if(this.originalPosition){var n;if(this.containment){if(this.relative_container){var m=this.relative_container.offset();n=[this.containment[0]+m.left,this.containment[1]+m.top,this.containment[2]+m.left,this.containment[3]+m.top]}else{n=this.containment}t.pageX-this.offset.click.left<n[0]&&(p=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(o=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(p=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(o=n[3]+this.offset.click.top)}if(s.grid){var l=s.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY;o=n?l-this.offset.click.top<n[1]||l-this.offset.click.top>n[3]?l-this.offset.click.top<n[1]?l+s.grid[1]:l-s.grid[1]:l:l;var a=s.grid[0]?this.originalPageX+Math.round((p-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX;p=n?a-this.offset.click.left<n[0]||a-this.offset.click.left>n[2]?a-this.offset.click.left<n[0]?a+s.grid[0]:a-s.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():q?0:r.scrollTop()),left:p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():q?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(a,f,e){return e=e||this._uiHash(),d.ui.plugin.call(this,a,[f,e]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),d.Widget.prototype._trigger.call(this,a,f,e)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),d.extend(d.ui.draggable,{version:"1.8.21"}),d.ui.plugin.add("draggable","connectToSortable",{start:function(a,l){var k=d(this).data("draggable"),j=k.options,h=d.extend({},l,{item:k.element});k.sortables=[],d(j.connectToSortable).each(function(){var b=d.data(this,"sortable");b&&!b.options.disabled&&(k.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,h))})},stop:function(a,j){var h=d(this).data("draggable"),f=d.extend({},j,{item:h.element});d.each(h.sortables,function(){this.instance.isOver?(this.instance.isOver=0,h.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,h.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,f))})},drag:function(a,l){var k=d(this).data("draggable"),j=this,h=function(u){var t=this.offset.click.top,s=this.offset.click.left,r=this.positionAbs.top,q=this.positionAbs.left,p=u.height,o=u.width,n=u.top,m=u.left;return d.ui.isOver(r+t,q+s,n,m,p,o)};d.each(k.sortables,function(b){this.instance.positionAbs=k.positionAbs,this.instance.helperProportions=k.helperProportions,this.instance.offset.click=k.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(j).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return l.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=k.offset.click.top,this.instance.offset.click.left=k.offset.click.left,this.instance.offset.parent.left-=k.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=k.offset.parent.top-this.instance.offset.parent.top,k._trigger("toSortable",a),k.dropped=this.instance.element,k.currentItem=k.element,this.instance.fromOutside=k),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),k._trigger("fromSortable",a),k.dropped=!1)})}}),d.ui.plugin.add("draggable","cursor",{start:function(a,j){var h=d("body"),f=d(this).data("draggable").options;h.css("cursor")&&(f._cursor=h.css("cursor")),h.css("cursor",f.cursor)},stop:function(a,f){var e=d(this).data("draggable").options;e._cursor&&d("body").css("cursor",e._cursor)}}),d.ui.plugin.add("draggable","opacity",{start:function(a,j){var h=d(j.helper),f=d(this).data("draggable").options;h.css("opacity")&&(f._opacity=h.css("opacity")),h.css("opacity",f.opacity)},stop:function(a,f){var e=d(this).data("draggable").options;e._opacity&&d(f.helper).css("opacity",e._opacity)}}),d.ui.plugin.add("draggable","scroll",{start:function(a,f){var e=d(this).data("draggable");e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"&&(e.overflowOffset=e.scrollParent.offset())},drag:function(a,l){var k=d(this).data("draggable"),j=k.options,h=!1;if(k.scrollParent[0]!=document&&k.scrollParent[0].tagName!="HTML"){if(!j.axis||j.axis!="x"){k.overflowOffset.top+k.scrollParent[0].offsetHeight-a.pageY<j.scrollSensitivity?k.scrollParent[0].scrollTop=h=k.scrollParent[0].scrollTop+j.scrollSpeed:a.pageY-k.overflowOffset.top<j.scrollSensitivity&&(k.scrollParent[0].scrollTop=h=k.scrollParent[0].scrollTop-j.scrollSpeed)}if(!j.axis||j.axis!="y"){k.overflowOffset.left+k.scrollParent[0].offsetWidth-a.pageX<j.scrollSensitivity?k.scrollParent[0].scrollLeft=h=k.scrollParent[0].scrollLeft+j.scrollSpeed:a.pageX-k.overflowOffset.left<j.scrollSensitivity&&(k.scrollParent[0].scrollLeft=h=k.scrollParent[0].scrollLeft-j.scrollSpeed)}}else{if(!j.axis||j.axis!="x"){a.pageY-d(document).scrollTop()<j.scrollSensitivity?h=d(document).scrollTop(d(document).scrollTop()-j.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<j.scrollSensitivity&&(h=d(document).scrollTop(d(document).scrollTop()+j.scrollSpeed))}if(!j.axis||j.axis!="y"){a.pageX-d(document).scrollLeft()<j.scrollSensitivity?h=d(document).scrollLeft(d(document).scrollLeft()-j.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<j.scrollSensitivity&&(h=d(document).scrollLeft(d(document).scrollLeft()+j.scrollSpeed))}}h!==!1&&d.ui.ddmanager&&!j.dropBehaviour&&d.ui.ddmanager.prepareOffsets(k,a)}}),d.ui.plugin.add("draggable","snap",{start:function(a,j){var h=d(this).data("draggable"),f=h.options;h.snapElements=[],d(f.snap.constructor!=String?f.snap.items||":data(draggable)":f.snap).each(function(){var e=d(this),k=e.offset();this!=h.element[0]&&h.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:k.top,left:k.left})})},drag:function(L,K){var J=d(this).data("draggable"),I=J.options,H=I.snapTolerance,G=K.offset.left,F=G+J.helperProportions.width,E=K.offset.top,D=E+J.helperProportions.height;for(var C=J.snapElements.length-1;C>=0;C--){var B=J.snapElements[C].left,A=B+J.snapElements[C].width,z=J.snapElements[C].top,y=z+J.snapElements[C].height;if(!(B-H<G&&G<A+H&&z-H<E&&E<y+H||B-H<G&&G<A+H&&z-H<D&&D<y+H||B-H<F&&F<A+H&&z-H<E&&E<y+H||B-H<F&&F<A+H&&z-H<D&&D<y+H)){J.snapElements[C].snapping&&J.options.snap.release&&J.options.snap.release.call(J.element,L,d.extend(J._uiHash(),{snapItem:J.snapElements[C].item})),J.snapElements[C].snapping=!1;continue}if(I.snapMode!="inner"){var x=Math.abs(z-D)<=H,w=Math.abs(y-E)<=H,v=Math.abs(B-F)<=H,u=Math.abs(A-G)<=H;x&&(K.position.top=J._convertPositionTo("relative",{top:z-J.helperProportions.height,left:0}).top-J.margins.top),w&&(K.position.top=J._convertPositionTo("relative",{top:y,left:0}).top-J.margins.top),v&&(K.position.left=J._convertPositionTo("relative",{top:0,left:B-J.helperProportions.width}).left-J.margins.left),u&&(K.position.left=J._convertPositionTo("relative",{top:0,left:A}).left-J.margins.left)}var a=x||w||v||u;if(I.snapMode!="outer"){var x=Math.abs(z-E)<=H,w=Math.abs(y-D)<=H,v=Math.abs(B-G)<=H,u=Math.abs(A-F)<=H;x&&(K.position.top=J._convertPositionTo("relative",{top:z,left:0}).top-J.margins.top),w&&(K.position.top=J._convertPositionTo("relative",{top:y-J.helperProportions.height,left:0}).top-J.margins.top),v&&(K.position.left=J._convertPositionTo("relative",{top:0,left:B}).left-J.margins.left),u&&(K.position.left=J._convertPositionTo("relative",{top:0,left:A-J.helperProportions.width}).left-J.margins.left)}!J.snapElements[C].snapping&&(x||w||v||u||a)&&J.options.snap.snap&&J.options.snap.snap.call(J.element,L,d.extend(J._uiHash(),{snapItem:J.snapElements[C].item})),J.snapElements[C].snapping=x||w||v||u||a}}}),d.ui.plugin.add("draggable","stack",{start:function(a,l){var k=d(this).data("draggable").options,j=d.makeArray(d(k.stack)).sort(function(e,f){return(parseInt(d(e).css("zIndex"),10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(!j.length){return}var h=parseInt(j[0].style.zIndex)||0;d(j).each(function(b){this.style.zIndex=h+b}),this[0].style.zIndex=h+j.length}}),d.ui.plugin.add("draggable","zIndex",{start:function(a,j){var h=d(j.helper),f=d(this).data("draggable").options;h.css("zIndex")&&(f._zIndex=h.css("zIndex")),h.css("zIndex",f.zIndex)},stop:function(a,f){var e=d(this).data("draggable").options;e._zIndex&&d(f.helper).css("zIndex",e._zIndex)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,e=a.accept;this.isover=0,this.isout=1,this.accept=d.isFunction(e)?e:function(b){return b.is(e)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[],d.ui.ddmanager.droppables[a.scope].push(this),a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var a=d.ui.ddmanager.droppables[this.options.scope];for(var e=0;e<a.length;e++){a[e]==this&&a.splice(e,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(a,e){a=="accept"&&(this.accept=d.isFunction(e)?e:function(b){return b.is(e)}),d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var e=d.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",a,this.ui(e))},_deactivate:function(a){var e=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",a,this.ui(e))},_over:function(a){var e=d.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",a,this.ui(e)))},_out:function(a){var e=d.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(e)))},_drop:function(a,j){var h=j||d.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return !1}var f=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=d.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==h.options.scope&&e.accept.call(e.element[0],h.currentItem||h.element)&&d.ui.intersect(h,d.extend(e,{offset:e.element.offset()}),e.options.tolerance)){return f=!0,!1}}),f?!1:this.accept.call(this.element[0],h.currentItem||h.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(h)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),d.extend(d.ui.droppable,{version:"1.8.21"}),d.ui.intersect=function(B,A,z){if(!A.offset){return !1}var y=(B.positionAbs||B.position.absolute).left,x=y+B.helperProportions.width,w=(B.positionAbs||B.position.absolute).top,v=w+B.helperProportions.height,u=A.offset.left,t=u+A.proportions.width,s=A.offset.top,r=s+A.proportions.height;switch(z){case"fit":return u<=y&&x<=t&&s<=w&&v<=r;case"intersect":return u<y+B.helperProportions.width/2&&x-B.helperProportions.width/2<t&&s<w+B.helperProportions.height/2&&v-B.helperProportions.height/2<r;case"pointer":var q=(B.positionAbs||B.position.absolute).left+(B.clickOffset||B.offset.click).left,p=(B.positionAbs||B.position.absolute).top+(B.clickOffset||B.offset.click).top,a=d.ui.isOver(p,q,s,u,A.proportions.height,A.proportions.width);return a;case"touch":return(w>=s&&w<=r||v>=s&&v<=r||w<s&&v>r)&&(y>=u&&y<=t||x>=u&&x<=t||y<u&&x>t);default:return !1}},d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,o){var n=d.ui.ddmanager.droppables[a.options.scope]||[],m=o?o.type:null,l=(a.currentItem||a.element).find(":data(droppable)").andSelf();g:for(var k=0;k<n.length;k++){if(n[k].options.disabled||a&&!n[k].accept.call(n[k].element[0],a.currentItem||a.element)){continue}for(var j=0;j<l.length;j++){if(l[j]==n[k].element[0]){n[k].proportions.height=0;continue g}}n[k].visible=n[k].element.css("display")!="none";if(!n[k].visible){continue}m=="mousedown"&&n[k]._activate.call(n[k],o),n[k].offset=n[k].element.offset(),n[k].proportions={width:n[k].element[0].offsetWidth,height:n[k].element[0].offsetHeight}}},drop:function(a,f){var e=!1;return d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&d.ui.intersect(a,this,this.options.tolerance)&&(e=this._drop.call(this,f)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,f))}),e},dragStart:function(a,e){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,e)})},drag:function(a,e){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,e),d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var k=d.ui.intersect(a,this,this.options.tolerance),j=!k&&this.isover==1?"isout":k&&this.isover==0?"isover":null;if(!j){return}var h;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");b.length&&(h=d.data(b[0],"droppable"),h.greedyChild=j=="isover"?1:0)}h&&j=="isover"&&(h.isover=0,h.isout=1,h._out.call(h,e)),this[j]=1,this[j=="isout"?"isover":"isout"]=0,this[j=="isover"?"_over":"_out"].call(this,e),h&&j=="isout"&&(h.isout=0,h.isover=1,h._over.call(h,e))})},dragStop:function(a,e){a.element.parents(":not(body,html)").unbind("scroll.droppable"),a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,e)}}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.resizable",f.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var a=this,p=this.options;this.element.addClass("ui-resizable"),f.extend(this,{_aspectRatio:!!p.aspectRatio,aspectRatio:p.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:p.helper||p.ghost||p.animate?p.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(f('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=p.handles||(f(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var o=this.handles.split(",");this.handles={};for(var n=0;n<o.length;n++){var m=f.trim(o[n]),l="ui-resizable-"+m,k=f('<div class="ui-resizable-handle '+l+'"></div>');k.css({zIndex:p.zIndex}),"se"==m&&k.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[m]=".ui-resizable-"+m,this.element.append(k)}}this._renderAxis=function(q){q=q||this.element;for(var u in this.handles){this.handles[u].constructor==String&&(this.handles[u]=f(this.handles[u],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var t=f(this.handles[u],this.element),s=0;s=/sw|ne|nw|se|n|s/.test(u)?t.outerHeight():t.outerWidth();var r=["padding",/ne|nw|n/.test(u)?"Top":/se|sw|s/.test(u)?"Bottom":/^e$/.test(u)?"Right":"Left"].join("");q.css(r,s),this._proportionallyResize()}if(!f(this.handles[u]).length){continue}}},this._renderAxis(this.element),this._handles=f(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!a.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}a.axis=b&&b[1]?b[1]:"se"}}),p.autoHide&&(this._handles.hide(),f(this.element).addClass("ui-resizable-autohide").hover(function(){if(p.disabled){return}f(this).removeClass("ui-resizable-autohide"),a._handles.show()},function(){if(p.disabled){return}a.resizing||(f(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var a=function(c){f(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){a(this.element);var d=this.element;d.after(this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_mouseCapture:function(a){var l=!1;for(var k in this.handles){f(this.handles[k])[0]==a.target&&(l=!0)}return !this.options.disabled&&l},_mouseStart:function(a){var o=this.options,n=this.element.position(),m=this.element;this.resizing=!0,this.documentScroll={top:f(document).scrollTop(),left:f(document).scrollLeft()},(m.is(".ui-draggable")||/absolute/.test(m.css("position")))&&m.css({position:"absolute",top:n.top,left:n.left}),this._renderProxy();var l=j(this.helper.css("left")),k=j(this.helper.css("top"));o.containment&&(l+=f(o.containment).scrollLeft()||0,k+=f(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:l,top:k},this.size=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()},this.originalSize=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()},this.originalPosition={left:l,top:k},this.sizeDiff={width:m.outerWidth()-m.width(),height:m.outerHeight()-m.height()},this.originalMousePosition={left:a.pageX,top:a.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;var c=f(".ui-resizable-"+this.axis).css("cursor");return f("body").css("cursor",c=="auto"?this.axis+"-resize":c),m.addClass("ui-resizable-resizing"),this._propagate("start",a),!0},_mouseDrag:function(z){var y=this.helper,x=this.options,w={},v=this,u=this.originalMousePosition,t=this.axis,s=z.pageX-u.left||0,r=z.pageY-u.top||0,q=this._change[t];if(!q){return !1}var p=q.apply(this,[z,s,r]),o=f.browser.msie&&f.browser.version<7,a=this.sizeDiff;this._updateVirtualBoundaries(z.shiftKey);if(this._aspectRatio||z.shiftKey){p=this._updateRatio(p,z)}return p=this._respectSize(p,z),this._propagate("resize",z),y.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(p),this._trigger("resize",z,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var s=this.options,r=this;if(this._helper){var q=this._proportionallyResizeElements,p=q.length&&/textarea/i.test(q[0].nodeName),o=p&&f.ui.hasScroll(q[0],"left")?0:r.sizeDiff.height,n=p?0:r.sizeDiff.width,m={width:r.helper.width()-n,height:r.helper.height()-o},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,a=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;s.animate||this.element.css(f.extend(m,{top:a,left:l})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!s.animate&&this._proportionallyResize()}return f("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(k){var d=this.options,p,o,n,m,l;l={minWidth:h(d.minWidth)?d.minWidth:0,maxWidth:h(d.maxWidth)?d.maxWidth:Infinity,minHeight:h(d.minHeight)?d.minHeight:0,maxHeight:h(d.maxHeight)?d.maxHeight:Infinity};if(this._aspectRatio||k){p=l.minHeight*this.aspectRatio,n=l.minWidth/this.aspectRatio,o=l.maxHeight*this.aspectRatio,m=l.maxWidth/this.aspectRatio,p>l.minWidth&&(l.minWidth=p),n>l.minHeight&&(l.minHeight=n),o<l.maxWidth&&(l.maxWidth=o),m<l.maxHeight&&(l.maxHeight=m)}this._vBoundaries=l},_updateCache:function(d){var c=this.options;this.offset=this.helper.offset(),h(d.left)&&(this.position.left=d.left),h(d.top)&&(this.position.top=d.top),h(d.height)&&(this.size.height=d.height),h(d.width)&&(this.size.width=d.width)},_updateRatio:function(k,d){var o=this.options,n=this.position,m=this.size,l=this.axis;return h(k.height)?k.width=k.height*this.aspectRatio:h(k.width)&&(k.height=k.width/this.aspectRatio),l=="sw"&&(k.left=n.left+(m.width-k.width),k.top=null),l=="nw"&&(k.top=n.top+(m.height-k.height),k.left=n.left+(m.width-k.width)),k},_respectSize:function(D,C){var B=this.helper,A=this._vBoundaries,z=this._aspectRatio||C.shiftKey,y=this.axis,x=h(D.width)&&A.maxWidth&&A.maxWidth<D.width,w=h(D.height)&&A.maxHeight&&A.maxHeight<D.height,v=h(D.width)&&A.minWidth&&A.minWidth>D.width,u=h(D.height)&&A.minHeight&&A.minHeight>D.height;v&&(D.width=A.minWidth),u&&(D.height=A.minHeight),x&&(D.width=A.maxWidth),w&&(D.height=A.maxHeight);var t=this.originalPosition.left+this.originalSize.width,s=this.position.top+this.size.height,r=/sw|nw|w/.test(y),q=/nw|ne|n/.test(y);v&&r&&(D.left=t-A.minWidth),x&&r&&(D.left=t-A.maxWidth),u&&q&&(D.top=s-A.minHeight),w&&q&&(D.top=s-A.maxHeight);var d=!D.width&&!D.height;return d&&!D.left&&D.top?D.top=null:d&&!D.top&&D.left&&(D.left=null),D},_proportionallyResize:function(){var a=this.options;if(!this._proportionallyResizeElements.length){return}var o=this.helper||this.element;for(var n=0;n<this._proportionallyResizeElements.length;n++){var m=this._proportionallyResizeElements[n];if(!this.borderDif){var l=[m.css("borderTopWidth"),m.css("borderRightWidth"),m.css("borderBottomWidth"),m.css("borderLeftWidth")],k=[m.css("paddingTop"),m.css("paddingRight"),m.css("paddingBottom"),m.css("paddingLeft")];this.borderDif=f.map(l,function(q,p){var s=parseInt(q,10)||0,r=parseInt(k[p],10)||0;return s+r})}if(!f.browser.msie||!f(o).is(":hidden")&&!f(o).parents(":hidden").length){m.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var a=this.element,n=this.options;this.elementOffset=a.offset();if(this._helper){this.helper=this.helper||f('<div style="overflow:hidden;"></div>');var m=f.browser.msie&&f.browser.version<7,l=m?1:0,k=m?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+k,height:this.element.outerHeight()+k,position:"absolute",left:this.elementOffset.left-l+"px",top:this.elementOffset.top-l+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(k,d,l){return{width:this.originalSize.width+d}},w:function(l,k,p){var o=this.options,n=this.originalSize,m=this.originalPosition;return{left:m.left+k,width:n.width-k}},n:function(l,k,p){var o=this.options,n=this.originalSize,m=this.originalPosition;return{top:m.top+p,height:n.height-p}},s:function(k,d,l){return{height:this.originalSize.height+l}},se:function(a,l,k){return f.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,l,k]))},sw:function(a,l,k){return f.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,l,k]))},ne:function(a,l,k){return f.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,l,k]))},nw:function(a,l,k){return f.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,l,k]))}},_propagate:function(a,d){f.ui.plugin.call(this,a,[d,this.ui()]),a!="resize"&&this._trigger(a,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),f.extend(f.ui.resizable,{version:"1.8.21"}),f.ui.plugin.add("resizable","alsoResize",{start:function(a,n){var m=f(this).data("resizable"),l=m.options,k=function(c){f(c).each(function(){var d=f(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10)})})};typeof l.alsoResize=="object"&&!l.alsoResize.parentNode?l.alsoResize.length?(l.alsoResize=l.alsoResize[0],k(l.alsoResize)):f.each(l.alsoResize,function(b){k(b)}):k(l.alsoResize)},resize:function(a,q){var p=f(this).data("resizable"),o=p.options,n=p.originalSize,m=p.originalPosition,l={height:p.size.height-n.height||0,width:p.size.width-n.width||0,top:p.position.top-m.top||0,left:p.position.left-m.left||0},k=function(c,r){f(c).each(function(){var d=f(this),u=f(this).data("resizable-alsoresize"),t={},s=r&&r.length?r:d.parents(q.originalElement[0]).length?["width","height"]:["width","height","top","left"];f.each(s,function(w,v){var x=(u[v]||0)+(l[v]||0);x&&x>=0&&(t[v]=x||null)}),d.css(t)})};typeof o.alsoResize=="object"&&!o.alsoResize.nodeType?f.each(o.alsoResize,function(d,c){k(d,c)}):k(o.alsoResize)},stop:function(a,d){f(this).removeData("resizable-alsoresize")}}),f.ui.plugin.add("resizable","animate",{stop:function(v,u){var t=f(this).data("resizable"),s=t.options,r=t._proportionallyResizeElements,q=r.length&&/textarea/i.test(r[0].nodeName),p=q&&f.ui.hasScroll(r[0],"left")?0:t.sizeDiff.height,o=q?0:t.sizeDiff.width,n={width:t.size.width-o,height:t.size.height-p},m=parseInt(t.element.css("left"),10)+(t.position.left-t.originalPosition.left)||null,a=parseInt(t.element.css("top"),10)+(t.position.top-t.originalPosition.top)||null;t.element.animate(f.extend(n,a&&m?{top:a,left:m}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var b={width:parseInt(t.element.css("width"),10),height:parseInt(t.element.css("height"),10),top:parseInt(t.element.css("top"),10),left:parseInt(t.element.css("left"),10)};r&&r.length&&f(r[0]).css({width:b.width,height:b.height}),t._updateCache(b),t._propagate("resize",v)}})}}),f.ui.plugin.add("resizable","containment",{start:function(B,A){var z=f(this).data("resizable"),y=z.options,x=z.element,w=y.containment,v=w instanceof f?w.get(0):/parent/.test(w)?x.parent().get(0):w;if(!v){return}z.containerElement=f(v);if(/document/.test(w)||w==document){z.containerOffset={left:0,top:0},z.containerPosition={left:0,top:0},z.parentData={element:f(document),left:0,top:0,width:f(document).width(),height:f(document).height()||document.body.parentNode.scrollHeight}}else{var u=f(v),t=[];f(["Top","Right","Left","Bottom"]).each(function(k,d){t[k]=j(u.css("padding"+d))}),z.containerOffset=u.offset(),z.containerPosition=u.position(),z.containerSize={height:u.innerHeight()-t[3],width:u.innerWidth()-t[1]};var s=z.containerOffset,r=z.containerSize.height,q=z.containerSize.width,c=f.ui.hasScroll(v,"left")?v.scrollWidth:q,a=f.ui.hasScroll(v)?v.scrollHeight:r;z.parentData={element:v,left:s.left,top:s.top,width:c,height:a}}},resize:function(D,C){var B=f(this).data("resizable"),A=B.options,z=B.containerSize,y=B.containerOffset,x=B.size,w=B.position,v=B._aspectRatio||D.shiftKey,u={top:0,left:0},t=B.containerElement;t[0]!=document&&/static/.test(t.css("position"))&&(u=y),w.left<(B._helper?y.left:0)&&(B.size.width=B.size.width+(B._helper?B.position.left-y.left:B.position.left-u.left),v&&(B.size.height=B.size.width/B.aspectRatio),B.position.left=A.helper?y.left:0),w.top<(B._helper?y.top:0)&&(B.size.height=B.size.height+(B._helper?B.position.top-y.top:B.position.top),v&&(B.size.width=B.size.height*B.aspectRatio),B.position.top=B._helper?y.top:0),B.offset.left=B.parentData.left+B.position.left,B.offset.top=B.parentData.top+B.position.top;var s=Math.abs((B._helper?B.offset.left-u.left:B.offset.left-u.left)+B.sizeDiff.width),r=Math.abs((B._helper?B.offset.top-u.top:B.offset.top-y.top)+B.sizeDiff.height),q=B.containerElement.get(0)==B.element.parent().get(0),a=/relative|absolute/.test(B.containerElement.css("position"));q&&a&&(s-=B.parentData.left),s+B.size.width>=B.parentData.width&&(B.size.width=B.parentData.width-s,v&&(B.size.height=B.size.width/B.aspectRatio)),r+B.size.height>=B.parentData.height&&(B.size.height=B.parentData.height-r,v&&(B.size.width=B.size.height*B.aspectRatio))},stop:function(x,w){var v=f(this).data("resizable"),u=v.options,t=v.position,s=v.containerOffset,r=v.containerPosition,q=v.containerElement,p=f(v.helper),o=p.offset(),n=p.outerWidth()-v.sizeDiff.width,a=p.outerHeight()-v.sizeDiff.height;v._helper&&!u.animate&&/relative/.test(q.css("position"))&&f(this).css({left:o.left-r.left-s.left,width:n,height:a}),v._helper&&!u.animate&&/static/.test(q.css("position"))&&f(this).css({left:o.left-r.left-s.left,width:n,height:a})}}),f.ui.plugin.add("resizable","ghost",{start:function(a,n){var m=f(this).data("resizable"),l=m.options,k=m.size;m.ghost=m.originalElement.clone(),m.ghost.css({opacity:0.25,display:"block",position:"relative",height:k.height,width:k.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof l.ghost=="string"?l.ghost:""),m.ghost.appendTo(m.helper)},resize:function(a,m){var l=f(this).data("resizable"),k=l.options;l.ghost&&l.ghost.css({position:"relative",height:l.size.height,width:l.size.width})},stop:function(a,m){var l=f(this).data("resizable"),k=l.options;l.ghost&&l.helper&&l.helper.get(0).removeChild(l.ghost.get(0))}}),f.ui.plugin.add("resizable","grid",{resize:function(v,u){var t=f(this).data("resizable"),s=t.options,r=t.size,q=t.originalSize,p=t.originalPosition,o=t.axis,n=s._aspectRatio||v.shiftKey;s.grid=typeof s.grid=="number"?[s.grid,s.grid]:s.grid;var m=Math.round((r.width-q.width)/(s.grid[0]||1))*(s.grid[0]||1),a=Math.round((r.height-q.height)/(s.grid[1]||1))*(s.grid[1]||1);/^(se|s|e)$/.test(o)?(t.size.width=q.width+m,t.size.height=q.height+a):/^(ne)$/.test(o)?(t.size.width=q.width+m,t.size.height=q.height+a,t.position.top=p.top-a):/^(sw)$/.test(o)?(t.size.width=q.width+m,t.size.height=q.height+a,t.position.left=p.left-m):(t.size.width=q.width+m,t.size.height=q.height+a,t.position.top=p.top-a,t.position.left=p.left-m)}});var j=function(b){return parseInt(b,10)||0},h=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){d.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData(this.widgetName+"-item")}return this},_setOption:function(a,e){a==="disabled"?(this.options[a]=e,this.widget()[e?"addClass":"removeClass"]("ui-sortable-disabled")):d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,o){var n=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(a);var m=null,l=this,k=d(a.target).parents().each(function(){if(d.data(this,n.widgetName+"-item")==l){return m=d(this),!1}});d.data(a.target,n.widgetName+"-item")==l&&(m=d(a.target));if(!m){return !1}if(this.options.handle&&!o){var j=!1;d(this.options.handle,m).find("*").andSelf().each(function(){this==a.target&&(j=!0)});if(!j){return !1}}return this.currentItem=m,this._removeCurrentsFromItems(),!0},_mouseStart:function(a,m,l){var k=this.options,j=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(a),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),k.containment&&this._setContainment(),k.cursor&&(d("body").css("cursor")&&(this._storedCursor=d("body").css("cursor")),d("body").css("cursor",k.cursor)),k.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",k.opacity)),k.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",k.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",a,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!l){for(var h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("activate",a,j._uiHash(this))}}return d.ui.ddmanager&&(d.ui.ddmanager.current=this),d.ui.ddmanager&&!k.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(a),!0},_mouseDrag:function(a){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var o=this.options,n=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+o.scrollSpeed:a.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+o.scrollSpeed:a.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(a.pageY-d(document).scrollTop()<o.scrollSensitivity?n=d(document).scrollTop(d(document).scrollTop()-o.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<o.scrollSensitivity&&(n=d(document).scrollTop(d(document).scrollTop()+o.scrollSpeed)),a.pageX-d(document).scrollLeft()<o.scrollSensitivity?n=d(document).scrollLeft(d(document).scrollLeft()-o.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<o.scrollSensitivity&&(n=d(document).scrollLeft(d(document).scrollLeft()+o.scrollSpeed))),n!==!1&&d.ui.ddmanager&&!o.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var m=this.items.length-1;m>=0;m--){var l=this.items[m],k=l.item[0],j=this._intersectsWithPointer(l);if(!j){continue}if(k!=this.currentItem[0]&&this.placeholder[j==1?"next":"prev"]()[0]!=k&&!d.ui.contains(this.placeholder[0],k)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],k):!0)){this.direction=j==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(l)){this._rearrange(a,l)}else{break}this._trigger("change",a,this._uiHash());break}}return this._contactContainers(a),d.ui.ddmanager&&d.ui.ddmanager.drag(this,a),this._trigger("sort",a,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(a,j){if(!a){return}d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var h=this,f=h.placeholder.offset();h.reverting=!0,d(this.helper).animate({left:f.left-this.offset.parent.left-h.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-h.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){h._clear(a)})}else{this._clear(a,j)}return !1},cancel:function(){var a=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,a._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,a._uiHash(this)),this.containers[e].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(a){var f=this._getItemsAsjQuery(a&&a.connected),e=[];return a=a||{},d(f).each(function(){var b=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);b&&e.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))}),!e.length&&a.key&&e.push(a.key+"="),e.join("&")},toArray:function(a){var f=this._getItemsAsjQuery(a&&a.connected),e=[];return a=a||{},f.each(function(){e.push(d(a.item||this).attr(a.attribute||"id")||"")}),e},_intersectsWith:function(x){var w=this.positionAbs.left,v=w+this.helperProportions.width,u=this.positionAbs.top,t=u+this.helperProportions.height,s=x.left,r=s+x.width,q=x.top,p=q+x.height,o=this.offset.click.top,n=this.offset.click.left,m=u+o>q&&u+o<p&&w+n>s&&w+n<r;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>x[this.floating?"width":"height"]?m:s<w+this.helperProportions.width/2&&v-this.helperProportions.width/2<r&&q<u+this.helperProportions.height/2&&t-this.helperProportions.height/2<p},_intersectsWithPointer:function(a){var m=this.options.axis==="x"||d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),l=this.options.axis==="y"||d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),k=m&&l,j=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return k?this.floating?h&&h=="right"||j=="down"?2:1:j&&(j=="down"?2:1):!1},_intersectsWithSides:function(a){var l=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),k=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),j=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return this.floating&&h?h=="right"&&k||h=="left"&&!k:j&&(j=="down"&&l||j=="up"&&!l)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(r){var q=this,p=[],o=[],n=this._connectWith();if(n&&r){for(var m=n.length-1;m>=0;m--){var l=d(n[m]);for(var k=l.length-1;k>=0;k--){var a=d.data(l[k],this.widgetName);a&&a!=this&&!a.options.disabled&&o.push([d.isFunction(a.options.items)?a.options.items.call(a.element):d(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}}o.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var m=o.length-1;m>=0;m--){o[m][0].each(function(){p.push(this)})}return d(p)},_removeCurrentsFromItems:function(){var f=this.currentItem.find(":data("+this.widgetName+"-item)");for(var e=0;e<this.items.length;e++){for(var h=0;h<f.length;h++){f[h]==this.items[e].item[0]&&this.items.splice(e,1)}}},_refreshItems:function(z){this.items=[],this.containers=[this];var y=this.items,x=this,w=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],z,{item:this.currentItem}):d(this.options.items,this.element),this]],v=this._connectWith();if(v&&this.ready){for(var u=v.length-1;u>=0;u--){var t=d(v[u]);for(var s=t.length-1;s>=0;s--){var r=d.data(t[s],this.widgetName);r&&r!=this&&!r.options.disabled&&(w.push([d.isFunction(r.options.items)?r.options.items.call(r.element[0],z,{item:this.currentItem}):d(r.options.items,r.element),r]),this.containers.push(r))}}}for(var u=w.length-1;u>=0;u--){var q=w[u][1],p=w[u][0];for(var s=0,o=p.length;s<o;s++){var a=d(p[s]);a.data(this.widgetName+"-item",q),y.push({item:a,instance:q,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var l=this.items.length-1;l>=0;l--){var k=this.items[l];if(k.instance!=this.currentContainer&&this.currentContainer&&k.item[0]!=this.currentItem[0]){continue}var j=this.options.toleranceElement?d(this.options.toleranceElement,k.item):k.item;a||(k.width=j.outerWidth(),k.height=j.outerHeight());var h=j.offset();k.left=h.left,k.top=h.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var l=this.containers.length-1;l>=0;l--){var h=this.containers[l].element.offset();this.containers[l].containerCache.left=h.left,this.containers[l].containerCache.top=h.top,this.containers[l].containerCache.width=this.containers[l].element.outerWidth(),this.containers[l].containerCache.height=this.containers[l].element.outerHeight()}}return this},_createPlaceholder:function(a){var j=a||this,h=j.options;if(!h.placeholder||h.placeholder.constructor==String){var f=h.placeholder;h.placeholder={element:function(){var e=d(document.createElement(j.currentItem[0].nodeName)).addClass(f||j.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return f||(e.style.visibility="hidden"),e},update:function(k,e){if(f&&!h.forcePlaceholderSize){return}e.height()||e.height(j.currentItem.innerHeight()-parseInt(j.currentItem.css("paddingTop")||0,10)-parseInt(j.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(j.currentItem.innerWidth()-parseInt(j.currentItem.css("paddingLeft")||0,10)-parseInt(j.currentItem.css("paddingRight")||0,10))}}}j.placeholder=d(h.placeholder.element.call(j.element,j.currentItem)),j.currentItem.after(j.placeholder),h.placeholder.update(j,j.placeholder)},_contactContainers:function(r){var q=null,p=null;for(var o=this.containers.length-1;o>=0;o--){if(d.ui.contains(this.currentItem[0],this.containers[o].element[0])){continue}if(this._intersectsWith(this.containers[o].containerCache)){if(q&&d.ui.contains(this.containers[o].element[0],q.element[0])){continue}q=this.containers[o],p=o}else{this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",r,this._uiHash(this)),this.containers[o].containerCache.over=0)}}if(!q){return}if(this.containers.length===1){this.containers[p]._trigger("over",r,this._uiHash(this)),this.containers[p].containerCache.over=1}else{if(this.currentContainer!=this.containers[p]){var n=10000,m=null,l=this.positionAbs[this.containers[p].floating?"left":"top"];for(var k=this.items.length-1;k>=0;k--){if(!d.ui.contains(this.containers[p].element[0],this.items[k].item[0])){continue}var a=this.containers[p].floating?this.items[k].item.offset().left:this.items[k].item.offset().top;Math.abs(a-l)<n&&(n=Math.abs(a-l),m=this.items[k],this.direction=a-l>0?"down":"up")}if(!m&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[p],m?this._rearrange(r,m,null,!0):this._rearrange(r,null,this.containers[p].element,!0),this._trigger("change",r,this._uiHash()),this.containers[p]._trigger("change",r,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",r,this._uiHash(this)),this.containers[p].containerCache.over=1}}},_createHelper:function(a){var f=this.options,e=d.isFunction(f.helper)?d(f.helper.apply(this.element[0],[a,this.currentItem])):f.helper=="clone"?this.currentItem.clone():this.currentItem;return e.parents("body").length||d(f.appendTo!="parent"?f.appendTo:this.currentItem[0].parentNode)[0].appendChild(e[0]),e[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(e[0].style.width==""||f.forceHelperSize)&&e.width(this.currentItem.width()),(e[0].style.height==""||f.forceHelperSize)&&e.height(this.currentItem.height()),e},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),d.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)){var j=d(a.containment)[0],h=d(a.containment).offset(),f=d(j).css("overflow")!="hidden";this.containment=[h.left+(parseInt(d(j).css("borderLeftWidth"),10)||0)+(parseInt(d(j).css("paddingLeft"),10)||0)-this.margins.left,h.top+(parseInt(d(j).css("borderTopWidth"),10)||0)+(parseInt(d(j).css("paddingTop"),10)||0)-this.margins.top,h.left+(f?Math.max(j.scrollWidth,j.offsetWidth):j.offsetWidth)-(parseInt(d(j).css("borderLeftWidth"),10)||0)-(parseInt(d(j).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,h.top+(f?Math.max(j.scrollHeight,j.offsetHeight):j.offsetHeight)-(parseInt(d(j).css("borderTopWidth"),10)||0)-(parseInt(d(j).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,m){m||(m=this.position);var l=a=="absolute"?1:-1,k=this.options,j=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(j[0].tagName);return{top:m.top+this.offset.relative.top*l+this.offset.parent.top*l-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:j.scrollTop())*l),left:m.left+this.offset.relative.left*l+this.offset.parent.left*l-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:j.scrollLeft())*l)}},_generatePosition:function(a){var p=this.options,o=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,n=/(html|body)/i.test(o[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var m=a.pageX,l=a.pageY;if(this.originalPosition){this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(l=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(m=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(l=this.containment[3]+this.offset.click.top));if(p.grid){var k=this.originalPageY+Math.round((l-this.originalPageY)/p.grid[1])*p.grid[1];l=this.containment?k-this.offset.click.top<this.containment[1]||k-this.offset.click.top>this.containment[3]?k-this.offset.click.top<this.containment[1]?k+p.grid[1]:k-p.grid[1]:k:k;var j=this.originalPageX+Math.round((m-this.originalPageX)/p.grid[0])*p.grid[0];m=this.containment?j-this.offset.click.left<this.containment[0]||j-this.offset.click.left>this.containment[2]?j-this.offset.click.left<this.containment[0]?j+p.grid[0]:j-p.grid[0]:j:j}}return{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():n?0:o.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():n?0:o.scrollLeft())}},_rearrange:function(j,h,n,m){n?n[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?h.item[0]:h.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var l=this,k=this.counter;window.setTimeout(function(){k==l.counter&&l.refreshPositions(!m)},0)},_clear:function(a,l){this.reverting=!1;var k=[],j=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var h in this._storedCSS){if(this._storedCSS[h]=="auto"||this._storedCSS[h]=="static"){this._storedCSS[h]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!l&&k.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!l&&k.push(function(b){this._trigger("update",b,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){l||k.push(function(b){this._trigger("remove",b,this._uiHash())});for(var h=this.containers.length-1;h>=0;h--){d.ui.contains(this.containers[h].element[0],this.currentItem[0])&&!l&&(k.push(function(b){return function(e){b._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[h])),k.push(function(b){return function(e){b._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[h])))}}for(var h=this.containers.length-1;h>=0;h--){l||k.push(function(b){return function(e){b._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[h])),this.containers[h].containerCache.over&&(k.push(function(b){return function(e){b._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[h])),this.containers[h].containerCache.over=0)}this._storedCursor&&d("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!l){this._trigger("beforeStop",a,this._uiHash());for(var h=0;h<k.length;h++){k[h].call(this,a)}this._trigger("stop",a,this._uiHash())}return !1}l||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!l){for(var h=0;h<k.length;h++){k[h].call(this,a)}this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(a){var e=a||this;return{helper:e.helper,placeholder:e.placeholder||d([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:a?a.element:null}}}),d.extend(d.ui.sortable,{version:"1.8.21"})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,j=this.element[0].ownerDocument,h;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(k){if(a.options.disabled||a.element.propAttr("readOnly")){return}h=!1;var b=e.ui.keyCode;switch(k.keyCode){case b.PAGE_UP:a._move("previousPage",k);break;case b.PAGE_DOWN:a._move("nextPage",k);break;case b.UP:a._keyEvent("previous",k);break;case b.DOWN:a._keyEvent("next",k);break;case b.ENTER:case b.NUMPAD_ENTER:a.menu.active&&(h=!0,k.preventDefault());case b.TAB:if(!a.menu.active){return}a.menu.select(k);break;case b.ESCAPE:a.element.val(a.term),a.close(k);break;default:clearTimeout(a.searching),a.searching=setTimeout(function(){a.term!=a.element.val()&&(a.selectedItem=null,a.search(null,k))},a.options.delay)}}).bind("keypress.autocomplete",function(b){h&&(h=!1,b.preventDefault())}).bind("focus.autocomplete",function(){if(a.options.disabled){return}a.selectedItem=null,a.previous=a.element.val()}).bind("blur.autocomplete",function(b){if(a.options.disabled){return}clearTimeout(a.searching),a.closing=setTimeout(function(){a.close(b),a._change(b)},150)}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",j)[0]).mousedown(function(k){var b=a.menu.element[0];e(k.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(l){l.target!==a.element[0]&&l.target!==b&&!e.ui.contains(b,l.target)&&a.close()})},1),setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(b,l){var k=l.item.data("item.autocomplete");!1!==a._trigger("focus",b,{item:k})&&/^key/.test(b.originalEvent.type)&&a.element.val(k.value)},selected:function(b,l){var k=l.item.data("item.autocomplete"),c=a.previous;a.element[0]!==j.activeElement&&(a.element.focus(),a.previous=c,setTimeout(function(){a.previous=c,a.selectedItem=k},1)),!1!==a._trigger("select",b,{item:k})&&a.element.val(k.value),a.term=a.element.val(),a.close(b),a.selectedItem=k},blur:function(b,k){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),a.beforeunloadHandler=function(){a.element.removeAttr("autocomplete")},e(window).bind("beforeunload",a.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(a,h){e.Widget.prototype._setOption.apply(this,arguments),a==="source"&&this._initSource(),a==="appendTo"&&this.menu.element.appendTo(e(h||"body",this.element[0].ownerDocument)[0]),a==="disabled"&&h&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,j,h;e.isArray(this.options.source)?(j=this.options.source,this.source=function(c,k){k(e.ui.autocomplete.filter(j,c.term))}):typeof this.options.source=="string"?(h=this.options.source,this.source=function(k,b){a.xhr&&a.xhr.abort(),a.xhr=e.ajax({url:h,data:k,dataType:"json",success:function(l,c){b(l)},error:function(){b([])}})}):this.source=this.options.source},search:function(h,c){h=h!=null?h:this.element.val(),this.term=this.element.val();if(h.length<this.options.minLength){return this.close(c)}clearTimeout(this.closing);if(this._trigger("search",c)===!1){return}return this._search(h)},_search:function(b){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:b},this._response())},_response:function(){var h=this,c=++f;return function(a){c===f&&h.__response(a),h.pending--,h.pending||h.element.removeClass("ui-autocomplete-loading")}},__response:function(b){!this.options.disabled&&b&&b.length?(b=this._normalize(b),this._suggest(b),this._trigger("open")):this.close()},close:function(b){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",b))},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:e.map(a,function(c){return typeof c=="string"?{label:c,value:c}:e.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(a){var h=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(h,a),this.menu.deactivate(),this.menu.refresh(),h.show(),this._resizeMenu(),h.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(a,j){var h=this;e.each(j,function(b,k){h._renderItem(a,k)})},_renderItem:function(a,h){return e("<li></li>").data("item.autocomplete",h).append(e("<a></a>").text(h.label)).appendTo(a)},_move:function(h,c){if(!this.menu.element.is(":visible")){this.search(null,c);return}if(this.menu.first()&&/^previous/.test(h)||this.menu.last()&&/^next/.test(h)){this.element.val(this.term),this.menu.deactivate();return}this.menu[h](c)},widget:function(){return this.menu.element},_keyEvent:function(h,c){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(h,c),c.preventDefault()}}}),e.extend(e.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,j){var h=new RegExp(e.ui.autocomplete.escapeRegex(j),"i");return e.grep(a,function(b){return h.test(b.label||b.value||b)})}})})(jQuery),function(b){b.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(d){if(!b(d.target).closest(".ui-menu-item a").length){return}d.preventDefault(),a.select(d)}),this.refresh()},refresh:function(){var a=this,d=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");d.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(e){a.activate(e,b(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(h,f){this.deactivate();if(this.hasScroll()){var l=f.offset().top-this.element.offset().top,k=this.element.scrollTop(),j=this.element.height();l<0?this.element.scrollTop(k+l):l>=j&&this.element.scrollTop(k+l-j+f.height())}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",h,{item:f})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(c){this.move("next",".ui-menu-item:first",c)},previous:function(c){this.move("prev",".ui-menu-item:last",c)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,e,j){if(!this.active){this.activate(j,this.element.children(e));return}var h=this.active[f+"All"](".ui-menu-item").eq(0);h.length?this.activate(j,h):this.activate(j,this.element.children(e))},nextPage:function(a){if(this.hasScroll()){if(!this.active||this.last()){this.activate(a,this.element.children(".ui-menu-item:first"));return}var j=this.active.offset().top,h=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var c=b(this).offset().top-j-h+b(this).height();return c<10&&c>-10});f.length||(f=this.element.children(".ui-menu-item:last")),this.activate(a,f)}else{this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(a){if(this.hasScroll()){if(!this.active||this.first()){this.activate(a,this.element.children(".ui-menu-item:last"));return}var j=this.active.offset().top,h=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var c=b(this).offset().top-j+h-b(this).height();return c<10&&c>-10});f.length||(f=this.element.children(".ui-menu-item:first")),this.activate(a,f)}else{this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[b.fn.prop?"prop":"attr"]("scrollHeight")},select:function(c){this._trigger("selected",c,{item:this.active})}})}(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",m={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},l={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},k=j.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};j.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var d=j(this).css(a).offset().top;d<0&&j(this).css("top",a.top-d)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var v=this,u=v.options,t=u.title||"&#160;",s=j.ui.dialog.getTitleId(v.element),r=(v.uiDialog=j("<div></div>")).appendTo(document.body).hide().addClass(n+u.dialogClass).css({zIndex:u.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){u.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(v.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(b){v.moveToTop(!1,b)}),q=v.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(r),p=(v.uiDialogTitlebar=j("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(r),o=j('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).focus(function(){o.addClass("ui-state-focus")}).blur(function(){o.removeClass("ui-state-focus")}).click(function(b){return v.close(b),!1}).appendTo(p),c=(v.uiDialogTitlebarCloseText=j("<span></span>")).addClass("ui-icon ui-icon-closethick").text(u.closeText).appendTo(o),a=j("<span></span>").addClass("ui-dialog-title").attr("id",s).html(t).prependTo(p);j.isFunction(u.beforeclose)&&!j.isFunction(u.beforeClose)&&(u.beforeClose=u.beforeclose),p.find("*").add(p).disableSelection(),u.draggable&&j.fn.draggable&&v._makeDraggable(),u.resizable&&j.fn.resizable&&v._makeResizable(),v._createButtons(u.buttons),v._isOpen=!1,j.fn.bgiframe&&r.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;return b.overlay&&b.overlay.destroy(),b.uiDialog.hide(),b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),b.uiDialog.remove(),b.originalTitle&&b.element.attr("title",b.originalTitle),b},widget:function(){return this.uiDialog},close:function(a){var p=this,o,f;if(!1===p._trigger("beforeClose",a)){return}return p.overlay&&p.overlay.destroy(),p.uiDialog.unbind("keypress.ui-dialog"),p._isOpen=!1,p.options.hide?p.uiDialog.hide(p.options.hide,function(){p._trigger("close",a)}):(p.uiDialog.hide(),p._trigger("close",a)),j.ui.dialog.overlay.resize(),p.options.modal&&(o=0,j(".ui-dialog").each(function(){this!==p.uiDialog[0]&&(f=j(this).css("z-index"),isNaN(f)||(o=Math.max(o,f)))}),j.ui.dialog.maxZ=o),p},isOpen:function(){return this._isOpen},moveToTop:function(a,r){var q=this,p=q.options,o;return p.modal&&!a||!p.stack&&!p.modal?q._trigger("focus",r):(p.zIndex>j.ui.dialog.maxZ&&(j.ui.dialog.maxZ=p.zIndex),q.overlay&&(j.ui.dialog.maxZ+=1,q.overlay.$el.css("z-index",j.ui.dialog.overlay.maxZ=j.ui.dialog.maxZ)),o={scrollTop:q.element.scrollTop(),scrollLeft:q.element.scrollLeft()},j.ui.dialog.maxZ+=1,q.uiDialog.css("z-index",j.ui.dialog.maxZ),q.element.attr(o),q._trigger("focus",r),q)},open:function(){if(this._isOpen){return}var a=this,f=a.options,e=a.uiDialog;return a.overlay=f.modal?new j.ui.dialog.overlay(a):null,a._size(),a._position(f.position),e.show(f.show),a.moveToTop(!0),f.modal&&e.bind("keydown.ui-dialog",function(o){if(o.keyCode!==j.ui.keyCode.TAB){return}var r=j(":tabbable",this),q=r.filter(":first"),p=r.filter(":last");if(o.target===p[0]&&!o.shiftKey){return q.focus(1),!1}if(o.target===q[0]&&o.shiftKey){return p.focus(1),!1}}),j(a.element.find(":tabbable").get().concat(e.find(".ui-dialog-buttonpane :tabbable").get().concat(e.get()))).eq(0).focus(),a._isOpen=!0,a._trigger("open"),a},_createButtons:function(a){var q=this,p=!1,o=j("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=j("<div></div>").addClass("ui-dialog-buttonset").appendTo(o);q.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof a=="object"&&a!==null&&j.each(a,function(){return !(p=!0)}),p&&(j.each(a,function(c,s){s=j.isFunction(s)?{click:s,text:c}:s;var r=j('<button type="button"></button>').click(function(){s.click.apply(q.element[0],arguments)}).appendTo(f);j.each(s,function(e,d){if(e==="click"){return}e in k?r[e](d):r.attr(e,d)}),j.fn.button&&r.button()}),o.appendTo(q.uiDialog))},_makeDraggable:function(){function o(b){return{position:b.position,offset:b.offset}}var a=this,r=a.options,q=j(document),p;a.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,b){p=r.height==="auto"?"auto":j(this).height(),j(this).height(j(this).height()).addClass("ui-dialog-dragging"),a._trigger("dragStart",c,o(b))},drag:function(b,d){a._trigger("drag",b,o(d))},stop:function(c,b){r.position=[b.position.left-q.scrollLeft(),b.position.top-q.scrollTop()],j(this).removeClass("ui-dialog-dragging").height(p),a._trigger("dragStop",c,o(b)),j.ui.dialog.overlay.resize()}})},_makeResizable:function(r){function a(c){return{originalPosition:c.originalPosition,originalSize:c.originalSize,position:c.position,size:c.size}}r=r===h?this.options.resizable:r;var q=this,p=q.options,o=q.uiDialog.css("position"),b=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";q.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:q.element,maxWidth:p.maxWidth,maxHeight:p.maxHeight,minWidth:p.minWidth,minHeight:q._minHeight(),handles:b,start:function(d,e){j(this).addClass("ui-dialog-resizing"),q._trigger("resizeStart",d,a(e))},resize:function(d,c){q._trigger("resize",d,a(c))},stop:function(d,e){j(this).removeClass("ui-dialog-resizing"),p.height=j(this).height(),p.width=j(this).width(),q._trigger("resizeStop",d,a(e)),j.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(a){var p=[],o=[0,0],f;if(a){if(typeof a=="string"||typeof a=="object"&&"0" in a){p=a.split?a.split(" "):[a[0],a[1]],p.length===1&&(p[1]=p[0]),j.each(["left","top"],function(d,c){+p[d]===p[d]&&(o[d]=p[d],p[d]=c)}),a={my:p.join(" "),at:p.join(" "),offset:o.join(" ")}}a=j.extend({},j.ui.dialog.prototype.options.position,a)}else{a=j.ui.dialog.prototype.options.position}f=this.uiDialog.is(":visible"),f||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(j.extend({of:window},a)),f||this.uiDialog.hide()},_setOptions:function(a){var o=this,e={},d=!1;j.each(a,function(f,c){o._setOption(f,c),f in m&&(d=!0),f in l&&(e[f]=c)}),d&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,r){var q=this,p=q.uiDialog;switch(a){case"beforeclose":a="beforeClose";break;case"buttons":q._createButtons(r);break;case"closeText":q.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":p.removeClass(q.options.dialogClass).addClass(n+r);break;case"disabled":r?p.addClass("ui-dialog-disabled"):p.removeClass("ui-dialog-disabled");break;case"draggable":var o=p.is(":data(draggable)");o&&!r&&p.draggable("destroy"),!o&&r&&q._makeDraggable();break;case"position":q._position(r);break;case"resizable":var c=p.is(":data(resizable)");c&&!r&&p.resizable("destroy"),c&&typeof r=="string"&&p.resizable("option","handles",r),!c&&r!==!1&&q._makeResizable(r);break;case"title":j(".ui-dialog-title",q.uiDialogTitlebar).html(""+(r||"&#160;"))}j.Widget.prototype._setOption.apply(q,arguments)},_size:function(){var a=this.options,r,q,p=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),a.minWidth>a.width&&(a.width=a.minWidth),r=this.uiDialog.css({height:"auto",width:a.width}).height(),q=Math.max(0,a.minHeight-r);if(a.height==="auto"){if(j.support.minHeight){this.element.css({minHeight:q,height:"auto"})}else{this.uiDialog.show();var o=this.element.css("height","auto").height();p||this.uiDialog.hide(),this.element.height(Math.max(o,q))}}else{this.element.height(Math.max(a.height-r,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),j.extend(j.ui.dialog,{version:"1.8.21",uuid:0,maxZ:0,getTitleId:function(d){var c=d.attr("id");return c||(this.uuid+=1,c=this.uuid),"ui-dialog-title-"+c},overlay:function(a){this.$el=j.ui.dialog.overlay.create(a)}}),j.extend(j.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:j.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(a){this.instances.length===0&&(setTimeout(function(){j.ui.dialog.overlay.instances.length&&j(document).bind(j.ui.dialog.overlay.events,function(c){if(j(c.target).zIndex()<j.ui.dialog.overlay.maxZ){return !1}})},1),j(document).bind("keydown.dialog-overlay",function(b){a.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(a.close(b),b.preventDefault())}),j(window).bind("resize.dialog-overlay",j.ui.dialog.overlay.resize));var d=(this.oldInstances.pop()||j("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return j.fn.bgiframe&&d.bgiframe(),this.instances.push(d),d},destroy:function(a){var f=j.inArray(a,this.instances);f!=-1&&this.oldInstances.push(this.instances.splice(f,1)[0]),this.instances.length===0&&j([document,window]).unbind(".dialog-overlay"),a.remove();var e=0;j.each(this.instances,function(){e=Math.max(e,this.css("z-index"))}),this.maxZ=e},height:function(){var a,d;return j.browser.msie&&j.browser.version<7?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<d?j(window).height()+"px":a+"px"):j(document).height()+"px"},width:function(){var a,d;return j.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),d=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<d?j(window).width()+"px":a+"px"):j(document).width()+"px"},resize:function(){var a=j([]);j.each(j.ui.dialog.overlay.instances,function(){a=a.add(this)}),a.css({width:0,height:0}).css({width:j.ui.dialog.overlay.width(),height:j.ui.dialog.overlay.height()})}}),j.extend(j.ui.dialog.overlay.prototype,{destroy:function(){j.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.21"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName)){return}this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++){a[d].length>b&&(b=a[d].length,c=d)}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return !1}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return !0}}return !1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing){switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}}else{a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1}c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}}return !0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a){return}var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1){return}extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME)){return}if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst){return}var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f){throw"Missing number at position "+r}return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return -(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){return f=c[0],r+=d.length,!1}});if(f!=-1){return f+1}throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s)){throw"Unexpected literal at position "+r}r++},r=0;for(var s=0;s<a.length;s++){if(m){a.charAt(s)=="'"&&!n("'")?m=!1:q()}else{switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/10000);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u){break}j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a)){while(d.length<c){d="0"+d}}return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b){for(var m=0;m<a.length;m++){if(l){a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m)}else{switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*10000+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}}}}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++){if(c){a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e)}else{switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--,n<0&&(n=11,o--)}}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1){switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i){m+='<span class="ui-datepicker-month">'+g[b]+"</span>"}else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var p=0;p<12;p++){(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>")}m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j){l+='<span class="ui-datepicker-year">'+c+"</span>"}else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.21",window["DP_jQuery_"+dpuuid]=$})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(x,w){function v(a){var d;return a&&a.constructor==Array&&a.length==3?a:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]:(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:(d=/rgba\(0, 0, 0, 0\)/.exec(a))?t.transparent:t[x.trim(a).toLowerCase()]}function u(a,f){var c;do{c=x.curCSS(a,f);if(c!=""&&c!="transparent"||x.nodeName(a,"body")){break}f="backgroundColor"}while(a=a.parentNode);return v(c)}function q(){var h=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},l,k;if(h&&h.length&&h[0]&&h[h[0]]){var j=h.length;while(j--){l=h[j],typeof h[l]=="string"&&(k=l.replace(/\-(\w)/g,function(d,c){return c.toUpperCase()}),f[k]=h[l])}}else{for(l in h){typeof h[l]=="string"&&(f[l]=h[l])}}return f}function p(a){var f,e;for(f in a){e=a[f],(e==null||x.isFunction(e)||f in r||/scrollbar/.test(f)||!/color/i.test(f)&&isNaN(parseFloat(e)))&&delete a[f]}return a}function o(f,e){var j={_:0},h;for(h in e){f[h]!=e[h]&&(j[h]=e[h])}return j}function n(a,j,h,f){typeof a=="object"&&(f=j,h=null,j=a,a=j.effect),x.isFunction(j)&&(f=j,h=null,j={});if(typeof j=="number"||x.fx.speeds[j]){f=h,h=j,j={}}return x.isFunction(h)&&(f=h,h=null),j=j||{},h=h||j.duration,h=x.fx.off?0:typeof h=="number"?h:h in x.fx.speeds?x.fx.speeds[h]:x.fx.speeds._default,f=f||j.complete,[a,j,h,f]}function m(a){return !a||typeof a=="number"||x.fx.speeds[a]?!0:typeof a=="string"&&!x.effects[a]?!0:!1}x.effects={},x.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(a,c){x.fx.step[c]=function(b){b.colorInit||(b.start=u(b.elem,c),b.end=v(b.end),b.colorInit=!0),b.elem.style[c]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},s=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};x.effects.animateClass=function(a,j,h,f){return x.isFunction(h)&&(f=h,h=null),this.queue(function(){var e=x(this),d=e.attr("style")||" ",c=p(q.call(this)),b,y=e.attr("class")||"";x.each(s,function(k,l){a[l]&&e[l+"Class"](a[l])}),b=p(q.call(this)),e.attr("class",y),e.animate(o(c,b),{queue:!1,duration:j,easing:h,complete:function(){x.each(s,function(k,l){a[l]&&e[l+"Class"](a[l])}),typeof e.attr("style")=="object"?(e.attr("style").cssText="",e.attr("style").cssText=d):e.attr("style",d),f&&f.apply(this,arguments),x.dequeue(this)}})})},x.fn.extend({_addClass:x.fn.addClass,addClass:function(a,j,h,f){return j?x.effects.animateClass.apply(this,[{add:a},j,h,f]):this._addClass(a)},_removeClass:x.fn.removeClass,removeClass:function(a,j,h,f){return j?x.effects.animateClass.apply(this,[{remove:a},j,h,f]):this._removeClass(a)},_toggleClass:x.fn.toggleClass,toggleClass:function(k,j,h,b,a){return typeof j=="boolean"||j===w?h?x.effects.animateClass.apply(this,[j?{add:k}:{remove:k},h,b,a]):this._toggleClass(k,j):x.effects.animateClass.apply(this,[{toggle:k},j,h,b])},switchClass:function(a,l,k,j,h){return x.effects.animateClass.apply(this,[{add:l,remove:a},k,j,h])}}),x.extend(x.effects,{version:"1.8.21",save:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.data("ec.storage."+d[f],e[0].style[d[f]])}},restore:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.css(d[f],e.data("ec.storage."+d[f]))}},setMode:function(d,c){return c=="toggle"&&(c=d.is(":hidden")?"show":"hide"),c},getBaseline:function(f,e){var j,h;switch(f[0]){case"top":j=0;break;case"middle":j=0.5;break;case"bottom":j=1;break;default:j=f[0]/e.height}switch(f[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=f[1]/e.width}return{x:h,y:j}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper")){return a.parent()}var l={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},k=x("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),j=document.activeElement;try{j.id}catch(h){j=document.body}return a.wrap(k),(a[0]===j||x.contains(a[0],j))&&x(j).focus(),k=a.parent(),a.css("position")=="static"?(k.css({position:"relative"}),a.css({position:"relative"})):(x.extend(l,{position:a.css("position"),zIndex:a.css("z-index")}),x.each(["top","left","bottom","right"],function(b,c){l[c]=a.css(c),isNaN(parseInt(l[c],10))&&(l[c]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),k.css(l).show()},removeWrapper:function(a){var f,e=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(f=a.parent().replaceWith(a),(a[0]===e||x.contains(a[0],e))&&x(e).focus(),f):a},setTransition:function(a,j,h,f){return f=f||{},x.each(j,function(b,e){var d=a.cssUnit(e);d[0]>0&&(f[e]=d[0]*h+d[1])}),f}}),x.fn.extend({effect:function(a,B,A,z){var y=n.apply(this,arguments),l={options:y[1],duration:y[2],callback:y[3]},k=l.options.mode,j=x.effects[a];return x.fx.off||!j?k?this[k](l.duration,l.callback):this.each(function(){l.callback&&l.callback.call(this)}):j.call(this,l)},_show:x.fn.show,show:function(d){if(m(d)){return this._show.apply(this,arguments)}var c=n.apply(this,arguments);return c[1].mode="show",this.effect.apply(this,c)},_hide:x.fn.hide,hide:function(d){if(m(d)){return this._hide.apply(this,arguments)}var c=n.apply(this,arguments);return c[1].mode="hide",this.effect.apply(this,c)},__toggle:x.fn.toggle,toggle:function(a){if(m(a)||typeof a=="boolean"||x.isFunction(a)){return this.__toggle.apply(this,arguments)}var d=n.apply(this,arguments);return d[1].mode="toggle",this.effect.apply(this,d)},cssUnit:function(a){var f=this.css(a),e=[];return x.each(["em","px","%","pt"],function(d,c){f.indexOf(c)>0&&(e=[parseFloat(f),c])}),e}}),x.easing.jswing=x.easing.swing,x.extend(x.easing,{def:"easeOutQuad",swing:function(a,l,k,j,h){return x.easing[x.easing.def](a,l,k,j,h)},easeInQuad:function(h,f,l,k,j){return k*(f/=j)*f+l},easeOutQuad:function(h,f,l,k,j){return -k*(f/=j)*(f-2)+l},easeInOutQuad:function(h,f,l,k,j){return(f/=j/2)<1?k/2*f*f+l:-k/2*(--f*(f-2)-1)+l},easeInCubic:function(h,f,l,k,j){return k*(f/=j)*f*f+l},easeOutCubic:function(h,f,l,k,j){return k*((f=f/j-1)*f*f+1)+l},easeInOutCubic:function(h,f,l,k,j){return(f/=j/2)<1?k/2*f*f*f+l:k/2*((f-=2)*f*f+2)+l},easeInQuart:function(h,f,l,k,j){return k*(f/=j)*f*f*f+l},easeOutQuart:function(h,f,l,k,j){return -k*((f=f/j-1)*f*f*f-1)+l},easeInOutQuart:function(h,f,l,k,j){return(f/=j/2)<1?k/2*f*f*f*f+l:-k/2*((f-=2)*f*f*f-2)+l},easeInQuint:function(h,f,l,k,j){return k*(f/=j)*f*f*f*f+l},easeOutQuint:function(h,f,l,k,j){return k*((f=f/j-1)*f*f*f*f+1)+l},easeInOutQuint:function(h,f,l,k,j){return(f/=j/2)<1?k/2*f*f*f*f*f+l:k/2*((f-=2)*f*f*f*f+2)+l},easeInSine:function(h,f,l,k,j){return -k*Math.cos(f/j*(Math.PI/2))+k+l},easeOutSine:function(h,f,l,k,j){return k*Math.sin(f/j*(Math.PI/2))+l},easeInOutSine:function(h,f,l,k,j){return -k/2*(Math.cos(Math.PI*f/j)-1)+l},easeInExpo:function(h,f,l,k,j){return f==0?l:k*Math.pow(2,10*(f/j-1))+l},easeOutExpo:function(h,f,l,k,j){return f==j?l+k:k*(-Math.pow(2,-10*f/j)+1)+l},easeInOutExpo:function(h,f,l,k,j){return f==0?l:f==j?l+k:(f/=j/2)<1?k/2*Math.pow(2,10*(f-1))+l:k/2*(-Math.pow(2,-10*--f)+2)+l},easeInCirc:function(h,f,l,k,j){return -k*(Math.sqrt(1-(f/=j)*f)-1)+l},easeOutCirc:function(h,f,l,k,j){return k*Math.sqrt(1-(f=f/j-1)*f)+l},easeInOutCirc:function(h,f,l,k,j){return(f/=j/2)<1?-k/2*(Math.sqrt(1-f*f)-1)+l:k/2*(Math.sqrt(1-(f-=2)*f)+1)+l},easeInElastic:function(k,j,C,B,A){var z=1.70158,y=0,l=B;if(j==0){return C}if((j/=A)==1){return C+B}y||(y=A*0.3);if(l<Math.abs(B)){l=B;var z=y/4}else{var z=y/(2*Math.PI)*Math.asin(B/l)}return -(l*Math.pow(2,10*(j-=1))*Math.sin((j*A-z)*2*Math.PI/y))+C},easeOutElastic:function(k,j,C,B,A){var z=1.70158,y=0,l=B;if(j==0){return C}if((j/=A)==1){return C+B}y||(y=A*0.3);if(l<Math.abs(B)){l=B;var z=y/4}else{var z=y/(2*Math.PI)*Math.asin(B/l)}return l*Math.pow(2,-10*j)*Math.sin((j*A-z)*2*Math.PI/y)+B+C},easeInOutElastic:function(k,j,C,B,A){var z=1.70158,y=0,l=B;if(j==0){return C}if((j/=A/2)==2){return C+B}y||(y=A*0.3*1.5);if(l<Math.abs(B)){l=B;var z=y/4}else{var z=y/(2*Math.PI)*Math.asin(B/l)}return j<1?-0.5*l*Math.pow(2,10*(j-=1))*Math.sin((j*A-z)*2*Math.PI/y)+C:l*Math.pow(2,-10*(j-=1))*Math.sin((j*A-z)*2*Math.PI/y)*0.5+B+C},easeInBack:function(b,y,l,k,j,h){return h==w&&(h=1.70158),k*(y/=j)*y*((h+1)*y-h)+l},easeOutBack:function(b,y,l,k,j,h){return h==w&&(h=1.70158),k*((y=y/j-1)*y*((h+1)*y+h)+1)+l},easeInOutBack:function(b,y,l,k,j,h){return h==w&&(h=1.70158),(y/=j/2)<1?k/2*y*y*(((h*=1.525)+1)*y-h)+l:k/2*((y-=2)*y*(((h*=1.525)+1)*y+h)+2)+l},easeInBounce:function(a,l,k,j,h){return j-x.easing.easeOutBounce(a,h-l,0,j,h)+k},easeOutBounce:function(h,f,l,k,j){return(f/=j)<1/2.75?k*7.5625*f*f+l:f<2/2.75?k*(7.5625*(f-=1.5/2.75)*f+0.75)+l:f<2.5/2.75?k*(7.5625*(f-=2.25/2.75)*f+0.9375)+l:k*(7.5625*(f-=2.625/2.75)*f+0.984375)+l},easeInOutBounce:function(a,l,k,j,h){return l<h/2?x.easing.easeInBounce(a,l*2,0,j,h)*0.5+k:x.easing.easeOutBounce(a,l*2-h,0,j,h)*0.5+j*0.5+k}})}(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.blind=function(a){return this.queue(function(){var q=d(this),p=["position","top","bottom","left","right"],o=d.effects.setMode(q,a.options.mode||"hide"),n=a.options.direction||"vertical";d.effects.save(q,p),q.show();var m=d.effects.createWrapper(q).css({overflow:"hidden"}),l=n=="vertical"?"height":"width",k=n=="vertical"?m.height():m.width();o=="show"&&m.css(l,0);var b={};b[l]=o=="show"?k:0,m.animate(b,a.duration,a.options.easing,function(){o=="hide"&&q.hide(),d.effects.restore(q,p),d.effects.removeWrapper(q),a.callback&&a.callback.apply(q[0],arguments),q.dequeue()})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.bounce=function(a){return this.queue(function(){var A=d(this),z=["position","top","bottom","left","right"],y=d.effects.setMode(A,a.options.mode||"effect"),x=a.options.direction||"up",w=a.options.distance||20,v=a.options.times||5,u=a.duration||250;/show|hide/.test(y)&&z.push("opacity"),d.effects.save(A,z),A.show(),d.effects.createWrapper(A);var t=x=="up"||x=="down"?"top":"left",s=x=="up"||x=="left"?"pos":"neg",w=a.options.distance||(t=="top"?A.outerHeight({margin:!0})/3:A.outerWidth({margin:!0})/3);y=="show"&&A.css("opacity",0).css(t,s=="pos"?-w:w),y=="hide"&&(w=w/(v*2)),y!="hide"&&v--;if(y=="show"){var r={opacity:1};r[t]=(s=="pos"?"+=":"-=")+w,A.animate(r,u/2,a.options.easing),w=w/2,v--}for(var q=0;q<v;q++){var o={},b={};o[t]=(s=="pos"?"-=":"+=")+w,b[t]=(s=="pos"?"+=":"-=")+w,A.animate(o,u/2,a.options.easing).animate(b,u/2,a.options.easing),w=y=="hide"?w*2:w/2}if(y=="hide"){var r={opacity:0};r[t]=(s=="pos"?"-=":"+=")+w,A.animate(r,u/2,a.options.easing,function(){A.hide(),d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(this,arguments)})}else{var o={},b={};o[t]=(s=="pos"?"-=":"+=")+w,b[t]=(s=="pos"?"+=":"-=")+w,A.animate(o,u/2,a.options.easing).animate(b,u/2,a.options.easing,function(){d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(this,arguments)})}A.queue("fx",function(){A.dequeue()}),A.dequeue()})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.clip=function(a){return this.queue(function(){var s=d(this),r=["position","top","bottom","left","right","height","width"],q=d.effects.setMode(s,a.options.mode||"hide"),p=a.options.direction||"vertical";d.effects.save(s,r),s.show();var o=d.effects.createWrapper(s).css({overflow:"hidden"}),n=s[0].tagName=="IMG"?o:s,m={size:p=="vertical"?"height":"width",position:p=="vertical"?"top":"left"},l=p=="vertical"?n.height():n.width();q=="show"&&(n.css(m.size,0),n.css(m.position,l/2));var b={};b[m.size]=q=="show"?l:0,b[m.position]=q=="show"?0:l/2,n.animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){q=="hide"&&s.hide(),d.effects.restore(s,r),d.effects.removeWrapper(s),a.callback&&a.callback.apply(s[0],arguments),s.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.drop=function(a){return this.queue(function(){var q=d(this),p=["position","top","bottom","left","right","opacity"],o=d.effects.setMode(q,a.options.mode||"hide"),n=a.options.direction||"left";d.effects.save(q,p),q.show(),d.effects.createWrapper(q);var m=n=="up"||n=="down"?"top":"left",l=n=="up"||n=="left"?"pos":"neg",k=a.options.distance||(m=="top"?q.outerHeight({margin:!0})/2:q.outerWidth({margin:!0})/2);o=="show"&&q.css("opacity",0).css(m,l=="pos"?-k:k);var b={opacity:o=="show"?1:0};b[m]=(o=="show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+k,q.animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){o=="hide"&&q.hide(),d.effects.restore(q,p),d.effects.removeWrapper(q),a.callback&&a.callback.apply(this,arguments),q.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.explode=function(a){return this.queue(function(){var q=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,p=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode=a.options.mode=="toggle"?d(this).is(":visible")?"hide":"show":a.options.mode;var o=d(this).show().css("visibility","hidden"),n=o.offset();n.top-=parseInt(o.css("marginTop"),10)||0,n.left-=parseInt(o.css("marginLeft"),10)||0;var m=o.outerWidth(!0),l=o.outerHeight(!0);for(var k=0;k<q;k++){for(var b=0;b<p;b++){o.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*(m/p),top:-k*(l/q)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m/p,height:l/q,left:n.left+b*(m/p)+(a.options.mode=="show"?(b-Math.floor(p/2))*(m/p):0),top:n.top+k*(l/q)+(a.options.mode=="show"?(k-Math.floor(q/2))*(l/q):0),opacity:a.options.mode=="show"?0:1}).animate({left:n.left+b*(m/p)+(a.options.mode=="show"?0:(b-Math.floor(p/2))*(m/p)),top:n.top+k*(l/q)+(a.options.mode=="show"?0:(k-Math.floor(q/2))*(l/q)),opacity:a.options.mode=="show"?1:0},a.duration||500)}}setTimeout(function(){a.options.mode=="show"?o.css({visibility:"visible"}):o.css({visibility:"visible"}).hide(),a.callback&&a.callback.apply(o[0]),o.dequeue(),d("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.fade=function(a){return this.queue(function(){var e=d(this),b=d.effects.setMode(e,a.options.mode||"hide");e.animate({opacity:b},{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments),e.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.fold=function(a){return this.queue(function(){var A=d(this),z=["position","top","bottom","left","right"],y=d.effects.setMode(A,a.options.mode||"hide"),x=a.options.size||15,w=!!a.options.horizFirst,v=a.duration?a.duration/2:d.fx.speeds._default/2;d.effects.save(A,z),A.show();var u=d.effects.createWrapper(A).css({overflow:"hidden"}),t=y=="show"!=w,s=t?["width","height"]:["height","width"],r=t?[u.width(),u.height()]:[u.height(),u.width()],q=/([0-9]+)%/.exec(x);q&&(x=parseInt(q[1],10)/100*r[y=="hide"?0:1]),y=="show"&&u.css(w?{height:0,width:x}:{height:x,width:0});var o={},b={};o[s[0]]=y=="show"?r[0]:x,b[s[1]]=y=="show"?r[1]:0,u.animate(o,v,a.options.easing).animate(b,v,a.options.easing,function(){y=="hide"&&A.hide(),d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(A[0],arguments),A.dequeue()})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.highlight=function(a){return this.queue(function(){var k=d(this),j=["backgroundImage","backgroundColor","opacity"],h=d.effects.setMode(k,a.options.mode||"show"),b={backgroundColor:k.css("backgroundColor")};h=="hide"&&(b.opacity=0),d.effects.save(k,j),k.show().css({backgroundImage:"none",backgroundColor:a.options.color||"#ffff99"}).animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){h=="hide"&&k.hide(),d.effects.restore(k,j),h=="show"&&!d.support.opacity&&this.style.removeAttribute("filter"),a.callback&&a.callback.apply(this,arguments),k.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.pulsate=function(a){return this.queue(function(){var o=d(this),n=d.effects.setMode(o,a.options.mode||"show"),m=(a.options.times||5)*2-1,l=a.duration?a.duration/2:d.fx.speeds._default/2,k=o.is(":visible"),j=0;k||(o.css("opacity",0).show(),j=1),(n=="hide"&&k||n=="show"&&!k)&&m--;for(var b=0;b<m;b++){o.animate({opacity:j},l,a.options.easing),j=(j+1)%2}o.animate({opacity:j},l,a.options.easing,function(){j==0&&o.hide(),a.callback&&a.callback.apply(this,arguments)}),o.queue("fx",function(){o.dequeue()}).dequeue()})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.puff=function(a){return this.queue(function(){var l=d(this),k=d.effects.setMode(l,a.options.mode||"hide"),j=parseInt(a.options.percent,10)||150,h=j/100,b={height:l.height(),width:l.width()};d.extend(a.options,{fade:!0,mode:k,percent:k=="hide"?j:100,from:k=="hide"?b:{height:b.height*h,width:b.width*h}}),l.effect("scale",a.options,a.duration,a.callback),l.dequeue()})},d.effects.scale=function(a){return this.queue(function(){var q=d(this),p=d.extend(!0,{},a.options),o=d.effects.setMode(q,a.options.mode||"effect"),n=parseInt(a.options.percent,10)||(parseInt(a.options.percent,10)==0?0:o=="hide"?0:100),m=a.options.direction||"both",l=a.options.origin;o!="effect"&&(p.origin=l||["middle","center"],p.restore=!0);var k={height:q.height(),width:q.width()};q.from=a.options.from||(o=="show"?{height:0,width:0}:k);var b={y:m!="horizontal"?n/100:1,x:m!="vertical"?n/100:1};q.to={height:k.height*b.y,width:k.width*b.x},a.options.fade&&(o=="show"&&(q.from.opacity=0,q.to.opacity=1),o=="hide"&&(q.from.opacity=1,q.to.opacity=0)),p.from=q.from,p.to=q.to,p.mode=o,q.effect("size",p,a.duration,a.callback),q.dequeue()})},d.effects.size=function(a){return this.queue(function(){var C=d(this),B=["position","top","bottom","left","right","width","height","overflow","opacity"],A=["position","top","bottom","left","right","overflow","opacity"],z=["width","height","overflow"],y=["fontSize"],x=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],w=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],v=d.effects.setMode(C,a.options.mode||"effect"),u=a.options.restore||!1,t=a.options.scale||"both",s=a.options.origin,r={height:C.height(),width:C.width()};C.from=a.options.from||r,C.to=a.options.to||r;if(s){var o=d.effects.getBaseline(s,r);C.from.top=(r.height-C.from.height)*o.y,C.from.left=(r.width-C.from.width)*o.x,C.to.top=(r.height-C.to.height)*o.y,C.to.left=(r.width-C.to.width)*o.x}var b={from:{y:C.from.height/r.height,x:C.from.width/r.width},to:{y:C.to.height/r.height,x:C.to.width/r.width}};if(t=="box"||t=="both"){b.from.y!=b.to.y&&(B=B.concat(x),C.from=d.effects.setTransition(C,x,b.from.y,C.from),C.to=d.effects.setTransition(C,x,b.to.y,C.to)),b.from.x!=b.to.x&&(B=B.concat(w),C.from=d.effects.setTransition(C,w,b.from.x,C.from),C.to=d.effects.setTransition(C,w,b.to.x,C.to))}(t=="content"||t=="both")&&b.from.y!=b.to.y&&(B=B.concat(y),C.from=d.effects.setTransition(C,y,b.from.y,C.from),C.to=d.effects.setTransition(C,y,b.to.y,C.to)),d.effects.save(C,u?B:A),C.show(),d.effects.createWrapper(C),C.css("overflow","hidden").css(C.from);if(t=="content"||t=="both"){x=x.concat(["marginTop","marginBottom"]).concat(y),w=w.concat(["marginLeft","marginRight"]),z=B.concat(x).concat(w),C.find("*[width]").each(function(){var f=d(this);u&&d.effects.save(f,z);var e={height:f.height(),width:f.width()};f.from={height:e.height*b.from.y,width:e.width*b.from.x},f.to={height:e.height*b.to.y,width:e.width*b.to.x},b.from.y!=b.to.y&&(f.from=d.effects.setTransition(f,x,b.from.y,f.from),f.to=d.effects.setTransition(f,x,b.to.y,f.to)),b.from.x!=b.to.x&&(f.from=d.effects.setTransition(f,w,b.from.x,f.from),f.to=d.effects.setTransition(f,w,b.to.x,f.to)),f.css(f.from),f.animate(f.to,a.duration,a.options.easing,function(){u&&d.effects.restore(f,z)})})}C.animate(C.to,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){C.to.opacity===0&&C.css("opacity",C.from.opacity),v=="hide"&&C.hide(),d.effects.restore(C,u?B:A),d.effects.removeWrapper(C),a.callback&&a.callback.apply(this,arguments),C.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.shake=function(a){return this.queue(function(){var A=d(this),z=["position","top","bottom","left","right"],y=d.effects.setMode(A,a.options.mode||"effect"),x=a.options.direction||"left",w=a.options.distance||20,v=a.options.times||3,u=a.duration||a.options.duration||140;d.effects.save(A,z),A.show(),d.effects.createWrapper(A);var t=x=="up"||x=="down"?"top":"left",s=x=="up"||x=="left"?"pos":"neg",r={},q={},o={};r[t]=(s=="pos"?"-=":"+=")+w,q[t]=(s=="pos"?"+=":"-=")+w*2,o[t]=(s=="pos"?"-=":"+=")+w*2,A.animate(r,u,a.options.easing);for(var b=1;b<v;b++){A.animate(q,u,a.options.easing).animate(o,u,a.options.easing)}A.animate(q,u,a.options.easing).animate(r,u/2,a.options.easing,function(){d.effects.restore(A,z),d.effects.removeWrapper(A),a.callback&&a.callback.apply(this,arguments)}),A.queue("fx",function(){A.dequeue()}),A.dequeue()})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.slide=function(a){return this.queue(function(){var q=d(this),p=["position","top","bottom","left","right"],o=d.effects.setMode(q,a.options.mode||"show"),n=a.options.direction||"left";d.effects.save(q,p),q.show(),d.effects.createWrapper(q).css({overflow:"hidden"});var m=n=="up"||n=="down"?"top":"left",l=n=="up"||n=="left"?"pos":"neg",k=a.options.distance||(m=="top"?q.outerHeight({margin:!0}):q.outerWidth({margin:!0}));o=="show"&&q.css(m,l=="pos"?isNaN(k)?"-"+k:-k:k);var b={};b[m]=(o=="show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+k,q.animate(b,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){o=="hide"&&q.hide(),d.effects.restore(q,p),d.effects.removeWrapper(q),a.callback&&a.callback.apply(this,arguments),q.dequeue()}})})}})(jQuery);
/*! jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.transfer=function(a){return this.queue(function(){var n=d(this),m=d(a.options.to),l=m.offset(),k={top:l.top,left:l.left,height:m.innerHeight(),width:m.innerWidth()},j=n.offset(),b=d('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:j.top,left:j.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(k,a.duration,a.options.easing,function(){b.remove(),a.callback&&a.callback.apply(n[0],arguments),n.dequeue()})})}})(jQuery);
/*! 
 * jquery.event.drag - v 2.0.0 
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function(d){d.fn.drag=function(c,f,l){var j=typeof c=="string"?c:"",h=d.isFunction(c)?c:d.isFunction(f)?f:null;if(j.indexOf("drag")!==0){j="drag"+j}l=(c==h?f:l)||{};return h?this.bind(j,l,h):this.trigger(j)};var a=d.event,b=a.special,e=b.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(c){var f=d.data(this,e.datakey),h=c.data||{};f.related+=1;if(!f.live&&c.selector){f.live=true;a.add(this,"draginit."+e.livekey,e.delegate)}d.each(e.defaults,function(j){if(h[j]!==undefined){f[j]=h[j]}})},remove:function(){d.data(this,e.datakey).related-=1},setup:function(){if(!d.data(this,e.datakey)){var c=d.extend({related:0},e.defaults);d.data(this,e.datakey,c);a.add(this,"mousedown",e.init,c);this.attachEvent&&this.attachEvent("ondragstart",e.dontstart)}},teardown:function(){if(!d.data(this,e.datakey).related){d.removeData(this,e.datakey);a.remove(this,"mousedown",e.init);a.remove(this,"draginit",e.delegate);e.textselect(true);this.detachEvent&&this.detachEvent("ondragstart",e.dontstart)}},init:function(c){var f=c.data,h;if(!(f.which>0&&c.which!=f.which)){if(!d(c.target).is(f.not)){if(!(f.handle&&!d(c.target).closest(f.handle,c.currentTarget).length)){f.propagates=1;f.interactions=[e.interaction(this,f)];f.target=c.target;f.pageX=c.pageX;f.pageY=c.pageY;f.dragging=null;h=e.hijack(c,"draginit",f);if(f.propagates){if((h=e.flatten(h))&&h.length){f.interactions=[];d.each(h,function(){f.interactions.push(e.interaction(this,f))})}f.propagates=f.interactions.length;f.drop!==false&&b.drop&&b.drop.handler(c,f);e.textselect(false);a.add(document,"mousemove mouseup",e.handler,f);return false}}}}},interaction:function(c,f){return{drag:c,callback:new e.callback,droppable:[],offset:d(c)[f.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(c){var f=c.data;switch(c.type){case !f.dragging&&"mousemove":if(Math.pow(c.pageX-f.pageX,2)+Math.pow(c.pageY-f.pageY,2)<Math.pow(f.distance,2)){break}c.target=f.target;e.hijack(c,"dragstart",f);if(f.propagates){f.dragging=true}case"mousemove":if(f.dragging){e.hijack(c,"drag",f);if(f.propagates){f.drop!==false&&b.drop&&b.drop.handler(c,f);break}c.type="mouseup"}case"mouseup":a.remove(document,"mousemove mouseup",e.handler);if(f.dragging){f.drop!==false&&b.drop&&b.drop.handler(c,f);e.hijack(c,"dragend",f)}e.textselect(true);if(f.click===false&&f.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false},20);f.dragging=false}break}},delegate:function(c){var f=[],j,h=d.data(this,"events")||{};d.each(h.live||[],function(l,m){if(m.preType.indexOf("drag")===0){if(j=d(c.target).closest(m.selector,c.currentTarget)[0]){a.add(j,m.origType+"."+e.livekey,m.origHandler,m.data);d.inArray(j,f)<0&&f.push(j)}}});if(!f.length){return false}return d(f).bind("dragend."+e.livekey,function(){a.remove(this,"."+e.livekey)})},hijack:function(v,w,u,t,q){if(u){var r={event:v.originalEvent,type:v.type},f=w.indexOf("drop")?"drag":"drop",p,c=t||0,s,h;t=!isNaN(t)?t:u.interactions.length;v.type=w;v.originalEvent=null;u.results=[];do{if(s=u.interactions[c]){if(!(w!=="dragend"&&s.cancelled)){h=e.properties(v,u,s);s.results=[];d(q||s[f]||u.droppable).each(function(j,k){p=(h.target=k)?a.handle.call(k,v,h):null;if(p===false){if(f=="drag"){s.cancelled=true;u.propagates-=1}if(w=="drop"){s[f][j]=null}}else{if(w=="dropinit"){s.droppable.push(e.element(p)||k)}}if(w=="dragstart"){s.proxy=d(e.element(p)||s.drag)[0]}s.results.push(p);delete v.result;if(w!=="dropinit"){return p}});u.results[c]=e.flatten(s.results);if(w=="dropinit"){s.droppable=e.flatten(s.droppable)}w=="dragstart"&&!s.cancelled&&h.update()}}}while(++c<t);v.type=r.type;v.originalEvent=r.event;return e.flatten(u.results)}},properties:function(c,f,j){var h=j.callback;h.drag=j.drag;h.proxy=j.proxy||j.drag;h.startX=f.pageX;h.startY=f.pageY;h.deltaX=c.pageX-f.pageX;h.deltaY=c.pageY-f.pageY;h.originalX=j.offset.left;h.originalY=j.offset.top;h.offsetX=c.pageX-(f.pageX-h.originalX);h.offsetY=c.pageY-(f.pageY-h.originalY);h.drop=e.flatten((j.drop||[]).slice());h.available=e.flatten((j.droppable||[]).slice());return h},element:function(c){if(c&&(c.jquery||c.nodeType==1)){return c}},flatten:function(c){return d.map(c,function(f){return f&&f.jquery?d.makeArray(f):f&&f.length?e.flatten(f):f})},textselect:function(c){d(document)[c?"unbind":"bind"]("selectstart",e.dontstart).attr("unselectable",c?"off":"on").css("MozUserSelect",c?"":"none")},dontstart:function(){return false},callback:function(){}};e.callback.prototype={update:function(){b.drop&&this.available.length&&d.each(this.available,function(c){b.drop.locate(this,c)})}};b.draginit=b.dragstart=b.dragend=e})(jQuery);(function(w){var ac,D="2.1.0",ah=Math.round,aj,T={},S=(typeof module!=="undefined"&&module.exports),A=/^\/?Date\((\-?\d+)/i,ag=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,m=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,s=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,h=/\d\d?/,U=/\d{1,3}/,W=/\d{3}/,M=/\d{1,4}/,r=/[+\-]?\d{1,6}/,N=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,b=/Z|[\+\-]\d\d:?\d\d/i,x=/T/i,q=/[\+\-]?\d+(\.\d{1,3})?/,O=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,d="YYYY-MM-DDTHH:mm:ssZ",k=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],F=/([\+\-]|\d\d)/gi,o="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ad={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},v={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},n={},J="DDD w W M D d".split(" "),z="M D H h m s w W".split(" "),j={M:function(){return this.month()+1},MMM:function(an){return this.lang().monthsShort(this,an)},MMMM:function(an){return this.lang().months(this,an)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(an){return this.lang().weekdaysMin(this,an)},ddd:function(an){return this.lang().weekdaysShort(this,an)},dddd:function(an){return this.lang().weekdays(this,an)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return af(this.year()%100,2)},YYYY:function(){return af(this.year(),4)},YYYYY:function(){return af(this.year(),5)},gg:function(){return af(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return af(this.weekYear(),5)},GG:function(){return af(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return af(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return af(~~(this.milliseconds()/10),2)},SSS:function(){return af(this.milliseconds(),3)},Z:function(){var ao=-this.zone(),an="+";if(ao<0){ao=-ao;an="-"}return an+af(~~(ao/60),2)+":"+af(~~ao%60,2)},ZZ:function(){var ao=-this.zone(),an="+";if(ao<0){ao=-ao;an="-"}return an+af(~~(10*ao/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};function Q(ao,an){return function(ap){return af(ao.call(this,ap),an)}}function K(an,ao){return function(ap){return this.lang().ordinal(an.call(this,ap),ao)}}while(J.length){aj=J.pop();j[aj+"o"]=K(j[aj],aj)}while(z.length){aj=z.pop();j[aj+aj]=Q(j[aj],2)}j.DDDD=Q(j.DDD,3);function al(){}function y(an){u(this,an)}function am(aq){var at=aq.years||aq.year||aq.y||0,ao=aq.months||aq.month||aq.M||0,an=aq.weeks||aq.week||aq.w||0,aw=aq.days||aq.day||aq.d||0,au=aq.hours||aq.hour||aq.h||0,ar=aq.minutes||aq.minute||aq.m||0,av=aq.seconds||aq.second||aq.s||0,ap=aq.milliseconds||aq.millisecond||aq.ms||0;this._input=aq;this._milliseconds=ap+av*1000+ar*60000+au*3600000;this._days=aw+an*7;this._months=ao+at*12;this._data={};this._bubble()}function u(ao,an){for(var ap in an){if(an.hasOwnProperty(ap)){ao[ap]=an[ap]}}return ao}function ab(an){if(an<0){return Math.ceil(an)}else{return Math.floor(an)}}function af(ap,ao){var an=ap+"";while(an.length<ao){an="0"+an}return an}function Y(ar,aq,av,au){var ap=aq._milliseconds,ax=aq._days,ao=aq._months,at,aw,an;if(ap){ar._d.setTime(+ar._d+ap*av)}if(ax||ao){at=ar.minute();aw=ar.hour()}if(ax){ar.date(ar.date()+ax*av)}if(ao){ar.month(ar.month()+ao*av)}if(ap&&!au){ac.updateOffset(ar)}if(ax||ao){ar.minute(at);ar.hour(aw)}}function G(an){return Object.prototype.toString.call(an)==="[object Array]"}function X(ar,aq){var an=Math.min(ar.length,aq.length),ao=Math.abs(ar.length-aq.length),at=0,ap;for(ap=0;ap<an;ap++){if(~~ar[ap]!==~~aq[ap]){at++}}return at+ao}function H(an){return an?v[an]||an.toLowerCase().replace(/(.)s$/,"$1"):an}al.prototype={set:function(an){var ap,ao;for(ao in an){ap=an[ao];if(typeof ap==="function"){this[ao]=ap}else{this["_"+ao]=ap}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(an){return this._months[an.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(an){return this._monthsShort[an.month()]},monthsParse:function(an){var ao,aq,ap;if(!this._monthsParse){this._monthsParse=[]}for(ao=0;ao<12;ao++){if(!this._monthsParse[ao]){aq=ac([2000,ao]);ap="^"+this.months(aq,"")+"|^"+this.monthsShort(aq,"");this._monthsParse[ao]=new RegExp(ap.replace(".",""),"i")}if(this._monthsParse[ao].test(an)){return ao}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(an){return this._weekdays[an.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(an){return this._weekdaysShort[an.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(an){return this._weekdaysMin[an.day()]},weekdaysParse:function(aq){var an,ap,ao;if(!this._weekdaysParse){this._weekdaysParse=[]}for(an=0;an<7;an++){if(!this._weekdaysParse[an]){ap=ac([2000,1]).day(an);ao="^"+this.weekdays(ap,"")+"|^"+this.weekdaysShort(ap,"")+"|^"+this.weekdaysMin(ap,"");this._weekdaysParse[an]=new RegExp(ao.replace(".",""),"i")}if(this._weekdaysParse[an].test(aq)){return an}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(ao){var an=this._longDateFormat[ao];if(!an&&this._longDateFormat[ao.toUpperCase()]){an=this._longDateFormat[ao.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(ap){return ap.slice(1)});this._longDateFormat[ao]=an}return an},isPM:function(an){return((an+"").toLowerCase()[0]==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(an,ao,ap){if(an>11){return ap?"pm":"PM"}else{return ap?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(ao,ap){var an=this._calendar[ao];return typeof an==="function"?an.apply(ap):an},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(aq,ap,ao,ar){var an=this._relativeTime[ao];return(typeof an==="function")?an(aq,ap,ao,ar):an.replace(/%d/i,aq)},pastFuture:function(ap,an){var ao=this._relativeTime[ap>0?"future":"past"];return typeof ao==="function"?ao(an):ao.replace(/%s/i,an)},ordinal:function(an){return this._ordinal.replace("%d",an)},_ordinal:"%d",preparse:function(an){return an},postformat:function(an){return an},week:function(an){return V(an,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}};function C(ao,an){an.abbr=ao;if(!T[ao]){T[ao]=new al()}T[ao].set(an);return T[ao]}function B(an){if(!an){return ac.fn._lang}if(!T[an]&&S){try{require("./lang/"+an)}catch(ao){return ac.fn._lang}}return T[an]}function L(an){if(an.match(/\[.*\]/)){return an.replace(/^\[|\]$/g,"")}return an.replace(/\\/g,"")}function aa(ap){var aq=ap.match(m),an,ao;for(an=0,ao=aq.length;an<ao;an++){if(j[aq[an]]){aq[an]=j[aq[an]]}else{aq[an]=L(aq[an])}}return function(at){var ar="";for(an=0;an<ao;an++){ar+=aq[an] instanceof Function?aq[an].call(at,ap):aq[an]}return ar}}function R(an,aq){var ao=5;function ap(ar){return an.lang().longDateFormat(ar)||ar}while(ao--&&s.test(aq)){aq=aq.replace(s,ap)}if(!n[aq]){n[aq]=aa(aq)}return n[aq](an)}function f(ao,an){switch(ao){case"DDDD":return W;case"YYYY":return M;case"YYYYY":return r;case"S":case"SS":case"SSS":case"DDD":return U;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return N;case"a":case"A":return B(an._l)._meridiemParse;case"X":return q;case"Z":case"ZZ":return b;case"T":return x;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return h;default:return new RegExp(ao.replace("\\",""))}}function t(ao){var an=(b.exec(ao)||[])[0],aq=(an+"").match(F)||["-",0,0],ap=+(aq[1]*60)+~~aq[2];return aq[0]==="+"?-ap:ap}function e(ar,ap,aq){var ao,an=aq._a;switch(ar){case"M":case"MM":an[1]=(ap==null)?0:~~ap-1;break;case"MMM":case"MMMM":ao=B(aq._l).monthsParse(ap);if(ao!=null){an[1]=ao}else{aq._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(ap!=null){an[2]=~~ap}break;case"YY":an[0]=~~ap+(~~ap>68?1900:2000);break;case"YYYY":case"YYYYY":an[0]=~~ap;break;case"a":case"A":aq._isPm=B(aq._l).isPM(ap);break;case"H":case"HH":case"h":case"hh":an[3]=~~ap;break;case"m":case"mm":an[4]=~~ap;break;case"s":case"ss":an[5]=~~ap;break;case"S":case"SS":case"SSS":an[6]=~~(("0."+ap)*1000);break;case"X":aq._d=new Date(parseFloat(ap)*1000);break;case"Z":case"ZZ":aq._useUTC=true;aq._tzm=t(ap);break}if(ap==null){aq._isValid=false}}function l(ap){var aq,ao,an=[];if(ap._d){return}for(aq=0;aq<7;aq++){ap._a[aq]=an[aq]=(ap._a[aq]==null)?(aq===2?1:0):ap._a[aq]}an[3]+=~~((ap._tzm||0)/60);an[4]+=~~((ap._tzm||0)%60);ao=new Date(0);if(ap._useUTC){ao.setUTCFullYear(an[0],an[1],an[2]);ao.setUTCHours(an[3],an[4],an[5],an[6])}else{ao.setFullYear(an[0],an[1],an[2]);ao.setHours(an[3],an[4],an[5],an[6])}ap._d=ao}function P(ao){var ar=ao._f.match(m),an=ao._i,ap,aq;ao._a=[];for(ap=0;ap<ar.length;ap++){aq=(f(ar[ap],ao).exec(an)||[])[0];if(aq){an=an.slice(an.indexOf(aq)+aq.length)}if(j[ar[ap]]){e(ar[ap],aq,ao)}}if(an){ao._il=an}if(ao._isPm&&ao._a[3]<12){ao._a[3]+=12}if(ao._isPm===false&&ao._a[3]===12){ao._a[3]=0}l(ao)}function E(ao){var at,an,aq,ar=99,ap,au;for(ap=0;ap<ao._f.length;ap++){at=u({},ao);at._f=ao._f[ap];P(at);an=new y(at);au=X(at._a,an.toArray());if(an._il){au+=an._il.length}if(au<ar){ar=au;aq=an}}u(ao,aq)}function ae(ap){var aq,ao=ap._i,an=O.exec(ao);if(an){ap._f="YYYY-MM-DD"+(an[2]||" ");for(aq=0;aq<4;aq++){if(k[aq][1].exec(ao)){ap._f+=k[aq][0];break}}if(b.exec(ao)){ap._f+=" Z"}P(ap)}else{ap._d=new Date(ao)}}function ak(ap){var ao=ap._i,an=A.exec(ao);if(ao===w){ap._d=new Date()}else{if(an){ap._d=new Date(+an[1])}else{if(typeof ao==="string"){ae(ap)}else{if(G(ao)){ap._a=ao.slice(0);l(ap)}else{ap._d=ao instanceof Date?new Date(+ao):new Date(ao)}}}}}function Z(an,ap,ao,aq,ar){return ar.relativeTime(ap||1,!!ao,an,aq)}function I(ap,an,ao){var av=ah(Math.abs(ap)/1000),aq=ah(av/60),au=ah(aq/60),aw=ah(au/24),ar=ah(aw/365),at=av<45&&["s",av]||aq===1&&["m"]||aq<45&&["mm",aq]||au===1&&["h"]||au<22&&["hh",au]||aw===1&&["d"]||aw<=25&&["dd",aw]||aw<=45&&["M"]||aw<345&&["MM",ah(aw/30)]||ar===1&&["y"]||["yy",ar];at[2]=an;at[3]=ap>0;at[4]=ao;return Z.apply({},at)}function V(ar,ap,at){var ao=at-ap,an=at-ar.day(),aq;if(an>ao){an-=7}if(an<ao-7){an+=7}aq=ac(ar).add("d",an);return{week:Math.ceil(aq.dayOfYear()/7),year:aq.year()}}function ai(ao){var an=ao._i,ap=ao._f;if(an===null||an===""){return null}if(typeof an==="string"){ao._i=an=B().preparse(an)}if(ac.isMoment(an)){ao=u({},an);ao._d=new Date(+an._d)}else{if(ap){if(G(ap)){E(ao)}else{P(ao)}}else{ak(ao)}}return new y(ao)}ac=function(an,ao,ap){return ai({_i:an,_f:ao,_l:ap,_isUTC:false})};ac.utc=function(an,ao,ap){return ai({_useUTC:true,_isUTC:true,_l:ap,_i:an,_f:ao})};ac.unix=function(an){return ac(an*1000)};ac.duration=function(ap,au){var at=ac.isDuration(ap),ar=(typeof ap==="number"),av=(at?ap._input:(ar?{}:ap)),an=ag.exec(ap),ao,aq;if(ar){if(au){av[au]=ap}else{av.milliseconds=ap}}else{if(an){ao=(an[1]==="-")?-1:1;av={y:0,d:~~an[2]*ao,h:~~an[3]*ao,m:~~an[4]*ao,s:~~an[5]*ao,ms:~~an[6]*ao}}}aq=new am(av);if(at&&ap.hasOwnProperty("_lang")){aq._lang=ap._lang}return aq};ac.version=D;ac.defaultFormat=d;ac.updateOffset=function(){};ac.lang=function(ao,an){if(!ao){return ac.fn._lang._abbr}if(an){C(ao,an)}else{if(!T[ao]){B(ao)}}ac.duration.fn._lang=ac.fn._lang=B(ao)};ac.langData=function(an){if(an&&an._lang&&an._lang._abbr){an=an._lang._abbr}return B(an)};ac.isMoment=function(an){return an instanceof y};ac.isDuration=function(an){return an instanceof am};ac.fn=y.prototype={clone:function(){return ac(this)},valueOf:function(){return +this._d+((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return R(ac(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var an=this;return[an.year(),an.month(),an.date(),an.hours(),an.minutes(),an.seconds(),an.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!X(this._a,(this._isUTC?ac.utc(this._a):ac(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return !!this._isValid},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=false;return this},format:function(ao){var an=R(this,ao||ac.defaultFormat);return this.lang().postformat(an)},add:function(an,ap){var ao;if(typeof an==="string"){ao=ac.duration(+ap,an)}else{ao=ac.duration(an,ap)}Y(this,ao,1);return this},subtract:function(an,ap){var ao;if(typeof an==="string"){ao=ac.duration(+ap,an)}else{ao=ac.duration(an,ap)}Y(this,ao,-1);return this},diff:function(ar,aq,an){var at=this._isUTC?ac(ar).zone(this._offset||0):ac(ar).local(),ao=(this.zone()-at.zone())*60000,au,ap;aq=H(aq);if(aq==="year"||aq==="month"){au=(this.daysInMonth()+at.daysInMonth())*43200000;ap=((this.year()-at.year())*12)+(this.month()-at.month());ap+=((this-ac(this).startOf("month"))-(at-ac(at).startOf("month")))/au;ap-=((this.zone()-ac(this).startOf("month").zone())-(at.zone()-ac(at).startOf("month").zone()))*60000/au;if(aq==="year"){ap=ap/12}}else{au=(this-at);ap=aq==="second"?au/1000:aq==="minute"?au/60000:aq==="hour"?au/3600000:aq==="day"?(au-ao)/86400000:aq==="week"?(au-ao)/604800000:au}return an?ap:ab(ap)},from:function(ao,an){return ac.duration(this.diff(ao)).lang(this.lang()._abbr).humanize(!an)},fromNow:function(an){return this.from(ac(),an)},calendar:function(){var ao=this.diff(ac().startOf("day"),"days",true),an=ao<-6?"sameElse":ao<-1?"lastWeek":ao<0?"lastDay":ao<1?"sameDay":ao<2?"nextDay":ao<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(an,this))},isLeapYear:function(){var an=this.year();return(an%4===0&&an%100!==0)||an%400===0},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone())},day:function(ao){var an=this._isUTC?this._d.getUTCDay():this._d.getDay();if(ao!=null){if(typeof ao==="string"){ao=this.lang().weekdaysParse(ao);if(typeof ao!=="number"){return this}}return this.add({d:ao-an})}else{return an}},month:function(ao){var ap=this._isUTC?"UTC":"",aq,an;if(ao!=null){if(typeof ao==="string"){ao=this.lang().monthsParse(ao);if(typeof ao!=="number"){return this}}aq=this.date();this.date(1);this._d["set"+ap+"Month"](ao);this.date(Math.min(aq,this.daysInMonth()));ac.updateOffset(this);return this}else{return this._d["get"+ap+"Month"]()}},startOf:function(an){an=H(an);switch(an){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(an==="week"){this.weekday(0)}return this},endOf:function(an){return this.startOf(an).add(an,1).subtract("ms",1)},isAfter:function(ao,an){an=typeof an!=="undefined"?an:"millisecond";return +this.clone().startOf(an)>+ac(ao).startOf(an)},isBefore:function(ao,an){an=typeof an!=="undefined"?an:"millisecond";return +this.clone().startOf(an)<+ac(ao).startOf(an)},isSame:function(ao,an){an=typeof an!=="undefined"?an:"millisecond";return +this.clone().startOf(an)===+ac(ao).startOf(an)},min:function(an){an=ac.apply(null,arguments);return an<this?this:an},max:function(an){an=ac.apply(null,arguments);return an>this?this:an},zone:function(an){var ao=this._offset||0;if(an!=null){if(typeof an==="string"){an=t(an)}if(Math.abs(an)<16){an=an*60}this._offset=an;this._isUTC=true;if(ao!==an){Y(this,ac.duration(ao-an,"m"),1,true)}}else{return this._isUTC?ao:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return ac.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(an){var ao=ah((ac(this).startOf("day")-ac(this).startOf("year"))/86400000)+1;return an==null?ao:this.add("d",(an-ao))},weekYear:function(an){var ao=V(this,this.lang()._week.dow,this.lang()._week.doy).year;return an==null?ao:this.add("y",(an-ao))},isoWeekYear:function(an){var ao=V(this,1,4).year;return an==null?ao:this.add("y",(an-ao))},week:function(an){var ao=this.lang().week(this);return an==null?ao:this.add("d",(an-ao)*7)},isoWeek:function(an){var ao=V(this,1,4).week;return an==null?ao:this.add("d",(an-ao)*7)},weekday:function(an){var ao=(this._d.getDay()+7-this.lang()._week.dow)%7;return an==null?ao:this.add("d",an-ao)},isoWeekday:function(an){return an==null?this.day()||7:this.day(this.day()%7?an:an-7)},lang:function(an){if(an===w){return this._lang}else{this._lang=B(an);return this}}};function p(an,ao){ac.fn[an]=ac.fn[an+"s"]=function(ap){var aq=this._isUTC?"UTC":"";if(ap!=null){this._d["set"+aq+ao](ap);ac.updateOffset(this);return this}else{return this._d["get"+aq+ao]()}}}for(aj=0;aj<o.length;aj++){p(o[aj].toLowerCase().replace(/s$/,""),o[aj])}p("year","FullYear");ac.fn.days=ac.fn.day;ac.fn.months=ac.fn.month;ac.fn.weeks=ac.fn.week;ac.fn.isoWeeks=ac.fn.isoWeek;ac.fn.toJSON=ac.fn.toISOString;ac.duration.fn=am.prototype={_bubble:function(){var ap=this._milliseconds,av=this._days,an=this._months,at=this._data,au,ar,ao,aq;at.milliseconds=ap%1000;au=ab(ap/1000);at.seconds=au%60;ar=ab(au/60);at.minutes=ar%60;ao=ab(ar/60);at.hours=ao%24;av+=ab(ao/24);at.days=av%30;an+=ab(av/30);at.months=an%12;aq=ab(an/12);at.years=aq},weeks:function(){return ab(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+~~(this._months/12)*31536000000},humanize:function(ao){var ap=+this,an=I(ap,!ao,this.lang());if(ao){an=this.lang().pastFuture(ap,an)}return this.lang().postformat(an)},add:function(an,ap){var ao=ac.duration(an,ap);this._milliseconds+=ao._milliseconds;this._days+=ao._days;this._months+=ao._months;this._bubble();return this},subtract:function(an,ap){var ao=ac.duration(an,ap);this._milliseconds-=ao._milliseconds;this._days-=ao._days;this._months-=ao._months;this._bubble();return this},get:function(an){an=H(an);return this[an.toLowerCase()+"s"]()},as:function(an){an=H(an);return this["as"+an.charAt(0).toUpperCase()+an.slice(1)+"s"]()},lang:ac.fn.lang};function a(an){ac.duration.fn[an]=function(){return this._data[an]}}function c(an,ao){ac.duration.fn["as"+an]=function(){return +this/ao}}for(aj in ad){if(ad.hasOwnProperty(aj)){c(aj,ad[aj]);a(aj.toLowerCase())}}c("Weeks",604800000);ac.duration.fn.asMonths=function(){return(+this-this.years()*31536000000)/2592000000+this.years()*12};ac.lang("en",{ordinal:function(ap){var an=ap%10,ao=(~~(ap%100/10)===1)?"th":(an===1)?"st":(an===2)?"nd":(an===3)?"rd":"th";return ap+ao}});if(S){module.exports=ac}if(typeof ender==="undefined"){this["moment"]=ac}if(typeof define==="function"&&define.amd){define("moment",[],function(){return ac})}}).call(this);(function(h){h.extend(true,window,{Slick:{Event:b,EventData:e,Range:j,NonDataRow:d,Group:c,GroupTotals:a,EditorLock:f,GlobalEditorLock:new f()}});function e(){var k=false;var l=false;this.stopPropagation=function(){k=true};this.isPropagationStopped=function(){return k};this.stopImmediatePropagation=function(){l=true};this.isImmediatePropagationStopped=function(){return l}}function b(){var k=[];this.subscribe=function(l){k.push(l)};this.unsubscribe=function(m){for(var l=k.length-1;l>=0;l--){if(k[l]===m){k.splice(l,1)}}};this.notify=function(l,p,o){p=p||new e();o=o||this;var n;for(var m=0;m<k.length&&!(p.isPropagationStopped()||p.isImmediatePropagationStopped());m++){n=k[m].call(o,p,l)}return n}}function j(l,k,m,n){if(m===undefined&&n===undefined){m=l;n=k}this.fromRow=Math.min(l,m);this.fromCell=Math.min(k,n);this.toRow=Math.max(l,m);this.toCell=Math.max(k,n);this.isSingleRow=function(){return this.fromRow==this.toRow};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell};this.contains=function(p,o){return p>=this.fromRow&&p<=this.toRow&&o>=this.fromCell&&o<=this.toCell};this.toString=function(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")"}else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}}function d(){this.__nonDataRow=true}function c(){this.__group=true;this.__updated=false;this.count=0;this.value=null;this.title=null;this.collapsed=false;this.totals=null}c.prototype=new d();c.prototype.equals=function(k){return this.value===k.value&&this.count===k.count&&this.collapsed===k.collapsed};function a(){this.__groupTotals=true;this.group=null}a.prototype=new d();function f(){var k=null;this.isActive=function(m){return(m?k===m:k!==null)};this.activate=function(m){if(m===k){return}if(k!==null){throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController"}if(!m.commitCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()"}if(!m.cancelCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()"}k=m};this.deactivate=function(m){if(k!==m){throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one"}k=null};this.commitCurrentEdit=function(){return(k?k.commitCurrentEdit():true)};this.cancelCurrentEdit=function l(){return(k?k.cancelCurrentEdit():true)}}})(jQuery);
/*!
 * Parse JavaScript SDK
 * Version: 1.2.12
 * Built: Wed Sep 11 2013 11:52:54
 * http://parse.com
 *
 * Copyright 2013 Parse, Inc.
 * The Parse JavaScript SDK is freely distributable under the MIT license.
 *
 * Includes: Underscore.js
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Released under the MIT license.
 */
(function(a){a.Parse=a.Parse||{};a.Parse.VERSION="js1.2.12"}(this));(function(){var y=this;var m=y._;var F={};var E=Array.prototype,f=Object.prototype,t=Function.prototype;var I=E.push,q=E.slice,A=E.concat,d=f.toString,l=f.hasOwnProperty;var M=E.forEach,s=E.map,G=E.reduce,c=E.reduceRight,b=E.filter,D=E.every,r=E.some,p=E.indexOf,n=E.lastIndexOf,w=Array.isArray,e=Object.keys,H=t.bind;var N=function(O){if(O instanceof N){return O}if(!(this instanceof N)){return new N(O)}this._wrapped=O};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=N}exports._=N}else{y._=N}N.VERSION="1.4.4";var J=N.each=N.forEach=function(T,S,R){if(T==null){return}if(M&&T.forEach===M){T.forEach(S,R)}else{if(T.length===+T.length){for(var Q=0,O=T.length;Q<O;Q++){if(S.call(R,T[Q],Q,T)===F){return}}}else{for(var P in T){if(N.has(T,P)){if(S.call(R,T[P],P,T)===F){return}}}}}};N.map=N.collect=function(R,Q,P){var O=[];if(R==null){return O}if(s&&R.map===s){return R.map(Q,P)}J(R,function(U,S,T){O[O.length]=Q.call(P,U,S,T)});return O};var h="Reduce of empty array with no initial value";N.reduce=N.foldl=N.inject=function(S,R,O,Q){var P=arguments.length>2;if(S==null){S=[]}if(G&&S.reduce===G){if(Q){R=N.bind(R,Q)}return P?S.reduce(R,O):S.reduce(R)}J(S,function(V,T,U){if(!P){O=V;P=true}else{O=R.call(Q,O,V,T,U)}});if(!P){throw new TypeError(h)}return O};N.reduceRight=N.foldr=function(U,R,O,Q){var P=arguments.length>2;if(U==null){U=[]}if(c&&U.reduceRight===c){if(Q){R=N.bind(R,Q)}return P?U.reduceRight(R,O):U.reduceRight(R)}var T=U.length;if(T!==+T){var S=N.keys(U);T=S.length}J(U,function(X,V,W){V=S?S[--T]:--T;if(!P){O=U[V];P=true}else{O=R.call(Q,O,U[V],V,W)}});if(!P){throw new TypeError(h)}return O};N.find=N.detect=function(R,Q,P){var O;C(R,function(U,S,T){if(Q.call(P,U,S,T)){O=U;return true}});return O};N.filter=N.select=function(R,Q,P){var O=[];if(R==null){return O}if(b&&R.filter===b){return R.filter(Q,P)}J(R,function(U,S,T){if(Q.call(P,U,S,T)){O[O.length]=U}});return O};N.reject=function(Q,P,O){return N.filter(Q,function(T,R,S){return !P.call(O,T,R,S)},O)};N.every=N.all=function(R,Q,P){Q||(Q=N.identity);var O=true;if(R==null){return O}if(D&&R.every===D){return R.every(Q,P)}J(R,function(U,S,T){if(!(O=O&&Q.call(P,U,S,T))){return F}});return !!O};var C=N.some=N.any=function(R,Q,P){Q||(Q=N.identity);var O=false;if(R==null){return O}if(r&&R.some===r){return R.some(Q,P)}J(R,function(U,S,T){if(O||(O=Q.call(P,U,S,T))){return F}});return !!O};N.contains=N.include=function(P,O){if(P==null){return false}if(p&&P.indexOf===p){return P.indexOf(O)!=-1}return C(P,function(Q){return Q===O})};N.invoke=function(Q,R){var O=q.call(arguments,2);var P=N.isFunction(R);return N.map(Q,function(S){return(P?R:S[R]).apply(S,O)})};N.pluck=function(P,O){return N.map(P,function(Q){return Q[O]})};N.where=function(P,O,Q){if(N.isEmpty(O)){return Q?null:[]}return N[Q?"find":"filter"](P,function(S){for(var R in O){if(O[R]!==S[R]){return false}}return true})};N.findWhere=function(P,O){return N.where(P,O,true)};N.max=function(R,Q,P){if(!Q&&N.isArray(R)&&R[0]===+R[0]&&R.length<65535){return Math.max.apply(Math,R)}if(!Q&&N.isEmpty(R)){return -Infinity}var O={computed:-Infinity,value:-Infinity};J(R,function(V,S,U){var T=Q?Q.call(P,V,S,U):V;T>=O.computed&&(O={value:V,computed:T})});return O.value};N.min=function(R,Q,P){if(!Q&&N.isArray(R)&&R[0]===+R[0]&&R.length<65535){return Math.min.apply(Math,R)}if(!Q&&N.isEmpty(R)){return Infinity}var O={computed:Infinity,value:Infinity};J(R,function(V,S,U){var T=Q?Q.call(P,V,S,U):V;T<O.computed&&(O={value:V,computed:T})});return O.value};N.shuffle=function(R){var Q;var P=0;var O=[];J(R,function(S){Q=N.random(P++);O[P-1]=O[Q];O[Q]=S});return O};var a=function(O){return N.isFunction(O)?O:function(P){return P[O]}};N.sortBy=function(R,Q,O){var P=a(Q);return N.pluck(N.map(R,function(U,S,T){return{value:U,index:S,criteria:P.call(O,U,S,T)}}).sort(function(V,U){var T=V.criteria;var S=U.criteria;if(T!==S){if(T>S||T===void 0){return 1}if(T<S||S===void 0){return -1}}return V.index<U.index?-1:1}),"value")};var v=function(T,S,P,R){var O={};var Q=a(S||N.identity);J(T,function(W,U){var V=Q.call(P,W,U,T);R(O,V,W)});return O};N.groupBy=function(Q,P,O){return v(Q,P,O,function(R,S,T){(N.has(R,S)?R[S]:(R[S]=[])).push(T)})};N.countBy=function(Q,P,O){return v(Q,P,O,function(R,S){if(!N.has(R,S)){R[S]=0}R[S]++})};N.sortedIndex=function(V,U,R,Q){R=R==null?N.identity:a(R);var T=R.call(Q,U);var O=0,S=V.length;while(O<S){var P=(O+S)>>>1;R.call(Q,V[P])<T?O=P+1:S=P}return O};N.toArray=function(O){if(!O){return[]}if(N.isArray(O)){return q.call(O)}if(O.length===+O.length){return N.map(O,N.identity)}return N.values(O)};N.size=function(O){if(O==null){return 0}return(O.length===+O.length)?O.length:N.keys(O).length};N.first=N.head=N.take=function(Q,P,O){if(Q==null){return void 0}return(P!=null)&&!O?q.call(Q,0,P):Q[0]};N.initial=function(Q,P,O){return q.call(Q,0,Q.length-((P==null)||O?1:P))};N.last=function(Q,P,O){if(Q==null){return void 0}if((P!=null)&&!O){return q.call(Q,Math.max(Q.length-P,0))}else{return Q[Q.length-1]}};N.rest=N.tail=N.drop=function(Q,P,O){return q.call(Q,(P==null)||O?1:P)};N.compact=function(O){return N.filter(O,N.identity)};var z=function(P,Q,O){J(P,function(R){if(N.isArray(R)){Q?I.apply(O,R):z(R,Q,O)}else{O.push(R)}});return O};N.flatten=function(P,O){return z(P,O,[])};N.without=function(O){return N.difference(O,q.call(arguments,1))};N.uniq=N.unique=function(U,T,S,R){if(N.isFunction(T)){R=S;S=T;T=false}var P=S?N.map(U,S,R):U;var Q=[];var O=[];J(P,function(W,V){if(T?(!V||O[O.length-1]!==W):!N.contains(O,W)){O.push(W);Q.push(U[V])}});return Q};N.union=function(){return N.uniq(A.apply(E,arguments))};N.intersection=function(P){var O=q.call(arguments,1);return N.filter(N.uniq(P),function(Q){return N.every(O,function(R){return N.indexOf(R,Q)>=0})})};N.difference=function(P){var O=A.apply(E,q.call(arguments,1));return N.filter(P,function(Q){return !N.contains(O,Q)})};N.zip=function(){var O=q.call(arguments);var R=N.max(N.pluck(O,"length"));var Q=new Array(R);for(var P=0;P<R;P++){Q[P]=N.pluck(O,""+P)}return Q};N.object=function(S,Q){if(S==null){return{}}var O={};for(var R=0,P=S.length;R<P;R++){if(Q){O[S[R]]=Q[R]}else{O[S[R][0]]=S[R][1]}}return O};N.indexOf=function(S,Q,R){if(S==null){return -1}var P=0,O=S.length;if(R){if(typeof R=="number"){P=(R<0?Math.max(0,O+R):R)}else{P=N.sortedIndex(S,Q);return S[P]===Q?P:-1}}if(p&&S.indexOf===p){return S.indexOf(Q,R)}for(;P<O;P++){if(S[P]===Q){return P}}return -1};N.lastIndexOf=function(S,Q,R){if(S==null){return -1}var O=R!=null;if(n&&S.lastIndexOf===n){return O?S.lastIndexOf(Q,R):S.lastIndexOf(Q)}var P=(O?R:S.length);while(P--){if(S[P]===Q){return P}}return -1};N.range=function(T,R,S){if(arguments.length<=1){R=T||0;T=0}S=arguments[2]||1;var P=Math.max(Math.ceil((R-T)/S),0);var O=0;var Q=new Array(P);while(O<P){Q[O++]=T;T+=S}return Q};N.bind=function(Q,P){if(Q.bind===H&&H){return H.apply(Q,q.call(arguments,1))}var O=q.call(arguments,2);return function(){return Q.apply(P,O.concat(q.call(arguments)))}};N.partial=function(P){var O=q.call(arguments,1);return function(){return P.apply(this,O.concat(q.call(arguments)))}};N.bindAll=function(P){var O=q.call(arguments,1);if(O.length===0){O=N.functions(P)}J(O,function(Q){P[Q]=N.bind(P[Q],P)});return P};N.memoize=function(Q,P){var O={};P||(P=N.identity);return function(){var R=P.apply(this,arguments);return N.has(O,R)?O[R]:(O[R]=Q.apply(this,arguments))}};N.delay=function(P,Q){var O=q.call(arguments,2);return setTimeout(function(){return P.apply(null,O)},Q)};N.defer=function(O){return N.delay.apply(N,[O,1].concat(q.call(arguments,1)))};N.throttle=function(T,V){var R,Q,U,O;var S=0;var P=function(){S=new Date;U=null;O=T.apply(R,Q)};return function(){var W=new Date;var X=V-(W-S);R=this;Q=arguments;if(X<=0){clearTimeout(U);U=null;S=W;O=T.apply(R,Q)}else{if(!U){U=setTimeout(P,X)}}return O}};N.debounce=function(Q,S,P){var R,O;return function(){var W=this,V=arguments;var U=function(){R=null;if(!P){O=Q.apply(W,V)}};var T=P&&!R;clearTimeout(R);R=setTimeout(U,S);if(T){O=Q.apply(W,V)}return O}};N.once=function(Q){var O=false,P;return function(){if(O){return P}O=true;P=Q.apply(this,arguments);Q=null;return P}};N.wrap=function(O,P){return function(){var Q=[O];I.apply(Q,arguments);return P.apply(this,Q)}};N.compose=function(){var O=arguments;return function(){var P=arguments;for(var Q=O.length-1;Q>=0;Q--){P=[O[Q].apply(this,P)]}return P[0]}};N.after=function(P,O){if(P<=0){return O()}return function(){if(--P<1){return O.apply(this,arguments)}}};N.keys=e||function(Q){if(Q!==Object(Q)){throw new TypeError("Invalid object")}var P=[];for(var O in Q){if(N.has(Q,O)){P[P.length]=O}}return P};N.values=function(Q){var O=[];for(var P in Q){if(N.has(Q,P)){O.push(Q[P])}}return O};N.pairs=function(Q){var P=[];for(var O in Q){if(N.has(Q,O)){P.push([O,Q[O]])}}return P};N.invert=function(Q){var O={};for(var P in Q){if(N.has(Q,P)){O[Q[P]]=P}}return O};N.functions=N.methods=function(Q){var P=[];for(var O in Q){if(N.isFunction(Q[O])){P.push(O)}}return P.sort()};N.extend=function(O){J(q.call(arguments,1),function(P){if(P){for(var Q in P){O[Q]=P[Q]}}});return O};N.pick=function(P){var Q={};var O=A.apply(E,q.call(arguments,1));J(O,function(R){if(R in P){Q[R]=P[R]}});return Q};N.omit=function(Q){var R={};var P=A.apply(E,q.call(arguments,1));for(var O in Q){if(!N.contains(P,O)){R[O]=Q[O]}}return R};N.defaults=function(O){J(q.call(arguments,1),function(P){if(P){for(var Q in P){if(O[Q]==null){O[Q]=P[Q]}}}});return O};N.clone=function(O){if(!N.isObject(O)){return O}return N.isArray(O)?O.slice():N.extend({},O)};N.tap=function(P,O){O(P);return P};var K=function(V,U,P,Q){if(V===U){return V!==0||1/V==1/U}if(V==null||U==null){return V===U}if(V instanceof N){V=V._wrapped}if(U instanceof N){U=U._wrapped}var S=d.call(V);if(S!=d.call(U)){return false}switch(S){case"[object String]":return V==String(U);case"[object Number]":return V!=+V?U!=+U:(V==0?1/V==1/U:V==+U);case"[object Date]":case"[object Boolean]":return +V==+U;case"[object RegExp]":return V.source==U.source&&V.global==U.global&&V.multiline==U.multiline&&V.ignoreCase==U.ignoreCase}if(typeof V!="object"||typeof U!="object"){return false}var O=P.length;while(O--){if(P[O]==V){return Q[O]==U}}P.push(V);Q.push(U);var X=0,Y=true;if(S=="[object Array]"){X=V.length;Y=X==U.length;if(Y){while(X--){if(!(Y=K(V[X],U[X],P,Q))){break}}}}else{var T=V.constructor,R=U.constructor;if(T!==R&&!(N.isFunction(T)&&(T instanceof T)&&N.isFunction(R)&&(R instanceof R))){return false}for(var W in V){if(N.has(V,W)){X++;if(!(Y=N.has(U,W)&&K(V[W],U[W],P,Q))){break}}}if(Y){for(W in U){if(N.has(U,W)&&!(X--)){break}}Y=!X}}P.pop();Q.pop();return Y};N.isEqual=function(P,O){return K(P,O,[],[])};N.isEmpty=function(P){if(P==null){return true}if(N.isArray(P)||N.isString(P)){return P.length===0}for(var O in P){if(N.has(P,O)){return false}}return true};N.isElement=function(O){return !!(O&&O.nodeType===1)};N.isArray=w||function(O){return d.call(O)=="[object Array]"};N.isObject=function(O){return O===Object(O)};J(["Arguments","Function","String","Number","Date","RegExp"],function(O){N["is"+O]=function(P){return d.call(P)=="[object "+O+"]"}});if(!N.isArguments(arguments)){N.isArguments=function(O){return !!(O&&N.has(O,"callee"))}}if(typeof(/./)!=="function"){N.isFunction=function(O){return typeof O==="function"}}N.isFinite=function(O){return isFinite(O)&&!isNaN(parseFloat(O))};N.isNaN=function(O){return N.isNumber(O)&&O!=+O};N.isBoolean=function(O){return O===true||O===false||d.call(O)=="[object Boolean]"};N.isNull=function(O){return O===null};N.isUndefined=function(O){return O===void 0};N.has=function(P,O){return l.call(P,O)};N.noConflict=function(){y._=m;return this};N.identity=function(O){return O};N.times=function(S,R,Q){var O=Array(S);for(var P=0;P<S;P++){O[P]=R.call(Q,P)}return O};N.random=function(P,O){if(O==null){O=P;P=0}return P+Math.floor(Math.random()*(O-P+1))};var o={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};o.unescape=N.invert(o.escape);var L={escape:new RegExp("["+N.keys(o.escape).join("")+"]","g"),unescape:new RegExp("("+N.keys(o.unescape).join("|")+")","g")};N.each(["escape","unescape"],function(O){N[O]=function(P){if(P==null){return""}return(""+P).replace(L[O],function(Q){return o[O][Q]})}});N.result=function(O,Q){if(O==null){return null}var P=O[Q];return N.isFunction(P)?P.call(O):P};N.mixin=function(O){J(N.functions(O),function(P){var Q=N[P]=O[P];N.prototype[P]=function(){var R=[this._wrapped];I.apply(R,arguments);return u.call(this,Q.apply(N,R))}})};var B=0;N.uniqueId=function(O){var P=++B+"";return O?O+P:P};N.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var x=/(.)^/;var j={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var k=/\\|'|\r|\n|\t|\u2028|\u2029/g;N.template=function(W,R,Q){var P;Q=N.defaults({},Q,N.templateSettings);var S=new RegExp([(Q.escape||x).source,(Q.interpolate||x).source,(Q.evaluate||x).source].join("|")+"|$","g");var T=0;var O="__p+='";W.replace(S,function(Y,Z,X,ab,aa){O+=W.slice(T,aa).replace(k,function(ac){return"\\"+j[ac]});if(Z){O+="'+\n((__t=("+Z+"))==null?'':_.escape(__t))+\n'"}if(X){O+="'+\n((__t=("+X+"))==null?'':__t)+\n'"}if(ab){O+="';\n"+ab+"\n__p+='"}T=aa+Y.length;return Y});O+="';\n";if(!Q.variable){O="with(obj||{}){\n"+O+"}\n"}O="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+O+"return __p;\n";try{P=new Function(Q.variable||"obj","_",O)}catch(U){U.source=O;throw U}if(R){return P(R,N)}var V=function(X){return P.call(this,X,N)};V.source="function("+(Q.variable||"obj")+"){\n"+O+"}";return V};N.chain=function(O){return N(O).chain()};var u=function(O){return this._chain?N(O).chain():O};N.mixin(N);J(["pop","push","reverse","shift","sort","splice","unshift"],function(O){var P=E[O];N.prototype[O]=function(){var Q=this._wrapped;P.apply(Q,arguments);if((O=="shift"||O=="splice")&&Q.length===0){delete Q[0]}return u.call(this,Q)}});J(["concat","join","slice"],function(O){var P=E[O];N.prototype[O]=function(){return u.call(this,P.apply(this._wrapped,arguments))}});N.extend(N.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(a){a.Parse=a.Parse||{};var c=a.Parse;if(typeof(exports)!=="undefined"&&exports._){c._=exports._.noConflict();c.localStorage=require("localStorage");c.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;exports.Parse=c}else{c._=_.noConflict();if(typeof(localStorage)!=="undefined"){c.localStorage=localStorage}if(typeof(XMLHttpRequest)!=="undefined"){c.XMLHttpRequest=XMLHttpRequest}}if(typeof($)!=="undefined"){c.$=$}var b=function(){};var d=function(f,e,h){var j;if(e&&e.hasOwnProperty("constructor")){j=e.constructor}else{j=function(){f.apply(this,arguments)}}c._.extend(j,f);b.prototype=f.prototype;j.prototype=new b();if(e){c._.extend(j.prototype,e)}if(h){c._.extend(j,h)}j.prototype.constructor=j;j.__super__=f.prototype;return j};c.serverURL="https://api.parse.com";if(typeof(process)!=="undefined"&&process.versions&&process.versions.node){c._isNode=true}c.initialize=function(h,f,e){if(e){throw"Parse.initialize() was passed a Master Key, which is only allowed from within Node.js."}c._initialize(h,f)};c._initialize=function(h,f,e){c.applicationId=h;c.javaScriptKey=f;c.masterKey=e;c._useMasterKey=false};if(c._isNode){c.initialize=c._initialize;c.Cloud=c.Cloud||{};c.Cloud.useMasterKey=function(){c._useMasterKey=true}}c._getParsePath=function(e){if(!c.applicationId){throw"You need to call Parse.initialize before using Parse."}if(!e){e=""}if(!c._.isString(e)){throw"Tried to get a localStorage path that wasn't a String."}if(e[0]==="/"){e=e.substring(1)}return"Parse/"+c.applicationId+"/"+e};c._installationId=null;c._getInstallationId=function(){if(c._installationId){return c._installationId}var f=c._getParsePath("installationId");c._installationId=c.localStorage.getItem(f);if(!c._installationId||c._installationId===""){var e=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};c._installationId=(e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e());c.localStorage.setItem(f,c._installationId)}return c._installationId};c._parseDate=function(p){var m=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$");var k=m.exec(p);if(!k){return null}var n=k[1]||0;var l=(k[2]||1)-1;var o=k[3]||0;var h=k[4]||0;var f=k[5]||0;var e=k[6]||0;var j=k[8]||0;return new Date(Date.UTC(n,l,o,h,f,e,j))};c._ajaxIE8=function(k,f,h){var j=new c.Promise();var e=new XDomainRequest();e.onload=function(){var l;try{l=JSON.parse(e.responseText)}catch(m){j.reject(m)}if(l){j.resolve(l)}};e.onerror=e.ontimeout=function(){j.reject(e)};e.onprogress=function(){};e.open(k,f);e.send(h);return j};c._ajax=function(e,f,h,l,k){var o={success:l,error:k};if(typeof(XDomainRequest)!=="undefined"){return c._ajaxIE8(e,f,h)._thenRunCallbacks(o)}var n=new c.Promise();var j=false;var m=new c.XMLHttpRequest();m.onreadystatechange=function(){if(m.readyState===4){if(j){return}j=true;if(m.status>=200&&m.status<300){var p;try{p=JSON.parse(m.responseText)}catch(q){n.reject(q)}if(p){n.resolve(p,m.status,m)}}else{n.reject(m)}}};m.open(e,f,true);m.setRequestHeader("Content-Type","text/plain");if(c._isNode){m.setRequestHeader("User-Agent","Parse/"+c.VERSION+" (NodeJS "+process.versions.node+")")}m.send(h);return n._thenRunCallbacks(o)};c._extend=function(e,f){var h=d(this,e,f);h.extend=this.extend;return h};c._request=function(p){var o=p.route;var m=p.className;var n=p.objectId;var e=p.method;var h=p.useMasterKey;var k=p.data;if(!c.applicationId){throw"You must specify your applicationId using Parse.initialize."}if(!c.javaScriptKey&&!c.masterKey){throw"You must specify a key using Parse.initialize."}if(o!=="batch"&&o!=="classes"&&o!=="events"&&o!=="files"&&o!=="functions"&&o!=="login"&&o!=="push"&&o!=="requestPasswordReset"&&o!=="users"&&o!=="jobs"){throw"Bad route: '"+o+"'."}var f=c.serverURL;if(f.charAt(f.length-1)!=="/"){f+="/"}f+="1/"+o;if(m){f+="/"+m}if(n){f+="/"+n}k=c._.clone(k||{});if(e!=="POST"){k._method=e;e="POST"}if(c._.isUndefined(h)){h=c._useMasterKey}k._ApplicationId=c.applicationId;if(!h){k._JavaScriptKey=c.javaScriptKey}else{k._MasterKey=c.masterKey}k._ClientVersion=c.VERSION;k._InstallationId=c._getInstallationId();var j=c.User.current();if(j&&j._sessionToken){k._SessionToken=j._sessionToken}var l=JSON.stringify(k);return c._ajax(e,f,l).then(null,function(q){var s;if(q&&q.responseText){try{var r=JSON.parse(q.responseText);if(r){s=new c.Error(r.code,r.error)}}catch(t){}}s=s||new c.Error(-1,q.responseText);return c.Promise.error(s)})};c._getValue=function(e,f){if(!(e&&e[f])){return null}return c._.isFunction(e[f])?e[f]():e[f]};c._encode=function(k,j,h){var f=c._;if(k instanceof c.Object){if(h){throw"Parse.Objects not allowed here"}if(!j||f.include(j,k)||!k._hasData){return k._toPointer()}if(!k.dirty()){j=j.concat(k);return c._encode(k._toFullJSON(j),j,h)}throw"Tried to save an object with a pointer to a new, unsaved object."}if(k instanceof c.ACL){return k.toJSON()}if(f.isDate(k)){return{__type:"Date",iso:k.toJSON()}}if(k instanceof c.GeoPoint){return k.toJSON()}if(f.isArray(k)){return f.map(k,function(l){return c._encode(l,j,h)})}if(f.isRegExp(k)){return k.source}if(k instanceof c.Relation){return k.toJSON()}if(k instanceof c.Op){return k.toJSON()}if(k instanceof c.File){if(!k.url()){throw"Tried to save an object containing an unsaved file."}return{__type:"File",name:k.name(),url:k.url()}}if(f.isObject(k)){var e={};c._objectEach(k,function(m,l){e[l]=c._encode(m,j,h)});return e}return k};c._decode=function(j,m){var f=c._;if(!f.isObject(m)){return m}if(f.isArray(m)){c._arrayEach(m,function(p,o){m[o]=c._decode(o,p)});return m}if(m instanceof c.Object){return m}if(m instanceof c.File){return m}if(m instanceof c.Op){return m}if(m.__op){return c.Op._decode(m)}if(m.__type==="Pointer"){var n=c.Object._create(m.className);n._finishFetch({objectId:m.objectId},false);return n}if(m.__type==="Object"){var k=m.className;delete m.__type;delete m.className;var e=c.Object._create(k);e._finishFetch(m,true);return e}if(m.__type==="Date"){return c._parseDate(m.iso)}if(m.__type==="GeoPoint"){return new c.GeoPoint({latitude:m.latitude,longitude:m.longitude})}if(j==="ACL"){if(m instanceof c.ACL){return m}return new c.ACL(m)}if(m.__type==="Relation"){var l=new c.Relation(null,j);l.targetClassName=m.className;return l}if(m.__type==="File"){var h=new c.File(m.name);h._url=m.url;return h}c._objectEach(m,function(p,o){m[o]=c._decode(o,p)});return m};c._arrayEach=c._.each;c._traverse=function(f,h,e){if(f instanceof c.Object){e=e||[];if(c._.indexOf(e,f)>=0){return}e.push(f);c._traverse(f.attributes,h,e);return h(f)}if(f instanceof c.Relation||f instanceof c.File){return h(f)}if(c._.isArray(f)){c._.each(f,function(l,k){var j=c._traverse(l,h,e);if(j){f[k]=j}});return h(f)}if(c._.isObject(f)){c._each(f,function(l,k){var j=c._traverse(l,h,e);if(j){f[k]=j}});return h(f)}return h(f)};c._objectEach=c._each=function(f,h){var e=c._;if(e.isObject(f)){e.each(e.keys(f),function(j){h(f[j],j)})}else{e.each(f,h)}};c._isNullOrUndefined=function(e){return c._.isNull(e)||c._.isUndefined(e)}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Analytics=c.Analytics||{};b.extend(c.Analytics,{track:function(d,e){if(!d||d.trim().length===0){throw"A name for the custom event must be provided"}b.each(e,function(h,f){if(!b.isString(f)||!b.isString(h)){throw'track() dimensions expects keys and values of type "string".'}});return c._request({route:"events",className:d,method:"POST",data:{dimensions:e}})}})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Error=function(e,d){this.code=e;this.message=d};b.extend(c.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,AGGREGATE_ERROR:600})}(this));(function(){var a=this;var c=(a.Parse||(a.Parse={}));var b=/\s+/;var d=Array.prototype.slice;c.Events={on:function(j,n,h){var f,l,k,e,m;if(!n){return this}j=j.split(b);f=this._callbacks||(this._callbacks={});l=j.shift();while(l){m=f[l];k=m?m.tail:{};k.next=e={};k.context=h;k.callback=n;f[l]={tail:e,next:m?m.next:k};l=j.shift()}return this},off:function(n,l,f){var e,o,h,k,j,m;if(!(o=this._callbacks)){return}if(!(n||l||f)){delete this._callbacks;return this}n=n?n.split(b):_.keys(o);e=n.shift();while(e){h=o[e];delete o[e];if(!h||!(l||f)){continue}k=h.tail;h=h.next;while(h!==k){j=h.callback;m=h.context;if((l&&j!==l)||(f&&m!==f)){this.on(e,j,m)}h=h.next}e=n.shift()}return this},trigger:function(j){var n,m,h,f,e,l,k;if(!(h=this._callbacks)){return this}l=h.all;j=j.split(b);k=d.call(arguments,1);n=j.shift();while(n){m=h[n];if(m){f=m.tail;while((m=m.next)!==f){m.callback.apply(m.context||this,k)}}m=l;if(m){f=m.tail;e=[n].concat(k);while((m=m.next)!==f){m.callback.apply(m.context||this,e)}}n=j.shift()}return this}};c.Events.bind=c.Events.on;c.Events.unbind=c.Events.off}.call(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.GeoPoint=function(f,e){if(b.isArray(f)){c.GeoPoint._validate(f[0],f[1]);this.latitude=f[0];this.longitude=f[1]}else{if(b.isObject(f)){c.GeoPoint._validate(f.latitude,f.longitude);this.latitude=f.latitude;this.longitude=f.longitude}else{if(b.isNumber(f)&&b.isNumber(e)){c.GeoPoint._validate(f,e);this.latitude=f;this.longitude=e}else{this.latitude=0;this.longitude=0}}}var d=this;if(this.__defineGetter__&&this.__defineSetter__){this._latitude=this.latitude;this._longitude=this.longitude;this.__defineGetter__("latitude",function(){return d._latitude});this.__defineGetter__("longitude",function(){return d._longitude});this.__defineSetter__("latitude",function(h){c.GeoPoint._validate(h,d.longitude);d._latitude=h});this.__defineSetter__("longitude",function(h){c.GeoPoint._validate(d.latitude,h);d._longitude=h})}};c.GeoPoint._validate=function(e,d){if(e<-90){throw"Parse.GeoPoint latitude "+e+" < -90.0."}if(e>90){throw"Parse.GeoPoint latitude "+e+" > 90.0."}if(d<-180){throw"Parse.GeoPoint longitude "+d+" < -180.0."}if(d>180){throw"Parse.GeoPoint longitude "+d+" > 180.0."}};c.GeoPoint.current=function(d){var e=new c.Promise();navigator.geolocation.getCurrentPosition(function(f){e.resolve(new c.GeoPoint({latitude:f.coords.latitude,longitude:f.coords.longitude}))},function(f){e.reject(f)});return e._thenRunCallbacks(d)};c.GeoPoint.prototype={toJSON:function(){c.GeoPoint._validate(this.latitude,this.longitude);return{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(p){var j=Math.PI/180;var d=this.latitude*j;var l=this.longitude*j;var o=p.latitude*j;var h=p.longitude*j;var f=d-o;var k=l-h;var e=Math.sin(f/2);var m=Math.sin(k/2);var n=((e*e)+(Math.cos(d)*Math.cos(o)*m*m));n=Math.min(1,n);return 2*Math.asin(Math.sqrt(n))},kilometersTo:function(d){return this.radiansTo(d)*6371},milesTo:function(d){return this.radiansTo(d)*3958.8}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;var b="*";d.ACL=function(f){var e=this;e.permissionsById={};if(c.isObject(f)){if(f instanceof d.User){e.setReadAccess(f,true);e.setWriteAccess(f,true)}else{if(c.isFunction(f)){throw"Parse.ACL() called with a function.  Did you forget ()?"}d._objectEach(f,function(j,h){if(!c.isString(h)){throw"Tried to create an ACL with an invalid userId."}e.permissionsById[h]={};d._objectEach(j,function(l,k){if(k!=="read"&&k!=="write"){throw"Tried to create an ACL with an invalid permission type."}if(!c.isBoolean(l)){throw"Tried to create an ACL with an invalid permission value."}e.permissionsById[h][k]=l})})}}};d.ACL.prototype.toJSON=function(){return c.clone(this.permissionsById)};d.ACL.prototype._setAccess=function(e,f,j){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}if(!c.isString(f)){throw"userId must be a string."}if(!c.isBoolean(j)){throw"allowed must be either true or false."}var h=this.permissionsById[f];if(!h){if(!j){return}else{h={};this.permissionsById[f]=h}}if(j){this.permissionsById[f][e]=true}else{delete h[e];if(c.isEmpty(h)){delete h[f]}}};d.ACL.prototype._getAccess=function(e,f){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}var h=this.permissionsById[f];if(!h){return false}return h[e]?true:false};d.ACL.prototype.setReadAccess=function(e,f){this._setAccess("read",e,f)};d.ACL.prototype.getReadAccess=function(e){return this._getAccess("read",e)};d.ACL.prototype.setWriteAccess=function(e,f){this._setAccess("write",e,f)};d.ACL.prototype.getWriteAccess=function(e){return this._getAccess("write",e)};d.ACL.prototype.setPublicReadAccess=function(e){this.setReadAccess(b,e)};d.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(b)};d.ACL.prototype.setPublicWriteAccess=function(e){this.setWriteAccess(b,e)};d.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(b)};d.ACL.prototype.getRoleReadAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getReadAccess("role:"+e)}throw"role must be a Parse.Role or a String"};d.ACL.prototype.getRoleWriteAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getWriteAccess("role:"+e)}throw"role must be a Parse.Role or a String"};d.ACL.prototype.setRoleReadAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setReadAccess("role:"+f,e);return}throw"role must be a Parse.Role or a String"};d.ACL.prototype.setRoleWriteAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setWriteAccess("role:"+f,e);return}throw"role must be a Parse.Role or a String"}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Op=function(){this._initialize.apply(this,arguments)};c.Op.prototype={_initialize:function(){}};b.extend(c.Op,{_extend:c._extend,_opDecoderMap:{},_registerDecoder:function(d,e){c.Op._opDecoderMap[d]=e},_decode:function(d){var e=c.Op._opDecoderMap[d.__op];if(e){return e(d)}else{return undefined}}});c.Op._registerDecoder("Batch",function(d){var e=null;c._arrayEach(d.ops,function(f){f=c.Op._decode(f);e=f._mergeWithPrevious(e)});return e});c.Op.Set=c.Op._extend({_initialize:function(d){this._value=d},value:function(){return this._value},toJSON:function(){return c._encode(this.value())},_mergeWithPrevious:function(d){return this},_estimate:function(d){return this.value()}});c.Op._UNSET={};c.Op.Unset=c.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(d){return this},_estimate:function(d){return c.Op._UNSET}});c.Op._registerDecoder("Delete",function(d){return new c.Op.Unset()});c.Op.Increment=c.Op._extend({_initialize:function(d){this._amount=d},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.amount())}else{if(d instanceof c.Op.Set){return new c.Op.Set(d.value()+this.amount())}else{if(d instanceof c.Op.Increment){return new c.Op.Increment(this.amount()+d.amount())}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return this.amount()}return d+this.amount()}});c.Op._registerDecoder("Increment",function(d){return new c.Op.Increment(d.amount)});c.Op.Add=c.Op._extend({_initialize:function(d){this._objects=d},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Add){return new c.Op.Add(d.objects().concat(this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{return d.concat(this.objects())}}});c.Op._registerDecoder("Add",function(d){return new c.Op.Add(c._decode(undefined,d.objects))});c.Op.AddUnique=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.AddUnique){return new c.Op.AddUnique(this._estimate(d.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{var e=b.clone(d);c._arrayEach(this.objects(),function(j){if(j instanceof c.Object&&j.id){var h=b.find(e,function(k){return(k instanceof c.Object)&&(k.id===j.id)});if(!h){e.push(j)}else{var f=b.indexOf(e,h);e[f]=j}}else{if(!b.contains(e,j)){e.push(j)}}});return e}}});c.Op._registerDecoder("AddUnique",function(d){return new c.Op.AddUnique(c._decode(undefined,d.objects))});c.Op.Remove=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return d}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Remove){return new c.Op.Remove(b.union(d.objects(),this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return[]}else{var e=b.difference(d,this.objects());c._arrayEach(this.objects(),function(f){if(f instanceof c.Object&&f.id){e=b.reject(e,function(h){return(h instanceof c.Object)&&(h.id===f.id)})}});return e}}});c.Op._registerDecoder("Remove",function(d){return new c.Op.Remove(c._decode(undefined,d.objects))});c.Op.Relation=c.Op._extend({_initialize:function(h,e){this._targetClassName=null;var d=this;var f=function(j){if(j instanceof c.Object){if(!j.id){throw"You can't add an unsaved Parse.Object to a relation."}if(!d._targetClassName){d._targetClassName=j.className}if(d._targetClassName!==j.className){throw"Tried to create a Parse.Relation with 2 different types: "+d._targetClassName+" and "+j.className+"."}return j.id}return j};this.relationsToAdd=b.uniq(b.map(h,f));this.relationsToRemove=b.uniq(b.map(e,f))},added:function(){var d=this;return b.map(this.relationsToAdd,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},removed:function(){var d=this;return b.map(this.relationsToRemove,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},toJSON:function(){var j=null;var f=null;var e=this;var h=function(k){return{__type:"Pointer",className:e._targetClassName,objectId:k}};var d=null;if(this.relationsToAdd.length>0){d=b.map(this.relationsToAdd,h);j={__op:"AddRelation",objects:d}}if(this.relationsToRemove.length>0){d=b.map(this.relationsToRemove,h);f={__op:"RemoveRelation",objects:d}}if(j&&f){return{__op:"Batch",ops:[j,f]}}return j||f||{}},_mergeWithPrevious:function(h){if(!h){return this}else{if(h instanceof c.Op.Unset){throw"You can't modify a relation after deleting it."}else{if(h instanceof c.Op.Relation){if(h._targetClassName&&h._targetClassName!==this._targetClassName){throw"Related object must be of class "+h._targetClassName+", but "+this._targetClassName+" was passed in."}var f=b.union(b.difference(h.relationsToAdd,this.relationsToRemove),this.relationsToAdd);var e=b.union(b.difference(h.relationsToRemove,this.relationsToAdd),this.relationsToRemove);var d=new c.Op.Relation(f,e);d._targetClassName=this._targetClassName;return d}else{throw"Op is invalid after previous op."}}}},_estimate:function(e,d,f){if(!e){var h=new c.Relation(d,f);h.targetClassName=this._targetClassName}else{if(e instanceof c.Relation){if(this._targetClassName){if(e.targetClassName){if(e.targetClassName!==this._targetClassName){throw"Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in."}}else{e.targetClassName=this._targetClassName}}return e}else{throw"Op is invalid after previous op."}}}});c.Op._registerDecoder("AddRelation",function(d){return new c.Op.Relation(c._decode(undefined,d.objects),[])});c.Op._registerDecoder("RemoveRelation",function(d){return new c.Op.Relation([],c._decode(undefined,d.objects))})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Relation=function(e,d){this.parent=e;this.key=d;this.targetClassName=null};c.Relation.prototype={_ensureParentAndKey:function(e,d){this.parent=this.parent||e;this.key=this.key||d;if(this.parent!==e){throw"Internal Error. Relation retrieved from two different Objects."}if(this.key!==d){throw"Internal Error. Relation retrieved from two different keys."}},add:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation(d,[]);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},remove:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation([],d);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var d;var e;if(!this.targetClassName){d=c.Object._getSubclass(this.parent.className);e=new c.Query(d);e._extraOptions.redirectClassNameForKey=this.key}else{d=c.Object._getSubclass(this.targetClassName);e=new c.Query(d)}e._addCondition("$relatedTo","object",this.parent._toPointer());e._addCondition("$relatedTo","key",this.key);return e}}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Promise=function(){this._resolved=false;this._rejected=false;this._resolvedCallbacks=[];this._rejectedCallbacks=[]};b.extend(c.Promise,{is:function(d){return d&&d.then&&b.isFunction(d.then)},as:function(){var d=new c.Promise();d.resolve.apply(d,arguments);return d},error:function(){var d=new c.Promise();d.reject.apply(d,arguments);return d},when:function(h){var k;if(h&&c._isNullOrUndefined(h.length)){k=arguments}else{k=h}var j=k.length;var e=false;var f=[];var m=[];f.length=k.length;m.length=k.length;if(j===0){return c.Promise.as.apply(this,f)}var l=new c.Promise();var d=function(){j=j-1;if(j===0){if(e){l.reject(m)}else{l.resolve.apply(l,f)}}};c._arrayEach(k,function(n,o){if(c.Promise.is(n)){n.then(function(p){f[o]=p;d()},function(p){m[o]=p;e=true;d()})}else{f[o]=n;d()}});return l},_continueWhile:function(d,e){if(d()){return e().then(function(){return c.Promise._continueWhile(d,e)})}return c.Promise.as()}});b.extend(c.Promise.prototype,{resolve:function(d){if(this._resolved||this._rejected){throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._resolved=true;this._result=arguments;var e=arguments;c._arrayEach(this._resolvedCallbacks,function(f){f.apply(this,e)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},reject:function(d){if(this._resolved||this._rejected){throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._rejected=true;this._error=d;c._arrayEach(this._rejectedCallbacks,function(e){e(d)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},then:function(d,f){var h=new c.Promise();var j=function(){var k=arguments;if(d){k=[d.apply(this,k)]}if(k.length===1&&c.Promise.is(k[0])){k[0].then(function(){h.resolve.apply(h,arguments)},function(l){h.reject(l)})}else{h.resolve.apply(h,k)}};var e=function(l){var k=[];if(f){k=[f(l)];if(k.length===1&&c.Promise.is(k[0])){k[0].then(function(){h.resolve.apply(h,arguments)},function(m){h.reject(m)})}else{h.reject(k[0])}}else{h.reject(l)}};if(this._resolved){j.apply(this,this._result)}else{if(this._rejected){e(this._error)}else{this._resolvedCallbacks.push(j);this._rejectedCallbacks.push(e)}}return h},_thenRunCallbacks:function(f,e){var d;if(b.isFunction(f)){var h=f;d={success:function(j){h(j,null)},error:function(j){h(null,j)}}}else{d=b.clone(f)}d=d||{};return this.then(function(j){if(d.success){d.success.apply(this,arguments)}else{if(e){e.trigger("sync",e,j,d)}}return c.Promise.as.apply(c.Promise,arguments)},function(j){if(d.error){if(!b.isUndefined(e)){d.error(e,j)}else{d.error(j)}}else{if(e){e.trigger("error",e,j,d)}}return c.Promise.error(j)})},_continueWith:function(d){return this.then(function(){return d(arguments,null)},function(e){return d(null,e)})}})}(this));(function(b){b.Parse=b.Parse||{};var e=b.Parse;var d=e._;var c=function(j){if(j<26){return String.fromCharCode(65+j)}if(j<52){return String.fromCharCode(97+(j-26))}if(j<62){return String.fromCharCode(48+(j-52))}if(j===62){return"+"}if(j===63){return"/"}throw"Tried to encode large digit "+j+" in base64."};var a=function(k){var j=[];j.length=Math.ceil(k.length/3);d.times(j.length,function(o){var n=k[o*3];var m=k[o*3+1]||0;var l=k[o*3+2]||0;var q=(o*3+1)<k.length;var p=(o*3+2)<k.length;j[o]=[c((n>>2)&63),c(((n<<4)&48)|((m>>4)&15)),q?c(((m<<2)&60)|((l>>6)&3)):"=",p?c(l&63):"="].join("")});return j.join("")};var h={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};var f=function(k,l){var m=new e.Promise();if(typeof(FileReader)==="undefined"){return e.Promise.error(new e.Error(-1,"Attempted to use a FileReader on an unsupported browser."))}var j=new FileReader();j.onloadend=function(){if(j.readyState!==2){m.reject(new e.Error(-1,"Error reading file."));return}var o=j.result;var n=/^data:([^;]*);base64,(.*)$/.exec(o);if(!n){m.reject(new e.Error(-1,"Unable to interpret data URL: "+o));return}m.resolve(n[2],l||n[1])};j.readAsDataURL(k);return m};e.File=function(j,l,k){this._name=j;var n=/\.([^.]*)$/.exec(j);if(n){n=n[1].toLowerCase()}var m=k||h[n]||"text/plain";if(d.isArray(l)){this._source=e.Promise.as(a(l),m)}else{if(l&&l.base64){this._source=e.Promise.as(l.base64,m)}else{if(typeof(File)!=="undefined"&&l instanceof File){this._source=f(l,k)}else{if(d.isString(l)){throw"Creating a Parse.File from a String is not yet supported."}}}}};e.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(k){k=k||{};var j=this;if(!j._previousSave){j._previousSave=j._source.then(function(l,m){var n={base64:l,_ContentType:m};return e._request({route:"files",className:j._name,method:"POST",data:n,useMasterKey:k.useMasterKey})}).then(function(l){j._name=l.name;j._url=l.url;return j})}return j._previousSave._thenRunCallbacks(k)}}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Object=function(d,e){if(b.isString(d)){return c.Object._create.apply(this,arguments)}d=d||{};if(e&&e.parse){d=this.parse(d)}var f=c._getValue(this,"defaults");if(f){d=b.extend({},f,d)}if(e&&e.collection){this.collection=e.collection}this._serverData={};this._opSetQueue=[{}];this.attributes={};this._hashedJSON={};this._escapedAttributes={};this.cid=b.uniqueId("c");this.changed={};this._silent={};this._pending={};if(!this.set(d,{silent:true})){throw new Error("Can't create an invalid Parse.Object")}this.changed={};this._silent={};this._pending={};this._hasData=true;this._previousAttributes=b.clone(this.attributes);this.initialize.apply(this,arguments)};c.Object.saveAll=function(e,d){d=d||{};return c.Object._deepSaveAsync(e,{useMasterKey:d.useMasterKey})._thenRunCallbacks(d)};c.Object.destroyAll=function(h,f){f=f||{};var k=function(m){m.trigger("destroy",m,m.collection,f)};var l=[];var d=function(m){var n=c.Promise.as();if(m.length>0){n=n.then(function(){return c._request({route:"batch",method:"POST",useMasterKey:f.useMasterKey,data:{requests:b.map(m,function(o){return{method:"DELETE",path:"/1/classes/"+o.className+"/"+o.id}})}})}).then(function(p,o,q){c._arrayEach(m,function(s,t){if(p[t].success&&f.wait){k(s)}else{if(p[t].error){var r=new c.Error(p[t].error.code,p[t].error.error);r.object=s;l.push(r)}}})})}return n};var j=c.Promise.as();var e=[];c._arrayEach(h,function(m,n){if(!m.id||!f.wait){k(m)}if(m.id){e.push(m)}if(e.length===20||n+1===h.length){var o=e;e=[];j=j.then(function(){return d(o)})}});return j.then(function(){if(l.length===0){return true}else{var m=new c.Error(c.Error.AGGREGATE_ERROR,"Error deleting an object in destroyAll");m.errors=l;return c.Promise.error(m)}})._thenRunCallbacks(f)};b.extend(c.Object.prototype,c.Events,{_existed:false,initialize:function(){},toJSON:function(){var d=this._toFullJSON();c._arrayEach(["__type","className"],function(e){delete d[e]});return d},_toFullJSON:function(e){var d=b.clone(this.attributes);c._objectEach(d,function(h,f){d[f]=c._encode(h,e)});c._objectEach(this._operations,function(h,f){d[f]=h});if(b.has(this,"id")){d.objectId=this.id}if(b.has(this,"createdAt")){if(b.isDate(this.createdAt)){d.createdAt=this.createdAt.toJSON()}else{d.createdAt=this.createdAt}}if(b.has(this,"updatedAt")){if(b.isDate(this.updatedAt)){d.updatedAt=this.updatedAt.toJSON()}else{d.updatedAt=this.updatedAt}}d.__type="Object";d.className=this.className;return d},_refreshCache:function(){var d=this;if(d._refreshingCache){return}d._refreshingCache=true;c._objectEach(this.attributes,function(f,e){if(f instanceof c.Object){f._refreshCache()}else{if(b.isObject(f)){if(d._resetCacheForKey(e)){d.set(e,new c.Op.Set(f),{silent:true})}}}});delete d._refreshingCache},dirty:function(d){this._refreshCache();var e=b.last(this._opSetQueue);if(d){return(e[d]?true:false)}if(!this.id){return true}if(b.keys(e).length>0){return true}return false},_toPointer:function(){if(!this.id){throw new Error("Can't serialize an unsaved Parse.Object")}return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(d){return this.attributes[d]},relation:function(d){var e=this.get(d);if(e){if(!(e instanceof c.Relation)){throw"Called relation() on non-relation field "+d}e._ensureParentAndKey(this,d);return e}else{return new c.Relation(this,d)}},escape:function(d){var e=this._escapedAttributes[d];if(e){return e}var h=this.attributes[d];var f;if(c._isNullOrUndefined(h)){f=""}else{f=b.escape(h.toString())}this._escapedAttributes[d]=f;return f},has:function(d){return !c._isNullOrUndefined(this.attributes[d])},_mergeMagicFields:function(e){var d=this;var f=["id","objectId","createdAt","updatedAt"];c._arrayEach(f,function(h){if(e[h]){if(h==="objectId"){d.id=e[h]}else{if((h==="createdAt"||h==="updatedAt")&&!b.isDate(e[h])){d[h]=c._parseDate(e[h])}else{d[h]=e[h]}}delete e[h]}})},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var e=this;var d=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);var f=b.first(this._opSetQueue);c._objectEach(d,function(l,j){var k=d[j];var h=f[j];if(k&&h){f[j]=h._mergeWithPrevious(k)}else{if(k){f[j]=k}}});this._saving=this._saving-1},_finishSave:function(f){var d={};c._traverse(this.attributes,function(j){if(j instanceof c.Object&&j.id&&j._hasData){d[j.id]=j}});var h=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);this._applyOpSet(h,this._serverData);this._mergeMagicFields(f);var e=this;c._objectEach(f,function(k,j){e._serverData[j]=c._decode(j,k);var l=c._traverse(e._serverData[j],function(m){if(m instanceof c.Object&&d[m.id]){return d[m.id]}});if(l){e._serverData[j]=l}});this._rebuildAllEstimatedData();this._saving=this._saving-1},_finishFetch:function(f,e){this._opSetQueue=[{}];this._mergeMagicFields(f);var d=this;c._objectEach(f,function(j,h){d._serverData[h]=c._decode(h,j)});this._rebuildAllEstimatedData();this._refreshCache();this._opSetQueue=[{}];this._hasData=e},_applyOpSet:function(e,f){var d=this;c._objectEach(e,function(j,h){f[h]=j._estimate(f[h],d,h);if(f[h]===c.Op._UNSET){delete f[h]}})},_resetCacheForKey:function(e){var f=this.attributes[e];if(b.isObject(f)&&!(f instanceof c.Object)&&!(f instanceof c.File)){f=f.toJSON?f.toJSON():f;var d=JSON.stringify(f);if(this._hashedJSON[e]!==d){this._hashedJSON[e]=d;return true}}return false},_rebuildEstimatedDataForKey:function(e){var d=this;delete this.attributes[e];if(this._serverData[e]){this.attributes[e]=this._serverData[e]}c._arrayEach(this._opSetQueue,function(f){var h=f[e];if(h){d.attributes[e]=h._estimate(d.attributes[e],d,e);if(d.attributes[e]===c.Op._UNSET){delete d.attributes[e]}else{d._resetCacheForKey(e)}}})},_rebuildAllEstimatedData:function(){var d=this;var e=b.clone(this.attributes);this.attributes=b.clone(this._serverData);c._arrayEach(this._opSetQueue,function(f){d._applyOpSet(f,d.attributes);c._objectEach(f,function(j,h){d._resetCacheForKey(h)})});c._objectEach(e,function(f,h){if(d.attributes[h]!==f){d.trigger("change:"+h,d,d.attributes[h],{})}});c._objectEach(this.attributes,function(h,f){if(!b.has(e,f)){d.trigger("change:"+f,d,h,{})}})},set:function(k,j,n){var l,h;if(b.isObject(k)||c._isNullOrUndefined(k)){l=k;c._objectEach(l,function(p,o){l[o]=c._decode(o,p)});n=j}else{l={};l[k]=c._decode(k,j)}n=n||{};if(!l){return this}if(l instanceof c.Object){l=l.attributes}if(n.unset){c._objectEach(l,function(o,p){l[p]=new c.Op.Unset()})}var f=b.clone(l);var m=this;c._objectEach(f,function(p,o){if(p instanceof c.Op){f[o]=p._estimate(m.attributes[o],m,o);if(f[o]===c.Op._UNSET){delete f[o]}}});if(!this._validate(l,n)){return false}this._mergeMagicFields(l);n.changes={};var d=this._escapedAttributes;var e=this._previousAttributes||{};c._arrayEach(b.keys(l),function(p){var r=l[p];if(r instanceof c.Relation){r.parent=m}if(!(r instanceof c.Op)){r=new c.Op.Set(r)}var o=true;if(r instanceof c.Op.Set&&b.isEqual(m.attributes[p],r.value)){o=false}if(o){delete d[p];if(n.silent){m._silent[p]=true}else{n.changes[p]=true}}var q=b.last(m._opSetQueue);q[p]=r._mergeWithPrevious(q[p]);m._rebuildEstimatedDataForKey(p);if(o){m.changed[p]=m.attributes[p];if(!n.silent){m._pending[p]=true}}else{delete m.changed[p];delete m._pending[p]}});if(!n.silent){this.change(n)}return this},unset:function(d,e){e=e||{};e.unset=true;return this.set(d,null,e)},increment:function(d,e){if(b.isUndefined(e)||b.isNull(e)){e=1}return this.set(d,new c.Op.Increment(e))},add:function(d,e){return this.set(d,new c.Op.Add([e]))},addUnique:function(d,e){return this.set(d,new c.Op.AddUnique([e]))},remove:function(d,e){return this.set(d,new c.Op.Remove([e]))},op:function(d){return b.last(this._opSetQueue)[d]},clear:function(d){d=d||{};d.unset=true;var e=b.extend(this.attributes,this._operations);return this.set(e,d)},_getSaveJSON:function(){var d=b.clone(b.first(this._opSetQueue));c._objectEach(d,function(f,e){d[e]=f.toJSON()});return d},_canBeSerialized:function(){return c.Object._canBeSerializedAsValue(this.attributes)},fetch:function(e){var d=this;e=e||{};var f=c._request({method:"GET",route:"classes",className:this.className,objectId:this.id,useMasterKey:e.useMasterKey});return f.then(function(j,h,k){d._finishFetch(d.parse(j,h,k),true);return d})._thenRunCallbacks(e,this)},save:function(l,k,h){var f,q,m,t,p;if(b.isObject(l)||c._isNullOrUndefined(l)){q=l;t=k}else{q={};q[l]=k;t=h}if(!t&&q){var r=b.reject(q,function(v,u){return b.include(["success","error","wait"],u)});if(r.length===0){var s=true;if(b.has(q,"success")&&!b.isFunction(q.success)){s=false}if(b.has(q,"error")&&!b.isFunction(q.error)){s=false}if(s){return this.save(null,q)}}}t=b.clone(t)||{};if(t.wait){m=b.clone(this.attributes)}var n=b.clone(t)||{};if(n.wait){n.silent=true}var e;n.error=function(v,u){e=u};if(q&&!this.set(q,n)){return c.Promise.error(e)._thenRunCallbacks(t,this)}var j=this;j._refreshCache();var o=[];var d=[];c.Object._findUnsavedChildren(j.attributes,o,d);if(o.length+d.length>0){return c.Object._deepSaveAsync(this.attributes,{useMasterKey:t.useMasterKey}).then(function(){return j.save(null,t)},function(u){return c.Promise.error(u)._thenRunCallbacks(t,j)})}this._startSave();this._saving=(this._saving||0)+1;this._allPreviousSaves=this._allPreviousSaves||c.Promise.as();this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var y=j.id?"PUT":"POST";var v=j._getSaveJSON();var u="classes";var w=j.className;if(j.className==="_User"&&!j.id){u="users";w=null}var x=c._request({route:u,className:w,objectId:j.id,method:y,useMasterKey:t.useMasterKey,data:v});x=x.then(function(C,z,B){var A=j.parse(C,z,B);if(t.wait){A=b.extend(q||{},A)}j._finishSave(A);if(t.wait){j.set(m,n)}return j},function(z){j._cancelSave();return c.Promise.error(z)})._thenRunCallbacks(t,j);return x});return this._allPreviousSaves},destroy:function(e){e=e||{};var d=this;var h=function(){d.trigger("destroy",d,d.collection,e)};if(!this.id){return h()}if(!e.wait){h()}var f=c._request({route:"classes",className:this.className,objectId:this.id,method:"DELETE",useMasterKey:e.useMasterKey});return f.then(function(){if(e.wait){h()}return d})._thenRunCallbacks(e,this)},parse:function(h,d,f){var e=b.clone(h);b(["createdAt","updatedAt"]).each(function(j){if(e[j]){e[j]=c._parseDate(e[j])}});if(!e.updatedAt){e.updatedAt=e.createdAt}if(d){this._existed=(d!==201)}return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.id},change:function(f){f=f||{};var j=this._changing;this._changing=true;var e=this;c._objectEach(this._silent,function(k){e._pending[k]=true});var h=b.extend({},f.changes,this._silent);this._silent={};c._objectEach(h,function(l,k){e.trigger("change:"+k,e,e.get(k),f)});if(j){return this}var d=function(l,k){if(!e._pending[k]&&!e._silent[k]){delete e.changed[k]}};while(!b.isEmpty(this._pending)){this._pending={};this.trigger("change",this,f);c._objectEach(this.changed,d);e._previousAttributes=b.clone(this.attributes)}this._changing=false;return this},existed:function(){return this._existed},hasChanged:function(d){if(!arguments.length){return !b.isEmpty(this.changed)}return this.changed&&b.has(this.changed,d)},changedAttributes:function(e){if(!e){return this.hasChanged()?b.clone(this.changed):false}var f={};var d=this._previousAttributes;c._objectEach(e,function(j,h){if(!b.isEqual(d[h],j)){f[h]=j}});return f},previous:function(d){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[d]},previousAttributes:function(){return b.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},validate:function(e,d){if(b.has(e,"ACL")&&!(e.ACL instanceof c.ACL)){return new c.Error(c.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.")}return false},_validate:function(f,e){if(e.silent||!this.validate){return true}f=b.extend({},this.attributes,f);var d=this.validate(f,e);if(!d){return true}if(e&&e.error){e.error(this,d,e)}else{this.trigger("error",this,d,e)}return false},getACL:function(){return this.get("ACL")},setACL:function(e,d){return this.set("ACL",e,d)}});c.Object._getSubclass=function(e){if(!b.isString(e)){throw"Parse.Object._getSubclass requires a string argument."}var d=c.Object._classMap[e];if(!d){d=c.Object.extend(e);c.Object._classMap[e]=d}return d};c.Object._create=function(h,d,e){var f=c.Object._getSubclass(h);return new f(d,e)};c.Object._classMap={};c.Object._extend=c._extend;c.Object.extend=function(h,f,j){if(!b.isString(h)){if(h&&b.has(h,"className")){return c.Object.extend(h.className,h,f)}else{throw new Error("Parse.Object.extend's first argument should be the className.")}}if(h==="User"){h="_User"}var d=null;if(b.has(c.Object._classMap,h)){var e=c.Object._classMap[h];d=e._extend(f,j)}else{f=f||{};f.className=h;d=this._extend(f,j)}d.extend=function(l){if(b.isString(l)||(l&&b.has(l,"className"))){return c.Object.extend.apply(d,arguments)}var k=[h].concat(c._.toArray(arguments));return c.Object.extend.apply(d,k)};c.Object._classMap[h]=d;return d};c.Object._findUnsavedChildren=function(d,e,f){c._traverse(d,function(h){if(h instanceof c.Object){h._refreshCache();if(h.dirty()){e.push(h)}return}if(h instanceof c.File){if(!h.url()){f.push(h)}return}})};c.Object._canBeSerializedAsValue=function(d){if(d instanceof c.Object){return !!d.id}if(d instanceof c.File){return true}var e=true;if(b.isArray(d)){c._arrayEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}else{if(b.isObject(d)){c._objectEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}}return e};c.Object._deepSaveAsync=function(f,e){var d=[];var k=[];c.Object._findUnsavedChildren(f,d,k);var l=c.Promise.as();b.each(k,function(m){l=l.then(function(){return m.save(e)})});var j=b.uniq(d);var h=b.uniq(j);return l.then(function(){return c.Promise._continueWhile(function(){return h.length>0},function(){var p=[];var m=[];c._arrayEach(h,function(q){if(p.length>20){m.push(q);return}if(q._canBeSerialized()){p.push(q)}else{m.push(q)}});h=m;if(p.length===0){return c.Promise.error(new c.Error(c.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."))}var n=c.Promise.when(b.map(p,function(q){return q._allPreviousSaves||c.Promise.as()}));var o=new c.Promise();c._arrayEach(p,function(q){q._allPreviousSaves=o});return n._continueWith(function(){return c._request({route:"batch",method:"POST",useMasterKey:e.useMasterKey,data:{requests:b.map(p,function(q){var r=q._getSaveJSON();var t="POST";var s="/1/classes/"+q.className;if(q.id){s=s+"/"+q.id;t="PUT"}q._startSave();return{method:t,path:s,body:r}})}}).then(function(r,q,t){var s;c._arrayEach(p,function(u,v){if(r[v].success){u._finishSave(u.parse(r[v].success,q,t))}else{s=s||r[v].error;u._cancelSave()}});if(s){return c.Promise.error(new c.Error(s.code,s.error))}}).then(function(q){o.resolve(q);return q},function(q){o.reject(q);return c.Promise.error(q)})})})}).then(function(){return f})}}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Role=c.Object.extend("_Role",{constructor:function(d,e){if(b.isString(d)&&(e instanceof c.ACL)){c.Object.prototype.constructor.call(this,null,null);this.setName(d);this.setACL(e)}else{c.Object.prototype.constructor.call(this,d,e)}},getName:function(){return this.get("name")},setName:function(e,d){return this.set("name",e,d)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(f,e){if("name" in f&&f.name!==this.getName()){var d=f.name;if(this.id&&this.id!==f.objectId){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.")}if(!b.isString(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name must be a String.")}if(!(/^[0-9a-zA-Z\-_ ]+$/).test(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}}if(c.Object.prototype.validate){return c.Object.prototype.validate.call(this,f,e)}return false}})}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;d.Collection=function(f,e){e=e||{};if(e.comparator){this.comparator=e.comparator}if(e.model){this.model=e.model}if(e.query){this.query=e.query}this._reset();this.initialize.apply(this,arguments);if(f){this.reset(f,{silent:true,parse:e.parse})}};c.extend(d.Collection.prototype,d.Events,{model:d.Object,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(f,p){var l,n,j,m,o,h,k={},e={};p=p||{};f=c.isArray(f)?f.slice():[f];for(l=0,j=f.length;l<j;l++){f[l]=this._prepareModel(f[l],p);m=f[l];if(!m){throw new Error("Can't add an invalid model to a collection")}o=m.cid;if(k[o]||this._byCid[o]){throw new Error("Duplicate cid: can't add the same model to a collection twice")}h=m.id;if(!d._isNullOrUndefined(h)&&(e[h]||this._byId[h])){throw new Error("Duplicate id: can't add the same model to a collection twice")}e[h]=m;k[o]=m}for(l=0;l<j;l++){(m=f[l]).on("all",this._onModelEvent,this);this._byCid[m.cid]=m;if(m.id){this._byId[m.id]=m}}this.length+=j;n=d._isNullOrUndefined(p.at)?this.models.length:p.at;this.models.splice.apply(this.models,[n,0].concat(f));if(this.comparator){this.sort({silent:true})}if(p.silent){return this}for(l=0,j=this.models.length;l<j;l++){m=this.models[l];if(k[m.cid]){p.index=l;m.trigger("add",m,this,p)}}return this},remove:function(m,j){var k,e,h,f;j=j||{};m=c.isArray(m)?m.slice():[m];for(k=0,e=m.length;k<e;k++){f=this.getByCid(m[k])||this.get(m[k]);if(!f){continue}delete this._byId[f.id];delete this._byCid[f.cid];h=this.indexOf(f);this.models.splice(h,1);this.length--;if(!j.silent){j.index=h;f.trigger("remove",f,this,j)}this._removeReference(f)}return this},get:function(e){return e&&this._byId[e.id||e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(f){f=f||{};if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var e=c.bind(this.comparator,this);if(this.comparator.length===1){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!f.silent){this.trigger("reset",this,f)}return this},pluck:function(e){return c.map(this.models,function(f){return f.get(e)})},reset:function(h,f){var e=this;h=h||[];f=f||{};d._arrayEach(this.models,function(j){e._removeReference(j)});this._reset();this.add(h,{silent:true,parse:f.parse});if(!f.silent){this.trigger("reset",this,f)}return this},fetch:function(e){e=c.clone(e)||{};if(e.parse===undefined){e.parse=true}var h=this;var f=this.query||new d.Query(this.model);return f.find({useMasterKey:e.useMasterKey}).then(function(j){if(e.add){h.add(j,e)}else{h.reset(j,e)}return h})._thenRunCallbacks(e,this)},create:function(f,e){var h=this;e=e?c.clone(e):{};f=this._prepareModel(f,e);if(!f){return false}if(!e.wait){h.add(f,e)}var j=e.success;e.success=function(k,m,l){if(e.wait){h.add(k,e)}if(j){j(k,m)}else{k.trigger("sync",f,m,e)}};f.save(null,e);return f},parse:function(f,e){return f},chain:function(){return c(this.models).chain()},_reset:function(e){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(h,f){if(!(h instanceof d.Object)){var e=h;f.collection=this;h=new this.model(e,f);if(!h._validate(h.attributes,f)){h=false}}else{if(!h.collection){h.collection=this}}return h},_removeReference:function(e){if(this===e.collection){delete e.collection}e.off("all",this._onModelEvent,this)},_onModelEvent:function(h,f,j,e){if((h==="add"||h==="remove")&&j!==this){return}if(h==="destroy"){this.remove(f,e)}if(f&&h==="change:objectId"){delete this._byId[f.previous("objectId")];this._byId[f.id]=f}this.trigger.apply(this,arguments)}});var b=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];d._arrayEach(b,function(e){d.Collection.prototype[e]=function(){return c[e].apply(c,[this.models].concat(c.toArray(arguments)))}});d.Collection.extend=d._extend}(this));(function(a){a.Parse=a.Parse||{};var e=a.Parse;var d=e._;e.View=function(f){this.cid=d.uniqueId("view");this._configure(f||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var c=/^(\S+)\s*(.*)$/;var b=["model","collection","el","id","attributes","className","tagName"];d.extend(e.View.prototype,e.Events,{tagName:"div",$:function(f){return this.$el.find(f)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(h,f,k){var j=document.createElement(h);if(f){e.$(j).attr(f)}if(k){e.$(j).html(k)}return j},setElement:function(f,h){this.$el=e.$(f);this.el=this.$el[0];if(h!==false){this.delegateEvents()}return this},delegateEvents:function(h){h=h||e._getValue(this,"events");if(!h){return}this.undelegateEvents();var f=this;e._objectEach(h,function(n,m){if(!d.isFunction(n)){n=f[h[m]]}if(!n){throw new Error('Event "'+h[m]+'" does not exist')}var l=m.match(c);var k=l[1],j=l[2];n=d.bind(n,f);k+=".delegateEvents"+f.cid;if(j===""){f.$el.bind(k,n)}else{f.$el.delegate(j,k,n)}})},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(h){if(this.options){h=d.extend({},this.options,h)}var f=this;d.each(b,function(j){if(h[j]){f[j]=h[j]}});this.options=h},_ensureElement:function(){if(!this.el){var f=e._getValue(this,"attributes")||{};if(this.id){f.id=this.id}if(this.className){f["class"]=this.className}this.setElement(this.make(this.tagName,f),false)}else{this.setElement(this.el,false)}}});e.View.extend=e._extend}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.User=c.Object.extend("_User",{_isCurrentUser:false,_mergeMagicFields:function(d){if(d.sessionToken){this._sessionToken=d.sessionToken;delete d.sessionToken}c.User.__super__._mergeMagicFields.call(this,d)},_cleanupAuthData:function(){if(!this.isCurrent()){return}var d=this.get("authData");if(!d){return}c._objectEach(this.get("authData"),function(f,e){if(!d[e]){delete d[e]}})},_synchronizeAllAuthData:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(h,f){d._synchronizeAuthData(f)})},_synchronizeAuthData:function(h){if(!this.isCurrent()){return}var d;if(b.isString(h)){d=h;h=c.User._authProviders[d]}else{d=h.getAuthType()}var e=this.get("authData");if(!e||!h){return}var f=h.restoreAuthentication(e[d]);if(!f){this._unlinkFrom(h)}},_handleSaveResult:function(d){if(d){this._isCurrentUser=true}this._cleanupAuthData();this._synchronizeAllAuthData();delete this._serverData.password;this._rebuildEstimatedDataForKey("password");this._refreshCache();if(d||this.isCurrent()){c.User._saveCurrentUser(this)}},_linkWith:function(l,f){var e;if(b.isString(l)){e=l;l=c.User._authProviders[l]}else{e=l.getAuthType()}if(b.has(f,"authData")){var h=this.get("authData")||{};h[e]=f.authData;this.set("authData",h);var k=b.clone(f)||{};k.success=function(m){m._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save({authData:h},k)}else{var d=this;var j=new c.Promise();l.authenticate({success:function(n,m){d._linkWith(n,{authData:m,success:f.success,error:f.error}).then(function(){j.resolve(d)})},error:function(n,m){if(f.error){f.error(d,m)}j.reject(m)}});return j}},_unlinkFrom:function(j,f){var e;if(b.isString(j)){e=j;j=c.User._authProviders[j]}else{e=j.getAuthType()}var h=b.clone(f);var d=this;h.authData=null;h.success=function(k){d._synchronizeAuthData(j);if(f.success){f.success.apply(this,arguments)}};return this._linkWith(j,h)},_isLinked:function(f){var d;if(b.isString(f)){d=f}else{d=f.getAuthType()}var e=this.get("authData")||{};return !!e[d]},_logOutWithAll:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(h,f){d._logOutWith(f)})},_logOutWith:function(d){if(!this.isCurrent()){return}if(b.isString(d)){d=c.User._authProviders[d]}if(d&&d.deauthenticate){d.deauthenticate()}},signUp:function(h,f){var e;f=f||{};var k=(h&&h.username)||this.get("username");if(!k||(k==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty name.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var d=(h&&h.password)||this.get("password");if(!d||(d==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty password.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var j=b.clone(f);j.success=function(l){l._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save(h,j)},logIn:function(e){var d=this;e=e||{};var f=c._request({route:"login",method:"GET",useMasterKey:e.useMasterKey,data:this.toJSON()});return f.then(function(l,h,k){var j=d.parse(l,h,k);d._finishFetch(j);d._handleSaveResult(true);return d})._thenRunCallbacks(e,this)},save:function(j,h,f){var e,m,k,n,l;if(b.isObject(j)||b.isNull(j)||b.isUndefined(j)){m=j;n=h}else{m={};m[j]=h;n=f}n=n||{};var d=b.clone(n);d.success=function(o){o._handleSaveResult(false);if(n.success){n.success.apply(this,arguments)}};return c.Object.prototype.save.call(this,m,d)},fetch:function(d){var e=d?b.clone(d):{};e.success=function(f){f._handleSaveResult(false);if(d&&d.success){d.success.apply(this,arguments)}};return c.Object.prototype.fetch.call(this,e)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(e,d){return this.set("username",e,d)},setPassword:function(e,d){return this.set("password",e,d)},getEmail:function(){return this.get("email")},setEmail:function(e,d){return this.set("email",e,d)},authenticated:function(){return !!this._sessionToken&&(c.User.current()&&c.User.current().id===this.id)}},{_currentUser:null,_currentUserMatchesDisk:false,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(j,h,f,e){f=f||{};f.username=j;f.password=h;var d=c.Object._create("_User");return d.signUp(f,e)},logIn:function(h,f,e){var d=c.Object._create("_User");d._finishFetch({username:h,password:f});return d.logIn(e)},logOut:function(){if(c.User._currentUser!==null){c.User._currentUser._logOutWithAll();c.User._currentUser._isCurrentUser=false}c.User._currentUserMatchesDisk=true;c.User._currentUser=null;c.localStorage.removeItem(c._getParsePath(c.User._CURRENT_USER_KEY))},requestPasswordReset:function(e,d){d=d||{};var f=c._request({route:"requestPasswordReset",method:"POST",useMasterKey:d.useMasterKey,data:{email:e}});return f._thenRunCallbacks(d)},current:function(){if(c.User._currentUser){return c.User._currentUser}if(c.User._currentUserMatchesDisk){return c.User._currentUser}c.User._currentUserMatchesDisk=true;var d=c.localStorage.getItem(c._getParsePath(c.User._CURRENT_USER_KEY));if(!d){return null}c.User._currentUser=c.Object._create("_User");c.User._currentUser._isCurrentUser=true;var e=JSON.parse(d);c.User._currentUser.id=e._id;delete e._id;c.User._currentUser._sessionToken=e._sessionToken;delete e._sessionToken;c.User._currentUser.set(e);c.User._currentUser._synchronizeAllAuthData();c.User._currentUser._refreshCache();c.User._currentUser._opSetQueue=[{}];return c.User._currentUser},_saveCurrentUser:function(d){if(c.User._currentUser!==d){c.User.logOut()}d._isCurrentUser=true;c.User._currentUser=d;c.User._currentUserMatchesDisk=true;var e=d.toJSON();e._id=d.id;e._sessionToken=d._sessionToken;c.localStorage.setItem(c._getParsePath(c.User._CURRENT_USER_KEY),JSON.stringify(e))},_registerAuthenticationProvider:function(d){c.User._authProviders[d.getAuthType()]=d;if(c.User.current()){c.User.current()._synchronizeAuthData(d.getAuthType())}},_logInWith:function(f,e){var d=c.Object._create("_User");return d._linkWith(f,e)}})}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Query=function(d){if(b.isString(d)){d=c.Object._getSubclass(d)}this.objectClass=d;this.className=d.prototype.className;this._where={};this._include=[];this._limit=-1;this._skip=0;this._extraOptions={}};c.Query.or=function(){var d=b.toArray(arguments);var e=null;c._arrayEach(d,function(h){if(b.isNull(e)){e=h.className}if(e!==h.className){throw"All queries must be for the same class"}});var f=new c.Query(e);f._orQuery(d);return f};c.Query.prototype={get:function(d,f){var e=this;e.equalTo("objectId",d);return e.first().then(function(h){if(h){return h}var j=new c.Error(c.Error.OBJECT_NOT_FOUND,"Object not found.");return c.Promise.error(j)})._thenRunCallbacks(f,null)},toJSON:function(){var d={where:this._where};if(this._include.length>0){d.include=this._include.join(",")}if(this._select){d.keys=this._select.join(",")}if(this._limit>=0){d.limit=this._limit}if(this._skip>0){d.skip=this._skip}if(this._order!==undefined){d.order=this._order}c._objectEach(this._extraOptions,function(f,e){d[e]=f});return d},find:function(e){var d=this;e=e||{};var f=c._request({route:"classes",className:this.className,method:"GET",useMasterKey:e.useMasterKey,data:this.toJSON()});return f.then(function(h){return b.map(h.results,function(j){var k;if(h.className){k=new c.Object(h.className)}else{k=new d.objectClass()}k._finishFetch(j,true);return k})})._thenRunCallbacks(e)},count:function(e){var d=this;e=e||{};var h=this.toJSON();h.limit=0;h.count=1;var f=c._request({route:"classes",className:d.className,method:"GET",useMasterKey:e.useMasterKey,data:h});return f.then(function(j){return j.count})._thenRunCallbacks(e)},first:function(e){var d=this;e=e||{};var h=this.toJSON();h.limit=1;var f=c._request({route:"classes",className:this.className,method:"GET",useMasterKey:e.useMasterKey,data:h});return f.then(function(j){return b.map(j.results,function(k){var l=new d.objectClass();l._finishFetch(k,true);return l})[0]})._thenRunCallbacks(e)},collection:function(d,e){e=e||{};return new c.Collection(d,b.extend(e,{model:this.objectClass,query:this}))},skip:function(d){this._skip=d;return this},limit:function(d){this._limit=d;return this},equalTo:function(d,e){if(b.isUndefined(e)){return this.doesNotExist(d)}this._where[d]=c._encode(e);return this},_addCondition:function(d,f,e){if(!this._where[d]){this._where[d]={}}this._where[d][f]=c._encode(e);return this},notEqualTo:function(d,e){this._addCondition(d,"$ne",e);return this},lessThan:function(d,e){this._addCondition(d,"$lt",e);return this},greaterThan:function(d,e){this._addCondition(d,"$gt",e);return this},lessThanOrEqualTo:function(d,e){this._addCondition(d,"$lte",e);return this},greaterThanOrEqualTo:function(d,e){this._addCondition(d,"$gte",e);return this},containedIn:function(e,d){this._addCondition(e,"$in",d);return this},notContainedIn:function(e,d){this._addCondition(e,"$nin",d);return this},containsAll:function(e,d){this._addCondition(e,"$all",d);return this},exists:function(d){this._addCondition(d,"$exists",true);return this},doesNotExist:function(d){this._addCondition(d,"$exists",false);return this},matches:function(e,f,d){this._addCondition(e,"$regex",f);if(!d){d=""}if(f.ignoreCase){d+="i"}if(f.multiline){d+="m"}if(d&&d.length){this._addCondition(e,"$options",d)}return this},matchesQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$inQuery",e);return this},doesNotMatchQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$notInQuery",e);return this},matchesKeyInQuery:function(e,d,h){var f=h.toJSON();f.className=h.className;this._addCondition(e,"$select",{key:d,query:f});return this},doesNotMatchKeyInQuery:function(e,d,h){var f=h.toJSON();f.className=h.className;this._addCondition(e,"$dontSelect",{key:d,query:f});return this},_orQuery:function(d){var e=b.map(d,function(f){return f.toJSON().where});this._where.$or=e;return this},_quote:function(d){return"\\Q"+d.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(d,e){this._addCondition(d,"$regex",this._quote(e));return this},startsWith:function(d,e){this._addCondition(d,"$regex","^"+this._quote(e));return this},endsWith:function(d,e){this._addCondition(d,"$regex",this._quote(e)+"$");return this},ascending:function(d){this._order=d;return this},descending:function(d){this._order="-"+d;return this},near:function(e,d){if(!(d instanceof c.GeoPoint)){d=new c.GeoPoint(d)}this._addCondition(e,"$nearSphere",d);return this},withinRadians:function(e,d,f){this.near(e,d);this._addCondition(e,"$maxDistance",f);return this},withinMiles:function(e,d,f){return this.withinRadians(e,d,f/3958.8)},withinKilometers:function(e,d,f){return this.withinRadians(e,d,f/6371)},withinGeoBox:function(d,f,e){if(!(f instanceof c.GeoPoint)){f=new c.GeoPoint(f)}if(!(e instanceof c.GeoPoint)){e=new c.GeoPoint(e)}this._addCondition(d,"$within",{"$box":[f,e]});return this},include:function(){var d=this;c._arrayEach(arguments,function(e){if(b.isArray(e)){d._include=d._include.concat(e)}else{d._include.push(e)}});return this},select:function(){var d=this;this._select=this._select||[];c._arrayEach(arguments,function(e){if(b.isArray(e)){d._select=d._select.concat(e)}else{d._select.push(e)}});return this},each:function(k,e){e=e||{};if(this._order||this._skip||(this._limit>=0)){var d="Cannot iterate on a query with sort, skip, or limit.";return c.Promise.error(d)._thenRunCallbacks(e)}var h=new c.Promise();var f=new c.Query(this.objectClass);f._limit=e.batchSize||100;f._where=b.clone(this._where);f._include=b.clone(this._include);f.ascending("objectId");var j=false;return c.Promise._continueWhile(function(){return !j},function(){return f.find().then(function(l){var m=c.Promise.as();c._.each(l,function(n){m=m.then(function(){return k(n)})});return m.then(function(){if(l.length>=f._limit){f.greaterThan("objectId",l[l.length-1].id)}else{j=true}})})})._thenRunCallbacks(e)}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;var b="*";var h=false;var j;var e;var f={authenticate:function(l){var k=this;FB.login(function(m){if(m.authResponse){if(l.success){l.success(k,{id:m.authResponse.userID,access_token:m.authResponse.accessToken,expiration_date:new Date(m.authResponse.expiresIn*1000+(new Date()).getTime()).toJSON()})}}else{if(l.error){l.error(k,m)}}},{scope:j})},restoreAuthentication:function(m){if(m){var k={userID:m.id,accessToken:m.access_token,expiresIn:(d._parseDate(m.expiration_date).getTime()-(new Date()).getTime())/1000};var n=c.clone(e);n.authResponse=k;n.status=false;var l=FB.getAuthResponse();if(l&&l.userID!==k.userID){FB.logout()}FB.init(n)}return true},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}};d.FacebookUtils={init:function(k){if(typeof(FB)==="undefined"){throw"The Facebook JavaScript SDK must be loaded before calling init."}e=c.clone(k)||{};if(e.status&&typeof(console)!=="undefined"){var l=console.warn||console.log||function(){};l.call(console,"The 'status' flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.")}e.status=false;FB.init(e);d.User._registerAuthenticationProvider(f);h=true},isLinked:function(k){return k._isLinked("facebook")},logIn:function(l,k){if(!l||c.isString(l)){if(!h){throw"You must initialize FacebookUtils before calling logIn."}j=l;return d.User._logInWith("facebook",k)}else{var m=c.clone(k)||{};m.authData=l;return d.User._logInWith("facebook",m)}},link:function(k,m,l){if(!m||c.isString(m)){if(!h){throw"You must initialize FacebookUtils before calling link."}j=m;return k._linkWith("facebook",l)}else{var n=c.clone(l)||{};n.authData=m;return k._linkWith("facebook",n)}},unlink:function(k,l){if(!h){throw"You must initialize FacebookUtils before calling unlink."}return k._unlinkFrom("facebook",l)}}}(this));(function(a){a.Parse=a.Parse||{};var d=a.Parse;var c=d._;d.History=function(){this.handlers=[];c.bindAll(this,"checkUrl")};var e=/^[#\/]/;var b=/msie [\w.]+/;d.History.started=false;c.extend(d.History.prototype,d.Events,{interval:50,getHash:function(j){var h=j?j.location:window.location;var f=h.href.match(/#(.*)$/);return f?f[1]:""},getFragment:function(h,f){if(d._isNullOrUndefined(h)){if(this._hasPushState||f){h=window.location.pathname;var j=window.location.search;if(j){h+=j}}else{h=this.getHash()}}if(!h.indexOf(this.options.root)){h=h.substr(this.options.root.length)}return h.replace(e,"")},start:function(j){if(d.History.started){throw new Error("Parse.history has already been started")}d.History.started=true;this.options=c.extend({},{root:"/"},this.options,j);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var h=this.getFragment();var f=document.documentMode;var l=(b.exec(navigator.userAgent.toLowerCase())&&(!f||f<=7));if(l){this.iframe=d.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(h)}if(this._hasPushState){d.$(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!l){d.$(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)}}}this.fragment=h;var m=window.location;var k=m.pathname===this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!k){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&k&&m.hash){this.fragment=this.getHash().replace(e,"");window.history.replaceState({},document.title,m.protocol+"//"+m.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){d.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);window.clearInterval(this._checkUrlInterval);d.History.started=false},route:function(f,h){this.handlers.unshift({route:f,callback:h})},checkUrl:function(h){var f=this.getFragment();if(f===this.fragment&&this.iframe){f=this.getFragment(this.getHash(this.iframe))}if(f===this.fragment){return false}if(this.iframe){this.navigate(f)}if(!this.loadUrl()){this.loadUrl(this.getHash())}},loadUrl:function(j){var h=this.fragment=this.getFragment(j);var f=c.any(this.handlers,function(k){if(k.route.test(h)){k.callback(h);return true}});return f},navigate:function(j,h){if(!d.History.started){return false}if(!h||h===true){h={trigger:h}}var k=(j||"").replace(e,"");if(this.fragment===k){return}if(this._hasPushState){if(k.indexOf(this.options.root)!==0){k=this.options.root+k}this.fragment=k;var f=h.replace?"replaceState":"pushState";window.history[f]({},document.title,k)}else{if(this._wantsHashChange){this.fragment=k;this._updateHash(window.location,k,h.replace);if(this.iframe&&(k!==this.getFragment(this.getHash(this.iframe)))){if(!h.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,k,h.replace)}}else{window.location.assign(this.options.root+j)}}if(h.trigger){this.loadUrl(j)}},_updateHash:function(f,h,j){if(j){var k=f.toString().replace(/(javascript:|#).*$/,"");f.replace(k+"#"+h)}else{f.hash=h}}})}(this));(function(b){b.Parse=b.Parse||{};var d=b.Parse;var c=d._;d.Router=function(h){h=h||{};if(h.routes){this.routes=h.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var e=/:\w+/g;var f=/\*\w+/g;var a=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;c.extend(d.Router.prototype,d.Events,{initialize:function(){},route:function(h,j,k){d.history=d.history||new d.History();if(!c.isRegExp(h)){h=this._routeToRegExp(h)}if(!k){k=this[j]}d.history.route(h,c.bind(function(m){var l=this._extractParameters(h,m);if(k){k.apply(this,l)}this.trigger.apply(this,["route:"+j].concat(l));d.history.trigger("route",this,j,l)},this));return this},navigate:function(j,h){d.history.navigate(j,h)},_bindRoutes:function(){if(!this.routes){return}var j=[];for(var k in this.routes){if(this.routes.hasOwnProperty(k)){j.unshift([k,this.routes[k]])}}for(var m=0,h=j.length;m<h;m++){this.route(j[m][0],j[m][1],this[j[m][1]])}},_routeToRegExp:function(h){h=h.replace(a,"\\$&").replace(e,"([^/]+)").replace(f,"(.*?)");return new RegExp("^"+h+"$")},_extractParameters:function(h,j){return h.exec(j).slice(1)}});d.Router.extend=d._extend}(this));(function(a){a.Parse=a.Parse||{};var c=a.Parse;var b=c._;c.Cloud=c.Cloud||{};b.extend(c.Cloud,{run:function(e,h,d){d=d||{};var f=c._request({route:"functions",className:e,method:"POST",useMasterKey:d.useMasterKey,data:c._encode(h,null,true)});return f.then(function(j){return c._decode(null,j).result})._thenRunCallbacks(d)}})}(this));(function(a){a.Parse=a.Parse||{};var b=a.Parse;b.Installation=b.Object.extend("_Installation");b.Push=b.Push||{};b.Push.send=function(e,c){c=c||{};if(e.where){e.where=e.where.toJSON().where}if(e.push_time){e.push_time=e.push_time.toJSON()}if(e.expiration_time){e.expiration_time=e.expiration_time.toJSON()}if(e.expiration_time&&e.expiration_time_interval){throw"Both expiration_time and expiration_time_interval can't be set"}var d=b._request({route:"push",method:"POST",data:e,useMasterKey:c.useMasterKey});return d._thenRunCallbacks(c)}}(this));var App={};App.Routers={};App.Models={};App.Models.Docs={};App.Models.Apps={};App.Models.Admin={};App.Collections={};App.Views={};App.whatWentWrongWhoKnows="There's been an error, but it's not your fault. Try again in a bit.";var _=Parse._;var ParseDotCom=Parse;Parse=null;ParseDotCom.initialize("Q57GWY3hPKQ380QYFtKvH6PD8IQpr1Arz1Qliy9t","9Q58QDNGg1i856YyJF4JZ03dOzLJcYCCmj6xgJj1");(function(){var s=this;var q=s.Backbone;var r=Array.prototype.slice;var A=Array.prototype.splice;var c;if(typeof exports!=="undefined"){c=exports}else{c=s.Backbone={}}c.VERSION="0.9.2";var C=s._;if(!C&&(typeof require!=="undefined")){C=require("underscore")}var h=s.jQuery||s.Zepto||s.ender;c.setDomLibrary=function(E){h=E};c.noConflict=function(){s.Backbone=q;return this};c.emulateHTTP=false;c.emulateJSON=false;var a=/\s+/;var p=c.Events={on:function(H,L,G){var F,J,I,E,K;if(!L){return this}H=H.split(a);F=this._callbacks||(this._callbacks={});while(J=H.shift()){K=F[J];I=K?K.tail:{};I.next=E={};I.context=G;I.callback=L;F[J]={tail:E,next:K?K.next:I}}return this},off:function(L,J,F){var E,M,G,I,H,K;if(!(M=this._callbacks)){return}if(!(L||J||F)){delete this._callbacks;return this}L=L?L.split(a):C.keys(M);while(E=L.shift()){G=M[E];delete M[E];if(!G||!(J||F)){continue}I=G.tail;while((G=G.next)!==I){H=G.callback;K=G.context;if((J&&H!==J)||(F&&K!==F)){this.on(E,H,K)}}}return this},trigger:function(H){var L,K,G,F,E,J,I;if(!(G=this._callbacks)){return this}J=G.all;H=H.split(a);I=r.call(arguments,1);while(L=H.shift()){if(K=G[L]){F=K.tail;while((K=K.next)!==F){K.callback.apply(K.context||this,I)}}if(K=J){F=K.tail;E=[L].concat(I);while((K=K.next)!==F){K.callback.apply(K.context||this,E)}}}return this}};p.bind=p.on;p.unbind=p.off;var m=c.Model=function(E,F){var G;E||(E={});if(F&&F.parse){E=this.parse(E)}if(G=d(this,"defaults")){E=C.extend({},G,E)}if(F&&F.collection){this.collection=F.collection}this.attributes={};this._escapedAttributes={};this.cid=C.uniqueId("c");this.changed={};this._silent={};this._pending={};this.set(E,{silent:true});this.changed={};this._silent={};this._pending={};this._previousAttributes=C.clone(this.attributes);this.initialize.apply(this,arguments)};C.extend(m.prototype,p,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(E){return C.clone(this.attributes)},get:function(E){return this.attributes[E]},escape:function(E){var F;if(F=this._escapedAttributes[E]){return F}var G=this.get(E);return this._escapedAttributes[E]=C.escape(G==null?"":""+G)},has:function(E){return this.get(E)!=null},set:function(L,K,N){var M,I,G;if(C.isObject(L)||L==null){M=L;N=K}else{M={};M[L]=K}N||(N={});if(!M){return this}if(M instanceof m){M=M.attributes}if(N.unset){for(I in M){M[I]=void 0}}if(!this._validate(M,N)){return false}if(this.idAttribute in M){this.id=M[this.idAttribute]}var J=N.changes={};var F=this.attributes;var E=this._escapedAttributes;var H=this._previousAttributes||{};for(I in M){G=M[I];if(!C.isEqual(F[I],G)||(N.unset&&C.has(F,I))){delete E[I];(N.silent?this._silent:J)[I]=true}N.unset?delete F[I]:F[I]=G;if(!C.isEqual(H[I],G)||(C.has(F,I)!=C.has(H,I))){this.changed[I]=G;if(!N.silent){this._pending[I]=true}}else{delete this.changed[I];delete this._pending[I]}}if(!N.silent){this.change(N)}return this},unset:function(E,F){(F||(F={})).unset=true;return this.set(E,null,F)},clear:function(E){(E||(E={})).unset=true;return this.set(C.clone(this.attributes),E)},fetch:function(F){F=F?C.clone(F):{};var E=this;var G=F.success;F.success=function(J,H,I){if(!E.set(E.parse(J,I),F)){return false}if(G){G(E,J)}};F.error=c.wrapError(F.error,E,F);return(this.sync||c.sync).call(this,"read",this,F)},save:function(J,I,N){var K,H;if(C.isObject(J)||J==null){K=J;N=I}else{K={};K[J]=I}N=N?C.clone(N):{};if(N.wait){if(!this._validate(K,N)){return false}H=C.clone(this.attributes)}var F=C.extend({},N,{silent:true});if(K&&!this.set(K,N.wait?F:N)){return false}var G=this;var L=N.success;N.success=function(R,O,Q){var P=G.parse(R,Q);if(N.wait){delete N.wait;P=C.extend(K||{},P)}if(!G.set(P,N)){return false}if(L){L(G,R)}else{G.trigger("sync",G,R,N)}};N.error=c.wrapError(N.error,G,N);var E=this.isNew()?"create":"update";var M=(this.sync||c.sync).call(this,E,this,N);if(N.wait){this.set(H,F)}return M},destroy:function(F){F=F?C.clone(F):{};var E=this;var I=F.success;var H=function(){E.trigger("destroy",E,E.collection,F)};if(this.isNew()){H();return false}F.success=function(J){if(F.wait){H()}if(I){I(E,J)}else{E.trigger("sync",E,J,F)}};F.error=c.wrapError(F.error,E,F);var G=(this.sync||c.sync).call(this,"delete",this,F);if(!F.wait){H()}return G},url:function(){var E=d(this,"urlRoot")||d(this.collection,"url")||v();if(this.isNew()){return E}return E+(E.charAt(E.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(F,E){return F},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(F){F||(F={});var H=this._changing;this._changing=true;for(var E in this._silent){this._pending[E]=true}var G=C.extend({},F.changes,this._silent);this._silent={};for(var E in G){this.trigger("change:"+E,this,this.get(E),F)}if(H){return this}while(!C.isEmpty(this._pending)){this._pending={};this.trigger("change",this,F);for(var E in this.changed){if(this._pending[E]||this._silent[E]){continue}delete this.changed[E]}this._previousAttributes=C.clone(this.attributes)}this._changing=false;return this},hasChanged:function(E){if(!arguments.length){return !C.isEmpty(this.changed)}return C.has(this.changed,E)},changedAttributes:function(G){if(!G){return this.hasChanged()?C.clone(this.changed):false}var I,H=false,F=this._previousAttributes;for(var E in G){if(C.isEqual(F[E],(I=G[E]))){continue}(H||(H={}))[E]=I}return H},previous:function(E){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[E]},previousAttributes:function(){return C.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},_validate:function(G,F){if(F.silent||!this.validate){return true}G=C.extend({},this.attributes,G);var E=this.validate(G,F);if(!E){return true}if(F&&F.error){F.error(this,E,F)}else{this.trigger("error",this,E,F)}return false}});var D=c.Collection=function(F,E){E||(E={});if(E.model){this.model=E.model}if(E.comparator){this.comparator=E.comparator}this._reset();this.initialize.apply(this,arguments);if(F){this.reset(F,{silent:true,parse:E.parse})}};C.extend(D.prototype,p,{model:m,initialize:function(){},toJSON:function(E){return this.map(function(F){return F.toJSON(E)})},add:function(F,O){var K,M,H,L,N,G,I={},E={},J=[];O||(O={});F=C.isArray(F)?F.slice():[F];for(K=0,H=F.length;K<H;K++){if(!(L=F[K]=this._prepareModel(F[K],O))){throw new Error("Can't add an invalid model to a collection")}N=L.cid;G=L.id;if(I[N]||this._byCid[N]||((G!=null)&&(E[G]||this._byId[G]))){J.push(K);continue}I[N]=E[G]=L}K=J.length;while(K--){F.splice(J[K],1)}for(K=0,H=F.length;K<H;K++){(L=F[K]).on("all",this._onModelEvent,this);this._byCid[L.cid]=L;if(L.id!=null){this._byId[L.id]=L}}this.length+=H;M=O.at!=null?O.at:this.models.length;A.apply(this.models,[M,0].concat(F));if(this.comparator){this.sort({silent:true})}if(O.silent){return this}for(K=0,H=this.models.length;K<H;K++){if(!I[(L=this.models[K]).cid]){continue}O.index=K;L.trigger("add",L,this,O)}return this},remove:function(J,H){var I,E,G,F;H||(H={});J=C.isArray(J)?J.slice():[J];for(I=0,E=J.length;I<E;I++){F=this.getByCid(J[I])||this.get(J[I]);if(!F){continue}delete this._byId[F.id];delete this._byCid[F.cid];G=this.indexOf(F);this.models.splice(G,1);this.length--;if(!H.silent){H.index=G;F.trigger("remove",F,this,H)}this._removeReference(F)}return this},push:function(F,E){F=this._prepareModel(F,E);this.add(F,E);return F},pop:function(F){var E=this.at(this.length-1);this.remove(E,F);return E},unshift:function(F,E){F=this._prepareModel(F,E);this.add(F,C.extend({at:0},E));return F},shift:function(F){var E=this.at(0);this.remove(E,F);return E},get:function(E){if(E==null){return void 0}return this._byId[E.id!=null?E.id:E]},getByCid:function(E){return E&&this._byCid[E.cid||E]},at:function(E){return this.models[E]},where:function(E){if(C.isEmpty(E)){return[]}return this.filter(function(F){for(var G in E){if(E[G]!==F.get(G)){return false}}return true})},sort:function(F){F||(F={});if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var E=C.bind(this.comparator,this);if(this.comparator.length==1){this.models=this.sortBy(E)}else{this.models.sort(E)}if(!F.silent){this.trigger("reset",this,F)}return this},pluck:function(E){return C.map(this.models,function(F){return F.get(E)})},reset:function(H,F){H||(H=[]);F||(F={});for(var G=0,E=this.models.length;G<E;G++){this._removeReference(this.models[G])}this._reset();this.add(H,C.extend({silent:true},F));if(!F.silent){this.trigger("reset",this,F)}return this},fetch:function(E){E=E?C.clone(E):{};if(E.parse===undefined){E.parse=true}var G=this;var F=E.success;E.success=function(J,H,I){G[E.add?"add":"reset"](G.parse(J,I),E);if(F){F(G,J)}};E.error=c.wrapError(E.error,G,E);return(this.sync||c.sync).call(this,"read",this,E)},create:function(F,E){var G=this;E=E?C.clone(E):{};F=this._prepareModel(F,E);if(!F){return false}if(!E.wait){G.add(F,E)}var H=E.success;E.success=function(I,K,J){if(E.wait){G.add(I,E)}if(H){H(I,K)}else{I.trigger("sync",F,K,E)}};F.save(null,E);return F},parse:function(F,E){return F},chain:function(){return C(this.models).chain()},_reset:function(E){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(G,F){F||(F={});if(!(G instanceof m)){var E=G;F.collection=this;G=new this.model(E,F);if(!G._validate(G.attributes,F)){G=false}}else{if(!G.collection){G.collection=this}}return G},_removeReference:function(E){if(this==E.collection){delete E.collection}E.off("all",this._onModelEvent,this)},_onModelEvent:function(G,F,H,E){if((G=="add"||G=="remove")&&H!=this){return}if(G=="destroy"){this.remove(F,E)}if(F&&G==="change:"+F.idAttribute){delete this._byId[F.previous(F.idAttribute)];this._byId[F.id]=F}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];C.each(y,function(E){D.prototype[E]=function(){return C[E].apply(C,[this.models].concat(C.toArray(arguments)))}});var B=c.Router=function(E){E||(E={});if(E.routes){this.routes=E.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var k=/:\w+/g;var z=/\*\w+/g;var e=/[-[\]{}()+?.,\\^$|#\s]/g;C.extend(B.prototype,p,{initialize:function(){},route:function(E,F,G){c.history||(c.history=new b);if(!C.isRegExp(E)){E=this._routeToRegExp(E)}if(!G){G=this[F]}c.history.route(E,C.bind(function(I){var H=this._extractParameters(E,I);G&&G.apply(this,H);this.trigger.apply(this,["route:"+F].concat(H));c.history.trigger("route",this,F,H)},this));return this},navigate:function(F,E){c.history.navigate(F,E)},_bindRoutes:function(){if(!this.routes){return}var F=[];for(var G in this.routes){F.unshift([G,this.routes[G]])}for(var H=0,E=F.length;H<E;H++){this.route(F[H][0],F[H][1],this[F[H][1]])}},_routeToRegExp:function(E){E=E.replace(e,"\\$&").replace(k,"([^/]+)").replace(z,"(.*?)");return new RegExp("^"+E+"$")},_extractParameters:function(E,F){return E.exec(F).slice(1)}});var b=c.History=function(){this.handlers=[];C.bindAll(this,"checkUrl")};var o=/^[#\/]/;var l=/msie [\w.]+/;b.started=false;C.extend(b.prototype,p,{interval:50,getHash:function(G){var F=G?G.location:window.location;var E=F.href.match(/#(.*)$/);return E?E[1]:""},getFragment:function(F,E){if(F==null){if(this._hasPushState||E){F=window.location.pathname;var G=window.location.search;if(G){F+=G}}else{F=this.getHash()}}if(!F.indexOf(this.options.root)){F=F.substr(this.options.root.length)}return F.replace(o,"")},start:function(G){if(b.started){throw new Error("Backbone.history has already been started")}b.started=true;this.options=C.extend({},{root:"/"},this.options,G);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var F=this.getFragment();var E=document.documentMode;var I=(l.exec(navigator.userAgent.toLowerCase())&&(!E||E<=7));if(I){this.iframe=h('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(F)}if(this._hasPushState){h(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!I){h(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=F;var J=window.location;var H=J.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!H){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&H&&J.hash){this.fragment=this.getHash().replace(o,"");window.history.replaceState({},document.title,J.protocol+"//"+J.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){h(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);b.started=false},route:function(E,F){this.handlers.unshift({route:E,callback:F})},checkUrl:function(F){var E=this.getFragment();if(E==this.fragment&&this.iframe){E=this.getFragment(this.getHash(this.iframe))}if(E==this.fragment){return false}if(this.iframe){this.navigate(E)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(G){var F=this.fragment=this.getFragment(G);var E=C.any(this.handlers,function(H){if(H.route.test(F)){H.callback(F);return true}});return E},navigate:function(F,E){if(!b.started){return false}if(!E||E===true){E={trigger:E}}var G=(F||"").replace(o,"");if(this.fragment==G){return}if(this._hasPushState){if(G.indexOf(this.options.root)!=0){G=this.options.root+G}this.fragment=G;window.history[E.replace?"replaceState":"pushState"]({},document.title,G)}else{if(this._wantsHashChange){this.fragment=G;this._updateHash(window.location,G,E.replace);if(this.iframe&&(G!=this.getFragment(this.getHash(this.iframe)))){if(!E.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,G,E.replace)}}else{window.location.assign(this.options.root+F)}}if(E.trigger){this.loadUrl(F)}},_updateHash:function(E,F,G){if(G){E.replace(E.toString().replace(/(javascript:|#).*$/,"")+"#"+F)}else{E.hash=F}}});var u=c.View=function(E){this.cid=C.uniqueId("view");this._configure(E||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var f=/^(\S+)\s*(.*)$/;var w=["model","collection","el","id","attributes","className","tagName"];C.extend(u.prototype,p,{tagName:"div",$:function(E){return this.$el.find(E)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(F,E,H){var G=document.createElement(F);if(E){h(G).attr(E)}if(H){h(G).html(H)}return G},setElement:function(E,F){if(this.$el){this.undelegateEvents()}this.$el=(E instanceof h)?E:h(E);this.el=this.$el[0];if(F!==false){this.delegateEvents()}return this},delegateEvents:function(I){if(!(I||(I=d(this,"events")))){return}this.undelegateEvents();for(var H in I){var J=I[H];if(!C.isFunction(J)){J=this[I[H]]}if(!J){throw new Error('Method "'+I[H]+'" does not exist')}var G=H.match(f);var F=G[1],E=G[2];J=C.bind(J,this);F+=".delegateEvents"+this.cid;if(E===""){this.$el.bind(F,J)}else{this.$el.delegate(E,F,J)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(G){if(this.options){G=C.extend({},this.options,G)}for(var H=0,F=w.length;H<F;H++){var E=w[H];if(G[E]){this[E]=G[E]}}this.options=G},_ensureElement:function(){if(!this.el){var E=d(this,"attributes")||{};if(this.id){E.id=this.id}if(this.className){E["class"]=this.className}this.setElement(this.make(this.tagName,E),false)}else{this.setElement(this.el,false)}}});var x=function(E,F){var G=n(this,E,F);G.extend=this.extend;return G};m.extend=D.extend=B.extend=u.extend=x;var t={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(I,F,E){var G=t[I];E||(E={});var H={type:G,dataType:"json"};if(!E.url){H.url=d(F,"url")||v()}if(!E.data&&F&&(I=="create"||I=="update")){H.contentType="application/json";H.data=JSON.stringify(F.toJSON())}if(c.emulateJSON){H.contentType="application/x-www-form-urlencoded";H.data=H.data?{model:H.data}:{}}if(c.emulateHTTP){if(G==="PUT"||G==="DELETE"){if(c.emulateJSON){H.data._method=G}H.type="POST";H.beforeSend=function(J){J.setRequestHeader("X-HTTP-Method-Override",G)}}}if(H.type!=="GET"&&!c.emulateJSON){H.processData=false}return h.ajax(C.extend(H,E))};c.wrapError=function(F,G,E){return function(H,I){I=H===G?I:H;if(F){F(G,I,E)}else{G.trigger("error",G,I,E)}}};var j=function(){};var n=function(F,E,G){var H;if(E&&E.hasOwnProperty("constructor")){H=E.constructor}else{H=function(){F.apply(this,arguments)}}C.extend(H,F);j.prototype=F.prototype;H.prototype=new j();if(E){C.extend(H.prototype,E)}if(G){C.extend(H,G)}H.prototype.constructor=H;H.__super__=F.prototype;return H};var d=function(E,F){if(!(E&&E[F])){return null}return C.isFunction(E[F])?E[F]():E[F]};var v=function(){throw new Error('A "url" property or function must be specified')}}).call(this);(function(){var a;a=(function(){function b(){this.options_index=0;this.parsed=[]}b.prototype.add_node=function(c){if(c.nodeName==="OPTGROUP"){return this.add_group(c)}else{return this.add_option(c)}};b.prototype.add_group=function(k){var j,e,h,d,f,c;j=this.parsed.length;this.parsed.push({array_index:j,group:true,label:k.label,children:0,disabled:k.disabled});f=k.childNodes;c=[];for(h=0,d=f.length;h<d;h++){e=f[h];c.push(this.add_option(e,j,k.disabled))}return c};b.prototype.add_option=function(d,e,c){if(d.nodeName==="OPTION"){if(d.text!==""){if(e!=null){this.parsed[e].children+=1}this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:d.value,text:d.text,html:d.innerHTML,selected:d.selected,disabled:c===true?c:d.disabled,group_array_index:e,classes:d.className,style:d.style.cssText})}else{this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true})}return this.options_index+=1}};return b})();a.select_to_array=function(b){var h,f,e,c,d;f=new a();d=b.childNodes;for(e=0,c=d.length;e<c;e++){h=d[e];f.add_node(h)}return f.parsed};this.SelectParser=a}).call(this);(function(){var b,a;a=this;b=(function(){function c(d,e){this.form_field=d;this.options=e!=null?e:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()}c.prototype.set_default_values=function(){var d=this;this.click_test_action=function(e){return d.test_active_click(e)};this.activate_action=function(e){return d.activate_field(e)};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.result_single_selected=null;this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.search_contains=this.options.search_contains||false;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||false;return this.max_selected_options=this.options.max_selected_options||Infinity};c.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder")){this.default_text=this.form_field.getAttribute("data-placeholder")}else{if(this.is_multiple){this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options"}else{this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option"}}return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"};c.prototype.mouse_enter=function(){return this.mouse_on_container=true};c.prototype.mouse_leave=function(){return this.mouse_on_container=false};c.prototype.input_focus=function(d){var e=this;if(!this.active_field){return setTimeout((function(){return e.container_mousedown()}),50)}};c.prototype.input_blur=function(d){var e=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout((function(){return e.blur_test()}),100)}};c.prototype.result_add_option=function(f){var d,e;if(!f.disabled){f.dom_id=this.container_id+"_o_"+f.array_index;d=f.selected&&this.is_multiple?[]:["active-result"];if(f.selected){d.push("result-selected")}if(f.group_array_index!=null){d.push("group-option")}if(f.classes!==""){d.push(f.classes)}e=f.style.cssText!==""?' style="'+f.style+'"':"";return'<li id="'+f.dom_id+'" class="'+d.join(" ")+'"'+e+">"+f.html+"</li>"}else{return""}};c.prototype.results_update_field=function(){if(!this.is_multiple){this.results_reset_cleanup()}this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};c.prototype.results_toggle=function(){if(this.results_showing){return this.results_hide()}else{return this.results_show()}};c.prototype.results_search=function(d){if(this.results_showing){return this.winnow_results()}else{return this.results_show()}};c.prototype.keyup_checker=function(d){var f,e;f=(e=d.which)!=null?e:d.keyCode;this.search_field_scale();switch(f){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0){return this.keydown_backstroke()}else{if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search()}}break;case 13:d.preventDefault();if(this.results_showing){return this.result_select(d)}break;case 27:if(this.results_showing){this.results_hide()}return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};c.prototype.generate_field_id=function(){var d;d=this.generate_random_id();this.form_field.id=d;return d};c.prototype.generate_random_char=function(){var f,e,d;f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";d=Math.floor(Math.random()*f.length);return e=f.substring(d,d+1)};return c})();a.AbstractChosen=b}).call(this);(function(){var e,f,d,a,b=Object.prototype.hasOwnProperty,c=function(l,j){for(var h in j){if(b.call(j,h)){l[h]=j[h]}}function k(){this.constructor=l}k.prototype=j.prototype;l.prototype=new k;l.__super__=j.prototype;return l};a=this;e=jQuery;e.fn.extend({chosen:function(h){if(e.browser.msie&&(e.browser.version==="6.0"||e.browser.version==="7.0")){return this}return this.each(function(j){var k;k=e(this);if(!k.hasClass("chzn-done")){return k.data("chosen",new f(this,h))}})}});f=(function(h){c(j,h);function j(){j.__super__.constructor.apply(this,arguments)}j.prototype.setup=function(){this.form_field_jq=e(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};j.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};j.prototype.set_up_html=function(){var n,m,l,k;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();n=e("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});if(this.is_multiple){n.html('<ul class="chzn-choices"><li class="search-field"><input type="text" placeholder="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>')}else{n.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>')}this.form_field_jq.hide().after(n);this.container=e("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();m=this.container.height();l=this.f_width-d(this.dropdown);this.dropdown.css({width:l+"px",top:m+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();if(this.is_multiple){this.search_choices=this.container.find("ul.chzn-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chzn-search").first();this.selected_item=this.container.find(".chzn-single").first();k=l-d(this.search_container)-d(this.search_field);this.search_field.css({width:k+"px"})}this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};j.prototype.register_observers=function(){var k=this;this.container.mousedown(function(l){return k.container_mousedown(l)});this.container.mouseup(function(l){return k.container_mouseup(l)});this.container.mouseenter(function(l){return k.mouse_enter(l)});this.container.mouseleave(function(l){return k.mouse_leave(l)});this.search_results.mouseup(function(l){return k.search_results_mouseup(l)});this.search_results.mouseover(function(l){return k.search_results_mouseover(l)});this.search_results.mouseout(function(l){return k.search_results_mouseout(l)});this.form_field_jq.bind("liszt:updated",function(l){return k.results_update_field(l)});this.search_field.blur(function(l){return k.input_blur(l)});this.search_field.keyup(function(l){return k.keyup_checker(l)});this.search_field.keydown(function(l){return k.keydown_checker(l)});if(this.is_multiple){this.search_choices.click(function(l){return k.choices_click(l)});return this.search_field.focus(function(l){return k.input_focus(l)})}else{return this.container.click(function(l){return l.preventDefault()})}};j.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass("chzn-disabled");this.search_field[0].disabled=true;if(!this.is_multiple){this.selected_item.unbind("focus",this.activate_action)}return this.close_field()}else{this.container.removeClass("chzn-disabled");this.search_field[0].disabled=false;if(!this.is_multiple){return this.selected_item.bind("focus",this.activate_action)}}};j.prototype.container_mousedown=function(k){var l;if(!this.is_disabled){l=k!=null?(e(k.target)).hasClass("search-choice-close"):false;if(k&&k.type==="mousedown"&&!this.results_showing){k.stopPropagation()}if(!this.pending_destroy_click&&!l){if(!this.active_field){if(this.is_multiple){this.search_field.val("")}e(document).click(this.click_test_action);this.results_show()}else{if(!this.is_multiple&&k&&((e(k.target)[0]===this.selected_item[0])||e(k.target).parents("a.chzn-single").length)){k.preventDefault();this.results_toggle()}}return this.activate_field()}else{return this.pending_destroy_click=false}}};j.prototype.container_mouseup=function(k){if(k.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(k)}};j.prototype.blur_test=function(k){if(!this.active_field&&this.container.hasClass("chzn-container-active")){return this.close_field()}};j.prototype.close_field=function(){e(document).unbind("click",this.click_test_action);if(!this.is_multiple){this.selected_item.attr("tabindex",this.search_field.attr("tabindex"));this.search_field.attr("tabindex",-1)}this.active_field=false;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};j.prototype.activate_field=function(){if(!this.is_multiple&&!this.active_field){this.search_field.attr("tabindex",this.selected_item.attr("tabindex"));this.selected_item.attr("tabindex",-1)}this.container.addClass("chzn-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus()};j.prototype.test_active_click=function(k){if(e(k.target).parents("#"+this.container_id).length){return this.active_field=true}else{return this.close_field()}};j.prototype.results_build=function(){var l,o,n,k,m;this.parsing=true;this.results_data=a.SelectParser.select_to_array(this.form_field);if(this.is_multiple&&this.choices>0){this.search_choices.find("li.search-choice").remove();this.choices=0}else{if(!this.is_multiple){this.selected_item.addClass("chzn-default").find("span").text(this.default_text);if(this.form_field.options.length<=this.disable_search_threshold){this.container.addClass("chzn-container-single-nosearch")}else{this.container.removeClass("chzn-container-single-nosearch")}}}l="";m=this.results_data;for(n=0,k=m.length;n<k;n++){o=m[n];if(o.group){l+=this.result_add_group(o)}else{if(!o.empty){l+=this.result_add_option(o);if(o.selected&&this.is_multiple){this.choice_build(o)}else{if(o.selected&&!this.is_multiple){this.selected_item.removeClass("chzn-default").find("span").text(o.text);if(this.allow_single_deselect){this.single_deselect_control_build()}}}}}}this.search_field_disabled();this.show_search_field_default();this.search_field_scale();this.search_results.html(l);return this.parsing=false};j.prototype.result_add_group=function(k){if(!k.disabled){k.dom_id=this.container_id+"_g_"+k.array_index;return'<li id="'+k.dom_id+'" class="group-result">'+e("<div />").text(k.label).html()+"</li>"}else{return""}};j.prototype.result_do_highlight=function(l){var p,o,m,n,k;if(l.length){this.result_clear_highlight();this.result_highlight=l;this.result_highlight.addClass("highlighted");m=parseInt(this.search_results.css("maxHeight"),10);k=this.search_results.scrollTop();n=m+k;o=this.result_highlight.position().top+this.search_results.scrollTop();p=o+this.result_highlight.outerHeight();if(p>=n){return this.search_results.scrollTop((p-m)>0?p-m:0)}else{if(o<k){return this.search_results.scrollTop(o)}}}};j.prototype.result_clear_highlight=function(){if(this.result_highlight){this.result_highlight.removeClass("highlighted")}return this.result_highlight=null};j.prototype.results_show=function(){var k;if(!this.is_multiple){this.selected_item.addClass("chzn-single-with-drop");if(this.result_single_selected){this.result_do_highlight(this.result_single_selected)}}else{if(this.max_selected_options<=this.choices){this.form_field_jq.trigger("liszt:maxselected",{chosen:this});return false}}k=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:k+"px",left:0});this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};j.prototype.results_hide=function(){if(!this.is_multiple){this.selected_item.removeClass("chzn-single-with-drop")}this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=false};j.prototype.set_tab_index=function(l){var k;if(this.form_field_jq.attr("tabindex")){k=this.form_field_jq.attr("tabindex");this.form_field_jq.attr("tabindex",-1);if(this.is_multiple){return this.search_field.attr("tabindex",k)}else{this.selected_item.attr("tabindex",k);return this.search_field.attr("tabindex",-1)}}};j.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default")}else{this.search_field.val("");return this.search_field.removeClass("default")}};j.prototype.search_results_mouseup=function(k){var l;l=e(k.target).hasClass("active-result")?e(k.target):e(k.target).parents(".active-result").first();if(l.length){this.result_highlight=l;return this.result_select(k)}};j.prototype.search_results_mouseover=function(k){var l;l=e(k.target).hasClass("active-result")?e(k.target):e(k.target).parents(".active-result").first();if(l){return this.result_do_highlight(l)}};j.prototype.search_results_mouseout=function(k){if(e(k.target).hasClass("active-result"||e(k.target).parents(".active-result").first())){return this.result_clear_highlight()}};j.prototype.choices_click=function(k){k.preventDefault();if(this.active_field&&!(e(k.target).hasClass("search-choice"||e(k.target).parents(".search-choice").first))&&!this.results_showing){return this.results_show()}};j.prototype.choice_build=function(m){var k,l,n=this;if(this.is_multiple&&this.max_selected_options<=this.choices){this.form_field_jq.trigger("liszt:maxselected",{chosen:this});return false}k=this.container_id+"_c_"+m.array_index;this.choices+=1;this.search_container.before('<li class="search-choice" id="'+k+'"><span>'+m.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+m.array_index+'"></a></li>');l=e("#"+k).find("a").first();return l.click(function(o){return n.choice_destroy_link_click(o)})};j.prototype.choice_destroy_link_click=function(k){k.preventDefault();if(!this.is_disabled){this.pending_destroy_click=true;return this.choice_destroy(e(k.target))}else{return k.stopPropagation}};j.prototype.choice_destroy=function(k){this.choices-=1;this.show_search_field_default();if(this.is_multiple&&this.choices>0&&this.search_field.val().length<1){this.results_hide()}this.result_deselect(k.attr("rel"));return k.parents("li").first().remove()};j.prototype.results_reset=function(){this.form_field.options[0].selected=true;this.selected_item.find("span").text(this.default_text);if(!this.is_multiple){this.selected_item.addClass("chzn-default")}this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide()}};j.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()};j.prototype.result_select=function(l){var p,o,n,k;if(this.result_highlight){p=this.result_highlight;if(p.hasClass("add-result")){var m=p.find("span").first().text();this.form_field_jq.append(e("<option>",{value:m}).text(m));this.results_update_field();this.no_results_clear();p=this.search_results.find("li").last()}o=p.attr("id");this.result_clear_highlight();if(this.is_multiple){this.result_deactivate(p)}else{this.search_results.find(".result-selected").removeClass("result-selected");this.result_single_selected=p;this.selected_item.removeClass("chzn-default")}p.addClass("result-selected");k=o.substr(o.lastIndexOf("_")+1);n=this.results_data[k];n.selected=true;this.form_field.options[n.options_index].selected=true;if(this.is_multiple){this.choice_build(n)}else{this.selected_item.find("span").first().text(n.text);if(this.allow_single_deselect){this.single_deselect_control_build()}}if(!(l.metaKey&&this.is_multiple)){this.results_hide()}this.search_field.val("");if(this.is_multiple||this.form_field_jq.val()!==this.current_value){this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value})}this.current_value=this.form_field_jq.val();return this.search_field_scale()}};j.prototype.result_activate=function(k){return k.addClass("active-result")};j.prototype.result_deactivate=function(k){return k.removeClass("active-result")};j.prototype.result_deselect=function(m){var k,l;l=this.results_data[m];l.selected=false;this.form_field.options[l.options_index].selected=false;k=e("#"+this.container_id+"_o_"+m);k.removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[l.options_index].value});return this.search_field_scale()};j.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1){return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')}};j.prototype.winnow_results=function(){var q,s,w,v,m,t,p,z,u,y,x,r,n,l,k,A,B,o;this.no_results_clear();u=0;y=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html();t=this.search_contains?"":"^";m=new RegExp(t+y.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");n=new RegExp(y.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");o=this.results_data;for(l=0,A=o.length;l<A;l++){s=o[l];if(!s.disabled&&!s.empty){if(s.group){e("#"+s.dom_id).css("display","none")}else{if(!(this.is_multiple&&s.selected)){q=false;z=s.dom_id;p=e("#"+z);if(m.test(s.html)){q=true;u+=1}else{if(s.html.indexOf(" ")>=0||s.html.indexOf("[")===0){v=s.html.replace(/\[|\]/g,"").split(" ");if(v.length){for(k=0,B=v.length;k<B;k++){w=v[k];if(m.test(w)){q=true;u+=1}}}}}if(q){if(y.length){x=s.html.search(n);r=s.html.substr(0,x+y.length)+"</em>"+s.html.substr(x+y.length);r=r.substr(0,x)+"<em>"+r.substr(x)}else{r=s.html}p.html(r);this.result_activate(p);if(s.group_array_index!=null){e("#"+this.results_data[s.group_array_index].dom_id).css("display","list-item")}}else{if(this.result_highlight&&z===this.result_highlight.attr("id")){this.result_clear_highlight()}this.result_deactivate(p)}}}}}if(u<1&&y.length){return this.no_results(y)}else{return this.winnow_results_set_highlight()}};j.prototype.winnow_results_clear=function(){var k,n,o,m,l;this.search_field.val("");n=this.search_results.find("li");l=[];for(o=0,m=n.length;o<m;o++){k=n[o];k=e(k);if(k.hasClass("group-result")){l.push(k.css("display","auto"))}else{if(!this.is_multiple||!k.hasClass("result-selected")){l.push(this.result_activate(k))}else{l.push(void 0)}}}return l};j.prototype.winnow_results_set_highlight=function(){var k,l;if(!this.result_highlight){l=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];k=l.length?l.first():this.search_results.find(".active-result").first();if(k!=null){return this.result_do_highlight(k)}}};j.prototype.no_results=function(l){var m;var k;m=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');m.find("span").first().html(l);k=e('<li class="active-result add-result">Add "<span></span>"</li>');k.find("span").first().html(l);if(this.options.disable_add_result){return this.search_results.append(m)}else{return this.search_results.append(m).append(k)}};j.prototype.no_results_clear=function(){this.search_results.find(".add-result").remove();return this.search_results.find(".no-results").remove()};j.prototype.keydown_arrow=function(){var l,k;if(!this.result_highlight){l=this.search_results.find("li.active-result").first();if(l){this.result_do_highlight(e(l))}}else{if(this.results_showing){k=this.result_highlight.nextAll("li.active-result").first();if(k){this.result_do_highlight(k)}}}if(!this.results_showing){return this.results_show()}};j.prototype.keyup_arrow=function(){var k;if(!this.results_showing&&!this.is_multiple){return this.results_show()}else{if(this.result_highlight){k=this.result_highlight.prevAll("li.active-result");if(k.length){return this.result_do_highlight(k.first())}else{if(this.choices>0){this.results_hide()}return this.result_clear_highlight()}}}};j.prototype.keydown_backstroke=function(){if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke()}else{this.pending_backstroke=this.search_container.siblings("li.search-choice").last();if(this.single_backstroke_delete){return this.keydown_backstroke()}else{return this.pending_backstroke.addClass("search-choice-focus")}}};j.prototype.clear_backstroke=function(){if(this.pending_backstroke){this.pending_backstroke.removeClass("search-choice-focus")}return this.pending_backstroke=null};j.prototype.keydown_checker=function(k){var m,l;m=(l=k.which)!=null?l:k.keyCode;this.search_field_scale();if(m!==8&&this.pending_backstroke){this.clear_backstroke()}switch(m){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:if(this.results_showing&&!this.is_multiple){this.result_select(k)}this.mouse_on_container=false;break;case 13:k.preventDefault();break;case 38:k.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow();break}};j.prototype.search_field_scale=function(){var s,k,n,l,q,r,p,m,o;if(this.is_multiple){n=0;p=0;q="position:absolute; left: -1000px; top: -1000px; display:none;";r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(m=0,o=r.length;m<o;m++){l=r[m];q+=l+":"+this.search_field.css(l)+";"}k=e("<div />",{style:q});k.text(this.search_field.val());e("body").append(k);p=k.width()+25;k.remove();if(p>this.f_width-10){p=this.f_width-10}this.search_field.css({width:p+"px"});s=this.container.height();return this.dropdown.css({top:s+"px"})}};j.prototype.generate_random_id=function(){var k;k="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(e("#"+k).length>0){k+=this.generate_random_char()}return k};return j})(AbstractChosen);d=function(h){var j;return j=h.outerWidth()-h.width()};a.get_side_border_padding=d}).call(this);
/*!
* Fine Uploader
*
* Copyright 2013-2014, Widen Enterprises, Inc. info@fineuploader.com
*
* Version: 5.0.8
*
* Homepage: http://fineuploader.com
*
* Repository: git://github.com/Widen/fine-uploader.git
*
* Licensed under GNU GPL v3, see LICENSE
*
* Third-party credits:
*   MegaPixImageModule (MIT)
*       https://github.com/stomita/ios-imagefile-megapixel
*       Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
*
*   CryptoJS
*       code.google.com/p/crypto-js/wiki/License
*       (c) 2009-2013 by Jeff Mott. All rights reserved.
*/
var qq=function(b){return{hide:function(){return b.style.display="none",this},attach:function(a,d){return b.addEventListener?b.addEventListener(a,d,!1):b.attachEvent&&b.attachEvent("on"+a,d),function(){qq(b).detach(a,d)}},detach:function(a,d){return b.removeEventListener?b.removeEventListener(a,d,!1):b.attachEvent&&b.detachEvent("on"+a,d),this},contains:function(a){return a?b===a?!0:b.contains?b.contains(a):!!(8&a.compareDocumentPosition(b)):!1},insertBefore:function(a){return a.parentNode.insertBefore(b,a),this},remove:function(){return b.parentNode.removeChild(b),this},css:function(a){if(null==b.style){throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!")}return null!=a.opacity&&"string"!=typeof b.style.opacity&&"undefined"!=typeof b.filters&&(a.filter="alpha(opacity="+Math.round(100*a.opacity)+")"),qq.extend(b.style,a),this},hasClass:function(a){var d=new RegExp("(^| )"+a+"( |$)");return d.test(b.className)},addClass:function(a){return qq(b).hasClass(a)||(b.className+=" "+a),this},removeClass:function(a){var d=new RegExp("(^| )"+a+"( |$)");return b.className=b.className.replace(d," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(a){var f,e=[];return b.querySelectorAll?b.querySelectorAll("."+a):(f=b.getElementsByTagName("*"),qq.each(f,function(d,h){qq(h).hasClass(a)&&e.push(h)}),e)},children:function(){for(var a=[],d=b.firstChild;d;){1===d.nodeType&&a.push(d),d=d.nextSibling}return a},setText:function(a){return b.innerText=a,b.textContent=a,this},clearText:function(){return qq(b).setText("")},hasAttribute:function(a){var d;return b.hasAttribute?b.hasAttribute(a)?null==/^false$/i.exec(b.getAttribute(a)):!1:(d=b[a],void 0===d?!1:null==/^false$/i.exec(d))}}};!function(){qq.log=function(a,b){window.console&&(b&&"info"!==b?window.console[b]?window.console[b](a):window.console.log("<"+b+"> "+a):window.console.log(a))},qq.isObject=function(a){return a&&!a.nodeType&&"[object Object]"===Object.prototype.toString.call(a)},qq.isFunction=function(a){return"function"==typeof a},qq.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)||a&&window.ArrayBuffer&&a.buffer&&a.buffer.constructor===ArrayBuffer},qq.isItemList=function(a){return"[object DataTransferItemList]"===Object.prototype.toString.call(a)},qq.isNodeList=function(a){return"[object NodeList]"===Object.prototype.toString.call(a)||a.item&&a.namedItem},qq.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)},qq.trimStr=function(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},qq.format=function(a){var b=Array.prototype.slice.call(arguments,1),c=a,d=c.indexOf("{}");return qq.each(b,function(a,b){var e=c.substring(0,d),f=c.substring(d+2);return c=e+b+f,d=c.indexOf("{}",d+b.length),0>d?!1:void 0}),c},qq.isFile=function(a){return window.File&&"[object File]"===Object.prototype.toString.call(a)},qq.isFileList=function(a){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(a)},qq.isFileOrInput=function(a){return qq.isFile(a)||qq.isInput(a)},qq.isInput=function(a,b){var c=function(a){var c=a.toLowerCase();return b?"file"!==c:"file"===c};return window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(a)&&a.type&&c(a.type)?!0:a.tagName&&"input"===a.tagName.toLowerCase()&&a.type&&c(a.type)?!0:!1},qq.isBlob=function(a){return window.Blob&&"[object Blob]"===Object.prototype.toString.call(a)?!0:void 0},qq.isXhrUploadSupported=function(){var a=document.createElement("input");return a.type="file",void 0!==a.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof qq.createXhrInstance().upload},qq.createXhrInstance=function(){if(window.XMLHttpRequest){return new XMLHttpRequest}try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return qq.log("Neither XHR or ActiveX are supported!","error"),null}},qq.isFolderDropSupported=function(a){return a.items&&a.items.length>0&&a.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return !qq.androidStock()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)},qq.sliceBlob=function(a,b,c){var d=a.slice||a.mozSlice||a.webkitSlice;return d.call(a,b,c)},qq.arrayBufferToHex=function(a){var b="",c=new Uint8Array(a);return qq.each(c,function(a,c){var d=c.toString(16);d.length<2&&(d="0"+d),b+=d}),b},qq.readBlobToHex=function(a,b,c){var d=qq.sliceBlob(a,b,b+c),e=new FileReader,f=new qq.Promise;return e.onload=function(){f.success(qq.arrayBufferToHex(e.result))},e.onerror=f.failure,e.readAsArrayBuffer(d),f},qq.extend=function(a,b,c){return qq.each(b,function(b,d){c&&qq.isObject(d)?(void 0===a[b]&&(a[b]={}),qq.extend(a[b],d,!0)):a[b]=d}),a},qq.override=function(a,b){var c={},d=b(c);return qq.each(d,function(b,d){void 0!==a[b]&&(c[b]=a[b]),a[b]=d}),a},qq.indexOf=function(a,b,c){if(a.indexOf){return a.indexOf(b,c)}c=c||0;var d=a.length;for(0>c&&(c+=d);d>c;c+=1){if(a.hasOwnProperty(c)&&a[c]===b){return c}}return -1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},qq.ie=function(){return -1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")},qq.ie7=function(){return -1!==navigator.userAgent.indexOf("MSIE 7")},qq.ie8=function(){return -1!==navigator.userAgent.indexOf("MSIE 8")},qq.ie10=function(){return -1!==navigator.userAgent.indexOf("MSIE 10")},qq.ie11=function(){return qq.ie()&&-1!==navigator.userAgent.indexOf("rv:11")},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")},qq.firefox=function(){return !qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return -1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0},qq.ios6=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 6_")},qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")},qq.ios8=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_")},qq.ios800=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_0 ")},qq.ios=function(){return -1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")},qq.iosChrome=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf("CriOS")},qq.iosSafari=function(){return qq.ios()&&!qq.iosChrome()&&-1!==navigator.userAgent.indexOf("Safari")},qq.iosSafariWebView=function(){return qq.ios()&&!qq.iosChrome()&&!qq.iosSafari()},qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},qq.toElement=function(){var a=document.createElement("div");return function(b){a.innerHTML=b;var c=a.firstChild;return a.removeChild(c),c}}(),qq.each=function(a,b){var c,d;if(a){if(window.Storage&&a.constructor===window.Storage){for(c=0;c<a.length&&(d=b(a.key(c),a.getItem(a.key(c))),d!==!1);c++){}}else{if(qq.isArray(a)||qq.isItemList(a)||qq.isNodeList(a)){for(c=0;c<a.length&&(d=b(c,a[c]),d!==!1);c++){}}else{if(qq.isString(a)){for(c=0;c<a.length&&(d=b(c,a.charAt(c)),d!==!1);c++){}}else{for(c in a){if(Object.prototype.hasOwnProperty.call(a,c)&&(d=b(c,a[c]),d===!1)){break}}}}}}},qq.bind=function(a,b){if(qq.isFunction(a)){var c=Array.prototype.slice.call(arguments,2);return function(){var d=qq.extend([],c);return arguments.length&&(d=d.concat(Array.prototype.slice.call(arguments))),a.apply(b,d)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(a,b,c){var d=[],e="&",f=function(a,c){var e=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;"undefined"!==e&&"undefined"!==c&&d.push("object"==typeof a?qq.obj2url(a,e,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(e)+"="+encodeURIComponent(a()):encodeURIComponent(e)+"="+encodeURIComponent(a))};return !c&&b?(e=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",d.push(b),d.push(qq.obj2url(a))):"[object Array]"===Object.prototype.toString.call(a)&&"undefined"!=typeof a?qq.each(a,function(a,b){f(b,a)}):"undefined"!=typeof a&&null!==a&&"object"==typeof a?qq.each(a,function(a,b){f(b,a)}):d.push(encodeURIComponent(b)+"="+encodeURIComponent(a)),b?d.join(e):d.join(e).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(a,b,c){return b||(b=new FormData),qq.each(a,function(a,d){a=c?c+"["+a+"]":a,qq.isObject(d)?qq.obj2FormData(d,b,a):qq.isFunction(d)?b.append(a,d()):b.append(a,d)}),b},qq.obj2Inputs=function(a,b){var c;return b||(b=document.createElement("form")),qq.obj2FormData(a,{append:function(a,d){c=document.createElement("input"),c.setAttribute("name",a),c.setAttribute("value",d),b.appendChild(c)}}),b},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.getExtension=function(a){var b=a.lastIndexOf(".")+1;return b>0?a.substr(b,a.length-b):void 0},qq.getFilename=function(a){return qq.isInput(a)?a.value.replace(/.*(\/|\\)/,""):qq.isFile(a)&&null!==a.fileName&&void 0!==a.fileName?a.fileName:a.name},qq.DisposeSupport=function(){var a=[];return{dispose:function(){var b;do{b=a.shift(),b&&b()}while(b)},attach:function(){var a=arguments;this.addDisposer(qq(a[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(b){a.push(b)}}}}(),function(){qq.Error=function(b){this.message="[Fine Uploader "+qq.version+"] "+b},qq.Error.prototype=new Error}(),qq.version="5.0.8",qq.supportedFeatures=function(){function P(){var e,d=!0;try{e=document.createElement("input"),e.type="file",qq(e).hide(),e.disabled&&(d=!1)}catch(f){d=!1}return d}function O(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)}function N(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)}function M(){if(window.XMLHttpRequest){var b=qq.createXhrInstance();return void 0!==b.withCredentials}return !1}function L(){return void 0!==window.XDomainRequest}function K(){return M()?!0:L()}function J(){return void 0!==document.createElement("input").webkitdirectory}var I,H,G,F,E,D,C,B,A,z,y,x,w,v;return I=P(),G=I&&qq.isXhrUploadSupported(),H=G&&!qq.androidStock(),F=G&&O(),E=G&&qq.isFileChunkingSupported(),D=G&&E&&!!window.localStorage,C=G&&N(),B=I&&(void 0!==window.postMessage||G),z=M(),A=L(),y=K(),x=J(),w=G&&void 0!==window.FileReader,v=function(){return G?!qq.androidStock()&&!qq.iosChrome():!1}(),{ajaxUploading:G,blobUploading:H,canDetermineSize:G,chunking:E,deleteFileCors:y,deleteFileCorsXdr:A,deleteFileCorsXhr:z,fileDrop:G,folderDrop:F,folderSelection:x,imagePreviews:w,imageValidation:w,itemSizeValidation:G,pause:E,progressBar:v,resume:D,scaling:w&&H,tiffPreviews:qq.safari(),unlimitedScaledImageSize:!qq.ios(),uploading:I,uploadCors:B,uploadCustomHeaders:G,uploadNonMultipart:G,uploadViaPaste:C}}(),qq.isGenericPromise=function(b){return !!(b&&b.then&&qq.isFunction(b.then))},qq.Promise=function(){var j,h,n=[],m=[],l=[],k=0;qq.extend(this,{then:function(b,a){return 0===k?(b&&n.push(b),a&&m.push(a)):-1===k?a&&a.apply(null,h):b&&b.apply(null,j),this},done:function(a){return 0===k?l.push(a):a.apply(null,void 0===h?j:h),this},success:function(){return k=1,j=arguments,n.length&&qq.each(n,function(a,d){d.apply(null,j)}),l.length&&qq.each(l,function(a,d){d.apply(null,j)}),this},failure:function(){return k=-1,h=arguments,m.length&&qq.each(m,function(b,d){d.apply(null,h)}),l.length&&qq.each(l,function(b,d){d.apply(null,h)}),this}})},qq.BlobProxy=function(d,c){qq.extend(this,{referenceBlob:d,create:function(){return c(d)}})},qq.UploadButton=function(j){function h(){var b=document.createElement("input");return b.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,n),m.setMultiple(k.multiple,b),k.folders&&qq.supportedFeatures.folderSelection&&b.setAttribute("webkitdirectory",""),k.acceptFiles&&b.setAttribute("accept",k.acceptFiles),b.setAttribute("type","file"),b.setAttribute("name",k.name),qq(b).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:qq.ie()&&!qq.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),!qq.ie7()&&qq(b).css({height:"100%"}),k.element.appendChild(b),l.attach(b,"change",function(){k.onChange(b)}),l.attach(b,"mouseover",function(){qq(k.element).addClass(k.hoverClass)}),l.attach(b,"mouseout",function(){qq(k.element).removeClass(k.hoverClass)}),l.attach(b,"focus",function(){qq(k.element).addClass(k.focusClass)}),l.attach(b,"blur",function(){qq(k.element).removeClass(k.focusClass)}),window.attachEvent&&b.setAttribute("tabIndex","-1"),b}var o,n,m=this,l=new qq.DisposeSupport,k={element:null,multiple:!1,acceptFiles:null,folders:!1,name:"qqfile",onChange:function(){},ios8BrowserCrashWorkaround:!0,hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(k,j),n=qq.getUniqueId(),qq(k.element).css({position:"relative",overflow:"hidden",direction:"ltr"}),qq.extend(this,{getInput:function(){return o},getButtonId:function(){return n},setMultiple:function(e,d){var f=d||this.getInput();k.ios8BrowserCrashWorkaround&&qq.ios8()&&(qq.iosChrome()||qq.iosSafariWebView())?f.setAttribute("multiple",""):e?f.setAttribute("multiple",""):f.removeAttribute("multiple")},setAcceptFiles:function(b){b!==k.acceptFiles&&o.setAttribute("accept",b)},reset:function(){o.parentNode&&qq(o).remove(),qq(k.element).removeClass(k.focusClass),o=null,o=h()}}),o=h()},qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id",qq.UploadData=function(r){function q(d){if(qq.isArray(d)){var c=[];return qq.each(d,function(b,e){c.push(n[e])}),c}return n[d]}function p(d){if(qq.isArray(d)){var c=[];return qq.each(d,function(b,e){c.push(n[m[e]])}),c}return n[m[d]]}function o(e){var d=[],f=[].concat(e);return qq.each(f,function(b,s){var h=l[s];void 0!==h&&qq.each(h,function(t,u){d.push(n[u])})}),d}var n=[],m={},l={},k={},j={};qq.extend(this,{addFile:function(a){var f=a.status||qq.status.SUBMITTING,e=n.push({name:a.name,originalName:a.name,uuid:a.uuid,size:a.size||-1,status:f})-1;return a.batchId&&(n[e].batchId=a.batchId,void 0===j[a.batchId]&&(j[a.batchId]=[]),j[a.batchId].push(e)),a.proxyGroupId&&(n[e].proxyGroupId=a.proxyGroupId,void 0===k[a.proxyGroupId]&&(k[a.proxyGroupId]=[]),k[a.proxyGroupId].push(e)),n[e].id=e,m[a.uuid]=e,void 0===l[f]&&(l[f]=[]),l[f].push(e),r.onStatusChange(e,null,f),e},retrieve:function(b){return qq.isObject(b)&&n.length?void 0!==b.id?q(b.id):void 0!==b.uuid?p(b.uuid):b.status?o(b.status):void 0:qq.extend([],n,!0)},reset:function(){n=[],m={},l={},j={}},setStatus:function(a,s){var h=n[a].status,e=qq.indexOf(l[h],a);l[h].splice(e,1),n[a].status=s,void 0===l[s]&&(l[s]=[]),l[s].push(a),r.onStatusChange(a,h,s)},uuidChanged:function(e,d){var f=n[e].uuid;n[e].uuid=d,m[d]=e,delete m[f]},updateName:function(d,c){n[d].name=c},updateSize:function(d,c){n[d].size=c},setParentId:function(d,c){n[d].parentId=c},getIdsInProxyGroup:function(d){var c=n[d].proxyGroupId;return c?k[c]:[]},getIdsInBatch:function(d){var c=n[d].batchId;return j[c]}})},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},function(){qq.basePublicApi={addBlobs:function(j,h,o){if(!qq.supportedFeatures.blobUploading){throw new qq.Error("Blob uploading is not supported in this browser!")}if(this._maybeHandleIos8SafariWorkaround(),j){var n=[].concat(j),m=[],l=0===this._storedIds.length?qq.getUniqueId():this._currentBatchId,k=this;this._currentBatchId=l,qq.each(n,function(e,d){var f;qq.isBlob(d)&&!qq.isFileOrInput(d)?f={blob:d,name:k._options.blobs.defaultName}:qq.isObject(d)&&d.blob&&d.name?f=d:k.log("addBlobs: entry at index "+e+" is not a Blob or a BlobData object","error"),f&&k._handleNewFile(f,l,m)}),this._prepareItemsForUpload(m,h,o)}else{this.log("undefined or non-array parameter passed into addBlobs","error")}},addFiles:function(k,j,q){this._maybeHandleIos8SafariWorkaround();var p,o,n,m=[],l=0===this._storedIds.length?qq.getUniqueId():this._currentBatchId;if(this._currentBatchId=l,k){for(qq.isFileList(k)||(k=[].concat(k)),p=0;p<k.length;p+=1){if(o=k[p],qq.isFileOrInput(o)){if(qq.isInput(o)&&qq.supportedFeatures.ajaxUploading){for(n=0;n<o.files.length;n++){this._handleNewFile(o.files[n],l,m)}}else{this._handleNewFile(o,l,m)}}else{this.log(o+" is not a File or INPUT element!  Ignoring!","warn")}}this.log("Received "+m.length+" files or inputs."),this._prepareItemsForUpload(m,j,q)}},cancel:function(b){this._handler.cancel(b)},cancelAll:function(){var d=[],c=this;qq.extend(d,this._storedIds),qq.each(d,function(b,e){c.cancel(e)}),this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(d){var c=this._uploadData.retrieve({id:d});return qq.supportedFeatures.pause&&this._options.chunking.enabled?c.status===qq.status.PAUSED?(this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",d,this.getName(d))),this._uploadFile(d),!0):(this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",d,this.getName(d)),"error"),!1):!1},deleteFile:function(b){return this._onSubmitDelete(b)},doesExist:function(b){return this._handler.isValid(b)},drawThumbnail:function(j,h,o,n){var m=new qq.Promise;if(this._imageGenerator){var l=this._thumbnailUrls[j],k={scale:o>0,maxSize:o>0?o:null};!n&&qq.supportedFeatures.imagePreviews&&(l=this.getFile(j)),null==l?m.failure({container:h,error:"File or URL not found."}):this._imageGenerator.generate(l,h,k).then(function(b){m.success(b)},function(d,c){m.failure({container:d,error:c||"Problem generating thumbnail"})})}else{m.failure({container:h,error:"Missing image generator module"})}return m},getButton:function(b){return this._getButton(this._buttonIdsForFileIds[b])},getFile:function(b){return this._handler.getFile(b)||null},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getName:function(b){return this._uploadData.retrieve({id:b}).name},getParentId:function(e){var d=this.getUploads({id:e}),f=null;return d&&void 0!==d.parentId&&(f=d.parentId),f},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(b){return this._uploadData.retrieve({id:b}).size},getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var b=this._options.validation.itemLimit;return b>0?this._options.validation.itemLimit-this._netUploadedOrQueued:null},getUploads:function(b){return this._uploadData.retrieve(b)},getUuid:function(b){return this._uploadData.retrieve({id:b}).uuid},log:function(d,c){!this._options.debug||c&&"info"!==c?c&&"info"!==c&&qq.log("[Fine Uploader "+qq.version+"] "+d,c):qq.log("[Fine Uploader "+qq.version+"] "+d)},pauseUpload:function(d){var c=this._uploadData.retrieve({id:d});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled){return !1}if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],c.status)>=0){if(this._handler.pause(d)){return this._uploadData.setStatus(d,qq.status.PAUSED),!0}this.log(qq.format("Unable to pause file ID {} ({}).",d,this.getName(d)),"error")}else{this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",d,this.getName(d)),"error")}return !1},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],qq.each(this._buttons,function(d,c){c.reset()}),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._buttonIdsForFileIds=[],this._pasteHandler&&this._pasteHandler.reset(),this._options.session.refreshOnReset&&this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._totalProgress&&this._totalProgress.reset()},retry:function(b){return this._manualRetry(b)},scaleImage:function(e,d){var f=this;return qq.Scaler.prototype.scaleImage(e,d,{log:qq.bind(f.log,f),getFile:qq.bind(f.getFile,f),uploadData:f._uploadData})},setCustomHeaders:function(d,c){this._customHeadersStore.set(d,c)},setDeleteFileCustomHeaders:function(d,c){this._deleteFileCustomHeadersStore.set(d,c)},setDeleteFileEndpoint:function(d,c){this._deleteFileEndpointStore.set(d,c)},setDeleteFileParams:function(d,c){this._deleteFileParamsStore.set(d,c)},setEndpoint:function(d,c){this._endpointStore.set(d,c)},setName:function(d,c){this._uploadData.updateName(d,c)},setParams:function(d,c){this._paramsStore.set(d,c)},setUuid:function(d,c){return this._uploadData.uuidChanged(d,c)},uploadStoredFiles:function(){var b;if(0===this._storedIds.length){this._itemError("noFilesError")}else{for(;this._storedIds.length;){b=this._storedIds.shift(),this._uploadFile(b)}}}},qq.basePrivateApi={_addCannedFile:function(d){var c=this._uploadData.addFile({uuid:d.uuid,name:d.name,size:d.size,status:qq.status.UPLOAD_SUCCESSFUL});return d.deleteFileEndpoint&&this.setDeleteFileEndpoint(d.deleteFileEndpoint,c),d.deleteFileParams&&this.setDeleteFileParams(d.deleteFileParams,c),d.thumbnailUrl&&(this._thumbnailUrls[c]=d.thumbnailUrl),this._netUploaded++,this._netUploadedOrQueued++,c},_annotateWithButtonId:function(d,c){qq.isFile(d)&&(d.qqButtonId=this._getButtonId(c))},_batchError:function(b){this._options.callbacks.onError(null,null,b,void 0)},_createDeleteHandler:function(){var b=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:qq.bind(b.log,b),onDelete:function(a){b._onDelete(a),b._options.callbacks.onDelete(a)},onDeleteComplete:function(a,f,e){b._onDeleteComplete(a,f,e),b._options.callbacks.onDeleteComplete(a,f,e)}})},_createPasteHandler:function(){var b=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(b.log,b),pasteReceived:function(a){b._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(b._options.callbacks.onPasteReceived,b,a),onSuccess:qq.bind(b._handlePasteSuccess,b,a),identifier:"pasted image"})}}})},_createStore:function(k,j){var q={},p=k,o={},n=function(b){return qq.isObject(b)?qq.extend({},b):b},m=function(){return qq.isFunction(j)?j():j},l=function(b,d){j&&qq.isObject(d)&&qq.extend(d,m()),o[b]&&qq.extend(d,o[b])};return{set:function(d,c){null==c?(q={},p=n(d)):q[c]=n(d)},get:function(d){var c;return c=null!=d&&q[d]?q[d]:n(p),l(d,c),n(c)},addReadOnly:function(d,c){qq.isObject(q)&&(o[d]=o[d]||{},qq.extend(o[d],c))},remove:function(b){return delete q[b]},reset:function(){q={},o={},p=k}}},_createUploadDataTracker:function(){var b=this;return new qq.UploadData({getName:function(a){return b.getName(a)},getUuid:function(a){return b.getUuid(a)},getSize:function(a){return b.getSize(a)},onStatusChange:function(a,f,e){b._onUploadStatusChange(a,f,e),b._options.callbacks.onStatusChange(a,f,e),b._maybeAllComplete(a,e),b._totalProgress&&setTimeout(function(){b._totalProgress.onStatusChange(a,f,e)},0)}})},_createUploadButton:function(j){function h(){return qq.supportedFeatures.ajaxUploading?n._options.workarounds.iosEmptyVideos&&qq.ios()&&!qq.ios6()&&n._isAllowedExtension(l,".mov")?!1:void 0===j.multiple?n._options.multiple:j.multiple:!1}var n=this,m=j.accept||this._options.validation.acceptFiles,l=j.allowedExtensions||this._options.validation.allowedExtensions,k=new qq.UploadButton({element:j.element,folders:j.folders,name:this._options.request.inputName,multiple:h(),acceptFiles:m,onChange:function(b){n._onInputChange(b)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash});return this._disposeSupport.addDisposer(function(){k.dispose()}),n._buttons.push(k),k},_createUploadHandler:function(h,f){var l=this,k={},j={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,demoMode:this._options.demoMode,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(l.log,l),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(d,c,n,m){0>n||0>m||(k[d]?(k[d].loaded!==n||k[d].total!==m)&&(l._onProgress(d,c,n,m),l._options.callbacks.onProgress(d,c,n,m)):(l._onProgress(d,c,n,m),l._options.callbacks.onProgress(d,c,n,m)),k[d]={loaded:n,total:m})},onComplete:function(d,c,p,o){delete k[d];var n=l.getUploads({id:d}).status;if(n!==qq.status.UPLOAD_SUCCESSFUL&&n!==qq.status.UPLOAD_FAILED){var m=l._onComplete(d,c,p,o);m instanceof qq.Promise?m.done(function(){l._options.callbacks.onComplete(d,c,p,o)}):l._options.callbacks.onComplete(d,c,p,o)}},onCancel:function(m,c,o){var n=new qq.Promise;return l._handleCheckedCallback({name:"onCancel",callback:qq.bind(l._options.callbacks.onCancel,l,m,c),onFailure:n.failure,onSuccess:function(){o.then(function(){l._onCancel(m,c)}),n.success()},identifier:m}),n},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(d,c){l._onUpload(d,c),l._options.callbacks.onUpload(d,c)},onUploadChunk:function(e,c,m){l._onUploadChunk(e,m),l._options.callbacks.onUploadChunk(e,c,m)},onUploadChunkSuccess:function(){l._options.callbacks.onUploadChunkSuccess.apply(l,arguments)},onResume:function(e,c,m){return l._options.callbacks.onResume(e,c,m)},onAutoRetry:function(){return l._onAutoRetry.apply(l,arguments)},onUuidChanged:function(d,c){l.log("Server requested UUID change from '"+l.getUuid(d)+"' to '"+c+"'"),l.setUuid(d,c)},getName:qq.bind(l.getName,l),getUuid:qq.bind(l.getUuid,l),getSize:qq.bind(l.getSize,l),setSize:qq.bind(l._setSize,l),getDataByUuid:function(b){return l.getUploads({uuid:b})},isQueued:function(d){var c=l.getUploads({id:d}).status;return c===qq.status.QUEUED||c===qq.status.SUBMITTED||c===qq.status.UPLOAD_RETRYING||c===qq.status.PAUSED},getIdsInProxyGroup:l._uploadData.getIdsInProxyGroup,getIdsInBatch:l._uploadData.getIdsInBatch};return qq.each(this._options.request,function(d,c){j[d]=c}),j.customHeaders=this._customHeadersStore,h&&qq.each(h,function(d,c){j[d]=c}),new qq.UploadHandlerController(j,f)},_fileOrBlobRejected:function(b){this._netUploadedOrQueued--,this._uploadData.setStatus(b,qq.status.REJECTED)},_formatSize:function(d){var c=-1;do{d/=1000,c++}while(d>999);return Math.max(d,0.1).toFixed(1)+this._options.text.sizeSymbols[c]},_generateExtraButtonSpecs:function(){var b=this;this._extraButtonSpecs={},qq.each(this._options.extraButtons,function(a,l){var k=l.multiple,j=qq.extend({},b._options.validation,!0),h=qq.extend({},l);void 0===k&&(k=b._options.multiple),h.validation&&qq.extend(j,l.validation,!0),qq.extend(h,{multiple:k,validation:j},!0),b._initExtraButton(h)})},_getButton:function(d){var c=this._extraButtonSpecs[d];return c?c.element:d===this._defaultButtonId?this._options.button:void 0},_getButtonId:function(f){var e,j,h=f;if(h instanceof qq.BlobProxy&&(h=h.referenceBlob),h&&!qq.isBlob(h)){if(qq.isFile(h)){return h.qqButtonId}if("input"===h.tagName.toLowerCase()&&"file"===h.type.toLowerCase()){return h.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}if(e=h.getElementsByTagName("input"),qq.each(e,function(d,c){return"file"===c.getAttribute("type")?(j=c,!1):void 0}),j){return j.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}}},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_getValidationBase:function(d){var c=this._extraButtonSpecs[d];return c?c.validation:this._options.validation},_getValidationDescriptor:function(b){return b.file instanceof qq.BlobProxy?{name:qq.getFilename(b.file.referenceBlob),size:b.file.referenceBlob.size}:{name:this.getUploads({id:b.id}).name,size:this.getUploads({id:b.id}).size}},_getValidationDescriptors:function(e){var d=this,f=[];return qq.each(e,function(b,c){f.push(d._getValidationDescriptor(c))}),f},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var f="image/*;capture=camera",e=this._options.camera.button,j=e?this._getButtonId(e):this._defaultButtonId,h=this._options;j&&j!==this._defaultButtonId&&(h=this._extraButtonSpecs[j]),h.multiple=!1,null===h.validation.acceptFiles?h.validation.acceptFiles=f:h.validation.acceptFiles+=","+f,qq.each(this._buttons,function(d,c){return c.getButtonId()===j?(c.setMultiple(h.multiple),c.setAcceptFiles(h.acceptFiles),!1):void 0})}},_handleCheckedCallback:function(e){var d=this,f=e.callback();return qq.isGenericPromise(f)?(this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier),f.then(function(a){d.log(e.name+" promise success for "+e.identifier),e.onSuccess(a)},function(){e.onFailure?(d.log(e.name+" promise failure for "+e.identifier),e.onFailure()):d.log(e.name+" promise failure for "+e.identifier)})):(f!==!1?e.onSuccess(f):e.onFailure?(this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback."),e.onFailure()):this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed."),f)},_handleNewFile:function(r,q,p){var o=this,n=qq.getUniqueId(),m=-1,l=qq.getFilename(r),k=r.blob||r,j=this._customNewFileHandler?this._customNewFileHandler:qq.bind(o._handleNewFileGeneric,o);!qq.isInput(k)&&k.size>=0&&(m=k.size),j(k,l,n,m,p,q,this._options.request.uuidName,{uploadData:o._uploadData,paramsStore:o._paramsStore,addFileToHandler:function(d,c){o._handler.add(d,c),o._netUploadedOrQueued++,o._trackButton(d)}})},_handleNewFileGeneric:function(j,h,o,n,m,l){var k=this._uploadData.addFile({uuid:o,name:h,size:n,batchId:l});this._handler.add(k,j),this._trackButton(k),this._netUploadedOrQueued++,m.push({id:k,file:j})},_handlePasteSuccess:function(f,e){var j=f.type.split("/")[1],h=e;null==h&&(h=this._options.paste.defaultName),h+="."+j,this.addBlobs({name:h,blob:f})},_initExtraButton:function(d){var c=this._createUploadButton({element:d.element,multiple:d.multiple,accept:d.validation.acceptFiles,folders:d.folders,allowedExtensions:d.validation.allowedExtensions});this._extraButtonSpecs[c.getButtonId()]=d},_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm?(this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_isDeletePossible:function(){return qq.DeleteFileAjaxRequester&&this._options.deleteFile.enabled?this._options.cors.expected?qq.supportedFeatures.deleteFileCorsXhr?!0:qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr?!0:!1:!0:!1},_isAllowedExtension:function(e,d){var f=!1;return e.length?(qq.each(e,function(b,h){if(qq.isString(h)){var c=new RegExp("\\."+h+"$","i");if(null!=d.match(c)){return f=!0,!1}}}),f):!0},_itemError:function(x,w,v){function u(d,c){r=r.replace(d,c)}var t,s,r=this._options.messages[x],q=[],p=[].concat(w),o=p[0],n=this._getButtonId(v),m=this._getValidationBase(n);return qq.each(m.allowedExtensions,function(d,c){qq.isString(c)&&q.push(c)}),t=q.join(", ").toLowerCase(),u("{file}",this._options.formatFileName(o)),u("{extensions}",t),u("{sizeLimit}",this._formatSize(m.sizeLimit)),u("{minSizeLimit}",this._formatSize(m.minSizeLimit)),s=r.match(/(\{\w+\})/g),null!==s&&qq.each(s,function(d,c){u(c,p[d])}),this._options.callbacks.onError(null,o,r,void 0),r},_manualRetry:function(d,c){return this._onBeforeManualRetry(d)?(this._netUploadedOrQueued++,this._uploadData.setStatus(d,qq.status.UPLOAD_RETRYING),c?c(d):this._handler.retry(d),!0):void 0},_maybeAllComplete:function(f,e){var j=this,h=this._getNotFinished();e===qq.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(f):e===qq.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(f),0===h&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout(function(){j._onAllComplete(j._succeededSinceLastAllComplete,j._failedSinceLastAllComplete)},0)},_maybeHandleIos8SafariWorkaround:function(){var b=this;if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari()){throw setTimeout(function(){window.alert(b._options.messages.unsupportedBrowserIos8Safari)},0),new qq.Error(this._options.messages.unsupportedBrowserIos8Safari)}},_maybeParseAndSendUploadError:function(h,f,l,k){if(!l.success){if(k&&200!==k.status&&!l.error){this._options.callbacks.onError(h,f,"XHR returned response code "+k.status,k)}else{var j=l.error?l.error:this._options.text.defaultResponseError;this._options.callbacks.onError(h,f,j,k)}}},_maybeProcessNextItemAfterOnValidateCallback:function(j,h,n,m,l){var k=this;if(h.length>n){if(j||!this._options.validation.stopOnFirstInvalidFile){setTimeout(function(){var b=k._getValidationDescriptor(h[n]),d=k._getButtonId(h[n].file),c=k._getButton(d);k._handleCheckedCallback({name:"onValidate",callback:qq.bind(k._options.callbacks.onValidate,k,b,c),onSuccess:qq.bind(k._onValidateCallbackSuccess,k,h,n,m,l),onFailure:qq.bind(k._onValidateCallbackFailure,k,h,n,m,l),identifier:"Item '"+b.name+"', size: "+b.size})},0)}else{if(!j){for(;n<h.length;n++){k._fileOrBlobRejected(h[n].id)}}}}},_onAllComplete:function(d,c){this._totalProgress&&this._totalProgress.onAllComplete(d,c,this._preventRetries),this._options.callbacks.onAllComplete(qq.extend([],d),qq.extend([],c)),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[]},_onAutoRetry:function(j,h,n,m,l){var k=this;return k._preventRetries[j]=n[k._options.retry.preventRetryResponseProperty],k._shouldAutoRetry(j,h,n)?(k._maybeParseAndSendUploadError.apply(k,arguments),k._options.callbacks.onAutoRetry(j,h,k._autoRetries[j]),k._onBeforeAutoRetry(j,h),k._retryTimeouts[j]=setTimeout(function(){k.log("Retrying "+h+"..."),k._uploadData.setStatus(j,qq.status.UPLOAD_RETRYING),l?l(j):k._handler.retry(j)},1000*k._options.retry.autoAttemptDelay),!0):void 0},_onBeforeAutoRetry:function(d,c){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+c+"...")},_onBeforeManualRetry:function(e){var d=this._options.validation.itemLimit;if(this._preventRetries[e]){return this.log("Retries are forbidden for id "+e,"warn"),!1}if(this._handler.isValid(e)){var f=this.getName(e);return this._options.callbacks.onManualRetry(e,f)===!1?!1:d>0&&this._netUploadedOrQueued+1>d?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+f+"' (id: "+e+")..."),!0)}return this.log("'"+e+"' is not a valid file ID","error"),!1},_onCancel:function(d){this._netUploadedOrQueued--,clearTimeout(this._retryTimeouts[d]);var c=qq.indexOf(this._storedIds,d);!this._options.autoUpload&&c>=0&&this._storedIds.splice(c,1),this._uploadData.setStatus(d,qq.status.CANCELED)},_onComplete:function(f,e,j,h){return j.success?(j.thumbnailUrl&&(this._thumbnailUrls[f]=j.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(f,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(f,qq.status.UPLOAD_FAILED),j[this._options.retry.preventRetryResponseProperty]===!0&&(this._preventRetries[f]=!0)),this._maybeParseAndSendUploadError(f,e,j,h),j.success?!0:!1},_onDelete:function(b){this._uploadData.setStatus(b,qq.status.DELETING)},_onDeleteComplete:function(f,e,j){var h=this.getName(f);j?(this._uploadData.setStatus(f,qq.status.DELETE_FAILED),this.log("Delete request for '"+h+"' has failed.","error"),void 0===e.withCredentials?this._options.callbacks.onError(f,h,"Delete request failed",e):this._options.callbacks.onError(f,h,"Delete request failed with response code "+e.status,e)):(this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(f),this._uploadData.setStatus(f,qq.status.DELETED),this.log("Delete request for '"+h+"' has succeeded."))},_onInputChange:function(d){var c;if(qq.supportedFeatures.ajaxUploading){for(c=0;c<d.files.length;c++){this._annotateWithButtonId(d.files[c],d)}this.addFiles(d.files)}else{d.value.length>0&&this.addFiles(d)}qq.each(this._buttons,function(f,e){e.reset()})},_onProgress:function(f,e,j,h){this._totalProgress&&this._totalProgress.onIndividualProgress(f,j,h)},_onSubmit:function(){},_onSubmitCallbackSuccess:function(b){this._onSubmit.apply(this,arguments),this._uploadData.setStatus(b,qq.status.SUBMITTED),this._onSubmitted.apply(this,arguments),this._options.callbacks.onSubmitted.apply(this,arguments),this._options.autoUpload?this._uploadFile(b):this._storeForLater(b)},_onSubmitDelete:function(h,f,l){var k,j=this.getUuid(h);return f&&(k=qq.bind(f,this,h,j,l)),this._isDeletePossible()?(this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,h),onSuccess:k||qq.bind(this._deleteHandler.sendDelete,this,h,j,l),identifier:h}),!0):(this.log("Delete request ignored for ID "+h+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onSubmitted:function(){},_onTotalProgress:function(d,c){this._options.callbacks.onTotalProgress(d,c)},_onUploadPrep:function(){},_onUpload:function(b){this._uploadData.setStatus(b,qq.status.UPLOADING)},_onUploadChunk:function(){},_onUploadStatusChange:function(e,d,f){f===qq.status.PAUSED&&clearTimeout(this._retryTimeouts[e])},_onValidateBatchCallbackFailure:function(d){var c=this;qq.each(d,function(b,e){c._fileOrBlobRejected(e.id)})},_onValidateBatchCallbackSuccess:function(k,j,q,p,o){var n,m=this._options.validation.itemLimit,l=this._netUploadedOrQueued;0===m||m>=l?j.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,k[0],o),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,j,0,q,p),onFailure:qq.bind(this._onValidateCallbackFailure,this,j,0,q,p),identifier:"Item '"+j[0].file.name+"', size: "+j[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(j),n=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,l).replace(/\{itemLimit\}/g,m),this._batchError(n))},_onValidateCallbackFailure:function(h,f,l,k){var j=f+1;this._fileOrBlobRejected(h[0].id,h[0].file.name),this._maybeProcessNextItemAfterOnValidateCallback(!1,h,j,l,k)},_onValidateCallbackSuccess:function(j,h,o,n){var m=this,l=h+1,k=this._getValidationDescriptor(j[h]);this._validateFileOrBlobData(j[h],k).then(function(){m._upload(j[h].id,o,n),m._maybeProcessNextItemAfterOnValidateCallback(!0,j,l,o,n)},function(){m._maybeProcessNextItemAfterOnValidateCallback(!1,j,l,o,n)})},_prepareItemsForUpload:function(j,h,n){if(0===j.length){return void this._itemError("noFilesError")}var m=this._getValidationDescriptors(j),l=this._getButtonId(j[0].file),k=this._getButton(l);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,m,k),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,m,j,h,n,k),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,j),identifier:"batch validation"})},_preventLeaveInProgress:function(){var b=this;this._disposeSupport.attach(window,"beforeunload",function(a){return b.getInProgress()?(a=a||window.event,a.returnValue=b._options.messages.onLeave,b._options.messages.onLeave):void 0})},_refreshSessionData:function(){var d=this,c=this._options.session;qq.Session&&null!=this._options.session.endpoint&&(this._session||(qq.extend(c,this._options.cors),c.log=qq.bind(this.log,this),c.addFileRecord=qq.bind(this._addCannedFile,this),this._session=new qq.Session(c)),setTimeout(function(){d._session.refresh().then(function(a,e){d._options.callbacks.onSessionRequestComplete(a,!0,e)},function(a,e){d._options.callbacks.onSessionRequestComplete(a,!1,e)})},0))},_setSize:function(d,c){this._uploadData.updateSize(d,c),this._totalProgress&&this._totalProgress.onNewSize(d)},_shouldAutoRetry:function(d){var c=this._uploadData.retrieve({id:d});return !this._preventRetries[d]&&this._options.retry.enableAuto&&c.status!==qq.status.PAUSED&&(void 0===this._autoRetries[d]&&(this._autoRetries[d]=0),this._autoRetries[d]<this._options.retry.maxAutoAttempts)?(this._autoRetries[d]+=1,!0):!1},_storeForLater:function(b){this._storedIds.push(b)},_trackButton:function(d){var c;c=qq.supportedFeatures.ajaxUploading?this._handler.getFile(d).qqButtonId:this._getButtonId(this._handler.getInput(d)),c&&(this._buttonIdsForFileIds[d]=c)},_upload:function(f,e,j){var h=this.getName(f);e&&this.setParams(e,f),j&&this.setEndpoint(j,f),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,f,h),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,f,h),onFailure:qq.bind(this._fileOrBlobRejected,this,f,h),identifier:f})},_uploadFile:function(b){this._handler.upload(b)||this._uploadData.setStatus(b,qq.status.QUEUED)},_validateFileOrBlobData:function(r,q){var p=this,o=function(){return r.file instanceof qq.BlobProxy?r.file.referenceBlob:r.file}(),n=q.name,m=q.size,l=this._getButtonId(r.file),k=this._getValidationBase(l),j=new qq.Promise;return j.then(function(){},function(){p._fileOrBlobRejected(r.id,n)}),qq.isFileOrInput(o)&&!this._isAllowedExtension(k.allowedExtensions,n)?(this._itemError("typeError",n,o),j.failure()):0===m?(this._itemError("emptyError",n,o),j.failure()):m>0&&k.sizeLimit&&m>k.sizeLimit?(this._itemError("sizeError",n,o),j.failure()):m>0&&m<k.minSizeLimit?(this._itemError("minSizeError",n,o),j.failure()):(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(o)?new qq.ImageValidation(o,qq.bind(p.log,p)).validate(k.image).then(j.success,function(b){p._itemError(b+"ImageError",n,o),j.failure()}):j.success(),j)},_wrapCallbacks:function(){var e,d;e=this,d=function(a,l,k){var j;try{return l.apply(e,k)}catch(h){j=h.message||h.toString(),e.log("Caught exception in '"+a+"' callback - "+j,"error")}};for(var f in this._options.callbacks){!function(){var b,a;b=f,a=e._options.callbacks[b],e._options.callbacks[b]=function(){return d(b,a,arguments)}}()}}}}(),function(){qq.FineUploaderBasic=function(d){var c=this;this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",filenameParam:"qqfilename"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0}},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onAllComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onUploadChunkSuccess:function(){},onResume:function(){},onProgress:function(){},onTotalProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){},onStatusChange:function(){},onSessionRequestComplete:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,concurrent:{enabled:!1},paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2000000,success:{endpoint:null}},resume:{enabled:!1,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(b){return void 0!==b&&b.length>33&&(b=b.slice(0,19)+"..."+b.slice(-14)),b},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]},workarounds:{iosEmptyVideos:!0,ios8SafariUploads:!0,ios8BrowserCrash:!0}},qq.extend(this._options,d,!0),this._buttons=[],this._extraButtonSpecs={},this._buttonIdsForFileIds=[],this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._initFormSupportAndParams(),this._customHeadersStore=this._createStore(this._options.request.customHeaders),this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders),this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params),this._endpointStore=this._createStore(this._options.request.endpoint),this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint),this._handler=this._createUploadHandler(),this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler(),this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button}).getButtonId()),this._generateExtraButtonSpecs(),this._handleCameraAccess(),this._options.paste.targetElement&&(qq.PasteSupport?this._pasteHandler=this._createPasteHandler():this.log("Paste support module not found","error")),this._preventLeaveInProgress(),this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this)),this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._scaler=qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this))||{},this._scaler.enabled&&(this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler)),qq.TotalProgress&&qq.supportedFeatures.progressBar&&(this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),function(b){var e=c._uploadData.retrieve({id:b});return e&&e.size||0}))},qq.FineUploaderBasic.prototype=qq.basePublicApi,qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)}(),qq.AjaxRequester=function(T){function S(){return qq.indexOf(["GET","POST","HEAD"],x.method)>=0}function R(){var b=!1;return qq.each(b,function(a,d){return qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],d)<0?(b=!0,!1):void 0}),b}function Q(b){return x.cors.expected&&void 0===b.withCredentials}function P(){var b;return(window.XMLHttpRequest||window.ActiveXObject)&&(b=qq.createXhrInstance(),void 0===b.withCredentials&&(b=new XDomainRequest)),b}function O(e,d){var f=y[e].xhr;return f||(f=d?d:x.cors.expected?P():qq.createXhrInstance(),y[e].xhr=f),f}function N(f){var e,j=qq.indexOf(z,f),h=x.maxConnections;delete y[f],z.splice(j,1),z.length>=h&&h>j&&(e=z[h-1],K(e))}function M(f,d){var l=O(f),k=x.method,j=d===!0;N(f),j?B(k+" request for "+f+" has failed","error"):Q(l)||D(l.status)||(j=!0,B(k+" request for "+f+" has failed - response code "+l.status,"error")),x.onComplete(f,l,j)}function L(f){var e,j=y[f].additionalParams,h=x.mandatedParams;return x.paramsStore.get&&(e=x.paramsStore.get(f)),j&&qq.each(j,function(b,d){e=e||{},e[b]=d}),h&&qq.each(h,function(b,d){e=e||{},e[b]=d}),e}function K(f,d){var o,n=O(f,d),m=x.method,l=L(f),k=y[f].payload;return x.onSend(f),o=J(f,l),Q(n)?(n.onload=G(f),n.onerror=F(f)):n.onreadystatechange=I(f),H(f),n.open(m,o,!0),x.cors.expected&&x.cors.sendCredentials&&!Q(n)&&(n.withCredentials=!0),E(f),B("Sending "+m+" request for "+f),k?n.send(k):A||!l?n.send():n.send(l&&x.contentType&&x.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?qq.obj2url(l,""):l&&x.contentType&&x.contentType.toLowerCase().indexOf("application/json")>=0?JSON.stringify(l):l),n}function J(f,e){var j=x.endpointStore.get(f),h=y[f].addToPath;return void 0!=h&&(j+="/"+h),A&&e?qq.obj2url(e,j):j}function I(b){return function(){4===O(b).readyState&&M(b)}}function H(d){var c=x.onProgress;c&&(O(d).upload.onprogress=function(a){a.lengthComputable&&c(d,a.loaded,a.total)})}function G(b){return function(){M(b)}}function F(b){return function(){M(b,!0)}}function E(b){var l=O(b),k=x.customHeaders,f=y[b].additionalHeaders||{},d=x.method,c={};Q(l)||(x.acceptHeader&&l.setRequestHeader("Accept",x.acceptHeader),x.allowXRequestedWithAndCacheControl&&(x.cors.expected&&S()&&!R(k)||(l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.setRequestHeader("Cache-Control","no-cache"))),!x.contentType||"POST"!==d&&"PUT"!==d||l.setRequestHeader("Content-Type",x.contentType),qq.extend(c,qq.isFunction(k)?k(b):k),qq.extend(c,f),qq.each(c,function(h,e){l.setRequestHeader(h,e)}))}function D(b){return qq.indexOf(x.successfulResponseCodes[x.method],b)>=0}function C(j,h,o,n,m,l){y[j]={addToPath:o,additionalParams:n,additionalHeaders:m,payload:l};var k=z.push(j);return k<=x.maxConnections?K(j,h):void 0}var B,A,z=[],y={},x={acceptHeader:null,validMethods:["POST"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],POST:[200,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onProgress:null};if(qq.extend(x,T),B=x.log,qq.indexOf(x.validMethods,x.method)<0){throw new Error("'"+x.method+"' is not a supported method for this type of request!")}A="GET"===x.method||"DELETE"===x.method,qq.extend(this,{initTransport:function(j){var h,n,m,l,k;return{withPath:function(b){return h=b,this},withParams:function(b){return n=b,this},withHeaders:function(b){return m=b,this},withPayload:function(b){return l=b,this},withCacheBuster:function(){return k=!0,this},send:function(a){return k&&qq.indexOf(["GET","DELETE"],x.method)>=0&&(n.qqtimestamp=(new Date).getTime()),C(j,a,h,n,m,l)}}},canceled:function(b){N(b)}})},qq.UploadHandler=function(h){var f=h.proxy,l={},k=f.onCancel,j=f.getName;qq.extend(this,{add:function(d,c){l[d]=c,l[d].temp={}},cancel:function(d){var c=this,m=new qq.Promise,e=k(d,j(d),m);e.then(function(){c.isValid(d)&&(l[d].canceled=!0,c.expunge(d)),m.success()})},expunge:function(b){delete l[b]},getThirdPartyFileId:function(b){return l[b].key},isValid:function(b){return void 0!==l[b]},reset:function(){l={}},_getFileState:function(b){return l[b]},_setThirdPartyFileId:function(d,c){l[d].key=c},_wasCanceled:function(b){return !!l[b].canceled}})},qq.UploadHandlerController=function(z,y){var x,w,v,u=this,t=!1,s=!1,r={paramsStore:{},maxConnections:3,chunking:{enabled:!1,multiple:{enabled:!1}},log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUploadPrep:function(){},onUpload:function(){},onUploadChunk:function(){},onUploadChunkSuccess:function(){},onAutoRetry:function(){},onResume:function(){},onUuidChanged:function(){},getName:function(){},setSize:function(){},isQueued:function(){},getIdsInProxyGroup:function(){},getIdsInBatch:function(){}},q={done:function(h,e,l,k){var j=v._getChunkData(h,e);v._getFileState(h).attemptingResume=!1,delete v._getFileState(h).temp.chunkProgress[e],v._getFileState(h).loaded+=j.size,r.onUploadChunkSuccess(h,v._getChunkDataForCallback(j),l,k)},finalize:function(e){var d=r.getSize(e),f=r.getName(e);w("All chunks have been uploaded for "+e+" - finalizing...."),v.finalizeChunks(e).then(function(c,b){w("Finalize successful for "+e);var a=n.normalizeResponse(c,!0);r.onProgress(e,f,d,d),v._maybeDeletePersistedChunkData(e),n.cleanup(e,a,b)},function(a,h){var c=n.normalizeResponse(a,!1);w("Problem finalizing chunks for file ID "+e+" - "+c.error,"error"),c.reset&&q.reset(e),r.onAutoRetry(e,f,c,h)||n.cleanup(e,c,h)})},hasMoreParts:function(b){return !!v._getFileState(b).chunking.remaining.length},nextPart:function(d){var c=v._getFileState(d).chunking.remaining.shift();return c>=v._getTotalChunks(d)&&(c=null),c},reset:function(b){w("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+b,"error"),v._maybeDeletePersistedChunkData(b),v.reevaluateChunking(b),v._getFileState(b).loaded=0},sendNext:function(h){var d=r.getSize(h),A=r.getName(h),k=q.nextPart(h),j=v._getChunkData(h,k),e=v._getFileState(h).attemptingResume,m=v._getFileState(h).chunking.inProgress||[];null==v._getFileState(h).loaded&&(v._getFileState(h).loaded=0),e&&r.onResume(h,A,j)===!1&&(q.reset(h),k=q.nextPart(h),j=v._getChunkData(h,k),e=!1),null==k&&0===m.length?q.finalize(h):(w("Sending chunked upload request for item "+h+": bytes "+(j.start+1)+"-"+j.end+" of "+d),r.onUploadChunk(h,A,v._getChunkDataForCallback(j)),m.push(k),v._getFileState(h).chunking.inProgress=m,s&&p.open(h,k),s&&p.available()&&v._getFileState(h).chunking.remaining.length&&q.sendNext(h),v.uploadChunk(h,k,e).then(function(a,C){w("Chunked upload request succeeded for "+h+", chunk "+k),v.clearCachedChunk(h,k);var B=v._getFileState(h).chunking.inProgress||[],l=n.normalizeResponse(a,!0),f=qq.indexOf(B,k);w(qq.format("Chunk {} for file {} uploaded successfully.",k,h)),q.done(h,k,l,C),f>=0&&B.splice(f,1),v._maybePersistChunkedState(h),q.hasMoreParts(h)||0!==B.length?q.hasMoreParts(h)&&q.sendNext(h):q.finalize(h)},function(a,f){w("Chunked upload request failed for "+h+", chunk "+k),v.clearCachedChunk(h,k);var c=n.normalizeResponse(a,!1);if(c.reset){q.reset(h)}else{var B=qq.indexOf(v._getFileState(h).chunking.inProgress,k);B>=0&&(v._getFileState(h).chunking.inProgress.splice(B,1),v._getFileState(h).chunking.remaining.unshift(k))}v._getFileState(h).temp.ignoreFailure||(s&&(v._getFileState(h).temp.ignoreFailure=!0,qq.each(v._getXhrs(h),function(C,l){l.abort()}),v.moveInProgressToRemaining(h),p.free(h,!0)),r.onAutoRetry(h,A,c,f)||n.cleanup(h,c,f))}).done(function(){v.clearXhr(h,k)}))}},p={_open:[],_openChunks:{},_waiting:[],available:function(){var e=r.maxConnections,d=0,f=0;return qq.each(p._openChunks,function(b,c){d++,f+=c.length}),e-(p._open.length-d+f)},free:function(e,d){var m,l=!d,k=qq.indexOf(p._waiting,e),j=qq.indexOf(p._open,e);delete p._openChunks[e],n.getProxyOrBlob(e) instanceof qq.BlobProxy&&(w("Generated blob upload has ended for "+e+", disposing generated blob."),delete v._getFileState(e).file),k>=0?p._waiting.splice(k,1):l&&j>=0&&(p._open.splice(j,1),m=p._waiting.shift(),m>=0&&(p._open.push(m),n.start(m)))},getWaitingOrConnected:function(){var b=[];return qq.each(p._openChunks,function(a,d){d&&d.length&&b.push(parseInt(a))}),qq.each(p._open,function(a,d){p._openChunks[d]||b.push(parseInt(d))}),b=b.concat(p._waiting)},isUsingConnection:function(b){return qq.indexOf(p._open,b)>=0},open:function(d,c){return null==c&&p._waiting.push(d),p.available()?(null==c?(p._waiting.pop(),p._open.push(d)):!function(){var a=p._openChunks[d]||[];a.push(c),p._openChunks[d]=a}(),!0):!1},reset:function(){p._waiting=[],p._open=[]}},o={send:function(d,c){v._getFileState(d).loaded=0,w("Sending simple upload request for "+d),v.uploadFile(d).then(function(j,h){w("Simple upload request succeeded for "+d);var b=n.normalizeResponse(j,!0),a=r.getSize(d);r.onProgress(d,c,a,a),n.maybeNewUuid(d,b),n.cleanup(d,b,h)},function(h,b){w("Simple upload request failed for "+d);var a=n.normalizeResponse(h,!1);r.onAutoRetry(d,c,a,b)||n.cleanup(d,a,b)})}},n={cancel:function(b){w("Cancelling "+b),r.paramsStore.remove(b),p.free(b)},cleanup:function(f,e,j){var h=r.getName(f);r.onComplete(f,h,e,j),v._getFileState(f)&&v._clearXhrs&&v._clearXhrs(f),p.free(f)},getProxyOrBlob:function(b){return v.getProxy&&v.getProxy(b)||v.getFile&&v.getFile(b)},initHandler:function(){var b=y?qq[y]:qq.traditional,d=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";v=new b[d+"UploadHandler"](r,{getDataByUuid:r.getDataByUuid,getName:r.getName,getSize:r.getSize,getUuid:r.getUuid,log:w,onCancel:r.onCancel,onProgress:r.onProgress,onUuidChanged:r.onUuidChanged}),v._removeExpiredChunkingRecords&&v._removeExpiredChunkingRecords()},isDeferredEligibleForUpload:function(b){return r.isQueued(b)},maybeDefer:function(d,c){return c&&!v.getFile(d)&&c instanceof qq.BlobProxy?(r.onUploadPrep(d),w("Attempting to generate a blob on-demand for "+d),c.create().then(function(a){w("Generated an on-demand blob for "+d),v.updateBlob(d,a),r.setSize(d,a.size),v.reevaluateChunking(d),n.maybeSendDeferredFiles(d)},function(a){var f={};a&&(f.error=a),w(qq.format("Failed to generate blob for ID {}.  Error message: {}.",d,a),"error"),r.onComplete(d,r.getName(d),qq.extend(f,x),null),n.maybeSendDeferredFiles(d),p.free(d)}),!1):n.maybeSendDeferredFiles(d)},maybeSendDeferredFiles:function(e){var d=r.getIdsInProxyGroup(e),f=!1;return d&&d.length?(w("Maybe ready to upload proxy group file "+e),qq.each(d,function(a,c){if(n.isDeferredEligibleForUpload(c)&&v.getFile(c)){f=c===e,n.now(c)}else{if(n.isDeferredEligibleForUpload(c)){return !1}}})):(f=!0,n.now(e)),f},maybeNewUuid:function(d,c){void 0!==c.newUuid&&r.onUuidChanged(d,c.newUuid)},normalizeResponse:function(e,d){var f=e;return qq.isObject(e)||(f={},qq.isString(e)&&!d&&(f.error=e)),f.success=d,f},now:function(d){var c=r.getName(d);if(!u.isValid(d)){throw new qq.Error(d+" is not a valid file ID to upload!")}r.onUpload(d,c),t&&v._shouldChunkThisFile(d)?q.sendNext(d):o.send(d,c)},start:function(d){var c=n.getProxyOrBlob(d);return c?n.maybeDefer(d,c):(n.now(d),!0)}};qq.extend(this,{add:function(){v.add.apply(this,arguments)},upload:function(b){return p.open(b)?n.start(b):!1},retry:function(b){return s&&(v._getFileState(b).temp.ignoreFailure=!1),p.isUsingConnection(b)?n.start(b):u.upload(b)},cancel:function(d){var c=v.cancel(d);qq.isGenericPromise(c)?c.then(function(){n.cancel(d)}):c!==!1&&n.cancel(d)},cancelAll:function(){var d=p.getWaitingOrConnected();if(d.length){for(var c=d.length-1;c>=0;c--){u.cancel(d[c])}}p.reset()},getFile:function(b){return v.getProxy&&v.getProxy(b)?v.getProxy(b).referenceBlob:v.getFile&&v.getFile(b)},isProxied:function(b){return !(!v.getProxy||!v.getProxy(b))},getInput:function(b){return v.getInput?v.getInput(b):void 0},reset:function(){w("Resetting upload handler"),u.cancelAll(),p.reset(),v.reset()},expunge:function(b){return u.isValid(b)?v.expunge(b):void 0},isValid:function(b){return v.isValid(b)},getResumableFilesData:function(){return v.getResumableFilesData?v.getResumableFilesData():[]},getThirdPartyFileId:function(b){return u.isValid(b)?v.getThirdPartyFileId(b):void 0},pause:function(b){return u.isResumable(b)&&v.pause&&u.isValid(b)&&v.pause(b)?(p.free(b),v.moveInProgressToRemaining(b),!0):!1},isResumable:function(b){return !!v.isResumable&&v.isResumable(b)}}),qq.extend(r,z),w=r.log,t=r.chunking.enabled&&qq.supportedFeatures.chunking,s=t&&r.chunking.concurrent.enabled,x=function(){var b={};return b[r.preventRetryParam]=!0,b}(),n.initHandler()},qq.FormUploadHandler=function(H){function G(d){delete x[d],v&&(clearTimeout(w[d]),delete w[d],r.stopReceivingMessages(d));var c=document.getElementById(B._getIframeName(d));c&&(c.setAttribute("src","javascript:false;"),qq(c).remove())}function F(b){return b.split("_")[0]}function E(d){var c=qq.toElement("<iframe src='javascript:false;' name='"+d+"' />");return c.setAttribute("id",d),c.style.display="none",document.body.appendChild(c),c}function D(h,c){var l=h.id,k=F(l),j=t(k);y[j]=c,x[k]=qq(h).attach("load",function(){B.getInput(k)&&(s("Received iframe load event for CORS upload request (iframe name "+l+")"),w[l]=setTimeout(function(){var b="No valid message received from loaded iframe for iframe name "+l;s(b,"error"),c({error:b})},1000))}),r.receiveMessage(l,function(m){s("Received the following window message: '"+m+"'");var d,o=(F(l),B._parseJsonResponse(m)),n=o.uuid;n&&y[n]?(s("Handling response for iframe name "+l),clearTimeout(w[l]),delete w[l],B._detachLoadEvent(l),d=y[n],delete y[n],r.stopReceivingMessages(l),d(o)):n||s("'"+m+"' does not contain a UUID - ignoring.")})}var C=H.options,B=this,A=H.proxy,z=qq.getUniqueId(),y={},x={},w={},v=C.isCors,u=C.inputName,t=A.getUuid,s=A.log,r=new qq.WindowReceiveMessage({log:s});qq.extend(this,new qq.UploadHandler(H)),qq.override(this,function(b){return{add:function(a,d){b.add(a,{input:d}),d.setAttribute("name",u),d.parentNode&&qq(d).remove()},expunge:function(a){G(a),b.expunge(a)},isValid:function(a){return b.isValid(a)&&void 0!==B._getFileState(a).input}}}),qq.extend(this,{getInput:function(b){return B._getFileState(b).input},_attachLoadEvent:function(e,d){var f;v?D(e,d):x[e.id]=qq(e).attach("load",function(){if(s("Received response for "+e.id),e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML){return}}catch(a){s("Error when attempting to access iframe during handling of upload response ("+a.message+")","error"),f={success:!1}}d(f)}})},_createIframe:function(d){var c=B._getIframeName(d);return E(c)},_detachLoadEvent:function(b){void 0!==x[b]&&(x[b](),delete x[b])},_getIframeName:function(b){return b+"_"+z},_initFormForUpload:function(k){var j=k.method,q=k.endpoint,p=k.params,o=k.paramsInBody,n=k.targetName,m=qq.toElement("<form method='"+j+"' enctype='multipart/form-data'></form>"),l=q;return o?qq.obj2Inputs(p,m):l=qq.obj2url(p,q),m.setAttribute("action",l),m.setAttribute("target",n),m.style.display="none",document.body.appendChild(m),m},_parseJsonResponse:function(e){var d={};try{d=qq.parseJson(e)}catch(f){s("Error when attempting to parse iframe upload response ("+f.message+")","error")}return d}})},qq.XhrUploadHandler=function(H){function G(b){qq.each(F._getXhrs(b),function(a,f){var c=F._getAjaxRequester(b,a);f.onreadystatechange=null,f.upload.onprogress=null,f.abort(),c&&c.canceled&&c.canceled(b)})}var F=this,E=H.options.namespace,D=H.proxy,C=H.options.chunking,B=H.options.resume,A=C&&H.options.chunking.enabled&&qq.supportedFeatures.chunking,z=B&&H.options.resume.enabled&&A&&qq.supportedFeatures.resume,y=D.getName,x=D.getSize,w=D.getUuid,v=D.getEndpoint,u=D.getDataByUuid,t=D.onUuidChanged,s=D.onProgress,r=D.log;qq.extend(this,new qq.UploadHandler(H)),qq.override(this,function(b){return{add:function(a,c){if(qq.isFile(c)||qq.isBlob(c)){b.add(a,{file:c})}else{if(!(c instanceof qq.BlobProxy)){throw new Error("Passed obj is not a File, Blob, or proxy")}b.add(a,{proxy:c})}F._initTempState(a),z&&F._maybePrepareForResume(a)},expunge:function(a){G(a),F._maybeDeletePersistedChunkData(a),F._clearXhrs(a),b.expunge(a)}}}),qq.extend(this,{clearCachedChunk:function(d,c){delete F._getFileState(d).temp.cachedChunks[c]},clearXhr:function(e,c){var f=F._getFileState(e).temp;f.xhrs&&delete f.xhrs[c],f.ajaxRequesters&&delete f.ajaxRequesters[c]},finalizeChunks:function(f,c){var j=F._getTotalChunks(f)-1,h=F._getXhr(f,j);return c?(new qq.Promise).success(c(h),h):(new qq.Promise).success({},h)},getFile:function(b){return F.isValid(b)&&F._getFileState(b).file},getProxy:function(b){return F.isValid(b)&&F._getFileState(b).proxy},getResumableFilesData:function(){var b=[];return F._iterateResumeRecords(function(a,f){F.moveInProgressToRemaining(null,f.chunking.inProgress,f.chunking.remaining);var c={name:f.name,remaining:f.chunking.remaining,size:f.size,uuid:f.uuid};f.key&&(c.key=f.key),b.push(c)}),b},isResumable:function(b){return !!C&&F.isValid(b)&&!F._getFileState(b).notResumable},moveInProgressToRemaining:function(h,c,l){var k=c||F._getFileState(h).chunking.inProgress,j=l||F._getFileState(h).chunking.remaining;k&&(k.reverse(),qq.each(k,function(e,d){j.unshift(d)}),k.length=0)},pause:function(b){return F.isValid(b)?(r(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",b,y(b))),F._getFileState(b).paused=!0,G(b),!0):void 0},reevaluateChunking:function(f){if(C&&F.isValid(f)){var c,j=F._getFileState(f);if(delete j.chunking,j.chunking={},c=F._getTotalChunks(f),c>1){j.chunking.enabled=!0,j.chunking.parts=c,j.chunking.remaining=[];for(var h=0;c>h;h++){j.chunking.remaining.push(h)}F._initTempState(f)}else{j.chunking.enabled=!1}}},updateBlob:function(d,c){F.isValid(d)&&(F._getFileState(d).file=c)},_clearXhrs:function(d){var c=F._getFileState(d).temp;qq.each(c.ajaxRequesters,function(b){delete c.ajaxRequesters[b]}),qq.each(c.xhrs,function(b){delete c.xhrs[b]})},_createXhr:function(d,c){return F._registerXhr(d,c,qq.createXhrInstance())},_getAjaxRequester:function(e,c){var f=null==c?-1:c;return F._getFileState(e).temp.ajaxRequesters[f]},_getChunkData:function(K,J){var I=C.partSize,q=x(K),p=F.getFile(K),o=I*J,n=o+I>=q?q:o+I,k=F._getTotalChunks(K),f=this._getFileState(K).temp.cachedChunks,c=f[J]||qq.sliceBlob(p,o,n);return f[J]=c,{part:J,start:o,end:n,count:k,blob:c,size:n-o}},_getChunkDataForCallback:function(b){return{partIndex:b.part,startByte:b.start+1,endByte:b.end,totalParts:b.count}},_getLocalStorageId:function(f){var d="5.0",m=y(f),l=x(f),k=C.partSize,j=v(f);return qq.format("qq{}resume{}-{}-{}-{}-{}",E,d,m,l,k,j)},_getMimeType:function(b){return F.getFile(b).type},_getPersistableData:function(b){return F._getFileState(b).chunking},_getTotalChunks:function(e){if(C){var d=x(e),f=C.partSize;return Math.ceil(d/f)}},_getXhr:function(e,c){var f=null==c?-1:c;return F._getFileState(e).temp.xhrs[f]},_getXhrs:function(b){return F._getFileState(b).temp.xhrs},_iterateResumeRecords:function(b){z&&qq.each(localStorage,function(a,f){if(0===a.indexOf(qq.format("qq{}resume-",E))){var d=JSON.parse(f);b(a,d)}})},_initTempState:function(b){F._getFileState(b).temp={ajaxRequesters:{},chunkProgress:{},xhrs:{},cachedChunks:{}}},_markNotResumable:function(b){F._getFileState(b).notResumable=!0},_maybeDeletePersistedChunkData:function(d){var c;return z&&F.isResumable(d)&&(c=F._getLocalStorageId(d),c&&localStorage.getItem(c))?(localStorage.removeItem(c),!0):!1},_maybePrepareForResume:function(f){var c,j,h=F._getFileState(f);z&&void 0===h.key&&(c=F._getLocalStorageId(f),j=localStorage.getItem(c),j&&(j=JSON.parse(j),u(j.uuid)?F._markNotResumable(f):(r(qq.format("Identified file with ID {} and name of {} as resumable.",f,y(f))),t(f,j.uuid),h.key=j.key,h.chunking=j.chunking,h.loaded=j.loaded,h.attemptingResume=!0,F.moveInProgressToRemaining(f))))},_maybePersistChunkedState:function(f){var c,j,h=F._getFileState(f);z&&F.isResumable(f)&&(c=F._getLocalStorageId(f),j={name:y(f),size:x(f),uuid:w(f),key:h.key,chunking:h.chunking,loaded:h.loaded,lastUpdated:Date.now()},localStorage.setItem(c,JSON.stringify(j)))},_registerProgressHandler:function(h,c,m){var l=F._getXhr(h,c),k=y(h),j={simple:function(a,f){var e=x(h);a===f?s(h,k,e,e):s(h,k,a>=e?e-1:a,e)},chunked:function(K,J){var I=F._getFileState(h).temp.chunkProgress,q=F._getFileState(h).loaded,p=K,f=J,d=x(h),b=p-(f-m),a=q;I[c]=b,qq.each(I,function(n,e){a+=e}),s(h,k,a,d)}};l.upload.onprogress=function(e){if(e.lengthComputable){var d=null==m?"simple":"chunked";j[d](e.loaded,e.total)}}},_registerXhr:function(h,c,m,l){var k=null==c?-1:c,j=F._getFileState(h).temp;return j.xhrs=j.xhrs||{},j.ajaxRequesters=j.ajaxRequesters||{},j.xhrs[k]=m,l&&(j.ajaxRequesters[k]=l),m},_removeExpiredChunkingRecords:function(){var b=B.recordsExpireIn;F._iterateResumeRecords(function(a,f){var e=new Date(f.lastUpdated);e.setDate(e.getDate()+b),e.getTime()<=Date.now()&&(r("Removing expired resume record with key "+a),localStorage.removeItem(a))})},_shouldChunkThisFile:function(d){var c=F._getFileState(d);return c.chunking||F.reevaluateChunking(d),c.chunking.enabled}})},qq.WindowReceiveMessage=function(e){var d={log:function(){}},f={};qq.extend(d,e),qq.extend(this,{receiveMessage:function(h,c){var j=function(b){c(b.data)};window.postMessage?f[h]=qq(window).attach("message",j):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(h){if(window.postMessage){var c=f[h];c&&c()}}})},qq.s3=qq.s3||{},qq.s3.util=qq.s3.util||function(){return{AWS_PARAM_PREFIX:"x-amz-meta-",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",getBucket:function(e){var d,f=[/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i];return qq.each(f,function(h,b){var a=b.exec(e);return a?(d=a[1],!1):void 0}),d},getPolicy:function(F){var E={},D=[],C=qq.s3.util.getBucket(F.endpoint),B=F.key,A=F.acl,z=F.type,y=new Date,x=F.expectedStatus,w=F.sessionToken,v=F.params,u=qq.s3.util.getSuccessRedirectAbsoluteUrl(F.successRedirectUrl),t=F.minFileSize,s=F.maxFileSize,r=F.reducedRedundancy,q=F.serverSideEncryption;return E.expiration=qq.s3.util.getPolicyExpirationDate(y),D.push({acl:A}),D.push({bucket:C}),z&&D.push({"Content-Type":z}),x&&D.push({success_action_status:x.toString()}),u&&D.push({success_action_redirect:u}),r&&(D.push({}),D[D.length-1][qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),w&&(D.push({}),D[D.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=w),q&&(D.push({}),D[D.length-1][qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),D.push({key:B}),qq.each(v,function(f,c){var j=qq.s3.util.AWS_PARAM_PREFIX+f,h={};h[j]=encodeURIComponent(c),D.push(h)}),E.conditions=D,qq.s3.util.enforceSizeLimits(E,t,s),E},refreshPolicyCredentials:function(e,d){var f=!1;qq.each(e.conditions,function(b,c){qq.each(c,function(h){h===qq.s3.util.SESSION_TOKEN_PARAM_NAME&&(c[h]=d,f=!0)})}),f||(e.conditions.push({}),e.conditions[e.conditions.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=d)},generateAwsParams:function(F,E){var D={},C=F.params,B=new qq.Promise,A=qq.s3.util.getPolicy(F),z=F.sessionToken,y=F.type,x=F.key,w=F.accessKey,v=F.acl,u=F.expectedStatus,t=qq.s3.util.getSuccessRedirectAbsoluteUrl(F.successRedirectUrl),s=F.reducedRedundancy,r=F.serverSideEncryption,q=F.log;return D.key=x,D.AWSAccessKeyId=w,y&&(D["Content-Type"]=y),u&&(D.success_action_status=u),t&&(D.success_action_redirect=t),s&&(D[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),r&&(D[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),z&&(D[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=z),D.acl=v,qq.each(C,function(e,c){var f=qq.s3.util.AWS_PARAM_PREFIX+e;D[f]=encodeURIComponent(c)}),E(A).then(function(e,c,f){D.policy=e.policy,D.signature=e.signature,c&&(D.AWSAccessKeyId=c),f&&(D[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=f),B.success(D)},function(b){b=b||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server.",q("Policy signing failed.  "+b,"error"),B.failure(b)}),B},enforceSizeLimits:function(h,f,l){var k=0>f?0:f,j=0>=l?9007199254740992:l;(f>0||l>0)&&h.conditions.push(["content-length-range",k.toString(),j.toString()])},getPolicyExpirationDate:function(d){if(d.setMinutes(d.getMinutes()+5),Date.prototype.toISOString){return d.toISOString()}var c=function(f){var e=String(f);return 1===e.length&&(e="0"+e),e};return d.getUTCFullYear()+"-"+c(d.getUTCMonth()+1)+"-"+c(d.getUTCDate())+"T"+c(d.getUTCHours())+":"+c(d.getUTCMinutes())+":"+c(d.getUTCSeconds())+"."+String((d.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"},parseIframeResponse:function(f){var e=f.contentDocument||f.contentWindow.document,j=e.location.search,h=/bucket=(.+)&key=(.+)&etag=(.+)/.exec(j);return h?{bucket:h[1],key:h[2],etag:h[3].replace(/%22/g,"")}:void 0},getSuccessRedirectAbsoluteUrl:function(e){if(e){var d,f=document.createElement("div");return qq.ie7()?(f.innerHTML="<a href='"+e+"'></a>",d=f.firstChild,d.href):(d=document.createElement("a"),d.href=e,d.href=d.href,d.href)}},encodeQueryStringParam:function(d){var c=encodeURIComponent(d);return c=c.replace(/[!'()]/g,escape),c=c.replace(/\*/g,"%2A"),c.replace(/%20/g,"+")}}}(),function(){qq.nonTraditionalBasePublicApi={setUploadSuccessParams:function(d,c){this._uploadSuccessParamsStore.set(d,c)}},qq.nonTraditionalBasePrivateApi={_onComplete:function(F,E,D,C){var B,A,z=D.success?!0:!1,y=this,x=arguments,w=this._options.uploadSuccess.endpoint,v=this._options.uploadSuccess.customHeaders,u=this._options.cors,t=new qq.Promise,s=this._uploadSuccessParamsStore.get(F),r=function(a){delete y._failedSuccessRequestCallbacks[F],qq.extend(D,a),qq.FineUploaderBasic.prototype._onComplete.apply(y,x),t.success(a)},q=function(b){var a=B;qq.extend(D,b),D&&D.reset&&(a=null),a?y._failedSuccessRequestCallbacks[F]=a:delete y._failedSuccessRequestCallbacks[F],y._onAutoRetry(F,E,D,C,a)||(qq.FineUploaderBasic.prototype._onComplete.apply(y,x),t.failure(b))};return z&&w?(A=new qq.UploadSuccessAjaxRequester({endpoint:w,customHeaders:v,cors:u,log:qq.bind(this.log,this)}),qq.extend(s,y._getEndpointSpecificParams(F,D,C),!0),B=qq.bind(function(){A.sendSuccessRequest(F,s).then(r,q)},y),B(),t):qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(d){var c=this._failedSuccessRequestCallbacks[d];return qq.FineUploaderBasic.prototype._manualRetry.call(this,d,c)}}}(),function(){qq.s3.FineUploaderBasic=function(d){var c={request:{accessKey:null},objectProperties:{acl:"private",key:"uuid",reducedRedundancy:!1,serverSideEncryption:!1},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{endpoint:null,customHeaders:{}},uploadSuccess:{endpoint:null,params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},cors:{allowXdr:!0},callbacks:{onCredentialsExpired:function(){}}};qq.extend(c,d,!0),this.setCredentials(c.credentials,!0)||(this._currentCredentials.accessKey=c.request.accessKey),this._aclStore=this._createStore(c.objectProperties.acl),qq.FineUploaderBasic.call(this,c),this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params),this._failedSuccessRequestCallbacks={},this._cannedKeys={}},qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePublicApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePrivateApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePublicApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePrivateApi),qq.extend(qq.s3.FineUploaderBasic.prototype,{getKey:function(b){return null==this._cannedKeys[b]?this._handler.getThirdPartyFileId(b):this._cannedKeys[b]},reset:function(){qq.FineUploaderBasic.prototype.reset.call(this),this._failedSuccessRequestCallbacks=[]},setUploadSuccessParams:function(d,c){this._uploadSuccessParamsStore.set(d,c)},setCredentials:function(d,c){if(d&&d.secretKey){if(!d.accessKey){throw new qq.Error("Invalid credentials: no accessKey")}if(!d.expiration){throw new qq.Error("Invalid credentials: no expiration")}return this._currentCredentials=qq.extend({},d),qq.isString(d.expiration)&&(this._currentCredentials.expiration=new Date(d.expiration)),!0}if(!c){throw new qq.Error("Invalid credentials parameter!")}this._currentCredentials={}},setAcl:function(d,c){this._aclStore.set(d,c)},_createUploadHandler:function(){var d=this,c={objectProperties:this._options.objectProperties,aclStore:this._aclStore,signature:this._options.signature,iframeSupport:this._options.iframeSupport,getKeyName:qq.bind(this._determineKeyName,this),validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};return qq.override(this._endpointStore,function(b){return{get:function(a){var e=b.get(a);return e.indexOf("http")<0?"http://"+e:e}}}),qq.override(this._paramsStore,function(b){return{get:function(a){var f=b.get(a),e={};return qq.each(f,function(j,h){e[j.toLowerCase()]=qq.isFunction(h)?h():h}),e}}}),c.signature.credentialsProvider={get:function(){return d._currentCredentials},onExpired:function(){var a=new qq.Promise,e=d._options.callbacks.onCredentialsExpired();return qq.isGenericPromise(e)?e.then(function(f){try{d.setCredentials(f),a.success()}catch(b){d.log("Invalid credentials returned from onCredentialsExpired callback! ("+b.message+")","error"),a.failure("onCredentialsExpired did not return valid credentials.")}},function(b){d.log("onCredentialsExpired callback indicated failure! ("+b+")","error"),a.failure("onCredentialsExpired callback failed.")}):(d.log("onCredentialsExpired callback did not return a promise!","error"),a.failure("Unexpected return value for onCredentialsExpired.")),a}},qq.FineUploaderBasic.prototype._createUploadHandler.call(this,c,"s3")},_determineKeyName:function(j,h){var o=new qq.Promise,n=this._options.objectProperties.key,m=qq.getExtension(h),l=o.failure,k=function(e,c){var f=e;void 0!==c&&(f+="."+c),o.success(f)};switch(n){case"uuid":k(this.getUuid(j),m);break;case"filename":k(h);break;default:qq.isFunction(n)?this._handleKeynameFunction(n,j,k,l):(this.log(n+" is not a valid value for the s3.keyname option!","error"),l())}return o},_handleKeynameFunction:function(k,j,q,p){var o=this,n=function(b){q(b)},m=function(b){o.log(qq.format("Failed to retrieve key name for {}.  Reason: {}",j,b||"null"),"error"),p(b)},l=k.call(this,j);qq.isGenericPromise(l)?l.then(n,m):null==l?m():n(l)},_getEndpointSpecificParams:function(f,e,j){var h={key:this.getKey(f),uuid:this.getUuid(f),name:this.getName(f),bucket:qq.s3.util.getBucket(this._endpointStore.get(f))};return j&&j.getResponseHeader("ETag")?h.etag=j.getResponseHeader("ETag"):e.etag&&(h.etag=e.etag),h},_onSubmitDelete:function(e,d){var f={key:this.getKey(e),bucket:qq.s3.util.getBucket(this._endpointStore.get(e))};return qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,e,d,f)},_addCannedFile:function(d){var c;if(null==d.s3Key){throw new qq.Error("Did not find s3Key property in server session response.  This is required!")}return c=qq.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments),this._cannedKeys[c]=d.s3Key,c}})}(),qq.s3.RequestSigner=function(v){function u(C,B,A){var z,y,x=B.responseText,w=m[C],k=w.promise;if(delete m[C],x){try{y=qq.parseJson(x)}catch(j){l.log("Error attempting to parse signature response: "+j,"error")}}y&&y.invalid?(A=!0,z="Invalid policy document or request headers!"):y?l.expectingPolicy&&!y.policy?(A=!0,z="Response does not include the base64 encoded policy!"):y.signature||(A=!0,z="Response does not include the signature!"):(A=!0,z="Received an empty or invalid response from the server!"),A?(z&&l.log(z,"error"),k.failure(z)):k.success(y)}function t(G,F,E,D,C,B,A){var z,y="POST",x=[],w="";switch(G){case n.REQUEST_TYPE.MULTIPART_ABORT:y="DELETE",z=qq.format("uploadId={}",B);break;case n.REQUEST_TYPE.MULTIPART_INITIATE:z="uploads";break;case n.REQUEST_TYPE.MULTIPART_COMPLETE:z=qq.format("uploadId={}",B);break;case n.REQUEST_TYPE.MULTIPART_UPLOAD:y="PUT",z=qq.format("partNumber={}&uploadId={}",A,B)}return z=E+"?"+z,qq.each(C,function(b){x.push(b)}),x.sort(),qq.each(x,function(d,c){w+=c+":"+C[c]+"\n"}),{toSign:qq.format("{}\n\n{}\n\n{}/{}/{}",y,D||"",w||"\n",F,z),endOfUrl:z}}function s(f,e,k,j){var h;f.signatureConstructor?(j&&(h=f.signatureConstructor.getHeaders(),h[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=j,f.signatureConstructor.withHeaders(h)),q(f.signatureConstructor.getToSign().stringToSign,e)):(j&&qq.s3.util.refreshPolicyCredentials(f,j),r(f,e,k,j))}function r(C,B,A,z){var y=JSON.stringify(C),x=CryptoJS.enc.Utf8.parse(y),w=CryptoJS.enc.Base64.stringify(x),k=CryptoJS.HmacSHA1(w,o.get().secretKey),h=CryptoJS.enc.Base64.stringify(k);B.success({policy:w,signature:h},A,z)}function q(h,f){var w=CryptoJS.enc.Utf8.parse(h),k=CryptoJS.HmacSHA1(w,o.get().secretKey),j=CryptoJS.enc.Base64.stringify(k);f.success({signature:j})}var p,o,n=this,m={},l={expectingPolicy:!1,method:"POST",signatureSpec:{credentialsProvider:{},endpoint:null,customHeaders:{}},maxConnections:3,paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(){}};qq.extend(l,v,!0),o=l.signatureSpec.credentialsProvider,p=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:l.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return l.signatureSpec.endpoint}},paramsStore:l.paramsStore,maxConnections:l.maxConnections,customHeaders:l.signatureSpec.customHeaders,log:l.log,onComplete:u,cors:l.cors,successfulResponseCodes:{POST:[200]}})),qq.extend(this,{getSignature:function(f,d){var j=d,h=new qq.Promise;return o.get().secretKey&&window.CryptoJS?o.get().expiration.getTime()>Date.now()?s(d,h):o.onExpired().then(function(){s(d,h,o.get().accessKey,o.get().sessionToken)},function(){l.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ","error"),h.failure("Unable to sign request - expired credentials.")}):(l.log("Submitting S3 signature request for "+f),j.signatureConstructor&&(j={headers:j.signatureConstructor.getToSign().stringToSign}),p.initTransport(f).withParams(j).send(),m[f]={promise:h}),h},constructStringToSign:function(h,c,A){var z,y,x,w,k={};return{withHeaders:function(b){return k=b,this},withUploadId:function(b){return z=b,this},withContentType:function(b){return y=b,this},withPartNum:function(b){return x=b,this},getToSign:function(){var a=o.get().sessionToken;return k["x-amz-date"]=(new Date).toUTCString(),a&&(k[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=a),w=t(h,c,A,y,k,z,x),{headers:function(){return y&&(k["Content-Type"]=y),k}(),endOfUrl:w.endOfUrl,stringToSign:w.toSign}},getHeaders:function(){return qq.extend({},k)},getEndOfUrl:function(){return w&&w.endOfUrl}}}})},qq.s3.RequestSigner.prototype.REQUEST_TYPE={MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"},qq.UploadSuccessAjaxRequester=function(h){function f(s,r,q){var p,o=k[s],n=r.responseText,m={success:!0},e={success:!1};delete k[s],j.log(qq.format("Received the following response body to an upload success request for id {}: {}",s,n));try{p=qq.parseJson(n),q||p&&(p.error||p.success===!1)?(j.log("Upload success request was rejected by the server.","error"),o.failure(qq.extend(p,e))):(j.log("Upload success was acknowledged by the server."),o.success(qq.extend(p,m)))}catch(d){q?(j.log(qq.format("Your server indicated failure in its upload success request response for id {}!",s),"error"),o.failure(e)):(j.log("Upload success was acknowledged by the server."),o.success(m))}}var l,k=[],j={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(){}};qq.extend(j,h),l=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:j.method,endpointStore:{get:function(){return j.endpoint}},paramsStore:j.paramsStore,maxConnections:j.maxConnections,customHeaders:j.customHeaders,log:j.log,onComplete:f,cors:j.cors,successfulResponseCodes:{POST:[200]}})),qq.extend(this,{sendSuccessRequest:function(d,c){var e=new qq.Promise;return j.log("Submitting upload success request/notification for "+d),l.initTransport(d).withParams(c).send(),k[d]=e,e}})},qq.s3.InitiateMultipartAjaxRequester=function(j){function h(p){var e,t=qq.s3.util.getBucket(k.endpointStore.get(p)),s={},r=new qq.Promise,q=k.getKey(p);return s["x-amz-acl"]=k.aclStore.get(p),k.reducedRedundancy&&(s[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),k.serverSideEncryption&&(s[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),s[qq.s3.util.AWS_PARAM_PREFIX+k.filenameParam]=encodeURIComponent(k.getName(p)),qq.each(k.paramsStore.get(p),function(d,c){s[qq.s3.util.AWS_PARAM_PREFIX+d]=encodeURIComponent(c)}),e=m.constructStringToSign(m.REQUEST_TYPE.MULTIPART_INITIATE,t,q).withContentType(k.getContentType(p)).withHeaders(s),m.getSignature(p,{signatureConstructor:e}).then(function(b){s=e.getHeaders(),s.Authorization="AWS "+k.signatureSpec.credentialsProvider.get().accessKey+":"+b.signature,r.success(s,e.getEndOfUrl())},r.failure),r}function o(y,x,w){var v,u,t,s,r,q=l[y],p=new DOMParser,f=p.parseFromString(x.responseText,"application/xml");delete l[y],w?(r=x.status,u=f.getElementsByTagName("Message"),u.length>0&&(s=u[0].textContent)):(v=f.getElementsByTagName("UploadId"),v.length>0?t=v[0].textContent:s="Upload ID missing from request"),void 0===t?(s?k.log(qq.format("Specific problem detected initiating multipart upload request for {}: '{}'.",y,s),"error"):k.log(qq.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",y,r),"error"),q.failure("Problem initiating upload request with Amazon.",x)):(k.log(qq.format("Initiate multipart upload request successful for {}.  Upload ID is {}",y,t)),q.success(t,x))}var n,m,l={},k={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:!1,serverSideEncryption:!1,maxConnections:3,getContentType:function(){},getKey:function(){},getName:function(){},log:function(){}};qq.extend(k,j),m=new qq.s3.RequestSigner({signatureSpec:k.signatureSpec,cors:k.cors,log:k.log}),n=qq.extend(this,new qq.AjaxRequester({method:k.method,contentType:null,endpointStore:k.endpointStore,maxConnections:k.maxConnections,allowXRequestedWithAndCacheControl:!1,log:k.log,onComplete:o,successfulResponseCodes:{POST:[200]}})),qq.extend(this,{send:function(b){var d=new qq.Promise;return h(b).then(function(a,c){k.log("Submitting S3 initiate multipart upload request for "+b),l[b]=d,n.initTransport(b).withPath(c).withHeaders(a).send()},d.failure),d}})},qq.s3.CompleteMultipartAjaxRequester=function(k){function j(h,f){var v={},u=new qq.Promise,t=l.endpointStore.get(h),s=qq.s3.util.getBucket(t),r=n.constructStringToSign(n.REQUEST_TYPE.MULTIPART_COMPLETE,s,l.getKey(h)).withUploadId(f).withContentType("application/xml; charset=UTF-8");return n.getSignature(h,{signatureConstructor:r}).then(function(b){v=r.getHeaders(),v.Authorization="AWS "+l.signatureSpec.credentialsProvider.get().accessKey+":"+b.signature,u.success(v,r.getEndOfUrl())},u.failure),u}function q(z,y,x){var w=m[z],v=new DOMParser,u=l.endpointStore.get(z),t=qq.s3.util.getBucket(u),s=(l.getKey(z),v.parseFromString(y.responseText,"application/xml")),r=s.getElementsByTagName("Bucket"),h=s.getElementsByTagName("Key");delete m[z],l.log(qq.format("Complete response status {}, body = {}",y.status,y.responseText)),x?l.log(qq.format("Complete Multipart Upload request for {} failed with status {}.",z,y.status),"error"):r.length&&h.length?r[0].textContent!==t&&(x=!0,l.log(qq.format("Wrong bucket in response to Complete Multipart Upload request for {}.",z),"error")):(x=!0,l.log(qq.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",z),"error")),x?w.failure("Problem asking Amazon to combine the parts!",y):w.success({},y)}function p(d){var c=document.implementation.createDocument(null,"CompleteMultipartUpload",null);return d.sort(function(f,e){return f.part-e.part}),qq.each(d,function(y,x){var w=x.part,v=x.etag,u=c.createElement("Part"),t=c.createElement("PartNumber"),s=c.createTextNode(w),r=c.createTextNode(v),b=c.createElement("ETag");b.appendChild(r),t.appendChild(s),u.appendChild(t),u.appendChild(b),qq(c).children()[0].appendChild(u)}),(new XMLSerializer).serializeToString(c)}var o,n,m={},l={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getKey:function(){},log:function(){}};qq.extend(l,k),n=new qq.s3.RequestSigner({signatureSpec:l.signatureSpec,cors:l.cors,log:l.log}),o=qq.extend(this,new qq.AjaxRequester({method:l.method,contentType:"application/xml; charset=UTF-8",endpointStore:l.endpointStore,maxConnections:l.maxConnections,allowXRequestedWithAndCacheControl:!1,log:l.log,onComplete:q,successfulResponseCodes:{POST:[200]}})),qq.extend(this,{send:function(b,h,e){var d=new qq.Promise;return j(b,h).then(function(a,r){var f=p(e);l.log("Submitting S3 complete multipart upload request for "+b),m[b]=d,delete a["Content-Type"],o.initTransport(b).withPath(r).withHeaders(a).withPayload(f).send()},d.failure),d}})},qq.s3.AbortMultipartAjaxRequester=function(j){function h(f,e){var s={},r=new qq.Promise,q=k.endpointStore.get(f),p=qq.s3.util.getBucket(q),o=l.constructStringToSign(l.REQUEST_TYPE.MULTIPART_ABORT,p,k.getKey(f)).withUploadId(e);return l.getSignature(f,{signatureConstructor:o}).then(function(b){s=o.getHeaders(),s.Authorization="AWS "+k.signatureSpec.credentialsProvider.get().accessKey+":"+b.signature,r.success(s,o.getEndOfUrl())},r.failure),r}function n(o,f,t){var s,r=new DOMParser,q=r.parseFromString(f.responseText,"application/xml"),p=q.getElementsByTagName("Error");k.log(qq.format("Abort response status {}, body = {}",f.status,f.responseText)),t?k.log(qq.format("Abort Multipart Upload request for {} failed with status {}.",o,f.status),"error"):p.length?(t=!0,s=q.getElementsByTagName("Message")[0].textContent,k.log(qq.format("Failed to Abort Multipart Upload request for {}.  Error: {}",o,s),"error")):k.log(qq.format("Abort MPU request succeeded for file ID {}.",o))}var m,l,k={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getKey:function(){},log:function(){}};qq.extend(k,j),l=new qq.s3.RequestSigner({signatureSpec:k.signatureSpec,cors:k.cors,log:k.log}),m=qq.extend(this,new qq.AjaxRequester({validMethods:["DELETE"],method:k.method,contentType:null,endpointStore:k.endpointStore,maxConnections:k.maxConnections,allowXRequestedWithAndCacheControl:!1,log:k.log,onComplete:n,successfulResponseCodes:{DELETE:[204]}})),qq.extend(this,{send:function(b,d){h(b,d).then(function(a,e){k.log("Submitting S3 Abort multipart upload request for "+b),m.initTransport(b).withPath(e).withHeaders(a).send()})}})},qq.s3.XhrUploadHandler=function(N,M){var L=M.getName,K=M.log,J=200,I=N.getKeyName,H=N.filenameParam,G=N.paramsStore,F=N.endpointStore,E=N.aclStore,D=N.objectProperties.reducedRedundancy,C=N.objectProperties.serverSideEncryption,B=N.validation,A=N.signature,z=this,y=N.signature.credentialsProvider,x={combine:function(f){var e=z._getPersistableData(f).uploadId,j=z._getPersistableData(f).etags,h=new qq.Promise;return w.completeMultipart.send(f,e,j).then(h.success,function(a,d){h.failure(u.done(f,d).response,d)}),h},done:function(h,f,l){var k,j=u.response.parse(h,f);j.success&&(k=f.getResponseHeader("ETag"),z._getPersistableData(h).etags||(z._getPersistableData(h).etags=[]),z._getPersistableData(h).etags.push({part:l+1,etag:k}))},initHeaders:function(a,p){var o={},n=N.endpointStore.get(a),m=qq.s3.util.getBucket(n),l=u.key.urlSafe(a),k=new qq.Promise,j=w.restSignature.constructStringToSign(w.restSignature.REQUEST_TYPE.MULTIPART_UPLOAD,m,l).withPartNum(p+1).withUploadId(z._getPersistableData(a).uploadId);return w.restSignature.getSignature(a+"."+p,{signatureConstructor:j}).then(function(b){o=j.getHeaders(),o.Authorization="AWS "+y.get().accessKey+":"+b.signature,k.success(o,j.getEndOfUrl())},k.failure),k},put:function(a,m){var l=z._createXhr(a,m),k=z._getChunkData(a,m),j=N.endpointStore.get(a),h=new qq.Promise;return x.initHeaders(a,m).then(function(b,d){var c=j+"/"+d;z._registerProgressHandler(a,m,k.size),u.track(a,l,m).then(h.success,h.failure),l.open("PUT",c,!0),qq.each(b,function(f,e){l.setRequestHeader(f,e)}),l.send(k.blob)},function(){h.failure({error:"Problem signing the chunk!"},l)}),h},send:function(e,d){var f=new qq.Promise;return x.setup(e).then(function(){x.put(e,d).then(f.success,f.failure)},function(h,c){f.failure({error:h},c)}),f},setup:function(f){var e=new qq.Promise,j=z._getPersistableData(f).uploadId,h=new qq.Promise;return j?j instanceof qq.Promise?j.then(function(b){e.success(b)}):e.success(j):(z._getPersistableData(f).uploadId=h,w.initiateMultipart.send(f).then(function(a){z._getPersistableData(f).uploadId=a,h.success(a),e.success(a)},function(a){z._getPersistableData(f).uploadId=null,e.failure(a),h.failure(a)})),e}},w={abortMultipart:new qq.s3.AbortMultipartAjaxRequester({endpointStore:F,signatureSpec:A,cors:N.cors,log:K,getKey:function(b){return u.key.urlSafe(b)}}),completeMultipart:new qq.s3.CompleteMultipartAjaxRequester({endpointStore:F,signatureSpec:A,cors:N.cors,log:K,getKey:function(b){return u.key.urlSafe(b)}}),initiateMultipart:new qq.s3.InitiateMultipartAjaxRequester({filenameParam:H,endpointStore:F,paramsStore:G,signatureSpec:A,aclStore:E,reducedRedundancy:D,serverSideEncryption:C,cors:N.cors,log:K,getContentType:function(b){return z._getMimeType(b)},getKey:function(b){return u.key.urlSafe(b)},getName:function(b){return L(b)}}),policySignature:new qq.s3.RequestSigner({expectingPolicy:!0,signatureSpec:A,cors:N.cors,log:K}),restSignature:new qq.s3.RequestSigner({signatureSpec:A,cors:N.cors,log:K})},v={initParams:function(d){var c=G.get(d);return c[H]=L(d),qq.s3.util.generateAwsParams({endpoint:F.get(d),params:c,type:z._getMimeType(d),key:z.getThirdPartyFileId(d),accessKey:y.get().accessKey,sessionToken:y.get().sessionToken,acl:E.get(d),expectedStatus:J,minFileSize:B.minSizeLimit,maxFileSize:B.maxSizeLimit,reducedRedundancy:D,serverSideEncryption:C,log:K},qq.bind(w.policySignature.getSignature,this,d))},send:function(f){var d=new qq.Promise,j=z._createXhr(f),h=z.getFile(f);return z._registerProgressHandler(f),u.track(f,j).then(d.success,d.failure),v.setup(f,j,h).then(function(a){K("Sending upload request for "+f),j.send(a)},d.failure),d},setup:function(j,h,o){var n=new FormData,m=F.get(j),l=m,k=new qq.Promise;return v.initParams(j).then(function(b){h.open("POST",l,!0),qq.obj2FormData(b,n),n.append("file",o),k.success(n)},function(b){k.failure({error:b})}),k}},u={done:function(f,d){var j=u.response.parse(f,d),h=j.success!==!0;return h&&u.response.shouldReset(j.code)&&(K("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error"),j.reset=!0),{success:!h,response:j}},key:{promise:function(e){var c=new qq.Promise,f=z.getThirdPartyFileId(e);return null==f?(f=new qq.Promise,z._setThirdPartyFileId(e,f),I(e,L(e)).then(function(a){z._setThirdPartyFileId(e,a),c.success(a)},function(a){z._setThirdPartyFileId(e,null),c.failure(a)})):qq.isGenericPromise(f)?c.then(f.success,f.failure):c.success(f),c},urlSafe:function(b){return encodeURIComponent(z.getThirdPartyFileId(b))}},response:{parse:function(e,d){var k,j={};try{K(qq.format("Received response status {} with body: {}",d.status,d.responseText)),d.status===J?j.success=!0:(k=u.response.parseError(d.responseText),k&&(j.error=k.message,j.code=k.code))}catch(h){K("Error when attempting to parse xhr response text ("+h.message+")","error")}return j},parseError:function(j){var h,o,n=new DOMParser,m=n.parseFromString(j,"application/xml"),l=m.getElementsByTagName("Error"),k={};return l.length?(h=m.getElementsByTagName("Code"),o=m.getElementsByTagName("Message"),o.length&&(k.message=o[0].textContent),h.length&&(k.code=h[0].textContent),k):void 0},shouldReset:function(b){return"EntityTooSmall"===b||"InvalidPart"===b||"InvalidPartOrder"===b||"NoSuchUpload"===b}},start:function(e,d){var f=new qq.Promise;return u.key.promise(e).then(function(){null==d?v.send(e).then(f.success,f.failure):x.send(e,d).then(f.success,f.failure)},function(b){f.failure({error:b})}),f},track:function(f,e,j){var h=new qq.Promise;return e.onreadystatechange=function(){if(4===e.readyState){var a;null==j?(a=u.done(f,e),h[a.success?"success":"failure"](a.response,e)):(x.done(f,e,j),a=u.done(f,e),h[a.success?"success":"failure"](a.response,e))}},h}};qq.extend(this,{uploadChunk:u.start,uploadFile:u.start}),qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"s3"},N),proxy:qq.extend({getEndpoint:N.endpointStore.get},M)})),qq.override(this,function(b){return{expunge:function(a){var f=z._getPersistableData(a)&&z._getPersistableData(a).uploadId,e=z._maybeDeletePersistedChunkData(a);void 0!==f&&e&&w.abortMultipart.send(a,f),b.expunge(a)},finalizeChunks:function(c){return x.combine(c)},_getLocalStorageId:function(a){var j=b._getLocalStorageId(a),h=F.get(a),f=qq.s3.util.getBucket(h);return j+"-"+f}}})},qq.s3.FormUploadHandler=function(V,U){function T(a,n){var m=V.endpointStore.get(a),l=qq.s3.util.getBucket(m);try{var k=n.contentDocument||n.contentWindow.document,j=(k.body.innerHTML,qq.s3.util.parseIframeResponse(n));if(j.bucket===l&&j.key===qq.s3.util.encodeQueryStringParam(O.getThirdPartyFileId(a))){return !0}K("Response from AWS included an unexpected bucket or key name.","error")}catch(h){K("Error when attempting to parse form upload response ("+h.message+")","error")}return !1}function S(d){var c=H.get(d);return c[I]=M(d),qq.s3.util.generateAwsParams({endpoint:G.get(d),params:c,key:O.getThirdPartyFileId(d),accessKey:z.get().accessKey,sessionToken:z.get().sessionToken,acl:F.get(d),minFileSize:C.minSizeLimit,maxFileSize:C.maxSizeLimit,successRedirectUrl:A,reducedRedundancy:E,serverSideEncryption:D,log:K},qq.bind(y.getSignature,this,d))}function R(a,m){var l=new qq.Promise,j=V.demoMode?"GET":"POST",h=V.endpointStore.get(a),d=M(a);return S(a).then(function(e){var c=O._initFormForUpload({method:j,endpoint:h,params:e,paramsInBody:!0,targetName:m.name});l.success(c)},function(b){l.failure(b),P(a,m,d,{error:b})}),l}function Q(e){var c=O._createIframe(e),j=O.getInput(e),h=new qq.Promise;return R(e,c).then(function(a){a.appendChild(j),O._attachLoadEvent(c,function(b){K("iframe loaded"),b?b.success===!1&&(K("Amazon likely rejected the upload request","error"),h.failure(b)):(b={},b.success=T(e,c),b.success===!1?(K("A success response was received by Amazon, but it was invalid in some way.","error"),h.failure(b)):(qq.extend(b,qq.s3.util.parseIframeResponse(c)),h.success(b))),P(e,c)}),K("Sending upload request for "+e),a.submit(),qq(a).remove()},h.failure),h}function P(d,c){O._detachLoadEvent(d),c&&qq(c).remove()}var O=this,N=U.onUuidChanged,M=U.getName,L=U.getUuid,K=U.log,J=V.getKeyName,I=V.filenameParam,H=V.paramsStore,G=V.endpointStore,F=V.aclStore,E=V.objectProperties.reducedRedundancy,D=V.objectProperties.serverSideEncryption,C=V.validation,B=V.signature,A=V.iframeSupport.localBlankPagePath,z=V.signature.credentialsProvider,y=new qq.s3.RequestSigner({signatureSpec:B,cors:V.cors,log:K});if(void 0===A){throw new Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!")}qq.extend(this,new qq.FormUploadHandler({options:{isCors:!1,inputName:"file"},proxy:{onCancel:V.onCancel,onUuidChanged:N,getName:M,getUuid:L,log:K}})),qq.extend(this,{uploadFile:function(e){var d=M(e),f=new qq.Promise;return O.getThirdPartyFileId(e)?Q(e).then(f.success,f.failure):J(e,d).then(function(a){O._setThirdPartyFileId(e,a),Q(e).then(f.success,f.failure)},function(b){f.failure({error:b})}),f}})},qq.DragAndDrop=function(D){function C(e,d){var f=Array.prototype.slice.call(e);u.callbacks.dropLog("Grabbed "+e.length+" dropped files."),d.dropDisabled(!1),u.callbacks.processingDroppedFilesComplete(f,d.getElement())}function B(d){var c=new qq.Promise;return d.isFile?d.file(function(j){var h=d.name,b=d.fullPath,a=b.indexOf(h);b=b.substr(0,a),"/"===b.charAt(0)&&(b=b.substr(1)),j.qqPath=b,q.push(j),c.success()},function(a){u.callbacks.dropLog("Problem parsing '"+d.fullPath+"'.  FileError code "+a.code+".","error"),c.failure()}):d.isDirectory&&A(d).then(function(b){var e=b.length;qq.each(b,function(f,h){B(h).done(function(){e-=1,0===e&&c.success()})}),b.length||c.success()},function(a){u.callbacks.dropLog("Problem parsing '"+d.fullPath+"'.  FileError code "+a.code+".","error"),c.failure()}),c}function A(h,d,m,l){var k=l||new qq.Promise,j=d||h.createReader();return j.readEntries(function(a){var c=m?m.concat(a):a;a.length?setTimeout(function(){A(h,j,c,k)},0):k.success(c)},k.failure),k}function z(f,c){var j=[],h=new qq.Promise;return u.callbacks.processingDroppedFiles(),c.dropDisabled(!0),f.files.length>1&&!u.allowMultipleItems?(u.callbacks.processingDroppedFilesComplete([]),u.callbacks.dropError("tooManyFilesError",""),c.dropDisabled(!1),h.failure()):(q=[],qq.isFolderDropSupported(f)?qq.each(f.items,function(e,d){var k=d.webkitGetAsEntry();k&&(k.isFile?q.push(d.getAsFile()):j.push(B(k).done(function(){j.pop(),0===j.length&&h.success()})))}):q=f.files,0===j.length&&h.success()),h}function y(b){var d=new qq.UploadDropZone({HIDE_ZONES_EVENT_NAME:t,element:b,onEnter:function(a){qq(b).addClass(u.classes.dropActive),a.stopPropagation()},onLeaveNotDescendants:function(){qq(b).removeClass(u.classes.dropActive)},onDrop:function(c){z(c.dataTransfer,d).then(function(){C(q,d)},function(){u.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")})}});return p.addDisposer(function(){d.dispose()}),qq(b).hasAttribute(s)&&qq(b).hide(),r.push(d),d}function x(d){var c;return qq.each(d.dataTransfer.types,function(b,e){return"Files"===e?(c=!0,!1):void 0}),c}function w(b){return qq.firefox()?!b.relatedTarget:qq.safari()?b.x<0||b.y<0:0===b.x&&0===b.y}function v(){var d=u.dropZoneElements,c=function(){setTimeout(function(){qq.each(d,function(f,e){qq(e).hasAttribute(s)&&qq(e).hide(),qq(e).removeClass(u.classes.dropActive)})},10)};qq.each(d,function(a,f){var e=y(f);d.length&&qq.supportedFeatures.fileDrop&&p.attach(document,"dragenter",function(h){!e.dropDisabled()&&x(h)&&qq.each(d,function(k,j){j instanceof HTMLElement&&qq(j).css({display:"block"})})})}),p.attach(document,"dragleave",function(b){w(b)&&c()}),p.attach(qq(document).children()[0],"mouseenter",function(){c()}),p.attach(document,"drop",function(b){b.preventDefault(),c()}),p.attach(document,t,c)}var u,t="qq-hidezones",s="qq-hide-dropzone",r=[],q=[],p=new qq.DisposeSupport;u={dropZoneElements:[],allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks},qq.extend(u,D,!0),v(),qq.extend(this,{setupExtraDropzone:function(b){u.dropZoneElements.push(b),y(b)},removeDropzone:function(e){var d,f=u.dropZoneElements;for(d in f){if(f[d]===e){return f.splice(d,1)}}},dispose:function(){p.dispose(),qq.each(r,function(d,c){c.dispose()})}})},qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(d,c){qq.log("Drag & drop error code '"+d+" with these specifics: '"+c+"'","error")},dropLog:function(d,c){qq.log(d,c)}}},qq.UploadDropZone=function(x){function w(){return qq.safari()||qq.firefox()&&qq.windows()}function v(){n||(w?m.attach(document,"dragover",function(b){b.preventDefault()}):m.attach(document,"dragover",function(b){b.dataTransfer&&(b.dataTransfer.dropEffect="none",b.preventDefault())}),n=!0)}function u(f){if(!qq.supportedFeatures.fileDrop){return !1}var e,j=f.dataTransfer,h=qq.safari();return e=qq.ie()&&qq.supportedFeatures.fileDrop?!0:"none"!==j.effectAllowed,j&&e&&(j.files||!h&&j.types.contains&&j.types.contains("Files"))}function t(b){return void 0!==b&&(o=b),o}function s(){function e(){d=document.createEvent("Event"),d.initEvent(q.HIDE_ZONES_EVENT_NAME,!0,!0)}var d;if(window.CustomEvent){try{d=new CustomEvent(q.HIDE_ZONES_EVENT_NAME)}catch(f){e()}}else{e()}document.dispatchEvent(d)}function r(){m.attach(p,"dragover",function(d){if(u(d)){var c=qq.ie()&&qq.supportedFeatures.fileDrop?null:d.dataTransfer.effectAllowed;d.dataTransfer.dropEffect="move"===c||"linkMove"===c?"move":"copy",d.stopPropagation(),d.preventDefault()}}),m.attach(p,"dragenter",function(b){if(!t()){if(!u(b)){return}q.onEnter(b)}}),m.attach(p,"dragleave",function(d){if(u(d)){q.onLeave(d);var c=document.elementFromPoint(d.clientX,d.clientY);qq(this).contains(c)||q.onLeaveNotDescendants(d)}}),m.attach(p,"drop",function(b){if(!t()){if(!u(b)){return}b.preventDefault(),b.stopPropagation(),q.onDrop(b),s()}})}var q,p,o,n,m=new qq.DisposeSupport;q={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}},qq.extend(q,x),p=q.element,v(),r(),qq.extend(this,{dropDisabled:function(b){return t(b)},dispose:function(){m.dispose()},getElement:function(){return p}})},function(z){function y(e){var c=s(e||{}),f=x(c);return v(f),t(c,f),o}function x(e){var d=u("uploaderType"),f=u("endpointType");return d?(d=d.charAt(0).toUpperCase()+d.slice(1).toLowerCase(),f?new qq[f]["FineUploader"+d](e):new qq["FineUploader"+d](e)):f?new qq[f].FineUploader(e):new qq.FineUploader(e)}function w(e,d){var f=o.data("fineuploader");return d?(void 0===f&&(f={}),f[e]=d,o.data("fineuploader",f),void 0):void 0===f?null:f[e]}function v(b){return w("uploader",b)}function u(d,c){return w(d,c)}function t(a,f){var e=a.callbacks={};z.each(f._options.callbacks,function(d,k){var j,h;j=/^on(\w+)/.exec(d)[1],j=j.substring(0,1).toLowerCase()+j.substring(1),h=o,e[d]=function(){var c,B,A=Array.prototype.slice.call(arguments),m=[];z.each(A,function(D,C){m.push(p(C))}),c=k.apply(this,A);try{B=h.triggerHandler(j,m)}catch(l){qq.log("Caught error in Fine Uploader jQuery event handler: "+l.message,"error")}return null!=c?c:B}}),f._options.callbacks=e}function s(a,j){var h,f;return h=void 0===j?"basic"!==a.uploaderType?{element:o[0]}:{}:j,z.each(a,function(d,e){z.inArray(d,n)>=0?u(d,e):e instanceof z?h[d]=e[0]:z.isPlainObject(e)?(h[d]={},s(e,h[d])):z.isArray(e)?(f=[],z.each(e,function(k,m){var l={};m instanceof z?z.merge(f,m):z.isPlainObject(m)?(s(m,l),f.push(l)):f.push(m)}),h[d]=f):h[d]=e}),void 0===j?h:void 0}function r(a){return"string"===z.type(a)&&!a.match(/^_/)&&void 0!==v()[a]}function q(f){var e,j=[],h=Array.prototype.slice.call(arguments,1);return s(h,j),e=v()[f].apply(v(),j),p(e)}function p(a){var d=a;return null==a||"object"!=typeof a||1!==a.nodeType&&9!==a.nodeType||!a.cloneNode||(d=z(a)),d}var o,n=["uploaderType","endpointType"];z.fn.fineUploader=function(h){var e=this,b=arguments,a=[];return this.each(function(d,c){if(o=z(c),v()&&r(h)){if(a.push(q.apply(e,b)),1===e.length){return !1}}else{"object"!=typeof h&&h?z.error("Method "+h+" does not exist on jQuery.fineUploader"):y.apply(e,b)}}),1===a.length?a[0]:a.length>1?a:this}}(jQuery),function(b){b.fn.fineUploaderS3=function(a){return"object"==typeof a&&(a.endpointType="s3"),b.fn.fineUploader.apply(this,arguments)}}(jQuery);var CryptoJS=CryptoJS||function(x,w){var v={},u=v.lib={},t=u.Base=function(){function b(){}return{extend:function(a){b.prototype=this;var d=new b;return a&&d.mixIn(a),d.hasOwnProperty("init")||(d.init=function(){d.$super.init.apply(this,arguments)}),d.init.prototype=d,d.$super=this,d},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(d){for(var c in d){d.hasOwnProperty(c)&&(this[c]=d[c])}d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=u.WordArray=t.extend({init:function(b,d){b=this.words=b||[],this.sigBytes=d!=w?d:4*b.length},toString:function(b){return(b||q).stringify(this)},concat:function(j){var h=this.words,A=j.words,z=this.sigBytes,y=j.sigBytes;if(this.clamp(),z%4){for(var l=0;y>l;l++){var k=A[l>>>2]>>>24-l%4*8&255;h[z+l>>>2]|=k<<24-(z+l)%4*8}}else{if(A.length>65535){for(var l=0;y>l;l+=4){h[z+l>>>2]=A[l>>>2]}}else{h.push.apply(h,A)}}return this.sigBytes+=y,this},clamp:function(){var a=this.words,d=this.sigBytes;a[d>>>2]&=4294967295<<32-d%4*8,a.length=x.ceil(d/4)},clone:function(){var b=t.clone.call(this);return b.words=this.words.slice(0),b},random:function(a){for(var f=[],e=0;a>e;e+=4){f.push(4294967296*x.random()|0)}return new s.init(f,a)}}),r=v.enc={},q=r.Hex={stringify:function(j){for(var h=j.words,z=j.sigBytes,y=[],l=0;z>l;l++){var k=h[l>>>2]>>>24-l%4*8&255;y.push((k>>>4).toString(16)),y.push((15&k).toString(16))}return y.join("")},parse:function(f){for(var e=f.length,j=[],h=0;e>h;h+=2){j[h>>>3]|=parseInt(f.substr(h,2),16)<<24-h%8*4}return new s.init(j,e/2)}},p=r.Latin1={stringify:function(j){for(var h=j.words,z=j.sigBytes,y=[],l=0;z>l;l++){var k=h[l>>>2]>>>24-l%4*8&255;y.push(String.fromCharCode(k))}return y.join("")},parse:function(f){for(var e=f.length,j=[],h=0;e>h;h++){j[h>>>2]|=(255&f.charCodeAt(h))<<24-h%4*8}return new s.init(j,e)}},o=r.Utf8={stringify:function(d){try{return decodeURIComponent(escape(p.stringify(d)))}catch(c){throw new Error("Malformed UTF-8 data")}},parse:function(b){return p.parse(unescape(encodeURIComponent(b)))}},n=u.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(b){"string"==typeof b&&(b=o.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(G){var F=this._data,E=F.words,D=F.sigBytes,C=this.blockSize,B=4*C,A=D/B;A=G?x.ceil(A):x.max((0|A)-this._minBufferSize,0);var z=A*C,y=x.min(4*z,D);if(z){for(var f=0;z>f;f+=C){this._doProcessBlock(E,f)}var a=E.splice(0,z);F.sigBytes-=y}return new s.init(a,y)},clone:function(){var b=t.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0}),m=(u.Hasher=n.extend({cfg:t.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){n.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(d){d&&this._append(d);var c=this._doFinalize();return c},blockSize:16,_createHelper:function(b){return function(a,d){return new b.init(d).finalize(a)}},_createHmacHelper:function(b){return function(a,d){return new m.HMAC.init(b,d).finalize(a)}}}),v.algo={});return v}(Math);!function(){var f=CryptoJS,e=f.lib,j=e.WordArray,h=f.enc;h.Base64={stringify:function(x){var w=x.words,v=x.sigBytes,u=this._map;x.clamp();for(var t=[],s=0;v>s;s+=3){for(var r=w[s>>>2]>>>24-s%4*8&255,q=w[s+1>>>2]>>>24-(s+1)%4*8&255,p=w[s+2>>>2]>>>24-(s+2)%4*8&255,o=r<<16|q<<8|p,n=0;4>n&&v>s+0.75*n;n++){t.push(u.charAt(o>>>6*(3-n)&63))}}var m=u.charAt(64);if(m){for(;t.length%4;){t.push(m)}}return t.join("")},parse:function(t){var s=t.length,r=this._map,q=r.charAt(64);if(q){var p=t.indexOf(q);-1!=p&&(s=p)}for(var o=[],n=0,m=0;s>m;m++){if(m%4){var l=r.indexOf(t.charAt(m-1))<<m%4*2,c=r.indexOf(t.charAt(m))>>>6-m%4*2;o[n>>>2]|=(l|c)<<24-n%4*8,n++}}return j.create(o,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(){var j=CryptoJS,h=j.lib,n=h.Base,m=j.enc,l=m.Utf8,k=j.algo;k.HMAC=n.extend({init:function(v,u){v=this._hasher=new v.init,"string"==typeof u&&(u=l.parse(u));var t=v.blockSize,s=4*t;u.sigBytes>s&&(u=v.finalize(u)),u.clamp();for(var r=this._oKey=u.clone(),q=this._iKey=u.clone(),p=r.words,o=q.words,e=0;t>e;e++){p[e]^=1549556828,o[e]^=909522486}r.sigBytes=q.sigBytes=s,this.reset()},reset:function(){var b=this._hasher;b.reset(),b.update(this._iKey)},update:function(b){return this._hasher.update(b),this},finalize:function(f){var e=this._hasher,p=e.finalize(f);e.reset();var o=e.finalize(this._oKey.clone().concat(p));return o}})}(),function(){var j=CryptoJS,h=j.lib,o=h.WordArray,n=h.Hasher,m=j.algo,l=[],k=m.SHA1=n.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(y,x){for(var w=this._hash.words,v=w[0],u=w[1],t=w[2],s=w[3],r=w[4],q=0;80>q;q++){if(16>q){l[q]=0|y[x+q]}else{var p=l[q-3]^l[q-8]^l[q-14]^l[q-16];l[q]=p<<1|p>>>31}var f=(v<<5|v>>>27)+r+l[q];f+=20>q?(u&t|~u&s)+1518500249:40>q?(u^t^s)+1859775393:60>q?(u&t|u&s|t&s)-1894007588:(u^t^s)-899497514,r=s,s=t,t=u<<30|u>>>2,u=v,v=f}w[0]=w[0]+v|0,w[1]=w[1]+u|0,w[2]=w[2]+t|0,w[3]=w[3]+s|0,w[4]=w[4]+r|0},_doFinalize:function(){var f=this._data,e=f.words,q=8*this._nDataBytes,p=8*f.sigBytes;return e[p>>>5]|=128<<24-p%32,e[(p+64>>>9<<4)+14]=Math.floor(q/4294967296),e[(p+64>>>9<<4)+15]=q,f.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var b=n.clone.call(this);return b._hash=this._hash.clone(),b}});j.SHA1=n._createHelper(k),j.HmacSHA1=n._createHmacHelper(k)}(),function(t){function s(d){d||(d={}),d.dropZoneElements=[l];var c=o(d);return p(c),q(new qq.DragAndDrop(c)),l}function r(e,d){var f=l.data(k);return d?(void 0===f&&(f={}),f[e]=d,l.data(k,f),void 0):void 0===f?null:f[e]}function q(b){return r("dndInstance",b)}function p(a){var d=a.callbacks={};t.each(new qq.DragAndDrop.callbacks,function(e){var c,f=e;c=l,d[e]=function(){var b=Array.prototype.slice.call(arguments),h=c.triggerHandler(f,b);return h}})}function o(a,j){var h,f;return h=void 0===j?{}:j,t.each(a,function(d,e){e instanceof t?h[d]=e[0]:t.isPlainObject(e)?(h[d]={},o(e,h[d])):t.isArray(e)?(f=[],t.each(e,function(u,v){v instanceof t?t.merge(f,v):f.push(v)}),h[d]=f):h[d]=e}),void 0===j?h:void 0}function n(a){return"string"===t.type(a)&&"dispose"===a&&void 0!==q()[a]}function m(e){var d=[],f=Array.prototype.slice.call(arguments,1);return o(f,d),q()[e].apply(q(),d)}var l,k="fineUploaderDnd";t.fn.fineUploaderDnd=function(h){var d=this,b=arguments,a=[];return this.each(function(e,c){if(l=t(c),q()&&n(h)){if(a.push(m.apply(d,b)),1===d.length){return !1}}else{"object"!=typeof h&&h?t.error("Method "+h+" does not exist in Fine Uploader's DnD module."):s.apply(d,b)}}),1===a.length?a[0]:a.length>1?a:this}}(jQuery);(function(){var k,br=document,aT=window,aN=Math,m=aN.round,bd=aN.floor,ax=aN.ceil,bV=aN.max,aj=aN.min,e=aN.abs,bM=aN.cos,Y=aN.sin,K=aN.PI,av=K*2/360,q=navigator.userAgent,aq=aT.opera,o=/msie/i.test(q)&&!aq,A=br.documentMode===8,F=/AppleWebKit/.test(q),bf=/Firefox/.test(q),aR="http://www.w3.org/2000/svg",bL=!!br.createElementNS&&!!br.createElementNS(aR,"svg").createSVGRect,aa=bf&&parseInt(q.split("Firefox/")[1],10)<4,aX=!bL&&!o&&!!br.createElement("canvas").getContext,bH,B=br.documentElement.ontouchstart!==k,c={},a1=0,ad,bo,bF,bW,an,aU,j=function(){},I="div",al="absolute",H="relative",ae="hidden",aY="highcharts-",ai="visible",U="px",x="none",bk="M",bl="L",bP="rgba(192,192,192,"+(bL?0.000001:0.002)+")",ah="",aJ="hover",bg="select",bK="millisecond",a8="second",bx="minute",S="hour",by="day",bJ="week",a7="month",a5="year",a0="fill",aw="linearGradient",bz="stops",bO="stroke",aG="stroke-width",X,y,T,ar,bb,W,V,am,bw,aA,bB,D,a={};aT.Highcharts={};function bc(M,L){var bX;if(!M){M={}}for(bX in L){M[bX]=L[bX]}return M}function aM(){var M=0,L=arguments,bX=L.length,bY={};for(;M<bX;M++){bY[L[M++]]=L[M]}return bY}function bC(L,M){return parseInt(L,M||10)}function bh(L){return typeof L==="string"}function bS(L){return typeof L==="object"}function aC(L){return Object.prototype.toString.call(L)==="[object Array]"}function ap(L){return typeof L==="number"}function r(L){return aN.log(L)/aN.LN10}function u(L){return aN.pow(10,L)}function N(L,bX){var M=L.length;while(M--){if(L[M]===bX){L.splice(M,1);break}}}function ac(L){return L!==k&&L!==null}function P(bX,b0,bZ){var M,bY="setAttribute",L;if(bh(b0)){if(ac(bZ)){bX[bY](b0,bZ)}else{if(bX&&bX.getAttribute){L=bX.getAttribute(b0)}}}else{if(ac(b0)&&bS(b0)){for(M in b0){bX[bY](M,b0[M])}}}return L}function a6(L){return aC(L)?L:[L]}function aI(){var M=arguments,bX,L,bY=M.length;for(bX=0;bX<bY;bX++){L=M[bX];if(typeof L!=="undefined"&&L!==null){return L}}}function bQ(L,M){if(o){if(M&&M.opacity!==k){M.filter="alpha(opacity="+(M.opacity*100)+")"}}bc(L.style,M)}function be(L,b0,bZ,bY,bX){var M=br.createElement(L);if(b0){bc(M,b0)}if(bX){bQ(M,{padding:0,border:x,margin:0})}if(bZ){bQ(M,bZ)}if(bY){bY.appendChild(M)}return M}function a9(bX,L){var M=function(){};M.prototype=new bX();bc(M.prototype,L);return M}function f(L){L=(L||0).toString();return L.indexOf(".")>-1?L.split(".")[1].length:0}function l(bY,bX,b4,b3){var L=bo.lang,M=bY,b2=bX===-1?f(bY):(isNaN(bX=e(bX))?2:bX),b1=b4===undefined?L.decimalPoint:b4,b5=b3===undefined?L.thousandsSep:b3,b6=M<0?"-":"",b0=String(bC(M=e(+M||0).toFixed(b2))),bZ=b0.length>3?b0.length%3:0;return b6+(bZ?b0.substr(0,bZ)+b5:"")+b0.substr(bZ).replace(/(\d{3})(?=\d)/g,"$1"+b5)+(b2?b1+e(M-b0).toFixed(b2).slice(2):"")}function bu(M,L){return new Array((L||2)+1-String(M).length).join(0)+M}function aQ(bX,bY,M){var L=bX[bY];bX[bY]=function(){var bZ=Array.prototype.slice.call(arguments);bZ.unshift(L);return M.apply(this,bZ)}}bF=function(b4,b0,bY){if(!ac(b0)||isNaN(b0)){return"Invalid date"}b4=aI(b4,"%Y-%m-%d %H:%M:%S");var M=new Date(b0),b6,b3=M[T](),b1=M[ar](),b5=M[bb](),bZ=M[W](),b7=M[V](),L=bo.lang,b2=L.weekdays,bX={a:b2[b1].substr(0,3),A:b2[b1],d:bu(b5),e:b5,b:L.shortMonths[bZ],B:L.months[bZ],m:bu(bZ+1),y:b7.toString().substr(2,2),Y:b7,H:bu(b3),I:bu((b3%12)||12),l:(b3%12)||12,M:bu(M[y]()),p:b3<12?"AM":"PM",P:b3<12?"am":"pm",S:bu(M.getSeconds()),L:bu(m(b0%1000),3)};for(b6 in bX){b4=b4.replace("%"+b6,bX[b6])}return bY?b4.substr(0,1).toUpperCase()+b4.substr(1):b4};function bv(L,b0,bY,M){var bZ,bX;bY=aI(bY,1);bZ=L/bY;if(!b0){b0=[1,2,2.5,5,10];if(M&&M.allowDecimals===false){if(bY===1){b0=[1,2,5,10]}else{if(bY<=0.1){b0=[1/bY]}}}}for(bX=0;bX<b0.length;bX++){L=b0[bX];if(bZ<=(b0[bX]+(b0[bX+1]||b0[bX]))/2){break}}L*=bY;return L}function ak(L,bX){var b1=bX||[[bK,[1,2,5,10,20,25,50,100,200,500]],[a8,[1,2,5,10,15,30]],[bx,[1,2,5,10,15,30]],[S,[1,2,3,4,6,8,12]],[by,[1,2]],[bJ,[1,2]],[a7,[1,2,3,4,6]],[a5,null]],b3=b1[b1.length-1],M=aU[b3[0]],bY=b3[1],b0,bZ;for(bZ=0;bZ<b1.length;bZ++){b3=b1[bZ];M=aU[b3[0]];bY=b3[1];if(b1[bZ+1]){var b2=(M*bY[bY.length-1]+aU[b1[bZ+1][0]])/2;if(L<=b2){break}}}if(M===aU[a5]&&L<5*M){bY=[1,2,5]}if(M===aU[a5]&&L<5*M){bY=[1,2,5]}b0=bv(L/M,bY);return{unitRange:M,count:b0,unitName:b3[0]}}function ao(b4,bZ,b3,b9){var ca=[],b0,b8={},b7=bo.global.useUTC,b6,bY=new Date(bZ),M=b4.unitRange,b2=b4.count;if(M>=aU[a8]){bY.setMilliseconds(0);bY.setSeconds(M>=aU[bx]?0:b2*bd(bY.getSeconds()/b2))}if(M>=aU[bx]){bY[am](M>=aU[S]?0:b2*bd(bY[y]()/b2))}if(M>=aU[S]){bY[bw](M>=aU[by]?0:b2*bd(bY[T]()/b2))}if(M>=aU[by]){bY[aA](M>=aU[a7]?1:b2*bd(bY[bb]()/b2))}if(M>=aU[a7]){bY[bB](M>=aU[a5]?0:b2*bd(bY[W]()/b2));b6=bY[V]()}if(M>=aU[a5]){b6-=b6%b2;bY[D](b6)}if(M===aU[bJ]){bY[aA](bY[bb]()-bY[ar]()+aI(b9,1))}b0=1;b6=bY[V]();var bX=bY.getTime(),b1=bY[W](),L=bY[bb](),b5=b7?0:(24*3600*1000+bY.getTimezoneOffset()*60*1000)%(24*3600*1000);while(bX<b3){ca.push(bX);if(M===aU[a5]){bX=X(b6+b0*b2,0)}else{if(M===aU[a7]){bX=X(b6,b1+b0*b2)}else{if(!b7&&(M===aU[by]||M===aU[bJ])){bX=X(b6,b1,L+b0*b2*(M===aU[by]?1:7))}else{bX+=M*b2;if(M<=aU[S]&&bX%aU[by]===b5){b8[bX]=by}}}}b0++}ca.push(bX);ca.info=bc(b4,{higherRanks:b8,totalRange:M*b2});return ca}function J(){this.color=0;this.symbol=0}J.prototype={wrapColor:function(L){if(this.color>=L){this.color=0}},wrapSymbol:function(L){if(this.symbol>=L){this.symbol=0}}};function aD(M,L){var bZ=M.length,bX,bY;for(bY=0;bY<bZ;bY++){M[bY].ss_i=bY}M.sort(function(b1,b0){bX=L(b1,b0);return bX===0?b1.ss_i-b0.ss_i:bX});for(bY=0;bY<bZ;bY++){delete M[bY].ss_i}}function bs(bX){var M=bX.length,L=bX[0];while(M--){if(bX[M]<L){L=bX[M]}}return L}function aF(bX){var M=bX.length,L=bX[0];while(M--){if(bX[M]>L){L=bX[M]}}return L}function a2(M,L){var bX;for(bX in M){if(M[bX]&&M[bX]!==L&&M[bX].destroy){M[bX].destroy()}delete M[bX]}}function bE(L){if(!ad){ad=be(I)}if(L){ad.appendChild(L)}ad.innerHTML=""}function bD(M,L){var bX="Highcharts error #"+M+": www.highcharts.com/errors/"+M;if(L){throw bX}else{if(aT.console){console.log(bX)}}}function ab(L){return parseFloat(L.toPrecision(14))}function bR(M,L){bW=aI(M,L.animation)}aU=aM(bK,1,a8,1000,bx,60000,S,3600000,by,24*3600000,bJ,7*24*3600000,a7,30*24*3600000,a5,31556952000);an={init:function(bZ,b4,b5){b4=b4||"";var M=bZ.shift,bX=b4.indexOf("C")>-1,bY=bX?7:3,b2,b6,b1,L=b4.split(" "),b0=[].concat(b5),b8,b3,b7=function(b9){b1=b9.length;while(b1--){if(b9[b1]===bk){b9.splice(b1+1,0,b9[b1+1],b9[b1+2],b9[b1+1],b9[b1+2])}}};if(bX){b7(L);b7(b0)}if(bZ.isArea){b8=L.splice(L.length-6,6);b3=b0.splice(b0.length-6,6)}if(M<=b0.length/bY){while(M--){b0=[].concat(b0).splice(0,bY).concat(b0)}}bZ.shift=0;if(L.length){b2=b0.length;while(L.length<b2){b6=[].concat(L).splice(L.length-bY,bY);if(bX){b6[bY-6]=b6[bY-2];b6[bY-5]=b6[bY-1]}L=L.concat(b6)}}if(b8){L=L.concat(b8);b0=b0.concat(b3)}return[L,b0]},step:function(b1,M,b0,L){var bY=[],bZ=b1.length,bX;if(b0===1){bY=L}else{if(bZ===M.length&&b0<1){while(bZ--){bX=parseFloat(b1[bZ]);bY[bZ]=isNaN(bX)?b1[bZ]:b0*(parseFloat(M[bZ]-bX))+bX}}else{bY=M}}return bY}};(function(L){aT.HighchartsAdapter=aT.HighchartsAdapter||(L&&{init:function(b0){var bZ=L.fx,bX=bZ.step,bY,b1=L.Tween,M=b1&&b1.propHooks;L.extend(L.easing,{easeOutQuad:function(b3,b4,b2,b6,b5){return -b6*(b4/=b5)*(b4-2)+b2}});L.each(["cur","_default","width","height"],function(b2,b3){var b6=bX,b5,b4;if(b3==="cur"){b6=bZ.prototype}else{if(b3==="_default"&&b1){b6=M[b3];b3="set"}}b5=b6[b3];if(b5){b6[b3]=function(b7){b7=b2?b7:this;b4=b7.elem;return b4.attr?b4.attr(b7.prop,b3==="cur"?k:b7.now):b5.apply(this,arguments)}}});bY=function(b4){var b3=b4.elem,b2;if(!b4.started){b2=b0.init(b3,b3.d,b3.toD);b4.start=b2[0];b4.end=b2[1];b4.started=true}b3.attr("d",b0.step(b4.start,b4.end,b4.pos,b3.toD))};if(b1){M.d={set:bY}}else{bX.d=bY}this.each=Array.prototype.forEach?function(b2,b3){return Array.prototype.forEach.call(b2,b3)}:function(b3,b5){var b4=0,b2=b3.length;for(;b4<b2;b4++){if(b5.call(b3[b4],b3[b4],b4,b3)===false){return b4}}}},getScript:L.getScript,inArray:L.inArray,adapterRun:function(M,bX){return L(M)[bX]()},grep:L.grep,map:function(bX,b0){var bZ=[],bY=0,M=bX.length;for(;bY<M;bY++){bZ[bY]=b0.call(bX[bY],bX[bY],bY,bX)}return bZ},merge:function(){var M=arguments;return L.extend(true,null,M[0],M[1],M[2],M[3])},offset:function(M){return L(M).offset()},addEvent:function(bX,bY,M){L(bX).bind(bY,M)},removeEvent:function(bY,M,bX){var bZ=br.removeEventListener?"removeEventListener":"detachEvent";if(br[bZ]&&!bY[bZ]){bY[bZ]=function(){}}L(bY).unbind(M,bX)},fireEvent:function(b0,bZ,bX,M){var b2=L.Event(bZ),b1="detached"+bZ,bY;if(!o&&bX){delete bX.layerX;delete bX.layerY}bc(b2,bX);if(b0[bZ]){b0[b1]=b0[bZ];b0[bZ]=null}L.each(["preventDefault","stopPropagation"],function(b3,b4){var b5=b2[b4];b2[b4]=function(){try{b5.call(b2)}catch(b6){if(b4==="preventDefault"){bY=true}}}});L(b0).trigger(b2);if(b0[b1]){b0[bZ]=b0[b1];b0[b1]=null}if(M&&!b2.isDefaultPrevented()&&!bY){M(b2)}},washMouseEvent:function(bX){var M=bX.originalEvent||bX;if(M.pageX===k){M.pageX=bX.pageX;M.pageY=bX.pageY}return M},animate:function(bY,bZ,M){var bX=L(bY);if(bZ.d){bY.toD=bZ.d;bZ.d=1}bX.stop();bX.animate(bZ,M)},stop:function(M){L(M).stop()}})}(aT.jQuery));var Z=aT.HighchartsAdapter,bN=Z||{};if(Z){Z.init.call(Z,an)}var aE=bN.adapterRun,a4=bN.getScript,w=bN.inArray,C=bN.each,bn=bN.grep,bG=bN.offset,af=bN.map,aH=bN.merge,v=bN.addEvent,aV=bN.removeEvent,bj=bN.fireEvent,O=bN.washMouseEvent,p=bN.animate,aP=bN.stop;var s={enabled:true,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};bo={colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:true,canvasToolsURL:"http://code.highcharts.com/2.3.3/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/2.3.3/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:true,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:{duration:1000},events:{},lineWidth:2,shadow:true,marker:{enabled:true,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:true},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:aH(s,{enabled:false,formatter:function(){return this.y},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:true,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:true}},labels:{style:{position:al,color:"#3E576F"}},legend:{enabled:true,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#3E576F",inactiveColor:"#CCC"},shadow:false,itemStyle:{cursor:"pointer",color:"#3E576F",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:al,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{labelStyle:{fontWeight:"bold",position:H,top:"1em"},style:{position:al,backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:true,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:true,shared:aX,snap:B?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},credits:{enabled:true,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var ag=bo.plotOptions,aL=ag.line;Q();function Q(){var bX=bo.global.useUTC,L=bX?"getUTC":"get",M=bX?"setUTC":"set";X=bX?Date.UTC:function(b1,b2,bZ,bY,b0,b3){return new Date(b1,b2,aI(bZ,1),aI(bY,0),aI(b0,0),aI(b3,0)).getTime()};y=L+"Minutes";T=L+"Hours";ar=L+"Day";bb=L+"Date";W=L+"Month";V=L+"FullYear";am=M+"Minutes";bw=M+"Hours";aA=M+"Date";bB=M+"Month";D=M+"FullYear"}function aZ(L){bo=aH(bo,L);Q();return bo}function aB(){return bo}var bA=function(M){var bZ=[],L;function b1(b2){L=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(b2);if(L){bZ=[bC(L[1]),bC(L[2]),bC(L[3]),parseFloat(L[4],10)]}else{L=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b2);if(L){bZ=[bC(L[1],16),bC(L[2],16),bC(L[3],16),1]}}}function bY(b3){var b2;if(bZ&&!isNaN(bZ[0])){if(b3==="rgb"){b2="rgb("+bZ[0]+","+bZ[1]+","+bZ[2]+")"}else{if(b3==="a"){b2=bZ[3]}else{b2="rgba("+bZ.join(",")+")"}}}else{b2=M}return b2}function b0(b3){if(ap(b3)&&b3!==0){var b2;for(b2=0;b2<3;b2++){bZ[b2]+=bC(b3*255);if(bZ[b2]<0){bZ[b2]=0}if(bZ[b2]>255){bZ[b2]=255}}}return this}function bX(b2){bZ[3]=b2;return this}b1(M);return{get:bY,brighten:b0,setOpacity:bX}};function au(){}au.prototype={init:function(L,bX){var M=this;M.element=bX==="span"?be(bX):br.createElementNS(aR,bX);M.renderer=L;M.attrSetters={}},animate:function(bY,M,L){var bX=aI(M,bW,true);aP(this);if(bX){bX=aH(bX);if(L){bX.complete=L}p(this,bY,bX)}else{this.attr(bY);if(L){L()}}},attr:function(bX,cc){var bZ=this,ca,b5,b4,b8,b2,bY=bZ.element,L=bY.nodeName.toLowerCase(),b6=bZ.renderer,b3,b7,cb=bZ.attrSetters,M=bZ.shadows,b1,b0,b9=bZ;if(bh(bX)&&ac(cc)){ca=bX;bX={};bX[ca]=cc}if(bh(bX)){ca=bX;if(L==="circle"){ca={x:"cx",y:"cy"}[ca]||ca}else{if(ca==="strokeWidth"){ca="stroke-width"}}b9=P(bY,ca)||bZ[ca]||0;if(ca!=="d"&&ca!=="visibility"){b9=parseFloat(b9)}}else{for(ca in bX){b3=false;b5=bX[ca];b4=cb[ca]&&cb[ca].call(bZ,b5,ca);if(b4!==false){if(b4!==k){b5=b4}if(ca==="d"){if(b5&&b5.join){b5=b5.join(" ")}if(/(NaN| {2}|^$)/.test(b5)){b5="M 0 0"}}else{if(ca==="x"&&L==="text"){for(b8=0;b8<bY.childNodes.length;b8++){b2=bY.childNodes[b8];if(P(b2,"x")===P(bY,"x")){P(b2,"x",b5)}}if(bZ.rotation){P(bY,"transform","rotate("+bZ.rotation+" "+b5+" "+bC(bX.y||P(bY,"y"))+")")}}else{if(ca==="fill"){b5=b6.color(b5,bY,ca)}else{if(L==="circle"&&(ca==="x"||ca==="y")){ca={x:"cx",y:"cy"}[ca]||ca}else{if(L==="rect"&&ca==="r"){P(bY,{rx:b5,ry:b5});b3=true}else{if(ca==="translateX"||ca==="translateY"||ca==="rotation"||ca==="verticalAlign"){b0=true;b3=true}else{if(ca==="stroke"){b5=b6.color(b5,bY,ca)}else{if(ca==="dashstyle"){ca="stroke-dasharray";b5=b5&&b5.toLowerCase();if(b5==="solid"){b5=x}else{if(b5){b5=b5.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");b8=b5.length;while(b8--){b5[b8]=bC(b5[b8])*bX["stroke-width"]}b5=b5.join(",")}}}else{if(ca==="isTracker"){bZ[ca]=b5}else{if(ca==="width"){b5=bC(b5)}else{if(ca==="align"){ca="text-anchor";b5={left:"start",center:"middle",right:"end"}[b5]}else{if(ca==="title"){b7=bY.getElementsByTagName("title")[0];if(!b7){b7=br.createElementNS(aR,"title");bY.appendChild(b7)}b7.textContent=b5}}}}}}}}}}}}if(ca==="strokeWidth"){ca="stroke-width"}if(F&&ca==="stroke-width"&&b5===0){b5=0.000001}if(bZ.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(ca)){if(!b1){bZ.symbolAttr(bX);b1=true}b3=true}if(M&&/^(width|height|visibility|x|y|d|transform)$/.test(ca)){b8=M.length;while(b8--){P(M[b8],ca,ca==="height"?bV(b5-(M[b8].cutHeight||0),0):b5)}}if((ca==="width"||ca==="height")&&L==="rect"&&b5<0){b5=0}bZ[ca]=b5;if(b0){bZ.updateTransform()}if(ca==="text"){if(b5!==bZ.textStr){delete bZ.bBox}bZ.textStr=b5;if(bZ.added){b6.buildText(bZ)}}else{if(!b3){P(bY,ca,b5)}}}}}return b9},symbolAttr:function(L){var M=this;C(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(bX){M[bX]=aI(L[bX],M[bX])});M.attr({d:M.renderer.symbols[M.symbolName](M.x,M.y,M.width,M.height,M)})},clip:function(L){return this.attr("clip-path",L?"url("+this.renderer.url+"#"+L.id+")":x)},crisp:function(b0,b1,bZ,bX,b4){var L=this,b3,M={},b2={},bY;b0=b0||L.strokeWidth||(L.attr&&L.attr("stroke-width"))||0;bY=m(b0)%2/2;b2.x=bd(b1||L.x||0)+bY;b2.y=bd(bZ||L.y||0)+bY;b2.width=bd((bX||L.width||0)-2*bY);b2.height=bd((b4||L.height||0)-2*bY);b2.strokeWidth=b0;for(b3 in b2){if(L[b3]!==b2[b3]){L[b3]=M[b3]=b2[b3]}}return M},css:function(bY){var L=this,bX=L.element,b0=bY&&bY.width&&bX.nodeName.toLowerCase()==="text",b1,bZ="",M=function(b3,b2){return"-"+b2.toLowerCase()};if(bY&&bY.color){bY.fill=bY.color}bY=bc(L.styles,bY);L.styles=bY;if(aX&&b0){delete bY.width}if(o&&!bL){if(b0){delete bY.width}bQ(L.element,bY)}else{for(b1 in bY){bZ+=b1.replace(/([A-Z])/g,M)+":"+bY[b1]+";"}L.attr({style:bZ})}if(b0&&L.added){L.renderer.buildText(L)}return L},on:function(L,bX){var M=bX;if(B&&L==="click"){L="touchstart";M=function(bY){bY.preventDefault();bX()}}this.element["on"+L]=M;return this},setRadialReference:function(L){this.element.radialReference=L;return this},translate:function(L,M){return this.attr({translateX:L,translateY:M})},invert:function(){var L=this;L.inverted=true;L.updateTransform();return L},htmlCss:function(M){var bY=this,L=bY.element,bX=M&&L.tagName==="SPAN"&&M.width;if(bX){delete M.width;bY.textWidth=bX;bY.updateTransform()}bY.styles=bc(bY.styles,M);bQ(bY.element,M);return bY},htmlGetBBox:function(){var bX=this,L=bX.element,M=bX.bBox;if(!M){if(L.nodeName==="text"){L.style.position=al}M=bX.bBox={x:L.offsetLeft,y:L.offsetTop,width:L.offsetWidth,height:L.offsetHeight}}return M},htmlUpdateTransform:function(){if(!this.added){this.alignOnAdd=true;return}var bZ=this,cb=bZ.renderer,cg=bZ.element,cj=bZ.translateX||0,ci=bZ.translateY||0,b4=bZ.x||0,b2=bZ.y||0,ce=bZ.textAlign||"left",b5={left:0,center:0.5,right:1}[ce],b0=ce&&ce!=="left",L=bZ.shadows;if(cj||ci){bQ(cg,{marginLeft:cj,marginTop:ci});if(L){C(L,function(ck){bQ(ck,{marginLeft:cj+1,marginTop:ci+1})})}}if(bZ.inverted){C(cg.childNodes,function(ck){cb.invertChild(ck,cg)})}if(cg.tagName==="SPAN"){var ca,b8,cc=bZ.rotation,b7,ch=0,bY=1,b6=0,b3,M=bC(bZ.textWidth),cf=bZ.xCorr||0,b1=bZ.yCorr||0,b9=[cc,ce,cg.innerHTML,bZ.textWidth].join(","),bX={},cd;if(b9!==bZ.cTT){if(ac(cc)){if(cb.isSVG){cd=o?"-ms-transform":F?"-webkit-transform":bf?"MozTransform":aq?"-o-transform":"";bX[cd]=bX.transform="rotate("+cc+"deg)"}else{ch=cc*av;bY=bM(ch);b6=Y(ch);bX.filter=cc?["progid:DXImageTransform.Microsoft.Matrix(M11=",bY,", M12=",-b6,", M21=",b6,", M22=",bY,", sizingMethod='auto expand')"].join(""):x}bQ(cg,bX)}ca=aI(bZ.elemWidth,cg.offsetWidth);b8=aI(bZ.elemHeight,cg.offsetHeight);if(ca>M&&/[ \-]/.test(cg.innerText)){bQ(cg,{width:M+U,display:"block",whiteSpace:"normal"});ca=M}b7=cb.fontMetrics(cg.style.fontSize).b;cf=bY<0&&-ca;b1=b6<0&&-b8;b3=bY*b6<0;cf+=b6*b7*(b3?1-b5:b5);b1-=bY*b7*(cc?(b3?b5:1-b5):1);if(b0){cf-=ca*b5*(bY<0?-1:1);if(cc){b1-=b8*b5*(b6<0?-1:1)}bQ(cg,{textAlign:ce})}bZ.xCorr=cf;bZ.yCorr=b1}bQ(cg,{left:(b4+cf)+U,top:(b2+b1)+U});bZ.cTT=b9}},updateTransform:function(){var b0=this,bZ=b0.translateX||0,bY=b0.translateY||0,L=b0.inverted,bX=b0.rotation,M=[];if(L){bZ+=b0.attr("width");bY+=b0.attr("height")}if(bZ||bY){M.push("translate("+bZ+","+bY+")")}if(L){M.push("rotate(90) scale(-1,1)")}else{if(bX){M.push("rotate("+bX+" "+(b0.x||0)+" "+(b0.y||0)+")")}}if(M.length){P(b0.element,"transform",M.join(" "))}},toFront:function(){var L=this.element;L.parentNode.appendChild(L);return this},align:function(M,b0,bX){var b3=this;if(!M){M=b3.alignOptions;b0=b3.alignByTranslate}else{b3.alignOptions=M;b3.alignByTranslate=b0;if(!bX){b3.renderer.alignedObjects.push(b3)}}bX=aI(bX,b3.renderer);var bZ=M.align,bY=M.verticalAlign,b2=(bX.x||0)+(M.x||0),b1=(bX.y||0)+(M.y||0),L={};if(bZ==="right"||bZ==="center"){b2+=(bX.width-(M.width||0))/{right:1,center:2}[bZ]}L[b0?"translateX":"x"]=m(b2);if(bY==="bottom"||bY==="middle"){b1+=(bX.height-(M.height||0))/({bottom:1,middle:2}[bY]||1)}L[b0?"translateY":"y"]=m(b1);b3[b3.placed?"animate":"attr"](L);b3.placed=true;b3.alignAttr=L;return b3},getBBox:function(){var L=this,b3=L.bBox,bZ=L.renderer,M,b1,b4=L.rotation,bX=L.element,b2=L.styles,b0=b4*av;if(!b3){if(bX.namespaceURI===aR||bZ.forExport){try{b3=bX.getBBox?bc({},bX.getBBox()):{width:bX.offsetWidth,height:bX.offsetHeight}}catch(bY){}if(!b3||b3.width<0){b3={width:0,height:0}}}else{b3=L.htmlGetBBox()}if(bZ.isSVG){M=b3.width;b1=b3.height;if(b4){b3.width=e(b1*Y(b0))+e(M*bM(b0));b3.height=e(b1*bM(b0))+e(M*Y(b0))}}if(o&&b2&&b2.fontSize==="11px"&&b1===22.700000762939453){b3.height=14}L.bBox=b3}return b3},show:function(){return this.attr({visibility:ai})},hide:function(){return this.attr({visibility:ae})},add:function(b3){var b1=this.renderer,b0=b3||b1,bZ=b0.element||b1.box,b5=bZ.childNodes,bY=this.element,b2=P(bY,"zIndex"),b4,L,bX,M;if(b3){this.parentGroup=b3}this.parentInverted=b3&&b3.inverted;if(this.textStr!==undefined){b1.buildText(this)}if(b2){b0.handleZ=true;b2=bC(b2)}if(b0.handleZ){for(bX=0;bX<b5.length;bX++){b4=b5[bX];L=P(b4,"zIndex");if(b4!==bY&&(bC(L)>b2||(!ac(b2)&&ac(L)))){bZ.insertBefore(bY,b4);M=true;break}}}if(!M){bZ.appendChild(bY)}this.added=true;bj(this,"add");return this},safeRemoveChild:function(M){var L=M.parentNode;if(L){L.removeChild(M)}},destroy:function(){var bZ=this,bX=bZ.element||{},bY=bZ.shadows,M,L;bX.onclick=bX.onmouseout=bX.onmouseover=bX.onmousemove=null;aP(bZ);if(bZ.clipPath){bZ.clipPath=bZ.clipPath.destroy()}if(bZ.stops){for(L=0;L<bZ.stops.length;L++){bZ.stops[L]=bZ.stops[L].destroy()}bZ.stops=null}bZ.safeRemoveChild(bX);if(bY){C(bY,function(b0){bZ.safeRemoveChild(b0)})}N(bZ.renderer.alignedObjects,bZ);for(M in bZ){delete bZ[M]}return null},empty:function(){var M=this.element,bX=M.childNodes,L=bX.length;while(L--){M.removeChild(bX[L])}},shadow:function(b5,b4,M){var bY=[],bZ,b3,b0=this.element,b1,bX,b2,L;if(b5){bX=aI(b5.width,3);b2=(b5.opacity||0.15)/bX;L=this.parentInverted?"(-1,-1)":"("+aI(b5.offsetX,1)+", "+aI(b5.offsetY,1)+")";for(bZ=1;bZ<=bX;bZ++){b3=b0.cloneNode(0);b1=(bX*2)+1-(2*bZ);P(b3,{isShadow:"true",stroke:b5.color||"black","stroke-opacity":b2*bZ,"stroke-width":b1,transform:"translate"+L,fill:x});if(M){P(b3,"height",bV(P(b3,"height")-b1,0));b3.cutHeight=b1}if(b4){b4.element.appendChild(b3)}else{b0.parentNode.insertBefore(b3,b0)}bY.push(b3)}this.shadows=bY}return this}};var d=function(){this.init.apply(this,arguments)};d.prototype={Element:au,init:function(L,M,b2,b3){var b0=this,bZ=location,bY;bY=b0.createElement("svg").attr({xmlns:aR,version:"1.1"});L.appendChild(bY.element);b0.isSVG=true;b0.box=bY.element;b0.boxWrapper=bY;b0.alignedObjects=[];b0.url=(bf||F)&&br.getElementsByTagName("base").length?bZ.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";b0.defs=this.createElement("defs").add();b0.forExport=b3;b0.gradients={};b0.setSize(M,b2,false);var bX,b1;if(bf&&L.getBoundingClientRect){b0.subPixelFix=bX=function(){bQ(L,{left:0,top:0});b1=L.getBoundingClientRect();bQ(L,{left:(ax(b1.left)-b1.left)+U,top:(ax(b1.top)-b1.top)+U})};bX();v(aT,"resize",bX)}},isHidden:function(){return !this.boxWrapper.getBBox().width},destroy:function(){var L=this,M=L.defs;L.box=null;L.boxWrapper=L.boxWrapper.destroy();a2(L.gradients||{});L.gradients=null;if(M){L.defs=M.destroy()}if(L.subPixelFix){aV(aT,"resize",L.subPixelFix)}L.alignedObjects=null;return null},createElement:function(M){var L=new this.Element();L.init(this,M);return L},draw:function(){},buildText:function(L){var bY=L.element,b9=aI(L.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),b5=bY.childNodes,b7=/style="([^"]+)"/,bX=/href="([^"]+)"/,b6=P(bY,"x"),b2=L.styles,M=b2&&b2.width&&bC(b2.width),b4=b2&&b2.lineHeight,b3,b0="getComputedStyle",b1=b5.length,b8=[];function bZ(ca){b8[ca]=bY.getBBox?bY.getBBox().height:L.renderer.fontMetrics(bY.style.fontSize).h;return m(b8[ca]-(b8[ca-1]||0))}while(b1--){bY.removeChild(b5[b1])}if(M&&!L.added){this.box.appendChild(bY)}if(b9[b9.length-1]===""){b9.pop()}C(b9,function(ca,ce){var cc,cb=0,cd;ca=ca.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");cc=ca.split("|||");C(cc,function(ci){if(ci!==""||cc.length===1){var cg={},ck=br.createElementNS(aR,"tspan"),cf;if(b7.test(ci)){cf=ci.match(b7)[1].replace(/(;| |^)color([ :])/,"$1fill$2");P(ck,"style",cf)}if(bX.test(ci)){P(ck,"onclick",'location.href="'+ci.match(bX)[1]+'"');bQ(ck,{cursor:"pointer"})}ci=(ci.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");ck.appendChild(br.createTextNode(ci));if(!cb){cg.x=b6}else{cg.dx=3}if(!cb){if(ce){if(!bL&&L.renderer.forExport){bQ(ck,{display:"block"})}cd=aT[b0]&&bC(aT[b0](b3,null).getPropertyValue("line-height"));if(!cd||isNaN(cd)){cd=b4||b3.offsetHeight||bZ(ce)||18}P(ck,"dy",cd)}b3=ck}P(ck,cg);bY.appendChild(ck);cb++;if(M){var cl=ci.replace(/([^\^])-/g,"$1- ").split(" "),cm,cj,ch=[];while(cl.length||ch.length){delete L.bBox;cj=L.getBBox().width;cm=cj>M;if(!cm||cl.length===1){cl=ch;ch=[];if(cl.length){ck=br.createElementNS(aR,"tspan");P(ck,{dy:b4||16,x:b6});if(cf){P(ck,"style",cf)}bY.appendChild(ck);if(cj>M){M=cj}}}else{ck.removeChild(ck.firstChild);ch.unshift(cl.pop())}if(cl.length){ck.appendChild(br.createTextNode(cl.join(" ").replace(/- /g,"-")))}}}}})})},button:function(b9,b7,b4,b8,M,b0,bY){var b6=this.label(b9,b7,b4),b2=0,ca,b3,L,bZ,bX,b5="style",b1={x1:0,y1:0,x2:0,y2:1};M=aH(aM(aG,1,bO,"#999",a0,aM(aw,b1,bz,[[0,"#FFF"],[1,"#DDD"]]),"r",3,"padding",3,b5,aM("color","black")),M);L=M[b5];delete M[b5];b0=aH(M,aM(bO,"#68A",a0,aM(aw,b1,bz,[[0,"#FFF"],[1,"#ACF"]])),b0);bZ=b0[b5];delete b0[b5];bY=aH(M,aM(bO,"#68A",a0,aM(aw,b1,bz,[[0,"#9BD"],[1,"#CDF"]])),bY);bX=bY[b5];delete bY[b5];v(b6.element,"mouseenter",function(){b6.attr(b0).css(bZ)});v(b6.element,"mouseleave",function(){ca=[M,b0,bY][b2];b3=[L,bZ,bX][b2];b6.attr(ca).css(b3)});b6.setState=function(cb){b2=cb;if(!cb){b6.attr(M).css(L)}else{if(cb===2){b6.attr(bY).css(bX)}}};return b6.on("click",function(){b8.call(b6)}).attr(M).css(bc({cursor:"default"},L))},crispLine:function(M,L){if(M[1]===M[4]){M[1]=M[4]=m(M[1])-(L%2/2)}if(M[2]===M[5]){M[2]=M[5]=m(M[2])+(L%2/2)}return M},path:function(M){var L={fill:x};if(aC(M)){L.d=M}else{if(bS(M)){bc(L,M)}}return this.createElement("path").attr(L)},circle:function(M,bY,bX){var L=bS(M)?M:{x:M,y:bY,r:bX};return this.createElement("circle").attr(L)},arc:function(L,b0,bY,bX,bZ,M){if(bS(L)){b0=L.y;bY=L.r;bX=L.innerR;bZ=L.start;M=L.end;L=L.x}return this.symbol("arc",L||0,b0||0,bY||0,bY||0,{innerR:bX||0,start:bZ||0,end:M||0})},rect:function(M,b1,bX,L,bY,b0){bY=bS(M)?M.r:bY;var bZ=this.createElement("rect").attr({rx:bY,ry:bY,fill:x});return bZ.attr(bS(M)?M:bZ.crisp(b0,M,b1,bV(bX,0),bV(L,0)))},setSize:function(bZ,L,bX){var b0=this,M=b0.alignedObjects,bY=M.length;b0.width=bZ;b0.height=L;b0.boxWrapper[aI(bX,true)?"animate":"attr"]({width:bZ,height:L});while(bY--){M[bY].align()}},g:function(L){var M=this.createElement("g");return ac(L)?M.attr({"class":aY+L}):M},image:function(b0,M,b1,bY,L){var bZ={preserveAspectRatio:x},bX;if(arguments.length>1){bc(bZ,{x:M,y:b1,width:bY,height:L})}bX=this.createElement("image").attr(bZ);if(bX.element.setAttributeNS){bX.element.setAttributeNS("http://www.w3.org/1999/xlink","href",b0)}else{bX.element.setAttribute("hc-svg-href",b0)}return bX},symbol:function(bY,b4,b2,M,b5,b7){var b0,bX=this.symbols[bY],b6=bX&&bX(m(b4),m(b2),M,b5,b7),bZ=/^url\((.*?)\)$/,b3,b1,L;if(b6){b0=this.path(b6);bc(b0,{symbolName:bY,x:b4,y:b2,width:M,height:b5});if(b7){bc(b0,b7)}}else{if(bZ.test(bY)){L=function(b8,b9){b8.attr({width:b9[0],height:b9[1]});if(!b8.alignByTranslate){b8.translate(-m(b9[0]/2),-m(b9[1]/2))}};b3=bY.match(bZ)[1];b1=c[b3];b0=this.image(b3).attr({x:b4,y:b2});if(b1){L(b0,b1)}else{b0.attr({width:0,height:0});be("img",{onload:function(){var b8=this;L(b0,c[b3]=[b8.width,b8.height])},src:b3})}}}return b0},symbols:{circle:function(L,bZ,M,bY){var bX=0.166*M;return[bk,L+M/2,bZ,"C",L+M+bX,bZ,L+M+bX,bZ+bY,L+M/2,bZ+bY,"C",L-bX,bZ+bY,L-bX,bZ,L+M/2,bZ,"Z"]},square:function(L,bY,M,bX){return[bk,L,bY,bl,L+M,bY,L+M,bY+bX,L,bY+bX,"Z"]},triangle:function(L,bY,M,bX){return[bk,L+M/2,bY,bl,L+M,bY+bX,L,bY+bX,"Z"]},"triangle-down":function(L,bY,M,bX){return[bk,L,bY,bl,L+M,bY,L+M/2,bY+bX,"Z"]},diamond:function(L,bY,M,bX){return[bk,L+M/2,bY,bl,L+M,bY+bX/2,L+M/2,bY+bX,L,bY+bX/2,"Z"]},arc:function(b6,b5,b8,b1,b9){var bX=b9.start,b3=b9.r||b8||b1,bY=b9.end-0.000001,b4=b9.innerR,b0=b9.open,b2=bM(bX),L=Y(bX),M=bM(bY),b7=Y(bY),bZ=b9.end-bX<K?0:1;return[bk,b6+b3*b2,b5+b3*L,"A",b3,b3,0,bZ,1,b6+b3*M,b5+b3*b7,b0?bk:bl,b6+b4*M,b5+b4*b7,"A",b4,b4,0,bZ,0,b6+b4*b2,b5+b4*L,b0?"":"Z"]}},clipRect:function(M,b1,bX,L){var b0,bZ=aY+a1++,bY=this.createElement("clipPath").attr({id:bZ}).add(this.defs);b0=this.rect(M,b1,bX,L,0).add(bY);b0.id=bZ;b0.clipPath=bY;return b0},color:function(bZ,bY,M){var b5=this,b6,bX=/^rgba/,b7;if(bZ&&bZ.linearGradient){b7="linearGradient"}else{if(bZ&&bZ.radialGradient){b7="radialGradient"}}if(b7){var b1=bZ[b7],b2=b5.gradients,L,b4,b3,b0=bY.radialReference;if(!b1.id||!b2[b1.id]){if(aC(b1)){bZ[b7]=b1={x1:b1[0],y1:b1[1],x2:b1[2],y2:b1[3],gradientUnits:"userSpaceOnUse"}}if(b7==="radialGradient"&&b0&&!ac(b1.gradientUnits)){bc(b1,{cx:(b0[0]-b0[2]/2)+b1.cx*b0[2],cy:(b0[1]-b0[2]/2)+b1.cy*b0[2],r:b1.r*b0[2],gradientUnits:"userSpaceOnUse"})}b1.id=aY+a1++;b2[b1.id]=L=b5.createElement(b7).attr(b1).add(b5.defs);L.stops=[];C(bZ.stops,function(b8){var b9;if(bX.test(b8[1])){b6=bA(b8[1]);b4=b6.get("rgb");b3=b6.get("a")}else{b4=b8[1];b3=1}b9=b5.createElement("stop").attr({offset:b8[0],"stop-color":b4,"stop-opacity":b3}).add(L);L.stops.push(b9)})}return"url("+b5.url+"#"+b1.id+")"}else{if(bX.test(bZ)){b6=bA(bZ);P(bY,M+"-opacity",b6.get("a"));return b6.get("rgb")}else{bY.removeAttribute(M+"-opacity");return bZ}}},text:function(b0,L,b2,bZ){var bY=this,bX=bo.chart.style,M=aX||(!bL&&bY.forExport),b1;if(bZ&&!bY.forExport){return bY.html(b0,L,b2)}L=m(aI(L,0));b2=m(aI(b2,0));b1=bY.createElement("text").attr({x:L,y:b2,text:b0}).css({fontFamily:bX.fontFamily,fontSize:bX.fontSize});if(M){b1.css({position:al})}b1.x=L;b1.y=b2;return b1},html:function(b0,L,b2){var bX=bo.chart.style,b1=this.createElement("span"),M=b1.attrSetters,bY=b1.element,bZ=b1.renderer;M.text=function(b3){if(b3!==bY.innerHTML){delete this.bBox}bY.innerHTML=b3;return false};M.x=M.y=M.align=function(b4,b3){if(b3==="align"){b3="textAlign"}b1[b3]=b4;b1.htmlUpdateTransform();return false};b1.attr({text:b0,x:m(L),y:m(b2)}).css({position:al,whiteSpace:"nowrap",fontFamily:bX.fontFamily,fontSize:bX.fontSize});b1.css=b1.htmlCss;if(bZ.isSVG){b1.add=function(b6){var b5,b3=bZ.box.parentNode,b7,b4=[];if(b6){b5=b6.div;if(!b5){b7=b6;while(b7){b4.push(b7);b7=b7.parentGroup}C(b4.reverse(),function(b9){var b8;b5=b9.div=b9.div||be(I,{className:P(b9.element,"class")},{position:al,left:(b9.translateX||0)+U,top:(b9.translateY||0)+U},b5||b3);b8=b5.style;bc(b9.attrSetters,{translateX:function(ca){b8.left=ca+U},translateY:function(ca){b8.top=ca+U},visibility:function(cb,ca){b8[ca]=cb}})})}}else{b5=b3}b5.appendChild(bY);b1.added=true;if(b1.alignOnAdd){b1.htmlUpdateTransform()}return b1}}return b1},fontMetrics:function(bX){bX=bC(bX||11);var L=bX<24?bX+4:m(bX*1.2),M=m(L*0.8);return{h:L,b:M}},label:function(ch,b8,b6,L,bZ,bY,cj,cd,bX){var ci=this,b0=ci.g(bX),cb=ci.text("",0,0,cj).attr({zIndex:1}),b9,b3,b2=0,cc=3,cg,ce,cm,cl,M=0,ca={},b5,cn=b0.attrSetters;function b4(){var cp,co=cb.element.style;b3=(cg===undefined||ce===undefined||b0.styles.textAlign)&&cb.getBBox();b0.width=(cg||b3.width||0)+2*cc;b0.height=(ce||b3.height||0)+2*cc;b5=cc+ci.fontMetrics(co&&co.fontSize).b;if(!b9){cp=cd?-b5:0;b0.box=b9=L?ci.symbol(L,-b2*cc,cp,b0.width,b0.height):ci.rect(-b2*cc,cp,b0.width,b0.height,0,ca[aG]);b9.add(b0)}b9.attr(aH({width:b0.width,height:b0.height},ca));ca=null}function b7(){var cq=b0.styles,cp=cq&&cq.textAlign,co=cc*(1-b2),cr;cr=cd?0:b5;if(ac(cg)&&(cp==="center"||cp==="right")){co+={center:0.5,right:1}[cp]*(cg-b3.width)}if(co!==cb.x||cr!==cb.y){cb.attr({x:co,y:cr})}cb.x=co;cb.y=cr}function ck(co,cp){if(b9){b9.attr(co,cp)}else{ca[co]=cp}}function cf(){cb.add(b0);b0.attr({text:ch,x:b8,y:b6});if(ac(bZ)){b0.attr({anchorX:bZ,anchorY:bY})}}v(b0,"add",cf);cn.width=function(co){cg=co;return false};cn.height=function(co){ce=co;return false};cn.padding=function(co){if(ac(co)&&co!==cc){cc=co;b7()}return false};cn.align=function(co){b2={left:0,center:0.5,right:1}[co];return false};cn.text=function(cp,co){cb.attr(co,cp);b4();b7();return false};cn[aG]=function(cp,co){M=cp%2/2;ck(co,cp);return false};cn.stroke=cn.fill=cn.r=function(cp,co){ck(co,cp);return false};cn.anchorX=function(cp,co){bZ=cp;ck(co,cp+M-cm);return false};cn.anchorY=function(cp,co){bY=cp;ck(co,cp-cl);return false};cn.x=function(co){b0.x=co;co-=b2*((cg||b3.width)+cc);cm=m(co);b0.attr("translateX",cm);return false};cn.y=function(co){cl=b0.y=m(co);b0.attr("translateY",co);return false};var b1=b0.css;return bc(b0,{css:function(cp){if(cp){var co={};cp=aH({},cp);C(["fontSize","fontWeight","fontFamily","color","lineHeight","width"],function(cq){if(cp[cq]!==k){co[cq]=cp[cq];delete cp[cq]}});cb.css(co)}return b1.call(b0,cp)},getBBox:function(){return b9.getBBox()},shadow:function(co){b9.shadow(co);return b0},destroy:function(){aV(b0,"add",cf);aV(b0.element,"mouseenter");aV(b0.element,"mouseleave");if(cb){cb=cb.destroy()}if(b9){b9=b9.destroy()}au.prototype.destroy.call(b0)}})}};bH=d;var bT;if(!bL&&!aX){var E={init:function(bX,bZ){var bY=this,L=["<",bZ,' filled="f" stroked="f"'],M=["position: ",al,";"];if(bZ==="shape"||bZ===I){M.push("left:0;top:0;width:1px;height:1px;")}if(A){M.push("visibility: ",bZ===I?ae:ai)}L.push(' style="',M.join(""),'"/>');if(bZ){L=bZ===I||bZ==="span"||bZ==="img"?L.join(""):bX.prepVML(L);bY.element=be(L)}bY.renderer=bX;bY.attrSetters={}},add:function(bY){var b1=this,b0=b1.renderer,bX=b1.element,bZ=b0.box,M=bY&&bY.inverted,L=bY?bY.element||bY:bZ;if(M){b0.invertChild(bX,L)}L.appendChild(bX);b1.added=true;if(b1.alignOnAdd&&!b1.deferUpdateTransform){b1.updateTransform()}bj(b1,"add");return b1},updateTransform:au.prototype.htmlUpdateTransform,attr:function(bX,cd){var b0=this,cb,b5,b7,b4,bY=b0.element||{},b9=bY.style,L=bY.nodeName,b6=b0.renderer,b2=b0.symbolName,b1,M=b0.shadows,b3,cc=b0.attrSetters,ca=b0;if(bh(bX)&&ac(cd)){cb=bX;bX={};bX[cb]=cd}if(bh(bX)){cb=bX;if(cb==="strokeWidth"||cb==="stroke-width"){ca=b0.strokeweight}else{ca=b0[cb]}}else{for(cb in bX){b5=bX[cb];b3=false;b4=cc[cb]&&cc[cb].call(b0,b5,cb);if(b4!==false&&b5!==null){if(b4!==k){b5=b4}if(b2&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(cb)){if(!b1){b0.symbolAttr(bX);b1=true}b3=true}else{if(cb==="d"){b5=b5||[];b0.d=b5.join(" ");b7=b5.length;var b8=[];while(b7--){if(ap(b5[b7])){b8[b7]=m(b5[b7]*10)-5}else{if(b5[b7]==="Z"){b8[b7]="x"}else{b8[b7]=b5[b7]}}}b5=b8.join(" ")||"x";bY.path=b5;if(M){b7=M.length;while(b7--){M[b7].path=M[b7].cutOff?this.cutOffPath(b5,M[b7].cutOff):b5}}b3=true}else{if(cb==="visibility"){if(M){b7=M.length;while(b7--){M[b7].style[cb]=b5}}if(L==="DIV"){b5=b5===ae?"-999em":0;cb="top"}b9[cb]=b5;b3=true}else{if(cb==="zIndex"){if(b5){b9[cb]=b5}b3=true}else{if(cb==="width"||cb==="height"){b5=bV(0,b5);this[cb]=b5;if(b0.updateClipping){b0[cb]=b5;b0.updateClipping()}else{b9[cb]=b5}b3=true}else{if(cb==="x"||cb==="y"){b0[cb]=b5;b9[{x:"left",y:"top"}[cb]]=b5}else{if(cb==="class"){bY.className=b5}else{if(cb==="stroke"){b5=b6.color(b5,bY,cb);cb="strokecolor"}else{if(cb==="stroke-width"||cb==="strokeWidth"){bY.stroked=b5?true:false;cb="strokeweight";b0[cb]=b5;if(ap(b5)){b5+=U}}else{if(cb==="dashstyle"){var bZ=bY.getElementsByTagName("stroke")[0]||be(b6.prepVML(["<stroke/>"]),null,null,bY);bZ[cb]=b5||"solid";b0.dashstyle=b5;b3=true}else{if(cb==="fill"){if(L==="SPAN"){b9.color=b5}else{bY.filled=b5!==x?true:false;b5=b6.color(b5,bY,cb,b0);cb="fillcolor"}}else{if(L==="shape"&&cb==="rotation"){b0[cb]=b5;bY.style.left=-m(Y(b5*av)+1)+U;bY.style.top=m(bM(b5*av))+U}else{if(cb==="translateX"||cb==="translateY"||cb==="rotation"){b0[cb]=b5;b0.updateTransform();b3=true}else{if(cb==="text"){this.bBox=null;bY.innerHTML=b5;b3=true}}}}}}}}}}}}}}if(!b3){if(A){bY[cb]=b5}else{P(bY,cb,b5)}}}}}return ca},clip:function(bX){var b0=this,bZ,M=b0.element,L=M.parentNode,bY;if(bX){bZ=bX.members;bZ.push(b0);b0.destroyClip=function(){N(bZ,b0)};if(L&&L.className==="highcharts-tracker"&&!A){bQ(M,{visibility:ae})}bY=bX.getCSS(b0)}else{if(b0.destroyClip){b0.destroyClip()}bY={clip:A?"inherit":"rect(auto)"}}return b0.css(bY)},css:au.prototype.htmlCss,safeRemoveChild:function(L){if(L.parentNode){bE(L)}},destroy:function(){if(this.destroyClip){this.destroyClip()}return au.prototype.destroy.apply(this)},empty:function(){var M=this.element,bY=M.childNodes,L=bY.length,bX;while(L--){bX=bY[L];bX.parentNode.removeChild(bX)}},on:function(L,M){this.element["on"+L]=function(){var bX=aT.event;bX.target=bX.srcElement;M(bX)};return this},cutOffPath:function(bX,M){var L;bX=bX.split(/[ ,]/);L=bX.length;if(L===9||L===11){bX[L-4]=bX[L-2]=bC(bX[L-2])-10*M}return bX.join(" ")},shadow:function(b7,b6,M){var bZ=[],b0,b1=this.element,b2=this.renderer,b5,bX=b1.style,b8,b9=b1.path,b3,L,bY,b4;if(b9&&typeof b9.value!=="string"){b9="x"}L=b9;if(b7){bY=aI(b7.width,3);b4=(b7.opacity||0.15)/bY;for(b0=1;b0<=3;b0++){b3=(bY*2)+1-(2*b0);if(M){L=this.cutOffPath(b9.value,b3+0.5)}b8=['<shape isShadow="true" strokeweight="',b3,'" filled="false" path="',L,'" coordsize="10 10" style="',b1.style.cssText,'" />'];b5=be(b2.prepVML(b8),null,{left:bC(bX.left)+aI(b7.offsetX,1),top:bC(bX.top)+aI(b7.offsetY,1)});if(M){b5.cutOff=b3+1}b8=['<stroke color="',b7.color||"black",'" opacity="',b4*b0,'"/>'];be(b2.prepVML(b8),null,null,b5);if(b6){b6.element.appendChild(b5)}else{b1.parentNode.insertBefore(b5,b1)}bZ.push(b5)}this.shadows=bZ}return this}};E=a9(au,E);var aK={Element:E,isIE8:q.indexOf("MSIE 8.0")>-1,init:function(bX,bY,M){var b0=this,L,bZ;b0.alignedObjects=[];L=b0.createElement(I);bZ=L.element;bZ.style.position=H;bX.appendChild(L.element);b0.box=bZ;b0.boxWrapper=L;b0.setSize(bY,M,false);if(!br.namespaces.hcv){br.namespaces.add("hcv","urn:schemas-microsoft-com:vml");br.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}},isHidden:function(){return !this.box.offsetWidth},clipRect:function(M,b0,bZ,L){var bY=this.createElement(),bX=bS(M);return bc(bY,{members:[],left:bX?M.x:M,top:bX?M.y:b0,width:bX?M.width:bZ,height:bX?M.height:L,getCSS:function(b8){var b2=b8.inverted,b5=this,b7=b5.top,b6=b5.left,b4=b6+b5.width,b1=b7+b5.height,b3={clip:"rect("+m(b2?b6:b7)+"px,"+m(b2?b1:b4)+"px,"+m(b2?b4:b1)+"px,"+m(b2?b7:b6)+"px)"};if(!b2&&A&&b8.element.nodeName!=="IMG"){bc(b3,{width:b4+U,height:b1+U})}return b3},updateClipping:function(){C(bY.members,function(b1){b1.css(bY.getCSS(b1))})}})},color:function(cf,cs,b5,b8){var cm=this,cd,cn=/^rgba/,co,b0,cj=x;if(cf&&cf.linearGradient){b0="gradient"}else{if(cf&&cf.radialGradient){b0="pattern"}}if(b0){var ca,bX,b4=cf.linearGradient||cf.radialGradient,b3,cu,b2,ct,ci,ch,cc,cb,ck="",ce=cf.stops,cr,cg,cp=[],M=function(){co=['<fill colors="'+cp.join(",")+'" opacity="',ch,'" o:opacity2="',ci,'" type="',b0,'" ',ck,'focus="100%" method="any" />'];be(cm.prepVML(co),null,null,cs)};cr=ce[0];cg=ce[ce.length-1];if(cr[0]>0){ce.unshift([0,cr[1]])}if(cg[0]<1){ce.push([1,cg[1]])}C(ce,function(cw,cv){if(cn.test(cw[1])){cd=bA(cw[1]);ca=cd.get("rgb");bX=cd.get("a")}else{ca=cw[1];bX=1}cp.push((cw[0]*100)+"% "+ca);if(!cv){ci=bX;cb=ca}else{ch=bX;cc=ca}});if(b5==="fill"){if(b0==="gradient"){b3=b4.x1||b4[0]||0;cu=b4.y1||b4[1]||0;b2=b4.x2||b4[2]||0;ct=b4.y2||b4[3]||0;ck='angle="'+(90-aN.atan((ct-cu)/(b2-b3))*180/K)+'"';M()}else{var cq=b4.r,bZ=cq*2,bY=cq*2,b9=b4.cx,b7=b4.cy,b1=cs.radialReference,L,cl=function(){if(b1){L=b8.getBBox();b9+=(b1[0]-L.x)/L.width-0.5;b7+=(b1[1]-L.y)/L.height-0.5;bZ*=b1[2]/L.width;bY*=b1[2]/L.height}ck='src="'+bo.global.VMLRadialGradientURL+'" size="'+bZ+","+bY+'" origin="0.5,0.5" position="'+b9+","+b7+'" color2="'+cb+'" ';M()};if(b8.added){cl()}else{v(b8,"add",cl)}cj=cc}}else{cj=ca}}else{if(cn.test(cf)&&cs.tagName!=="IMG"){cd=bA(cf);co=["<",b5,' opacity="',cd.get("a"),'"/>'];be(this.prepVML(co),null,null,cs);cj=cd.get("rgb")}else{var b6=cs.getElementsByTagName(b5);if(b6.length){b6[0].opacity=1}cj=cf}}return cj},prepVML:function(L){var M="display:inline-block;behavior:url(#default#VML);",bX=this.isIE8;L=L.join("");if(bX){L=L.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />');if(L.indexOf('style="')===-1){L=L.replace("/>",' style="'+M+'" />')}else{L=L.replace('style="','style="'+M)}}else{L=L.replace("<","<hcv:")}return L},text:d.prototype.html,path:function(M){var L={coordsize:"10 10"};if(aC(M)){L.d=M}else{if(bS(M)){bc(L,M)}}return this.createElement("shape").attr(L)},circle:function(L,bX,M){return this.symbol("circle").attr({x:L-M,y:bX-M,width:2*M,height:2*M})},g:function(L){var bX,M;if(L){M={className:aY+L,"class":aY+L}}bX=this.createElement(I).attr(M);return bX},image:function(bZ,M,b0,bX,L){var bY=this.createElement("img").attr({src:bZ});if(arguments.length>1){bY.attr({x:M,y:b0,width:bX,height:L})}return bY},rect:function(M,b1,bX,L,bY,b0){if(bS(M)){b1=M.y;bX=M.width;L=M.height;b0=M.strokeWidth;M=M.x}var bZ=this.symbol("rect");bZ.r=bY;return bZ.attr(bZ.crisp(b0,M,b1,bV(bX,0),bV(L,0)))},invertChild:function(M,L){var bX=L.style;bQ(M,{flip:"x",left:bC(bX.width)-1,top:bC(bX.height)-1,rotation:-90})},symbols:{arc:function(b6,b5,b8,b0,ca){var bX=ca.start,bY=ca.end,b2=ca.r||b8||b0,b1=bM(bX),L=Y(bX),M=bM(bY),b7=Y(bY),b4=ca.innerR,b9=0.08/b2,bZ=(b4&&0.1/b4)||0,b3;if(bY-bX===0){return["x"]}else{if(2*K-bY+bX<b9){M=-b9}else{if(bY-bX<bZ){M=bM(bX+bZ)}}}b3=["wa",b6-b2,b5-b2,b6+b2,b5+b2,b6+b2*b1,b5+b2*L,b6+b2*M,b5+b2*b7];if(ca.open&&!b4){b3.push("e",bk,b6,b5)}b3.push("at",b6-b4,b5-b4,b6+b4,b5+b4,b6+b4*M,b5+b4*b7,b6+b4*b1,b5+b4*L,"x","e");return b3},circle:function(L,bY,M,bX){return["wa",L,bY,L+M,bY+bX,L+M,bY+bX/2,L+M,bY+bX/2,"e"]},rect:function(bY,b0,bX,b2,b3){var b1=bY+bX,M=b0+b2,bZ,L;if(!ac(b3)||!b3.r){bZ=d.prototype.symbols.square.apply(0,arguments)}else{L=aj(b3.r,bX,b2);bZ=[bk,bY+L,b0,bl,b1-L,b0,"wa",b1-2*L,b0,b1,b0+2*L,b1-L,b0,b1,b0+L,bl,b1,M-L,"wa",b1-2*L,M-2*L,b1,M,b1,M-L,b1-L,M,bl,bY+L,M,"wa",bY,M-2*L,bY+2*L,M,bY+L,M,bY,M-L,bl,bY,b0+L,"wa",bY,b0,bY+2*L,b0+2*L,bY,b0+L,bY+L,b0,"x","e"]}return bZ}}};bT=function(){this.init.apply(this,arguments)};bT.prototype=aH(d.prototype,aK);bH=bT}var bU,aW;if(aX){bU=function(){aR="http://www.w3.org/1999/xhtml"};bU.prototype.symbols={};aW=(function(){var M=[];function L(){var bY=M.length,bX;for(bX=0;bX<bY;bX++){M[bX]()}M=[]}return{push:function(bY,bX){if(M.length===0){a4(bX,L)}M.push(bY)}}}())}bH=bT||bU||d;function ay(M,bX,L){this.axis=M;this.pos=bX;this.type=L||"";this.isNew=true;if(!L){this.addLabel()}}ay.prototype={addLabel:function(){var cb=this,M=cb.axis,bX=M.options,b3=M.chart,cc=M.horiz,b5=M.categories,bY=cb.pos,b4=bX.labels,b8,cd=M.tickPositions,b6=(b5&&cc&&b5.length&&!b4.step&&!b4.staggerLines&&!b4.rotation&&b3.plotWidth/cd.length)||(!cc&&b3.plotWidth/2),b0=bY===cd[0],b2=bY===cd[cd.length-1],b1,b9,b7=b5&&ac(b5[bY])?b5[bY]:bY,bZ=cb.label,ca=cd.info,L;if(M.isDatetimeAxis&&ca){L=bX.dateTimeLabelFormats[ca.higherRanks[bY]||ca.unitName]}cb.isFirst=b0;cb.isLast=b2;b8=M.labelFormatter.call({axis:M,chart:b3,isFirst:b0,isLast:b2,dateTimeLabelFormat:L,value:M.isLog?ab(u(b7)):b7});b1=b6&&{width:bV(1,m(b6-2*(b4.padding||10)))+U};b1=bc(b1,b4.style);if(!ac(bZ)){b9={align:b4.align};if(ap(b4.rotation)){b9.rotation=b4.rotation}cb.label=ac(b8)&&b4.enabled?b3.renderer.text(b8,0,0,b4.useHTML).attr(b9).css(b1).add(M.labelGroup):null}else{if(bZ){bZ.attr({text:b8}).css(b1)}}},getLabelSize:function(){var L=this.label,M=this.axis;return L?((this.labelBBox=L.getBBox()))[M.horiz?"height":"width"]:0},getLabelSides:function(){var b0=this.labelBBox,bZ=this.axis,M=bZ.options,L=M.labels,bY=b0.width,bX=bY*{left:0,center:0.5,right:1}[L.align]-L.x;return[-bX,bY-bX]},handleOverflow:function(b5,cb){var b8=true,bZ=this.axis,b6=bZ.chart,b0=this.isFirst,b3=this.isLast,b7=cb.x,b2=bZ.reversed,ca=bZ.tickPositions;if(b0||b3){var bY=this.getLabelSides(),b4=bY[0],bX=bY[1],M=b6.plotLeft,b1=M+bZ.len,b9=bZ.ticks[ca[b5+(b0?1:-1)]],L=b9&&b9.label.xy&&b9.label.xy.x+b9.getLabelSides()[b0?0:1];if((b0&&!b2)||(b3&&b2)){if(b7+b4<M){b7=M-b4;if(b9&&b7+bX>L){b8=false}}}else{if(b7+bX>b1){b7=b1-bX;if(b9&&b7+b4<L){b8=false}}}cb.x=b7}return b8},getPosition:function(b1,b0,bZ,L){var bY=this.axis,bX=bY.chart,M=(L&&bX.oldChartHeight)||bX.chartHeight;return{x:b1?bY.translate(b0+bZ,null,null,L)+bY.transB:bY.left+bY.offset+(bY.opposite?((L&&bX.oldChartWidth)||bX.chartWidth)-bY.right-bY.left:0),y:b1?M-bY.bottom+bY.offset-(bY.opposite?bY.height:0):M-bY.translate(b0+bZ,null,null,L)-bY.transB}},getLabelPosition:function(b4,b2,b3,b5,bZ,b0,b1,L){var M=this.axis,bY=M.transA,bX=M.reversed,b6=M.staggerLines;b4=b4+bZ.x-(b0&&b5?b0*bY*(bX?-1:1):0);b2=b2+bZ.y-(b0&&!b5?b0*bY*(bX?1:-1):0);if(!ac(bZ.y)){b2+=bC(b3.styles.lineHeight)*0.9-b3.getBBox().height/2}if(b6){b2+=(b1/(L||1)%b6)*16}return{x:b4,y:b2}},getMarkPath:function(M,b0,bX,L,bZ,bY){return bY.crispLine([bk,M,b0,bl,M+(bZ?0:-bX),b0+(bZ?bX:0)],L)},render:function(b4,M){var cm=this,bY=cm.axis,bZ=bY.options,cf=bY.chart,cl=cf.renderer,cp=bY.horiz,b0=cm.type,b8=cm.label,b3=cm.pos,ci=bZ.labels,b5=cm.gridLine,ch=b0?b0+"Grid":"grid",ck=b0?b0+"Tick":"tick",cg=bZ[ch+"LineWidth"],cj=bZ[ch+"LineColor"],b7=bZ[ch+"LineDashStyle"],bX=bZ[ck+"Length"],b6=bZ[ck+"Width"]||0,cc=bZ[ck+"Color"],cd=bZ[ck+"Position"],cq,ca=cm.mark,L,b2=ci.step,ce,co=true,cr=bY.tickmarkOffset,b1=cm.getPosition(cp,b3,cr,M),cb=b1.x,b9=b1.y,cn=bY.staggerLines;if(cg){cq=bY.getPlotLinePath(b3+cr,cg,M);if(b5===k){ce={stroke:cj,"stroke-width":cg};if(b7){ce.dashstyle=b7}if(!b0){ce.zIndex=1}cm.gridLine=b5=cg?cl.path(cq).attr(ce).add(bY.gridGroup):null}if(!M&&b5&&cq){b5[cm.isNew?"attr":"animate"]({d:cq})}}if(b6&&bX){if(cd==="inside"){bX=-bX}if(bY.opposite){bX=-bX}L=cm.getMarkPath(cb,b9,bX,b6,cp,cl);if(ca){ca.animate({d:L})}else{cm.mark=cl.path(L).attr({stroke:cc,"stroke-width":b6}).add(bY.axisGroup)}}if(b8&&!isNaN(cb)){b8.xy=b1=cm.getLabelPosition(cb,b9,b8,cp,ci,cr,b4,b2);if((cm.isFirst&&!aI(bZ.showFirstLabel,1))||(cm.isLast&&!aI(bZ.showLastLabel,1))){co=false}else{if(!cn&&cp&&ci.overflow==="justify"&&!cm.handleOverflow(b4,b1)){co=false}}if(b2&&b4%b2){co=false}if(co){b8[cm.isNew?"attr":"animate"](b1);b8.show();cm.isNew=false}else{b8.hide()}}},destroy:function(){a2(this,this.axis)}};function bt(M,L){this.axis=M;if(L){this.options=L;this.id=L.id}return this}bt.prototype={render:function(){var cj=this,bZ=cj.axis,ck=bZ.horiz,bY=(bZ.pointRange||0)/2,b0=cj.options,L=b0.label,b2=cj.label,cb=b0.width,bX=b0.to,ch=b0.from,ca=ac(ch)&&ac(bX),cd=b0.value,b1=b0.dashStyle,cf=cj.svgElem,b9=[],ce,b6,b3,ci,b5,b4,cg=b0.color,b8=b0.zIndex,M=b0.events,b7,cc=bZ.chart.renderer;if(bZ.isLog){ch=r(ch);bX=r(bX);cd=r(cd)}if(cb){b9=bZ.getPlotLinePath(cd,cb);b7={stroke:cg,"stroke-width":cb};if(b1){b7.dashstyle=b1}}else{if(ca){ch=bV(ch,bZ.min-bY);bX=aj(bX,bZ.max+bY);b9=bZ.getPlotBandPath(ch,bX,b0);b7={fill:cg};if(b0.borderWidth){b7.stroke=b0.borderColor;b7["stroke-width"]=b0.borderWidth}}else{return}}if(ac(b8)){b7.zIndex=b8}if(cf){if(b9){cf.animate({d:b9},null,cf.onGetPath)}else{cf.hide();cf.onGetPath=function(){cf.show()}}}else{if(b9&&b9.length){cj.svgElem=cf=cc.path(b9).attr(b7).add();if(M){ce=function(cl){cf.on(cl,function(cm){M[cl].apply(cj,[cm])})};for(b6 in M){ce(b6)}}}}if(L&&ac(L.text)&&b9&&b9.length&&bZ.width>0&&bZ.height>0){L=aH({align:ck&&ca&&"center",x:ck?!ca&&4:10,verticalAlign:!ck&&ca&&"middle",y:ck?ca?16:10:ca?6:-4,rotation:ck&&!ca&&90},L);if(!b2){cj.label=b2=cc.text(L.text,0,0).attr({align:L.textAlign||L.align,rotation:L.rotation,zIndex:b8}).css(L.style).add()}b3=[b9[1],b9[4],aI(b9[6],b9[1])];ci=[b9[2],b9[5],aI(b9[7],b9[2])];b5=bs(b3);b4=bs(ci);b2.align(L,false,{x:b5,y:b4,width:aF(b3)-b5,height:aF(ci)-b4});b2.show()}else{if(b2){b2.hide()}}return cj},destroy:function(){var L=this,M=L.axis;N(M.plotLinesAndBands,L);a2(L,this.axis)}};function at(b0,bY,M,L,b1,bZ){var bX=b0.chart.inverted;this.axis=b0;this.isNegative=M;this.options=bY;this.x=L;this.stack=b1;this.percent=bZ==="percent";this.alignOptions={align:bY.align||(bX?(M?"left":"right"):"center"),verticalAlign:bY.verticalAlign||(bX?"middle":(M?"bottom":"top")),y:aI(bY.y,bX?4:(M?14:-6)),x:aI(bY.x,bX?(M?-6:6):0)};this.textAlign=bY.textAlign||(bX?(M?"right":"left"):"center")}at.prototype={destroy:function(){a2(this,this.axis)},setTotal:function(L){this.total=L;this.cum=L},render:function(L){var M=this.options.formatter.call(this);if(this.label){this.label.attr({text:M,visibility:ae})}else{this.label=this.axis.chart.renderer.text(M,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:ae}).add(L)}},setOffset:function(b1,b4){var b8=this,L=b8.axis,b2=L.chart,bX=b2.inverted,M=this.isNegative,b5=L.translate(this.percent?100:this.total,0,0,0,1),b0=L.translate(0),bZ=e(b5-b0),b7=b2.xAxis[0].translate(this.x)+b1,b3=b2.plotHeight,b9={x:bX?(M?b5:b5-bZ):b7,y:bX?b3-b7-b4:(M?(b3-b5-bZ):b3-b5),width:bX?bZ:b4,height:bX?b4:bZ},b6=this.label,bY;if(b6){b6.align(this.alignOptions,null,b9);bY=b6.alignAttr;b6.attr({visibility:this.options.crop===false||b2.isInsidePlot(bY.x,bY.y)?(bL?"inherit":ai):ae})}}};function z(){this.init.apply(this,arguments)}z.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:false,gridLineColor:"#C0C0C0",labels:s,lineColor:"#C0D0E0",lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:false,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:true,gridLineWidth:1,tickPixelInterval:72,showLastLabel:true,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:false,formatter:function(){return this.total},style:s.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(b0,bZ){var L=bZ.isX,bY=this;bY.horiz=b0.inverted?!L:L;bY.isXAxis=L;bY.xOrY=L?"x":"y";bY.opposite=bZ.opposite;bY.side=bY.horiz?(bY.opposite?0:2):(bY.opposite?1:3);bY.setOptions(bZ);var b3=this.options,b1=b3.type,M=b1==="datetime";bY.labelFormatter=b3.labels.formatter||bY.defaultLabelFormatter;bY.staggerLines=bY.horiz&&b3.labels.staggerLines;bY.userOptions=bZ;bY.minPixelPadding=0;bY.chart=b0;bY.reversed=b3.reversed;bY.categories=b3.categories;bY.isLog=b1==="logarithmic";bY.isLinked=ac(b3.linkedTo);bY.isDatetimeAxis=M;bY.tickmarkOffset=(b3.categories&&b3.tickmarkPlacement==="between")?0.5:0;bY.ticks={};bY.minorTicks={};bY.plotLinesAndBands=[];bY.alternateBands={};bY.len=0;bY.minRange=bY.userMinRange=b3.minRange||b3.maxZoom;bY.range=b3.range;bY.offset=b3.offset||0;bY.stacks={};bY.max=null;bY.min=null;var bX,b2=bY.options.events;b0.axes.push(bY);b0[L?"xAxis":"yAxis"].push(bY);bY.series=[];if(b0.inverted&&L&&bY.reversed===k){bY.reversed=true}bY.removePlotBand=bY.removePlotBandOrLine;bY.removePlotLine=bY.removePlotBandOrLine;bY.addPlotBand=bY.addPlotBandOrLine;bY.addPlotLine=bY.addPlotBandOrLine;for(bX in b2){v(bY,bX,b2[bX])}if(bY.isLog){bY.val2lin=r;bY.lin2val=u}},setOptions:function(L){this.options=aH(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],aH(bo[this.isXAxis?"xAxis":"yAxis"],L))},defaultLabelFormatter:function(){var M=this.axis,b3=this.value,bZ=M.categories,b2=this.dateTimeLabelFormat,bX=bo.lang.numericSymbols,bY=bX&&bX.length,b0,b1,L=M.isLog?b3:M.tickInterval;if(bZ){b1=b3}else{if(b2){b1=bF(b2,b3)}else{if(bY&&L>=1000){while(bY--&&b1===k){b0=Math.pow(1000,bY+1);if(L>=b0&&bX[bY]!==null){b1=l(b3/b0,-1)+bX[bY]}}}}}if(b1===k){if(b3>=1000){b1=l(b3,0)}else{b1=l(b3,-1)}}return b1},getSeriesExtremes:function(){var bZ=this,bY=bZ.chart,bX=bZ.stacks,L=[],b0=[],M;bZ.hasVisibleSeries=false;bZ.dataMin=bZ.dataMax=null;C(bZ.series,function(cb){if(cb.visible||!bY.options.chart.ignoreHiddenSeries){var b7=cb.options,b2,ch,cd,b1,cg,b9,b4,cm,ca,b8,b3=b7.threshold,cl,b6=[],cf=0;bZ.hasVisibleSeries=true;if(bZ.isLog&&b3<=0){b3=b7.threshold=null}if(bZ.isXAxis){b4=cb.xData;if(b4.length){bZ.dataMin=aj(aI(bZ.dataMin,b4[0]),bs(b4));bZ.dataMax=bV(aI(bZ.dataMax,b4[0]),aF(b4))}}else{var ce,ck,cn,cc=cb.cropped,b5=cb.xAxis.getExtremes(),ci,cj=!!cb.modifyValue;b2=b7.stacking;bZ.usePercentage=b2==="percent";if(b2){cg=b7.stack;b1=cb.type+aI(cg,"");b9="-"+b1;cb.stackKey=b1;ch=L[b1]||[];L[b1]=ch;cd=b0[b9]||[];b0[b9]=cd}if(bZ.usePercentage){bZ.dataMin=0;bZ.dataMax=99}b4=cb.processedXData;cm=cb.processedYData;cl=cm.length;for(M=0;M<cl;M++){ca=b4[M];b8=cm[M];if(b2){ce=b8<b3;ck=ce?cd:ch;cn=ce?b9:b1;b8=ck[ca]=ac(ck[ca])?ab(ck[ca]+b8):b8;if(!bX[cn]){bX[cn]={}}if(!bX[cn][ca]){bX[cn][ca]=new at(bZ,bZ.options.stackLabels,ce,ca,cg,b2)}bX[cn][ca].setTotal(b8)}if(b8!==null&&b8!==k){if(cj){b8=cb.modifyValue(b8)}if(cc||((b4[M+1]||ca)>=b5.min&&(b4[M-1]||ca)<=b5.max)){ci=b8.length;if(ci){while(ci--){if(b8[ci]!==null){b6[cf++]=b8[ci]}}}else{b6[cf++]=b8}}}}if(!bZ.usePercentage&&b6.length){bZ.dataMin=aj(aI(bZ.dataMin,b6[0]),bs(b6));bZ.dataMax=bV(aI(bZ.dataMax,b6[0]),aF(b6))}if(ac(b3)){if(bZ.dataMin>=b3){bZ.dataMin=b3;bZ.ignoreMinPadding=true}else{if(bZ.dataMax<b3){bZ.dataMax=b3;bZ.ignoreMaxPadding=true}}}}}})},translate:function(bX,b6,b7,bY,b5,b2){var bZ=this,b1=bZ.len,M=1,b4=0,b0=bY?bZ.oldTransA:bZ.transA,b8=bY?bZ.oldMin:bZ.min,L,b3=bZ.options.ordinal||(bZ.isLog&&b5);if(!b0){b0=bZ.transA}if(b7){M*=-1;b4=b1}if(bZ.reversed){M*=-1;b4-=M*b1}if(b6){if(bZ.reversed){bX=b1-bX}L=bX/b0+b8;if(b3){L=bZ.lin2val(L)}}else{if(b3){bX=bZ.val2lin(bX)}L=M*(bX-b8)*b0+b4+(M*bZ.minPixelPadding)+(b2?b0*bZ.pointRange/2:0)}return L},getPlotLinePath:function(b9,b4,bY){var bZ=this,b6=bZ.chart,b3=bZ.left,L=bZ.top,bX,b8,M,b7,b2=bZ.translate(b9,null,null,bY),b5=(bY&&b6.oldChartHeight)||b6.chartHeight,b0=(bY&&b6.oldChartWidth)||b6.chartWidth,ca,b1=bZ.transB;bX=M=m(b2+b1);b8=b7=m(b5-b2-b1);if(isNaN(b2)){ca=true}else{if(bZ.horiz){b8=L;b7=b5-bZ.bottom;if(bX<b3||bX>b3+bZ.width){ca=true}}else{bX=b3;M=b0-bZ.right;if(b8<L||b8>L+bZ.height){ca=true}}}return ca?null:b6.renderer.crispLine([bk,bX,b8,bl,M,b7],b4||0)},getPlotBandPath:function(bY,bX){var L=this.getPlotLinePath(bX),M=this.getPlotLinePath(bY);if(M&&L){M.push(L[4],L[5],L[1],L[2])}else{M=null}return M},getLinearTickPositions:function(M,bZ,L){var b2,b1,b0=ab(bd(bZ/M)*M),bY=ab(ax(L/M)*M),bX=[];b2=b0;while(b2<=bY){bX.push(b2);b2=ab(b2+M);if(b2===b1){break}b1=b2}return bX},getLogTickPositions:function(cg,b8,cb,M){var bX=this,bY=bX.options,L=bX.len;var b4=[];if(!M){bX._minorAutoInterval=null}if(cg>=0.5){cg=m(cg);b4=bX.getLinearTickPositions(cg,b8,cb)}else{if(cg>=0.08){var cf=bd(b8),cd,cc,ca,ce,bZ,b9,b3;if(cg>0.3){cd=[1,2,4]}else{if(cg>0.15){cd=[1,2,4,6,8]}else{cd=[1,2,3,4,5,6,7,8,9]}}for(cc=cf;cc<cb+1&&!b3;cc++){ce=cd.length;for(ca=0;ca<ce&&!b3;ca++){bZ=r(u(cc)*cd[ca]);if(bZ>b8){b4.push(b9)}if(b9>cb){b3=true}b9=bZ}}}else{var b6=u(b8),b7=u(cb),b2=bY[M?"minorTickInterval":"tickInterval"],b1=b2==="auto"?null:b2,b5=bY.tickPixelInterval/(M?5:1),b0=M?L/bX.tickPositions.length:L;cg=aI(b1,bX._minorAutoInterval,(b7-b6)*b5/(b0||1));cg=bv(cg,null,aN.pow(10,bd(aN.log(cg)/aN.LN10)));b4=af(bX.getLinearTickPositions(cg,b6,b7),r);if(!M){bX._minorAutoInterval=cg/5}}}if(!M){bX.tickInterval=cg}return b4},getMinorTickPositions:function(){var bY=this,M=bY.tickPositions,b0=bY.minorTickInterval;var bZ=[],b1,bX,L;if(bY.isLog){L=M.length;for(bX=1;bX<L;bX++){bZ=bZ.concat(bY.getLogTickPositions(b0,M[bX-1],M[bX],true))}}else{for(b1=bY.min+(M[0]-bY.min)%b0;b1<=bY.max;b1+=b0){bZ.push(b1)}}return bZ},adjustForMinRange:function(){var bY=this,b8=bY.options,b0=bY.min,b5=bY.max,b7,bX=bY.dataMax-bY.dataMin>=bY.minRange,M,b2,L,bZ,b4,b6,b3;if(bY.isXAxis&&bY.minRange===k&&!bY.isLog){if(ac(b8.min)||ac(b8.max)){bY.minRange=null}else{C(bY.series,function(b9){bZ=b9.xData;b4=b9.xIncrement?1:bZ.length-1;for(b2=b4;b2>0;b2--){L=bZ[b2]-bZ[b2-1];if(M===k||L<M){M=L}}});bY.minRange=aj(M*5,bY.dataMax-bY.dataMin)}}if(b5-b0<bY.minRange){var b1=bY.minRange;b7=(b1-b5+b0)/2;b6=[b0-b7,aI(b8.min,b0-b7)];if(bX){b6[2]=bY.dataMin}b0=aF(b6);b3=[b0+b1,aI(b8.max,b0+b1)];if(bX){b3[2]=bY.dataMax}b5=bs(b3);if(b5-b0<b1){b6[0]=b5-b1;b6[1]=aI(b8.min,b5-b1);b0=aF(b6)}}bY.min=b0;bY.max=b5},setAxisTranslation:function(){var b1=this,bX=b1.max-b1.min,b0=0,b2,bZ=0,M=0,L=b1.linkedParent,bY=b1.transA;if(b1.isXAxis){if(L){bZ=L.minPointOffset;M=L.pointRangePadding}else{C(b1.series,function(b4){var b5=b4.pointRange,b6=b4.options.pointPlacement,b3=b4.closestPointRange;b0=bV(b0,b5);bZ=bV(bZ,b6?0:b5/2);M=bV(M,b6==="on"?0:b5);if(!b4.noSharedTooltip&&ac(b3)){b2=ac(b2)?aj(b2,b3):b3}})}b1.minPointOffset=bZ;b1.pointRangePadding=M;b1.pointRange=b0;b1.closestPointRange=b2}b1.oldTransA=bY;b1.translationSlope=b1.transA=bY=b1.len/((bX+M)||1);b1.transB=b1.horiz?b1.left:b1.bottom;b1.minPixelPadding=bY*bZ},setTickPositions:function(ce){var bX=this,b9=bX.chart,bY=bX.options,b7=bX.isLog,b5=bX.isDatetimeAxis,b6=bX.isXAxis,b0=bX.isLinked,L=bX.options.tickPositioner,b2,cb=bY.maxPadding,M=bY.minPadding,bZ,b8,b1=bY.tickInterval,cd=bY.minTickInterval,b4=bY.tickPixelInterval,cg,ca=bX.categories;if(b0){bX.linkedParent=b9[b6?"xAxis":"yAxis"][bY.linkedTo];b8=bX.linkedParent.getExtremes();bX.min=aI(b8.min,b8.dataMin);bX.max=aI(b8.max,b8.dataMax);if(bY.type!==bX.linkedParent.options.type){bD(11,1)}}else{bX.min=aI(bX.userMin,bY.min,bX.dataMin);bX.max=aI(bX.userMax,bY.max,bX.dataMax)}if(b7){if(!ce&&aj(bX.min,aI(bX.dataMin,bX.min))<=0){bD(10,1)}bX.min=ab(r(bX.min));bX.max=ab(r(bX.max))}if(bX.range){bX.userMin=bX.min=bV(bX.min,bX.max-bX.range);bX.userMax=bX.max;if(ce){bX.range=null}}bX.adjustForMinRange();if(!ca&&!bX.usePercentage&&!b0&&ac(bX.min)&&ac(bX.max)){bZ=(bX.max-bX.min)||1;if(!ac(bY.min)&&!ac(bX.userMin)&&M&&(bX.dataMin<0||!bX.ignoreMinPadding)){bX.min-=bZ*M}if(!ac(bY.max)&&!ac(bX.userMax)&&cb&&(bX.dataMax>0||!bX.ignoreMaxPadding)){bX.max+=bZ*cb}}if(bX.min===bX.max||bX.min===undefined||bX.max===undefined){bX.tickInterval=1}else{if(b0&&!b1&&b4===bX.linkedParent.options.tickPixelInterval){bX.tickInterval=bX.linkedParent.tickInterval}else{bX.tickInterval=aI(b1,ca?1:(bX.max-bX.min)*b4/(bX.len||1))}}if(b6&&!ce){C(bX.series,function(ch){ch.processData(bX.min!==bX.oldMin||bX.max!==bX.oldMax)})}bX.setAxisTranslation(ce);if(bX.beforeSetTickPositions){bX.beforeSetTickPositions()}if(bX.postProcessTickInterval){bX.tickInterval=bX.postProcessTickInterval(bX.tickInterval)}if(!b1&&bX.tickInterval<cd){bX.tickInterval=cd}if(!b5&&!b7){b2=aN.pow(10,bd(aN.log(bX.tickInterval)/aN.LN10));if(!b1){bX.tickInterval=bv(bX.tickInterval,null,b2,bY)}}bX.minorTickInterval=bY.minorTickInterval==="auto"&&bX.tickInterval?bX.tickInterval/5:bY.minorTickInterval;bX.tickPositions=cg=bY.tickPositions||(L&&L.apply(bX,[bX.min,bX.max]));if(!cg){if(b5){cg=(bX.getNonLinearTimeTicks||ao)(ak(bX.tickInterval,bY.units),bX.min,bX.max,bY.startOfWeek,bX.ordinalPositions,bX.closestPointRange,true)}else{if(b7){cg=bX.getLogTickPositions(bX.tickInterval,bX.min,bX.max)}else{cg=bX.getLinearTickPositions(bX.tickInterval,bX.min,bX.max)}}bX.tickPositions=cg}if(!b0){var cc=cg[0],cf=cg[cg.length-1],b3=bX.minPointOffset||0;if(bY.startOnTick){bX.min=cc}else{if(bX.min-b3>cc){cg.shift()}}if(bY.endOnTick){bX.max=cf}else{if(bX.max+b3<cf){cg.pop()}}}},setMaxTicks:function(){var bX=this.chart,bY=bX.maxTicks,M=this.tickPositions,L=this.xOrY;if(!bY){bY={x:0,y:0}}if(!this.isLinked&&!this.isDatetimeAxis&&M.length>bY[L]&&this.options.alignTicks!==false){bY[L]=M.length}bX.maxTicks=bY},adjustTickAmount:function(){var b0=this,bZ=b0.chart,L=b0.xOrY,bX=b0.tickPositions,b2=bZ.maxTicks;if(b2&&b2[L]&&!b0.isDatetimeAxis&&!b0.categories&&!b0.isLinked&&b0.options.alignTicks!==false){var b1=b0.tickAmount,M=bX.length,bY;b0.tickAmount=bY=b2[L];if(M<bY){while(bX.length<bY){bX.push(ab(bX[bX.length-1]+b0.tickInterval))}b0.transA*=(M-1)/(bY-1);b0.max=bX[bX.length-1]}if(ac(b1)&&bY!==b1){b0.isDirty=true}}},setScale:function(){var bY=this,bX=bY.stacks,M,L,b0,bZ;bY.oldMin=bY.min;bY.oldMax=bY.max;bY.oldAxisLength=bY.len;bY.setAxisSize();bZ=bY.len!==bY.oldAxisLength;C(bY.series,function(b1){if(b1.isDirtyData||b1.isDirty||b1.xAxis.isDirty){b0=true}});if(bZ||b0||bY.isLinked||bY.userMin!==bY.oldUserMin||bY.userMax!==bY.oldUserMax){bY.getSeriesExtremes();bY.setTickPositions();bY.oldUserMin=bY.userMin;bY.oldUserMax=bY.userMax;if(!bY.isDirty){bY.isDirty=bZ||bY.min!==bY.oldMin||bY.max!==bY.oldMax}}if(!bY.isXAxis){for(M in bX){for(L in bX[M]){bX[M][L].cum=bX[M][L].total}}}bY.setMaxTicks()},setExtremes:function(b0,bY,b1,bZ,L){var bX=this,M=bX.chart;b1=aI(b1,true);L=bc(L,{min:b0,max:bY});bj(bX,"setExtremes",L,function(){bX.userMin=b0;bX.userMax=bY;bX.isDirtyExtremes=true;if(b1){M.redraw(bZ)}})},zoom:function(M,L){this.setExtremes(M,L,false,k,{trigger:"zoom"});return true},setAxisSize:function(){var bY=this,bX=bY.chart,L=bY.options;var bZ=L.offsetLeft||0,M=L.offsetRight||0;bY.left=aI(L.left,bX.plotLeft+bZ);bY.top=aI(L.top,bX.plotTop);bY.width=aI(L.width,bX.plotWidth-bZ+M);bY.height=aI(L.height,bX.plotHeight);bY.bottom=bX.chartHeight-bY.height-bY.top;bY.right=bX.chartWidth-bY.width-bY.left;bY.len=bV(bY.horiz?bY.width:bY.height,0)},getExtremes:function(){var M=this,L=M.isLog;return{min:L?ab(u(M.min)):M.min,max:L?ab(u(M.max)):M.max,dataMin:M.dataMin,dataMax:M.dataMax,userMin:M.userMin,userMax:M.userMax}},getThreshold:function(M){var bY=this,L=bY.isLog;var bZ=L?u(bY.min):bY.min,bX=L?u(bY.max):bY.max;if(bZ>M||M===null){M=bZ}else{if(bX<M){M=bX}}return bY.translate(M,0,1,0,1)},addPlotBandOrLine:function(L){var M=new bt(this,L).render();this.plotLinesAndBands.push(M);return M},getOffset:function(){var bY=this,b3=bY.chart,b7=b3.renderer,b0=bY.options,cc=bY.tickPositions,cd=bY.ticks,ca=bY.horiz,bX=bY.side,b9,b5,L=0,cb,b1=0,M=b0.title,b4=b0.labels,b8=0,bZ=b3.axisOffset,b2=[-1,1,1,-1][bX],b6;bY.hasData=b9=(bY.hasVisibleSeries||(ac(bY.min)&&ac(bY.max)&&!!cc));bY.showAxis=b5=b9||aI(b0.showEmpty,true);if(!bY.axisGroup){bY.gridGroup=b7.g("grid").attr({zIndex:b0.gridZIndex||1}).add();bY.axisGroup=b7.g("axis").attr({zIndex:b0.zIndex||2}).add();bY.labelGroup=b7.g("axis-labels").attr({zIndex:b4.zIndex||7}).add()}if(b9||bY.isLinked){C(cc,function(ce){if(!cd[ce]){cd[ce]=new ay(bY,ce)}else{cd[ce].addLabel()}});C(cc,function(ce){if(bX===0||bX===2||{1:"left",3:"right"}[bX]===b4.align){b8=bV(cd[ce].getLabelSize(),b8)}});if(bY.staggerLines){b8+=(bY.staggerLines-1)*16}}else{for(b6 in cd){cd[b6].destroy();delete cd[b6]}}if(M&&M.text){if(!bY.axisTitle){bY.axisTitle=b7.text(M.text,0,0,M.useHTML).attr({zIndex:7,rotation:M.rotation||0,align:M.textAlign||{low:"left",middle:"center",high:"right"}[M.align]}).css(M.style).add(bY.axisGroup);bY.axisTitle.isNew=true}if(b5){L=bY.axisTitle.getBBox()[ca?"height":"width"];b1=aI(M.margin,ca?5:10);cb=M.offset}bY.axisTitle[b5?"show":"hide"]()}bY.offset=b2*aI(b0.offset,bZ[bX]);bY.axisTitleMargin=aI(cb,b8+b1+(bX!==2&&b8&&b2*b0.labels[ca?"y":"x"]));bZ[bX]=bV(bZ[bX],bY.axisTitleMargin+L+b2*bY.offset)},getLinePath:function(M){var bY=this.chart,bZ=this.opposite,b0=this.offset,b1=this.horiz,L=this.left+(bZ?this.width:0)+b0,bX=bY.chartHeight-this.bottom-(bZ?this.height:0)+b0;this.lineTop=bX;return bY.renderer.crispLine([bk,b1?this.left:L,b1?bX:this.top,bl,b1?bY.chartWidth-this.right:L,b1?bX:bY.chartHeight-this.bottom],M)},getTitlePosition:function(){var b4=this.horiz,b0=this.left,L=this.top,b2=this.len,b3=this.options.title,bY=b4?b0:L,b1=this.opposite,bZ=this.offset,b5=bC(b3.style.fontSize||12),M={low:bY+(b4?0:b2),middle:bY+b2/2,high:bY+(b4?b2:0)}[b3.align],bX=(b4?L+this.height:b0)+(b4?1:-1)*(b1?-1:1)*this.axisTitleMargin+(this.side===2?b5:0);return{x:b4?M:bX+(b1?this.width:0)+bZ+(b3.x||0),y:b4?bX-(b1?this.height:0)+bZ:M+(b3.y||0)}},render:function(){var b1=this,cb=b1.chart,ce=cb.renderer,b3=b1.options,ca=b1.isLog,b7=b1.isLinked,cj=b1.tickPositions,b4=b1.axisTitle,ci=b1.stacks,ck=b1.ticks,bY=b1.minorTicks,b2=b1.alternateBands,cd=b3.stackLabels,bX=b3.alternateGridColor,cl=b1.tickmarkOffset,M=b3.lineWidth,b6,b9=cb.hasRendered,b8=b9&&ac(b1.oldMin)&&!isNaN(b1.oldMin),ch=b1.hasData,cc=b1.showAxis,cg,b0;if(ch||b7){if(b1.minorTickInterval&&!b1.categories){C(b1.getMinorTickPositions(),function(cm){if(!bY[cm]){bY[cm]=new ay(b1,cm,"minor")}if(b8&&bY[cm].isNew){bY[cm].render(null,true)}bY[cm].isActive=true;bY[cm].render()})}C(cj.slice(1).concat([cj[0]]),function(cn,cm){cm=(cm===cj.length-1)?0:cm+1;if(!b7||(cn>=b1.min&&cn<=b1.max)){if(!ck[cn]){ck[cn]=new ay(b1,cn)}if(b8&&ck[cn].isNew){ck[cn].render(cm,true)}ck[cn].isActive=true;ck[cn].render(cm)}});if(bX){C(cj,function(cn,cm){if(cm%2===0&&cn<b1.max){if(!b2[cn]){b2[cn]=new bt(b1)}cg=cn+cl;b0=cj[cm+1]!==k?cj[cm+1]+cl:b1.max;b2[cn].options={from:ca?u(cg):cg,to:ca?u(b0):b0,color:bX};b2[cn].render();b2[cn].isActive=true}})}if(!b1._addedPlotLB){C((b3.plotLines||[]).concat(b3.plotBands||[]),function(cm){b1.addPlotBandOrLine(cm)});b1._addedPlotLB=true}}C([ck,bY,b2],function(cm){var cn;for(cn in cm){if(!cm[cn].isActive){cm[cn].destroy();delete cm[cn]}else{cm[cn].isActive=false}}});if(M){b6=b1.getLinePath(M);if(!b1.axisLine){b1.axisLine=ce.path(b6).attr({stroke:b3.lineColor,"stroke-width":M,zIndex:7}).add(b1.axisGroup)}else{b1.axisLine.animate({d:b6})}b1.axisLine[cc?"show":"hide"]()}if(b4&&cc){b4[b4.isNew?"attr":"animate"](b1.getTitlePosition());b4.isNew=false}if(cd&&cd.enabled){var bZ,b5,cf,L=b1.stackTotalGroup;if(!L){b1.stackTotalGroup=L=ce.g("stack-labels").attr({visibility:ai,zIndex:6}).add()}L.translate(cb.plotLeft,cb.plotTop);for(bZ in ci){b5=ci[bZ];for(cf in b5){b5[cf].render(L)}}}b1.isDirty=false},removePlotBandOrLine:function(bX){var L=this.plotLinesAndBands,M=L.length;while(M--){if(L[M].id===bX){L[M].destroy()}}},setTitle:function(M,bZ){var bX=this.chart,L=this.options,bY=this.axisTitle;L.title=aH(L.title,M);this.axisTitle=bY&&bY.destroy();this.isDirty=true;if(aI(bZ,true)){bX.redraw()}},redraw:function(){var M=this,L=M.chart;if(L.tracker.resetTracker){L.tracker.resetTracker(true)}M.render();C(M.plotLinesAndBands,function(bX){bX.render()});C(M.series,function(bX){bX.isDirty=true})},setCategories:function(bX,bY){var M=this,L=M.chart;M.categories=M.userOptions.categories=bX;C(M.series,function(bZ){bZ.translate();bZ.setTooltipPoints(true)});M.isDirty=true;if(aI(bY,true)){L.redraw()}},destroy:function(){var bX=this,M=bX.stacks,L;aV(bX);for(L in M){a2(M[L]);M[L]=null}C([bX.ticks,bX.minorTicks,bX.alternateBands,bX.plotLinesAndBands],function(bY){a2(bY)});C(["stackTotalGroup","axisLine","axisGroup","gridGroup","labelGroup","axisTitle"],function(bY){if(bX[bY]){bX[bY]=bX[bY].destroy()}})}};function bI(bY,M){var L=M.borderWidth,bX=M.style,bZ=bC(bX.padding);this.chart=bY;this.options=M;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=true;this.label=bY.renderer.label("",0,0,M.shape,null,null,M.useHTML,null,"tooltip").attr({padding:bZ,fill:M.backgroundColor,"stroke-width":L,r:M.borderRadius,zIndex:8}).css(bX).css({padding:0}).hide().add();if(!aX){this.label.shadow(M.shadow)}this.shared=M.shared}bI.prototype={destroy:function(){C(this.crosshairs,function(L){if(L){L.destroy()}});if(this.label){this.label=this.label.destroy()}},move:function(M,b1,L,b0){var bZ=this,bY=bZ.now,bX=bZ.options.animation!==false&&!bZ.isHidden;bc(bY,{x:bX?(2*bY.x+M)/3:M,y:bX?(bY.y+b1)/2:b1,anchorX:bX?(2*bY.anchorX+L)/3:L,anchorY:bX?(bY.anchorY+b0)/2:b0});bZ.label.attr(bY);if(bX&&(e(M-bY.x)>1||e(b1-bY.y)>1)){clearTimeout(this.tooltipTimeout);this.tooltipTimeout=setTimeout(function(){if(bZ){bZ.move(M,b1,L,b0)}},32)}},hide:function(){if(!this.isHidden){var L=this.chart.hoverPoints;this.label.hide();if(L){C(L,function(M){M.setState()})}this.chart.hoverPoints=null;this.isHidden=true}},hideCrosshairs:function(){C(this.crosshairs,function(L){if(L){L.hide()}})},getAnchor:function(b1,b2){var bZ,b0=this.chart,bX=b0.inverted,bY=0,M=0,L;b1=a6(b1);bZ=b1[0].tooltipPos;if(!bZ){C(b1,function(b3){L=b3.series.yAxis;bY+=b3.plotX;M+=(b3.plotLow?(b3.plotLow+b3.plotHigh)/2:b3.plotY)+(!bX&&L?L.top-b0.plotTop:0)});bY/=b1.length;M/=b1.length;bZ=[bX?b0.plotWidth-M:bY,this.shared&&!bX&&b1.length>1&&b2?b2.chartY-b0.plotTop:bX?b0.plotHeight-bY:M]}return af(bZ,m)},getPosition:function(bY,b1,b7){var b0=this.chart,bX=b0.plotLeft,b3=b0.plotTop,b2=b0.plotWidth,b4=b0.plotHeight,M=aI(this.options.distance,12),L=b7.plotX,b8=b7.plotY,b6=L+bX+(b0.inverted?M:-bY-M),b5=b8-b1+b3+15,bZ;if(b6<7){b6=bX+bV(L,0)+M}if((b6+bY)>(bX+b2)){b6-=(b6+bY)-(bX+b2);b5=b8-b1+b3-M;bZ=true}if(b5<b3+5){b5=b3+5;if(bZ&&b8>=b5&&b8<=(b5+b1)){b5=b8+b3+M}}if(b5+b1>b3+b4){b5=bV(b3,b3+b4-b1-M)}return{x:b6,y:b5}},refresh:function(cf,ci){var b1=this,cd=b1.chart,b5=b1.label,b0=b1.options;function b9(){var cn=this,ck=cn.points||a6(cn),cl=ck[0].series,cm;cm=[cl.tooltipHeaderFormatter(ck[0].key)];C(ck,function(co){cl=co.series;cm.push((cl.tooltipFormatter&&cl.tooltipFormatter(co))||co.point.tooltipFormatter(cl.tooltipOptions.pointFormat))});cm.push(b0.footerFormat||"");return cm.join("")}var b7,b6,cj,b3,b4={},cb,b2=[],ch=b0.formatter||b9,ca=cd.hoverPoints,bZ,L,bX=b0.crosshairs,M=b1.shared,b8;b3=b1.getAnchor(cf,ci);b7=b3[0];b6=b3[1];if(M&&!(cf.series&&cf.series.noSharedTooltip)){cd.hoverPoints=cf;if(ca){C(ca,function(ck){ck.setState()})}C(cf,function(ck){ck.setState(aJ);b2.push(ck.getLabelConfig())});b4={x:cf[0].category,y:cf[0].y};b4.points=b2;cf=cf[0]}else{b4=cf.getLabelConfig()}cb=ch.call(b4);b8=cf.series;cj=M||!b8.isCartesian||b8.tooltipOutsidePlot||cd.isInsidePlot(b7,b6);if(cb===false||!cj){this.hide()}else{if(b1.isHidden){b5.show()}b5.attr({text:cb});L=b0.borderColor||cf.color||b8.color||"#606060";b5.attr({stroke:L});bZ=(b0.positioner||b1.getPosition).call(b1,b5.width,b5.height,{plotX:b7,plotY:b6});b1.move(m(bZ.x),m(bZ.y),b7+cd.plotLeft,b6+cd.plotTop);b1.isHidden=false}if(bX){bX=a6(bX);var ce,cg=bX.length,cc,bY;while(cg--){bY=cf.series[cg?"yAxis":"xAxis"];if(bX[cg]&&bY){ce=bY.getPlotLinePath(cg?aI(cf.stackY,cf.y):cf.x,1);if(b1.crosshairs[cg]){b1.crosshairs[cg].attr({d:ce,visibility:ai})}else{cc={"stroke-width":bX[cg].width||1,stroke:bX[cg].color||"#C0C0C0",zIndex:bX[cg].zIndex||2};if(bX[cg].dashStyle){cc.dashstyle=bX[cg].dashStyle}b1.crosshairs[cg]=cd.renderer.path(ce).attr(cc).add()}}}}bj(cd,"tooltipRefresh",{text:cb,x:b7+cd.plotLeft,y:b6+cd.plotTop,borderColor:L})}};function G(bX,M){var L=aX?"":M.chart.zoomType;this.zoomX=/x/.test(L);this.zoomY=/y/.test(L);this.options=M;this.chart=bX;this.init(bX,M.tooltip)}G.prototype={normalizeMouseEvent:function(bY){var bX,M,bZ,L;bY=bY||aT.event;if(!bY.target){bY.target=bY.srcElement}bY=O(bY);L=bY.touches?bY.touches.item(0):bY;this.chartPosition=bX=bG(this.chart.container);if(L.pageX===k){M=bY.x;bZ=bY.y}else{M=L.pageX-bX.left;bZ=L.pageY-bX.top}return bc(bY,{chartX:m(M),chartY:m(bZ)})},getMouseCoordinates:function(M){var bX={xAxis:[],yAxis:[]},L=this.chart;C(L.axes,function(bY){var b0=bY.isXAxis,bZ=L.inverted?!b0:b0;bX[b0?"xAxis":"yAxis"].push({axis:bY,value:bY.translate((bZ?M.chartX-L.plotLeft:bY.top+bY.len-M.chartY)-bY.minPixelPadding,true)})});return bX},getIndex:function(M){var L=this.chart;return L.inverted?L.plotHeight+L.plotTop-M.chartY:M.chartX-L.plotLeft},onmousemove:function(b2){var b1=this,b3=b1.chart,bZ=b3.series,b7=b3.tooltip,b5,b6,L=b3.hoverPoint,b4=b3.hoverSeries,bY,bX,M=b3.chartWidth,b0=b1.getIndex(b2);if(b7&&b1.options.tooltip.shared&&!(b4&&b4.noSharedTooltip)){b6=[];bY=bZ.length;for(bX=0;bX<bY;bX++){if(bZ[bX].visible&&bZ[bX].options.enableMouseTracking!==false&&!bZ[bX].noSharedTooltip&&bZ[bX].tooltipPoints.length){b5=bZ[bX].tooltipPoints[b0];b5._dist=e(b0-b5[bZ[bX].xAxis.tooltipPosName||"plotX"]);M=aj(M,b5._dist);b6.push(b5)}}bY=b6.length;while(bY--){if(b6[bY]._dist>M){b6.splice(bY,1)}}if(b6.length&&(b6[0].plotX!==b1.hoverX)){b7.refresh(b6,b2);b1.hoverX=b6[0].plotX}}if(b4&&b4.tracker){b5=b4.tooltipPoints[b0];if(b5&&b5!==L){b5.onMouseOver()}}},resetTracker:function(b1){var b0=this,bY=b0.chart,M=bY.hoverSeries,L=bY.hoverPoint,bZ=bY.tooltip,bX=bZ&&bZ.shared?bY.hoverPoints:L;b1=b1&&bZ&&bX;if(b1&&a6(bX)[0].plotX===k){b1=false}if(b1){bZ.refresh(bX)}else{if(L){L.onMouseOut()}if(M){M.onMouseOut()}if(bZ){bZ.hide();bZ.hideCrosshairs()}b0.hoverX=null}},setDOMEvents:function(){var b3=true,bZ=this,b0=bZ.chart,L=b0.container,bY,M=(bZ.zoomX&&!b0.inverted)||(bZ.zoomY&&b0.inverted),b1=(bZ.zoomY&&!b0.inverted)||(bZ.zoomX&&b0.inverted);function bX(){if(bZ.selectionMarker){var b7={xAxis:[],yAxis:[]},b5=bZ.selectionMarker.getBBox(),b8=b5.x-b0.plotLeft,b6=b5.y-b0.plotTop,b4;if(bY){C(b0.axes,function(ca){if(ca.options.zoomEnabled!==false){var cd=ca.isXAxis,cc=b0.inverted?!cd:cd,b9=ca.translate(cc?b8:b0.plotHeight-b6-b5.height,true,0,0,1),cb=ca.translate((cc?b8+b5.width:b0.plotHeight-b6)-2*ca.minPixelPadding,true,0,0,1);if(!isNaN(b9)&&!isNaN(cb)){b7[cd?"xAxis":"yAxis"].push({axis:ca,min:aj(b9,cb),max:bV(b9,cb)});b4=true}}});if(b4){bj(b0,"selection",b7,function(b9){b0.zoom(b9)})}}bZ.selectionMarker=bZ.selectionMarker.destroy()}if(b0){bQ(L,{cursor:"auto"});b0.cancelClick=bY;b0.mouseIsDown=bY=false}aV(br,B?"touchend":"mouseup",bX)}bZ.hideTooltipOnMouseMove=function(b4){b4=O(b4);if(bZ.chartPosition&&b0.hoverSeries&&b0.hoverSeries.isCartesian&&!b0.isInsidePlot(b4.pageX-bZ.chartPosition.left-b0.plotLeft,b4.pageY-bZ.chartPosition.top-b0.plotTop)){bZ.resetTracker()}};bZ.hideTooltipOnMouseLeave=function(){bZ.resetTracker();bZ.chartPosition=null};L.onmousedown=function(b4){b4=bZ.normalizeMouseEvent(b4);if(!B&&b4.preventDefault){b4.preventDefault()}b0.mouseIsDown=true;b0.cancelClick=false;b0.mouseDownX=bZ.mouseDownX=b4.chartX;bZ.mouseDownY=b4.chartY;v(br,B?"touchend":"mouseup",bX)};var b2=function(b9){if(b9&&b9.touches&&b9.touches.length>1){return}b9=bZ.normalizeMouseEvent(b9);if(!B){b9.returnValue=false}var b4=b9.chartX,ca=b9.chartY,b6=!b0.isInsidePlot(b4-b0.plotLeft,ca-b0.plotTop);if(B&&b9.type==="touchstart"){if(P(b9.target,"isTracker")){if(!b0.runTrackerClick){b9.preventDefault()}}else{if(!b0.runChartClick&&!b6){b9.preventDefault()}}}if(b6){if(b4<b0.plotLeft){b4=b0.plotLeft}else{if(b4>b0.plotLeft+b0.plotWidth){b4=b0.plotLeft+b0.plotWidth}}if(ca<b0.plotTop){ca=b0.plotTop}else{if(ca>b0.plotTop+b0.plotHeight){ca=b0.plotTop+b0.plotHeight}}}if(b0.mouseIsDown&&b9.type!=="touchstart"){bY=Math.sqrt(Math.pow(bZ.mouseDownX-b4,2)+Math.pow(bZ.mouseDownY-ca,2));if(bY>10){var b8=b0.isInsidePlot(bZ.mouseDownX-b0.plotLeft,bZ.mouseDownY-b0.plotTop);if(b0.hasCartesianSeries&&(bZ.zoomX||bZ.zoomY)&&b8){if(!bZ.selectionMarker){bZ.selectionMarker=b0.renderer.rect(b0.plotLeft,b0.plotTop,M?1:b0.plotWidth,b1?1:b0.plotHeight,0).attr({fill:bZ.options.chart.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()}}if(bZ.selectionMarker&&M){var b7=b4-bZ.mouseDownX;bZ.selectionMarker.attr({width:e(b7),x:(b7>0?0:b7)+bZ.mouseDownX})}if(bZ.selectionMarker&&b1){var b5=ca-bZ.mouseDownY;bZ.selectionMarker.attr({height:e(b5),y:(b5>0?0:b5)+bZ.mouseDownY})}if(b8&&!bZ.selectionMarker&&bZ.options.chart.panning){b0.pan(b4)}}}if(!b6){bZ.onmousemove(b9)}b3=b6;return b6||!b0.hasCartesianSeries};L.onmousemove=b2;v(L,"mouseleave",bZ.hideTooltipOnMouseLeave);v(br,"mousemove",bZ.hideTooltipOnMouseMove);L.ontouchstart=function(b4){if(bZ.zoomX||bZ.zoomY){L.onmousedown(b4)}b2(b4)};L.ontouchmove=b2;L.ontouchend=function(){if(bY){bZ.resetTracker()}};L.onclick=function(b7){var b5=b0.hoverPoint,b6,b4;b7=bZ.normalizeMouseEvent(b7);b7.cancelBubble=true;if(!b0.cancelClick){if(b5&&(P(b7.target,"isTracker")||P(b7.target.parentNode,"isTracker"))){b6=b5.plotX;b4=b5.plotY;bc(b5,{pageX:bZ.chartPosition.left+b0.plotLeft+(b0.inverted?b0.plotWidth-b4:b6),pageY:bZ.chartPosition.top+b0.plotTop+(b0.inverted?b0.plotHeight-b6:b4)});bj(b5.series,"click",bc(b7,{point:b5}));b5.firePointEvent("click",b7)}else{bc(b7,bZ.getMouseCoordinates(b7));if(b0.isInsidePlot(b7.chartX-b0.plotLeft,b7.chartY-b0.plotTop)){bj(b0,"click",b7)}}}}},destroy:function(){var bX=this,M=bX.chart,L=M.container;if(M.trackerGroup){M.trackerGroup=M.trackerGroup.destroy()}aV(L,"mouseleave",bX.hideTooltipOnMouseLeave);aV(br,"mousemove",bX.hideTooltipOnMouseMove);L.onclick=L.onmousedown=L.onmousemove=L.ontouchstart=L.ontouchend=L.ontouchmove=null;clearInterval(this.tooltipTimeout)},init:function(M,L){if(!M.trackerGroup){M.trackerGroup=M.renderer.g("tracker").attr({zIndex:9}).add()}if(L.enabled){M.tooltip=new bI(M,L)}this.setDOMEvents()}};function bm(L){this.init(L)}bm.prototype={init:function(bX){var M=this,L=M.options=bX.options.legend;if(!L.enabled){return}var bY=L.itemStyle,bZ=aI(L.padding,8),b0=L.itemMarginTop||0;M.baseline=bC(bY.fontSize)+3+b0;M.itemStyle=bY;M.itemHiddenStyle=aH(bY,L.itemHiddenStyle);M.itemMarginTop=b0;M.padding=bZ;M.initialItemX=bZ;M.initialItemY=bZ-5;M.maxItemWidth=0;M.chart=bX;M.itemHeight=0;M.lastLineHeight=0;M.render();v(M.chart,"endResize",function(){M.positionCheckboxes()})},colorizeItem:function(b7,bY){var b2=this,b8=b2.options,b0=b7.legendItem,b1=b7.legendLine,bX=b7.legendSymbol,b5=b2.itemHiddenStyle.color,b4=bY?b8.itemStyle.color:b5,bZ=bY?b7.color:b5,L=b7.options&&b7.options.marker,b6={stroke:bZ,fill:bZ},b3,M;if(b0){b0.css({fill:b4})}if(b1){b1.attr({stroke:bZ})}if(bX){if(L){L=b7.convertAttribs(L);for(b3 in L){M=L[b3];if(M!==k){b6[b3]=M}}}bX.attr(b6)}},positionItem:function(b2){var b0=this,b3=b0.options,b1=b3.symbolPadding,L=!b3.rtl,M=b2._legendItemPos,bZ=M[0],bY=M[1],bX=b2.checkbox;if(b2.legendGroup){b2.legendGroup.translate(L?bZ:b0.legendWidth-bZ-2*b1-4,bY)}if(bX){bX.x=bZ;bX.y=bY}},destroyItem:function(L){var M=L.checkbox;C(["legendItem","legendLine","legendSymbol","legendGroup"],function(bX){if(L[bX]){L[bX].destroy()}});if(M){bE(L.checkbox)}},destroy:function(){var L=this,bX=L.group,M=L.box;if(M){L.box=M.destroy()}if(bX){L.group=bX.destroy()}},positionCheckboxes:function(){var L=this;C(L.allItems,function(M){var bX=M.checkbox,bY=L.group.alignAttr;if(bX){bQ(bX,{left:(bY.translateX+M.legendItemWidth+bX.x-20)+U,top:(bY.translateY+bX.y+3)+U})}})},renderItem:function(ce){var M=this,b8=M.chart,b9=b8.renderer,bY=M.options,cf=bY.layout==="horizontal",cg=bY.symbolWidth,L=bY.symbolPadding,b2=M.itemStyle,bX=M.itemHiddenStyle,b7=M.padding,cc=!bY.rtl,ca,b5=bY.width,b1=bY.itemMarginBottom||0,cd=M.itemMarginTop,cb=M.initialItemX,b0,bZ,b6=ce.legendItem,b4=ce.series||ce,b3=b4.options,ch=b3.showCheckbox;if(!b6){ce.legendGroup=b9.g("legend-item").attr({zIndex:1}).add(M.scrollGroup);b4.drawLegendSymbol(M,ce);ce.legendItem=b6=b9.text(bY.labelFormatter.call(ce),cc?cg+L:-L,M.baseline,bY.useHTML).css(aH(ce.visible?b2:bX)).attr({align:cc?"left":"right",zIndex:2}).add(ce.legendGroup);ce.legendGroup.on("mouseover",function(){ce.setState(aJ);b6.css(M.options.itemHoverStyle)}).on("mouseout",function(){b6.css(ce.visible?b2:bX);ce.setState()}).on("click",function(cj){var ck="legendItemClick",ci=function(){ce.setVisible()};cj={browserEvent:cj};if(ce.firePointEvent){ce.firePointEvent(ck,cj,ci)}else{bj(ce,ck,cj,ci)}});M.colorizeItem(ce,ce.visible);if(b3&&ch){ce.checkbox=be("input",{type:"checkbox",checked:ce.selected,defaultChecked:ce.selected},bY.itemCheckboxStyle,b8.container);v(ce.checkbox,"click",function(ci){var cj=ci.target;bj(ce,"checkboxClick",{checked:cj.checked},function(){ce.select()})})}}b0=b6.getBBox();bZ=ce.legendItemWidth=bY.itemWidth||cg+L+b0.width+b7+(ch?20:0);M.itemHeight=ca=b0.height;if(cf&&M.itemX-cb+bZ>(b5||(b8.chartWidth-2*b7-cb))){M.itemX=cb;M.itemY+=cd+M.lastLineHeight+b1;M.lastLineHeight=0}M.maxItemWidth=bV(M.maxItemWidth,bZ);M.lastItemY=cd+M.itemY+b1;M.lastLineHeight=bV(ca,M.lastLineHeight);ce._legendItemPos=[M.itemX,M.itemY];if(cf){M.itemX+=bZ}else{M.itemY+=cd+ca+b1;M.lastLineHeight=ca}M.offsetWidth=b5||bV(cf?M.itemX-cb:bZ,M.offsetWidth)},render:function(){var b4=this,b1=b4.chart,b0=b1.renderer,bY=b4.group,b2,bZ,b6,b5,bX=b4.box,b7=b4.options,b3=b4.padding,L=b7.borderWidth,M=b7.backgroundColor;b4.itemX=b4.initialItemX;b4.itemY=b4.initialItemY;b4.offsetWidth=0;b4.lastItemY=0;if(!bY){b4.group=bY=b0.g("legend").attr({zIndex:7}).add();b4.contentGroup=b0.g().attr({zIndex:1}).add(bY);b4.scrollGroup=b0.g().add(b4.contentGroup);b4.clipRect=b0.clipRect(0,0,9999,b1.chartHeight);b4.contentGroup.clip(b4.clipRect)}b2=[];C(b1.series,function(b9){var b8=b9.options;if(!b8.showInLegend){return}b2=b2.concat(b9.legendItems||(b8.legendType==="point"?b9.data:b9))});aD(b2,function(b9,b8){return((b9.options&&b9.options.legendIndex)||0)-((b8.options&&b8.options.legendIndex)||0)});if(b7.reversed){b2.reverse()}b4.allItems=b2;b4.display=bZ=!!b2.length;C(b2,function(b8){b4.renderItem(b8)});b6=b7.width||b4.offsetWidth;b5=b4.lastItemY+b4.lastLineHeight;b5=b4.handleOverflow(b5);if(L||M){b6+=b3;b5+=b3;if(!bX){b4.box=bX=b0.rect(0,0,b6,b5,b7.borderRadius,L||0).attr({stroke:b7.borderColor,"stroke-width":L||0,fill:M||x}).add(bY).shadow(b7.shadow);bX.isNew=true}else{if(b6>0&&b5>0){bX[bX.isNew?"attr":"animate"](bX.crisp(null,null,null,b6,b5));bX.isNew=false}}bX[bZ?"show":"hide"]()}b4.legendWidth=b6;b4.legendHeight=b5;C(b2,function(b8){b4.positionItem(b8)});if(bZ){bY.align(bc({width:b6,height:b5},b7),true,b1.spacingBox)}if(!b1.isResizing){this.positionCheckboxes()}},handleOverflow:function(b8){var b7=this,b5=this.chart,b4=b5.renderer,M,ca=this.options,bX=ca.y,b2=ca.verticalAlign==="top",b6=b5.spacingBox.height+(b2?-bX:bX)-this.padding,b9=ca.maxHeight,bZ,b1=this.clipRect,b3=ca.navigation,bY=aI(b3.animation,true),b0=b3.arrowSize||12,L=this.nav;if(ca.layout==="horizontal"){b6/=2}if(b9){b6=aj(b6,b9)}if(b8>b6){this.clipHeight=bZ=b6-20;this.pageCount=M=ax(b8/bZ);this.currentPage=aI(this.currentPage,1);this.fullHeight=b8;b1.attr({height:bZ});if(!L){this.nav=L=b4.g().attr({zIndex:1}).add(this.group);this.up=b4.symbol("triangle",0,0,b0,b0).on("click",function(){b7.scroll(-1,bY)}).add(L);this.pager=b4.text("",15,10).css(b3.style).add(L);this.down=b4.symbol("triangle-down",0,0,b0,b0).on("click",function(){b7.scroll(1,bY)}).add(L)}b7.scroll(0);b8=b6}else{if(L){b1.attr({height:b5.chartHeight});L.hide();this.scrollGroup.attr({translateY:1})}}return b8},scroll:function(bZ,bX){var M=this.pageCount,b0=this.currentPage+bZ,bY=this.clipHeight,b2=this.options.navigation,b3=b2.activeColor,b1=b2.inactiveColor,L=this.pager,b4=this.padding;if(b0>M){b0=M}if(b0>0){if(bX!==k){bR(bX,this.chart)}this.nav.attr({translateX:b4,translateY:bY+7,visibility:ai});this.up.attr({fill:b0===1?b1:b3}).css({cursor:b0===1?"default":"pointer"});L.attr({text:b0+"/"+this.pageCount});this.down.attr({x:18+this.pager.getBBox().width,fill:b0===M?b1:b3}).css({cursor:b0===M?"default":"pointer"});this.scrollGroup.animate({translateY:-aj(bY*(b0-1),this.fullHeight-bY+b4)+1});L.attr({text:b0+"/"+M});this.currentPage=b0}}};function ba(b1,b2){var bX,M=b1.series;b1.series=null;bX=aH(bo,b1);bX.series=b1.series=M;var b0=bX.chart,L=b0.margin,bY=bS(L)?L:[L,L,L,L];this.optionsMarginTop=aI(b0.marginTop,bY[0]);this.optionsMarginRight=aI(b0.marginRight,bY[1]);this.optionsMarginBottom=aI(b0.marginBottom,bY[2]);this.optionsMarginLeft=aI(b0.marginLeft,bY[3]);var bZ=b0.events;this.runChartClick=bZ&&!!bZ.click;this.callback=b2;this.isResizing=0;this.options=bX;this.axes=[];this.series=[];this.hasCartesianSeries=b0.showAxes;this.init(bZ)}ba.prototype={initSeries:function(L){var bY=this,bZ=bY.options.chart,bX=L.type||bZ.type||bZ.defaultSeriesType,M=new a[bX]();M.init(this,L);return M},addSeries:function(L,bZ,bY){var M,bX=this;if(L){bR(bY,bX);bZ=aI(bZ,true);bj(bX,"addSeries",{options:L},function(){M=bX.initSeries(L);bX.isDirtyLegend=true;if(bZ){bX.redraw()}})}return M},isInsidePlot:function(bY,bX,M){var L=M?bX:bY,bZ=M?bY:bX;return L>=0&&L<=this.plotWidth&&bZ>=0&&bZ<=this.plotHeight},adjustTickAmounts:function(){if(this.options.chart.alignTicks!==false){C(this.axes,function(L){L.adjustTickAmount()})}this.maxTicks=null},redraw:function(bX){var b6=this,b5=b6.axes,b0=b6.series,b8=b6.tracker,b9=b6.legend,L=b6.isDirtyLegend,b2,bZ=b6.isDirtyBox,M=b0.length,bY=M,b1,b4=b6.renderer,b7=b4.isHidden(),b3=[];bR(bX,b6);if(b7){b6.cloneRenderTo()}while(bY--){b1=b0[bY];if(b1.isDirty&&b1.options.stacking){b2=true;break}}if(b2){bY=M;while(bY--){b1=b0[bY];if(b1.options.stacking){b1.isDirty=true}}}C(b0,function(ca){if(ca.isDirty){if(ca.options.legendType==="point"){L=true}}});if(L&&b9.options.enabled){b9.render();b6.isDirtyLegend=false}if(b6.hasCartesianSeries){if(!b6.isResizing){b6.maxTicks=null;C(b5,function(ca){ca.setScale()})}b6.adjustTickAmounts();b6.getMargins();C(b5,function(ca){if(ca.isDirtyExtremes){ca.isDirtyExtremes=false;b3.push(function(){bj(ca,"afterSetExtremes",ca.getExtremes())})}if(ca.isDirty||bZ||b2){ca.redraw();bZ=true}})}if(bZ){b6.drawChartBox()}C(b0,function(ca){if(ca.isDirty&&ca.visible&&(!ca.isCartesian||ca.xAxis)){ca.redraw()}});if(b8&&b8.resetTracker){b8.resetTracker(true)}b4.draw();bj(b6,"redraw");if(b7){b6.cloneRenderTo(true)}C(b3,function(ca){ca.call()})},showLoading:function(bZ){var bX=this,L=bX.options,bY=bX.loadingDiv;var M=L.loading;if(!bY){bX.loadingDiv=bY=be(I,{className:aY+"loading"},bc(M.style,{left:bX.plotLeft+U,top:bX.plotTop+U,width:bX.plotWidth+U,height:bX.plotHeight+U,zIndex:10,display:x}),bX.container);bX.loadingSpan=be("span",null,M.labelStyle,bY)}bX.loadingSpan.innerHTML=bZ||L.lang.loading;if(!bX.loadingShown){bQ(bY,{opacity:0,display:""});p(bY,{opacity:M.style.opacity},{duration:M.showDuration||0});bX.loadingShown=true}},hideLoading:function(){var L=this.options,M=this.loadingDiv;if(M){p(M,{opacity:0},{duration:L.loading.hideDuration||100,complete:function(){bQ(M,{display:x})}})}this.loadingShown=false},get:function(b1){var bZ=this,b0=bZ.axes,bX=bZ.series;var M,L,bY;for(M=0;M<b0.length;M++){if(b0[M].options.id===b1){return b0[M]}}for(M=0;M<bX.length;M++){if(bX[M].options.id===b1){return bX[M]}}for(M=0;M<bX.length;M++){bY=bX[M].points||[];for(L=0;L<bY.length;L++){if(bY[L].id===b1){return bY[L]}}}return null},getAxes:function(){var bZ=this,bX=this.options;var L=bX.xAxis||{},b0=bX.yAxis||{},M,bY;L=a6(L);C(L,function(b2,b1){b2.index=b1;b2.isX=true});b0=a6(b0);C(b0,function(b2,b1){b2.index=b1});M=L.concat(b0);C(M,function(b1){bY=new z(bZ,b1)});bZ.adjustTickAmounts()},getSelectedPoints:function(){var L=[];C(this.series,function(M){L=L.concat(bn(M.points,function(bX){return bX.selected}))});return L},getSelectedSeries:function(){return bn(this.series,function(L){return L.selected})},showResetZoom:function(){var bX=this,b0=bo.lang,M=bX.options.chart.resetZoomButton,bZ=M.theme,L=bZ.states,bY=M.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=bX.renderer.button(b0.resetZoom,null,null,function(){bX.zoomOut()},bZ,L&&L.hover).attr({align:M.position.align,title:b0.resetZoomTitle}).add().align(M.position,false,bX[bY]);this.resetZoomButton.alignTo=bY},zoomOut:function(){var L=this,M=L.resetZoomButton;bj(L,"selection",{resetSelection:true},function(){L.zoom()});if(M){L.resetZoomButton=M.destroy()}},zoom:function(bX){var M=this,L;if(!bX||bX.resetSelection){C(M.axes,function(bY){L=bY.zoom()})}else{C(bX.xAxis.concat(bX.yAxis),function(bY){var bZ=bY.axis;if(M.tracker[bZ.isXAxis?"zoomX":"zoomY"]){L=bZ.zoom(bY.min,bY.max)}})}if(!M.resetZoomButton){M.showResetZoom()}if(L){M.redraw(aI(M.options.chart.animation,M.pointCount<100))}},pan:function(b1){var b0=this;var bX=b0.xAxis[0],L=b0.mouseDownX,bY=bX.pointRange/2,b3=bX.getExtremes(),bZ=bX.translate(L-b1,true)+bY,b2=bX.translate(L+b0.plotWidth-b1,true)-bY,M=b0.hoverPoints;if(M){C(M,function(b4){b4.setState()})}if(bX.series.length&&bZ>aj(b3.dataMin,b3.min)&&b2<bV(b3.dataMax,b3.max)){bX.setExtremes(bZ,b2,true,false,{trigger:"pan"})}b0.mouseDownX=b1;bQ(b0.container,{cursor:"move"})},setTitle:function(bZ,L){var bY=this,M=bY.options,bX,b0;bY.chartTitleOptions=bX=aH(M.title,bZ);bY.chartSubtitleOptions=b0=aH(M.subtitle,L);C([["title",bZ,bX],["subtitle",L,b0]],function(b1){var b2=b1[0],b5=bY[b2],b4=b1[1],b3=b1[2];if(b5&&b4){bY[b2]=b5=b5.destroy()}if(b3&&b3.text&&!b5){bY[b2]=bY.renderer.text(b3.text,0,0,b3.useHTML).attr({align:b3.align,"class":aY+b2,zIndex:b3.zIndex||4}).css(b3.style).add().align(b3,false,bY.spacingBox)}})},getChartSize:function(){var L=this,bX=L.options.chart,M=L.renderToClone||L.renderTo;L.containerWidth=aE(M,"width");L.containerHeight=aE(M,"height");L.chartWidth=bX.width||L.containerWidth||600;L.chartHeight=bX.height||(L.containerHeight>19?L.containerHeight:400)},cloneRenderTo:function(M){var bX=this.renderToClone,L=this.container;if(M){if(bX){this.renderTo.appendChild(L);bE(bX);delete this.renderToClone}}else{if(L){this.renderTo.removeChild(L)}this.renderToClone=bX=this.renderTo.cloneNode(0);bQ(bX,{position:al,top:"-9999px",display:"block"});br.body.appendChild(bX);if(L){bX.appendChild(L)}}},getContainer:function(){var bZ=this,M,b1=bZ.options.chart,bY,bX,b0,L;bZ.renderTo=b0=b1.renderTo;L=aY+a1++;if(bh(b0)){bZ.renderTo=b0=br.getElementById(b0)}if(!b0){bD(13,true)}b0.innerHTML="";if(!b0.offsetWidth){bZ.cloneRenderTo()}bZ.getChartSize();bY=bZ.chartWidth;bX=bZ.chartHeight;bZ.container=M=be(I,{className:aY+"container"+(b1.className?" "+b1.className:""),id:L},bc({position:H,overflow:ae,width:bY+U,height:bX+U,textAlign:"left",lineHeight:"normal",zIndex:0},b1.style),bZ.renderToClone||b0);bZ.renderer=b1.forExport?new d(M,bY,bX,true):new bH(M,bY,bX);if(aX){bZ.renderer.create(bZ,M,bY,bX)}},getMargins:function(){var ca=this,b3=ca.options.chart,cf=b3.spacingTop,M=b3.spacingRight,b7=b3.spacingBottom,b0=b3.spacingLeft,b1,bZ=ca.legend,b5=ca.optionsMarginTop,b6=ca.optionsMarginLeft,ce=ca.optionsMarginRight,cb=ca.optionsMarginBottom,bY=ca.chartTitleOptions,cd=ca.chartSubtitleOptions,b4=ca.options.legend,b2=aI(b4.margin,10),b9=b4.x,b8=b4.y,cc=b4.align,L=b4.verticalAlign,bX;ca.resetMargins();b1=ca.axisOffset;if((ca.title||ca.subtitle)&&!ac(ca.optionsMarginTop)){bX=bV((ca.title&&!bY.floating&&!bY.verticalAlign&&bY.y)||0,(ca.subtitle&&!cd.floating&&!cd.verticalAlign&&cd.y)||0);if(bX){ca.plotTop=bV(ca.plotTop,bX+aI(bY.margin,15)+cf)}}if(bZ.display&&!b4.floating){if(cc==="right"){if(!ac(ce)){ca.marginRight=bV(ca.marginRight,bZ.legendWidth-b9+b2+M)}}else{if(cc==="left"){if(!ac(b6)){ca.plotLeft=bV(ca.plotLeft,bZ.legendWidth+b9+b2+b0)}}else{if(L==="top"){if(!ac(b5)){ca.plotTop=bV(ca.plotTop,bZ.legendHeight+b8+b2+cf)}}else{if(L==="bottom"){if(!ac(cb)){ca.marginBottom=bV(ca.marginBottom,bZ.legendHeight-b8+b2+b7)}}}}}}if(ca.extraBottomMargin){ca.marginBottom+=ca.extraBottomMargin}if(ca.extraTopMargin){ca.plotTop+=ca.extraTopMargin}if(ca.hasCartesianSeries){C(ca.axes,function(cg){cg.getOffset()})}if(!ac(b6)){ca.plotLeft+=b1[3]}if(!ac(b5)){ca.plotTop+=b1[0]}if(!ac(cb)){ca.marginBottom+=b1[2]}if(!ac(ce)){ca.marginRight+=b1[1]}ca.setChartSize()},initReflow:function(){var M=this,bZ=M.options.chart,bY=M.renderTo,bX;function L(b3){var b1=bZ.width||aE(bY,"width"),b0=bZ.height||aE(bY,"height"),b2=b3?b3.target:aT;if(b1&&b0&&(b2===aT||b2===br)){if(b1!==M.containerWidth||b0!==M.containerHeight){clearTimeout(bX);M.reflowTimeout=bX=setTimeout(function(){if(M.container){M.resize(b1,b0,false)}},100)}M.containerWidth=b1;M.containerHeight=b0}}v(aT,"resize",L);v(M,"destroy",function(){aV(aT,"resize",L)})},resize:function(L,b5,bZ){var b3=this,b2,bY,b0,bX=b3.resetZoomButton,M=b3.title,b4=b3.subtitle,b1;b3.isResizing+=1;b1=function(){if(b3){bj(b3,"endResize",null,function(){b3.isResizing-=1})}};bR(bZ,b3);b3.oldChartHeight=b3.chartHeight;b3.oldChartWidth=b3.chartWidth;if(ac(L)){b3.chartWidth=b2=m(L)}if(ac(b5)){b3.chartHeight=bY=m(b5)}bQ(b3.container,{width:b2+U,height:bY+U});b3.renderer.setSize(b2,bY,bZ);b3.plotWidth=b2-b3.plotLeft-b3.marginRight;b3.plotHeight=bY-b3.plotTop-b3.marginBottom;b3.maxTicks=null;C(b3.axes,function(b6){b6.isDirty=true;b6.setScale()});C(b3.series,function(b6){b6.isDirty=true});b3.isDirtyLegend=true;b3.isDirtyBox=true;b3.getMargins();b0=b3.spacingBox;if(M){M.align(null,null,b0)}if(b4){b4.align(null,null,b0)}if(bX&&bX.align){bX.align(null,null,b3[bX.alignTo])}b3.redraw(bZ);b3.oldChartHeight=null;bj(b3,"resize");if(bW===false){b1()}else{setTimeout(b1,(bW&&bW.duration)||500)}},setChartSize:function(){var b5=this,bZ=b5.inverted,b1=b5.chartWidth,bY=b5.chartHeight,b3=b5.options.chart,b4=b3.spacingTop,b0=b3.spacingRight,L=b3.spacingBottom,b2=b3.spacingLeft,bX,b8,b7,b6,M;b5.plotLeft=bX=m(b5.plotLeft);b5.plotTop=b8=m(b5.plotTop);b5.plotWidth=b7=m(b1-bX-b5.marginRight);b5.plotHeight=b6=m(bY-b8-b5.marginBottom);b5.plotSizeX=bZ?b6:b7;b5.plotSizeY=bZ?b7:b6;b5.plotBorderWidth=M=b3.plotBorderWidth||0;b5.spacingBox={x:b2,y:b4,width:b1-b2-b0,height:bY-b4-L};b5.plotBox={x:bX,y:b8,width:b7,height:b6};b5.clipBox={x:M/2,y:M/2,width:b5.plotSizeX-M,height:b5.plotSizeY-M};C(b5.axes,function(b9){b9.setAxisSize();b9.setAxisTranslation()})},resetMargins:function(){var bX=this,b0=bX.options.chart,bZ=b0.spacingTop,M=b0.spacingRight,L=b0.spacingBottom,bY=b0.spacingLeft;bX.plotTop=aI(bX.optionsMarginTop,bZ);bX.marginRight=aI(bX.optionsMarginRight,M);bX.marginBottom=aI(bX.optionsMarginBottom,L);bX.plotLeft=aI(bX.optionsMarginLeft,bY);bX.axisOffset=[0,0,0,0]},drawChartBox:function(){var b5=this,bX=b5.options.chart,ca=b5.renderer,ce=b5.chartWidth,bY=b5.chartHeight,b9=b5.chartBackground,b0=b5.plotBackground,cf=b5.plotBorder,b7=b5.plotBGImage,cb=bX.borderWidth||0,ch=bX.backgroundColor,b1=bX.plotBackgroundColor,M=bX.plotBackgroundImage,cg=bX.plotBorderWidth||0,L,b2,b6=b5.plotLeft,b8=b5.plotTop,bZ=b5.plotWidth,cd=b5.plotHeight,b3=b5.plotBox,cc=b5.clipRect,b4=b5.clipBox;L=cb+(bX.shadow?8:0);if(cb||ch){if(!b9){b2={fill:ch||x};if(cb){b2.stroke=bX.borderColor;b2["stroke-width"]=cb}b5.chartBackground=ca.rect(L/2,L/2,ce-L,bY-L,bX.borderRadius,cb).attr(b2).add().shadow(bX.shadow)}else{b9.animate(b9.crisp(null,null,null,ce-L,bY-L))}}if(b1){if(!b0){b5.plotBackground=ca.rect(b6,b8,bZ,cd,0).attr({fill:b1}).add().shadow(bX.plotShadow)}else{b0.animate(b3)}}if(M){if(!b7){b5.plotBGImage=ca.image(M,b6,b8,bZ,cd).add()}else{b7.animate(b3)}}if(!cc){b5.clipRect=ca.clipRect(b4)}else{cc.animate({width:b4.width,height:b4.height})}if(cg){if(!cf){b5.plotBorder=ca.rect(b6,b8,bZ,cd,0,cg).attr({stroke:bX.plotBorderColor,"stroke-width":cg,zIndex:1}).add()}else{cf.animate(cf.crisp(null,b6,b8,bZ,cd))}}b5.isDirtyBox=false},propFromSeries:function(){var bY=this,b0=bY.options.chart,L,M=bY.options.series,bX,bZ;C(["inverted","angular","polar"],function(b1){L=a[b0.type||b0.defaultSeriesType];bZ=(bY[b1]||b0[b1]||(L&&L.prototype[b1]));bX=M&&M.length;while(!bZ&&bX--){L=a[M[bX].type];if(L&&L.prototype[b1]){bZ=true}}bY[b1]=bZ})},render:function(){var bX=this,bZ=bX.axes,bY=bX.renderer,L=bX.options;var b1=L.labels,M=L.credits,b0;bX.setTitle();bX.legend=new bm(bX);C(bZ,function(b2){b2.setScale()});bX.getMargins();bX.maxTicks=null;C(bZ,function(b2){b2.setTickPositions(true);b2.setMaxTicks()});bX.adjustTickAmounts();bX.getMargins();bX.drawChartBox();if(bX.hasCartesianSeries){C(bZ,function(b2){b2.render()})}if(!bX.seriesGroup){bX.seriesGroup=bY.g("series-group").attr({zIndex:3}).add()}C(bX.series,function(b2){b2.translate();b2.setTooltipPoints();b2.render()});if(b1.items){C(b1.items,function(b3){var b4=bc(b1.style,b3.style),b2=bC(b4.left)+bX.plotLeft,b5=bC(b4.top)+bX.plotTop+12;delete b4.left;delete b4.top;bY.text(b3.html,b2,b5).attr({zIndex:2}).css(b4).add()})}if(M.enabled&&!bX.credits){b0=M.href;bX.credits=bY.text(M.text,0,0).on("click",function(){if(b0){location.href=b0}}).attr({align:M.position.align,zIndex:8}).css(M.style).add().align(M.position)}bX.hasRendered=true},destroy:function(){var bZ=this,b0=bZ.axes,bY=bZ.series,M=bZ.container,bX,L=M&&M.parentNode;bj(bZ,"destroy");aV(bZ);bX=b0.length;while(bX--){b0[bX]=b0[bX].destroy()}bX=bY.length;while(bX--){bY[bX]=bY[bX].destroy()}C(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","tracker","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(b1){var b2=bZ[b1];if(b2&&b2.destroy){bZ[b1]=b2.destroy()}});if(M){M.innerHTML="";aV(M);if(L){bE(M)}}for(bX in bZ){delete bZ[bX]}},firstRender:function(){var M=this,L=M.options,bZ=M.callback;var bX="onreadystatechange",bY="complete";if((!bL&&(aT==aT.top&&br.readyState!==bY))||(aX&&!aT.canvg)){if(aX){aW.push(function(){M.firstRender()},L.global.canvasToolsURL)}else{br.attachEvent(bX,function(){br.detachEvent(bX,M.firstRender);if(br.readyState===bY){M.firstRender()}})}return}M.getContainer();bj(M,"init");if(Highcharts.RangeSelector&&L.rangeSelector.enabled){M.rangeSelector=new Highcharts.RangeSelector(M)}M.resetMargins();M.setChartSize();M.propFromSeries();M.getAxes();C(L.series||[],function(b0){M.initSeries(b0)});if(Highcharts.Scroller&&(L.navigator.enabled||L.scrollbar.enabled)){M.scroller=new Highcharts.Scroller(M)}M.tracker=new G(M,L);M.render();M.renderer.draw();if(bZ){bZ.apply(M,[M])}C(M.callbacks,function(b0){b0.apply(M,[M])});M.cloneRenderTo(true);bj(M,"load")},init:function(bX){var M=this,bY=M.options.chart,L;if(bY.reflow!==false){v(M,"load",M.initReflow)}if(bX){for(L in bX){v(M,L,bX[L])}}M.xAxis=[];M.yAxis=[];M.animation=aX?false:aI(bY.animation,true);M.setSize=M.resize;M.pointCount=0;M.counters=new J();M.firstRender()}};ba.prototype.callbacks=[];var bp=function(){};bp.prototype={init:function(bY,bX,M){var L=this,bZ=bY.chart.counters,b0;L.series=bY;L.applyOptions(bX,M);L.pointAttr={};if(bY.options.colorByPoint){b0=bY.chart.options.colors;L.color=L.color||b0[bZ.color++];bZ.wrapColor(b0.length)}bY.chart.pointCount++;return L},applyOptions:function(bX,M){var L=this,bY=L.series,bZ=typeof bX;L.config=bX;if(bZ==="number"||bX===null){L.y=bX}else{if(typeof bX[0]==="number"){L.x=bX[0];L.y=bX[1]}else{if(bZ==="object"&&typeof bX.length!=="number"){bc(L,bX);L.options=bX;if(bX.dataLabels){bY._hasPointLabels=true}if(bX.marker){bY._hasPointMarkers=true}}else{if(typeof bX[0]==="string"){L.name=bX[0];L.y=bX[1]}}}}if(L.x===k){L.x=M===k?bY.autoIncrement():M}},destroy:function(){var L=this,M=L.series,bY=M.chart,bX=bY.hoverPoints,bZ;bY.pointCount--;if(bX){L.setState();N(bX,L);if(!bX.length){bY.hoverPoints=null}}if(L===bY.hoverPoint){L.onMouseOut()}if(L.graphic||L.dataLabel){aV(L);L.destroyElements()}if(L.legendItem){bY.legend.destroyItem(L)}for(bZ in L){L[bZ]=null}},destroyElements:function(){var L=this,bX=["graphic","tracker","dataLabel","group","connector","shadowGroup"],bY,M=6;while(M--){bY=bX[M];if(L[bY]){L[bY]=L[bY].destroy()}}},getLabelConfig:function(){var L=this;return{x:L.category,y:L.y,key:L.name||L.category,series:L.series,point:L,percentage:L.percentage,total:L.total||L.stackTotal}},select:function(bZ,M){var L=this,bX=L.series,bY=bX.chart;bZ=aI(bZ,!L.selected);L.firePointEvent(bZ?"select":"unselect",{accumulate:M},function(){L.selected=bZ;L.setState(bZ&&bg);if(!M){C(bY.getSelectedPoints(),function(b0){if(b0.selected&&b0!==L){b0.selected=false;b0.setState(ah);b0.firePointEvent("unselect")}})}})},onMouseOver:function(){var L=this,bX=L.series,bY=bX.chart,bZ=bY.tooltip,M=bY.hoverPoint;if(M&&M!==L){M.onMouseOut()}L.firePointEvent("mouseOver");if(bZ&&(!bZ.shared||bX.noSharedTooltip)){bZ.refresh(L)}L.setState(aJ);bY.hoverPoint=L},onMouseOut:function(){var M=this.series.chart,L=M.hoverPoints;if(!L||w(this,L)===-1){this.firePointEvent("mouseOut");this.setState();M.hoverPoint=null}},tooltipFormatter:function(b5){var b6=this,b2=b6.series,b8=b2.tooltipOptions,b3=b5.match(/\{(series|point)\.[a-zA-Z]+\}/g),M=/[{\.}]/,b1,b7,bY,bX,bZ,L,b0,b4={y:0,open:0,high:0,low:0,close:0,percentage:1,total:1};b8.valuePrefix=b8.valuePrefix||b8.yPrefix;b8.valueDecimals=b8.valueDecimals||b8.yDecimals;b8.valueSuffix=b8.valueSuffix||b8.ySuffix;for(b0 in b3){b7=b3[b0];if(bh(b7)&&b7!==b5){bZ=(" "+b7).split(M);b1={point:b6,series:b2}[bZ[1]];L=bZ[2];if(b1===b6&&b4.hasOwnProperty(L)){bX=b4[L]?L:"value";bY=(b8[bX+"Prefix"]||"")+l(b6[L],aI(b8[bX+"Decimals"],-1))+(b8[bX+"Suffix"]||"")}else{bY=b1[L]}b5=b5.replace(b7,bY)}}return b5},update:function(b4,b3,bX){var b2=this,bZ=b2.series,L=b2.graphic,b0,bY=bZ.data,M=bY.length,b1=bZ.chart;b3=aI(b3,true);b2.firePointEvent("update",{options:b4},function(){b2.applyOptions(b4);if(bS(b4)){bZ.getAttribs();if(L){L.attr(b2.pointAttr[bZ.state])}}for(b0=0;b0<M;b0++){if(bY[b0]===b2){bZ.xData[b0]=b2.x;bZ.yData[b0]=b2.y;bZ.options.data[b0]=b4;break}}bZ.isDirty=true;bZ.isDirtyData=true;if(b3){b1.redraw(bX)}})},remove:function(b2,b0){var L=this,bX=L.series,bY=bX.chart,M,bZ=bX.data,b1=bZ.length;bR(b0,bY);b2=aI(b2,true);L.firePointEvent("remove",null,function(){for(M=0;M<b1;M++){if(bZ[M]===L){bZ.splice(M,1);bX.options.data.splice(M,1);bX.xData.splice(M,1);bX.yData.splice(M,1);break}}L.destroy();bX.isDirty=true;bX.isDirtyData=true;if(b2){bY.redraw()}})},firePointEvent:function(b0,bY,M){var L=this,bZ=this.series,bX=bZ.options;if(bX.point.events[b0]||(L.options&&L.options.events&&L.options.events[b0])){this.importEvents()}if(b0==="click"&&bX.allowPointSelect){M=function(b1){L.select(null,b1.ctrlKey||b1.metaKey||b1.shiftKey)}}bj(this,b0,bY,M)},importEvents:function(){if(!this.hasImportedEvents){var L=this,M=aH(L.series.options.point,L.options),bY=M.events,bX;L.events=bY;for(bX in bY){v(L,bX,bY[bX])}this.hasImportedEvents=true}},setState:function(bX){var b6=this,M=b6.plotX,b8=b6.plotY,b1=b6.series,b7=b1.options.states,bY=ag[b1.type].marker&&b1.options.marker,b0=bY&&!bY.enabled,bZ=bY&&bY.states[bX],b3=bZ&&bZ.enabled===false,b5=b1.stateMarkerGraphic,b4=b1.chart,b2,L=b6.pointAttr;bX=bX||ah;if(bX===b6.state||(b6.selected&&bX!==bg)||(b7[bX]&&b7[bX].enabled===false)||(bX&&(b3||(b0&&!bZ.enabled)))){return}if(b6.graphic){b2=bY&&b6.graphic.symbolName&&L[bX].r;b6.graphic.attr(aH(L[bX],b2?{x:M-b2,y:b8-b2,width:2*b2,height:2*b2}:{}))}else{if(bX&&bZ){b2=bZ.radius;if(!b5){b1.stateMarkerGraphic=b5=b4.renderer.symbol(b1.symbol,M-b2,b8-b2,2*b2,2*b2).attr(L[bX]).add(b1.markerGroup)}else{b5.attr({x:M-b2,y:b8-b2})}}if(b5){b5[bX&&b4.isInsidePlot(M,b8)?"show":"hide"]()}}b6.state=bX}};var a3=function(){};a3.prototype={isCartesian:true,type:"line",pointClass:bp,sorted:true,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(bZ,L){var bY=this,bX,M;bY.chart=bZ;bY.options=L=bY.setOptions(L);bY.bindAxes();bc(bY,{name:L.name,state:ah,pointAttr:{},visible:L.visible!==false,selected:L.selected===true});if(aX){L.animation=false}M=L.events;for(bX in M){v(bY,bX,M[bX])}if((M&&M.click)||(L.point&&L.point.events&&L.point.events.click)||L.allowPointSelect){bZ.runTrackerClick=true}bY.getColor();bY.getSymbol();bY.setData(L.data,false);if(bY.isCartesian){bZ.hasCartesianSeries=true}bZ.series.push(bY);aD(bZ.series,function(b1,b0){return(b1.options.index||0)-(b0.options.index||0)});C(bZ.series,function(b1,b0){b1.index=b0;b1.name=b1.name||"Series "+(b0+1)})},bindAxes:function(){var M=this,L=M.options,bX=M.chart,bY;if(M.isCartesian){C(["xAxis","yAxis"],function(bZ){C(bX[bZ],function(b0){bY=b0.options;if((L[bZ]===bY.index)||(L[bZ]===k&&bY.index===0)){b0.series.push(M);M[bZ]=b0;b0.isDirty=true}})})}},autoIncrement:function(){var M=this,L=M.options,bX=M.xIncrement;bX=aI(bX,L.pointStart,0);M.pointInterval=aI(M.pointInterval,L.pointInterval,1);M.xIncrement=bX+M.pointInterval;return bX},getSegments:function(){var bY=this,L=-1,M=[],bX,b0=bY.points,bZ=b0.length;if(bZ){if(bY.options.connectNulls){bX=bZ;while(bX--){if(b0[bX].y===null){b0.splice(bX,1)}}if(b0.length){M=[b0]}}else{C(b0,function(b1,b2){if(b1.y===null){if(b2>L+1){M.push(b0.slice(L+1,b2))}L=b2}else{if(b2===bZ-1){M.push(b0.slice(L+1,b2+1))}}})}}bY.segments=M},setOptions:function(bY){var bX=this.chart,b1=bX.options,L=b1.plotOptions,b0=L[this.type],bZ=bY.data,M;bY.data=null;M=aH(b0,L.series,bY);M.data=bY.data=bZ;this.tooltipOptions=aH(b1.tooltip,M.tooltip);if(b0.marker===null){delete M.marker}return M},getColor:function(){var L=this.options,bX=this.chart.options.colors,M=this.chart.counters;this.color=L.color||(!L.colorByPoint&&bX[M.color++])||"gray";M.wrapColor(bX.length)},getSymbol:function(){var M=this,bZ=M.options.marker,bY=M.chart,L=bY.options.symbols,bX=bY.counters;M.symbol=bZ.symbol||L[bX.symbol++];if(/^url/.test(M.symbol)){bZ.radius=0}bX.wrapSymbol(L.length)},drawLegendSymbol:function(b3){var b5=this.options,L=b5.marker,bZ,b4=b3.options,M,bY=b4.symbolWidth,b2=this.chart.renderer,bX=this.legendGroup,b1=b3.baseline,b0;if(b5.lineWidth){b0={"stroke-width":b5.lineWidth};if(b5.dashStyle){b0.dashstyle=b5.dashStyle}this.legendLine=b2.path([bk,0,b1-4,bl,bY,b1-4]).attr(b0).add(bX)}if(L&&L.enabled){bZ=L.radius;this.legendSymbol=M=b2.symbol(this.symbol,(bY/2)-bZ,b1-4-bZ,2*bZ,2*bZ).add(bX)}},addPoint:function(b9,b7,M,b0){var b2=this,b1=b2.data,b6=b2.graph,L=b2.area,b4=b2.chart,bZ=b2.xData,bY=b2.yData,bX=(b6&&b6.shift)||0,b8=b2.options.data,b5,b3=b2.pointClass.prototype;bR(b0,b4);if(b6&&M){b6.shift=bX+1}if(L){if(M){L.shift=bX+1}L.isArea=true}b7=aI(b7,true);b5={series:b2};b3.applyOptions.apply(b5,[b9]);bZ.push(b5.x);bY.push(b3.toYData?b3.toYData.call(b5):b5.y);b8.push(b9);if(M){if(b1[0]&&b1[0].remove){b1[0].remove(false)}else{b1.shift();bZ.shift();bY.shift();b8.shift()}}b2.getAttribs();b2.isDirty=true;b2.isDirtyData=true;if(b7){b4.redraw()}},setData:function(ce,b9){var b4=this,cd=b4.points,bX=b4.options,b0=b4.initialColor,b6=b4.chart,b5=null,b2=b4.xAxis,ca,M=b4.pointClass.prototype;b4.xIncrement=null;b4.pointRange=b2&&b2.categories?1:bX.pointRange;if(ac(b0)){b6.counters.color=b0}var bZ=[],cc=[],b1=ce?ce.length:[],L=bX.turboThreshold||1000,b8,b7=b4.pointArrayMap,bY=b7&&b7.length;if(b1>L){ca=0;while(b5===null&&ca<b1){b5=ce[ca];ca++}if(ap(b5)){var b3=aI(bX.pointStart,0),cb=aI(bX.pointInterval,1);for(ca=0;ca<b1;ca++){bZ[ca]=b3;cc[ca]=ce[ca];b3+=cb}b4.xIncrement=b3}else{if(aC(b5)){if(bY){for(ca=0;ca<b1;ca++){b8=ce[ca];bZ[ca]=b8[0];cc[ca]=b8.slice(1,bY+1)}}else{for(ca=0;ca<b1;ca++){b8=ce[ca];bZ[ca]=b8[0];cc[ca]=b8[1]}}}}}else{for(ca=0;ca<b1;ca++){b8={series:b4};M.applyOptions.apply(b8,[ce[ca]]);bZ[ca]=b8.x;cc[ca]=M.toYData?M.toYData.call(b8):b8.y}}if(bh(cc[0])){bD(14,true)}b4.data=[];b4.options.data=ce;b4.xData=bZ;b4.yData=cc;ca=(cd&&cd.length)||0;while(ca--){if(cd[ca]&&cd[ca].destroy){cd[ca].destroy()}}if(b2){b2.minRange=b2.userMinRange}b4.isDirty=b4.isDirtyData=b6.isDirtyBox=true;if(aI(b9,true)){b6.redraw(false)}},remove:function(bY,bX){var L=this,M=L.chart;bY=aI(bY,true);if(!L.isRemoving){L.isRemoving=true;bj(L,"remove",null,function(){L.destroy();M.isDirtyLegend=M.isDirtyBox=true;if(bY){M.redraw(bX)}})}L.isRemoving=false},processData:function(bY){var b4=this,b1=b4.xData,cc=b4.yData,b2=b1.length,b7=0,cb=b2,b5,b0,bX,b3=b4.xAxis,ca,bZ=b4.options,b6=bZ.cropThreshold,L=b4.isCartesian;if(L&&!b4.isDirty&&!b3.isDirty&&!b4.yAxis.isDirty&&!bY){return false}if(L&&b4.sorted&&(!b6||b2>b6||b4.forceCrop)){var M=b3.getExtremes(),b8=M.min,b9=M.max;if(b1[b2-1]<b8||b1[0]>b9){b1=[];cc=[]}else{if(b1[0]<b8||b1[b2-1]>b9){for(ca=0;ca<b2;ca++){if(b1[ca]>=b8){b7=bV(0,ca-1);break}}for(;ca<b2;ca++){if(b1[ca]>b9){cb=ca+1;break}}b1=b1.slice(b7,cb);cc=cc.slice(b7,cb);b5=true}}}for(ca=b1.length-1;ca>0;ca--){b0=b1[ca]-b1[ca-1];if(b0>0&&(bX===k||b0<bX)){bX=b0}}b4.cropped=b5;b4.cropStart=b7;b4.processedXData=b1;b4.processedYData=cc;if(bZ.pointRange===null){b4.pointRange=bX||1}b4.closestPointRange=bX},generatePoints:function(){var bZ=this,ca=bZ.options,b9=ca.data,bY=bZ.data,L,b6=bZ.processedXData,b2=bZ.processedYData,b1=bZ.pointClass,M=b6.length,b5=bZ.cropStart||0,b8,b4=bZ.hasGroupedData,b3,b7=[],bX;if(!bY&&!b4){var b0=[];b0.length=b9.length;bY=bZ.data=b0}for(bX=0;bX<M;bX++){b8=b5+bX;if(!b4){if(bY[b8]){b3=bY[b8]}else{if(b9[b8]!==k){bY[b8]=b3=(new b1()).init(bZ,b9[b8],b6[bX])}}b7[bX]=b3}else{b7[bX]=(new b1()).init(bZ,[b6[bX]].concat(a6(b2[bX])))}}if(bY&&(M!==(L=bY.length)||b4)){for(bX=0;bX<L;bX++){if(bX===b5&&!b4){bX+=M}if(bY[bX]){bY[bX].destroyElements();bY[bX].plotX=k}}}bZ.data=bY;bZ.points=b7},translate:function(){if(!this.processedXData){this.processData()}this.generatePoints();var b4=this,b5=b4.chart,b0=b4.options,bZ=b0.stacking,b3=b4.xAxis,b6=b3.categories,M=b4.yAxis,b9=b4.points,b2=b9.length,cd=!!b4.modifyValue,ce,bX=M.series,ca=bX.length,cf=b0.pointPlacement==="between";while(ca--){if(bX[ca].visible){if(bX[ca]===b4){ce=true}break}}for(ca=0;ca<b2;ca++){var b7=b9[ca],b8=b7.x,cb=b7.y,L=b7.low,b1=M.stacks[(cb<b0.threshold?"-":"")+b4.stackKey],cc,bY;b7.plotX=b3.translate(b8,0,0,0,1,cf);if(bZ&&b4.visible&&b1&&b1[b8]){cc=b1[b8];bY=cc.total;cc.cum=L=cc.cum-cb;cb=L+cb;if(ce){L=aI(b0.threshold,M.min)}if(M.isLog&&L<=0){L=null}if(bZ==="percent"){L=bY?L*100/bY:0;cb=bY?cb*100/bY:0}b7.percentage=bY?b7.y*100/bY:0;b7.total=b7.stackTotal=bY;b7.stackY=cb}b7.yBottom=ac(L)?M.translate(L,0,1,0,1):null;if(cd){cb=b4.modifyValue(cb,b7)}b7.plotY=(typeof cb==="number")?m(M.translate(cb,0,1,0,1)*10)/10:k;b7.clientX=b5.inverted?b5.plotHeight-b7.plotX:b7.plotX;b7.category=b6&&b6[b7.x]!==k?b6[b7.x]:b7.x}b4.getSegments()},setTooltipPoints:function(bZ){var b1=this,b6=[],b4,b3,bY,bX=b1.xAxis,b2=bX?(bX.tooltipLen||bX.len):b1.chart.plotSizeX,L=(bX&&bX.tooltipPosName)||"plotX",b5,b0,M=[];if(b1.options.enableMouseTracking===false){return}if(bZ){b1.tooltipPoints=null}C(b1.segments||b1.points,function(b7){b6=b6.concat(b7)});if(bX&&bX.reversed){b6=b6.reverse()}b4=b6.length;for(b0=0;b0<b4;b0++){b5=b6[b0];b3=b6[b0-1]?bY+1:0;bY=b6[b0+1]?bV(0,bd((b5[L]+(b6[b0+1]?b6[b0+1][L]:b2))/2)):b2;while(b3>=0&&b3<=bY){M[b3++]=b5}}b1.tooltipPoints=M},tooltipHeaderFormatter:function(bX){var M=this,L=M.tooltipOptions,b0=L.xDateFormat,bZ=M.xAxis,bY=bZ&&bZ.options.type==="datetime",b1;if(bY&&!b0){for(b1 in aU){if(aU[b1]>=bZ.closestPointRange){b0=L.dateTimeLabelFormats[b1];break}}}return L.headerFormat.replace("{point.key}",bY&&ap(bX)?bF(b0,bX):bX).replace("{series.name}",M.name).replace("{series.color}",M.color)},onMouseOver:function(){var M=this,bX=M.chart,L=bX.hoverSeries;if(L&&L!==M){L.onMouseOut()}if(M.options.events.mouseOver){bj(M,"mouseOver")}M.setState(aJ);bX.hoverSeries=M},onMouseOut:function(){var bX=this,M=bX.options,bY=bX.chart,bZ=bY.tooltip,L=bY.hoverPoint;if(L){L.onMouseOut()}if(bX&&M.events.mouseOut){bj(bX,"mouseOut")}if(bZ&&!M.stickyTracking&&!bZ.shared){bZ.hide()}bX.setState();bY.hoverSeries=null},animate:function(b4){var b1=this,b3=b1.chart,b2=b3.renderer,b0,bZ,bY=b1.options.animation,L=b3.clipBox,bX=b3.inverted,M;if(bY&&!bS(bY)){bY=ag[b1.type].animation}M="_sharedClip"+bY.duration+bY.easing;if(b4){b0=b3[M];bZ=b3[M+"m"];if(!b0){b3[M]=b0=b2.clipRect(bc(L,{width:0}));b3[M+"m"]=bZ=b2.clipRect(-99,bX?-b3.plotLeft:-b3.plotTop,99,bX?b3.chartWidth:b3.chartHeight)}b1.group.clip(b0);b1.markerGroup.clip(bZ);b1.sharedClipKey=M}else{b0=b3[M];if(b0){b0.animate({width:b3.plotSizeX},bY);b3[M+"m"].animate({width:b3.plotSizeX+99},bY)}b1.animate=null;b1.animationTimeout=setTimeout(function(){b1.afterAnimate()},bY.duration)}},afterAnimate:function(){var L=this.chart,bX=this.sharedClipKey,M=this.group;if(M&&this.options.clip!==false){M.clip(L.clipRect);this.markerGroup.clip()}setTimeout(function(){if(bX&&L[bX]){L[bX]=L[bX].destroy();L[bX+"m"]=L[bX+"m"].destroy()}},100)},drawPoints:function(){var b1=this,b3,ca=b1.points,b5=b1.chart,bY,L,cb,b7,bX,b8,b9,b4,M=b1.options,cc=M.marker,b6,b0,bZ,b2=b1.markerGroup;if(cc.enabled||b1._hasPointMarkers){cb=ca.length;while(cb--){b7=ca[cb];bY=b7.plotX;L=b7.plotY;b4=b7.graphic;b6=b7.marker||{};b0=(cc.enabled&&b6.enabled===k)||b6.enabled;bZ=b5.isInsidePlot(bY,L,b5.inverted);if(b0&&L!==k&&!isNaN(L)){b3=b7.pointAttr[b7.selected?bg:ah];bX=b3.r;b8=aI(b6.symbol,b1.symbol);b9=b8.indexOf("url")===0;if(b4){b4.attr({visibility:bZ?(bL?"inherit":ai):ae}).animate(bc({x:bY-bX,y:L-bX},b4.symbolName?{width:2*bX,height:2*bX}:{}))}else{if(bZ&&(bX>0||b9)){b7.graphic=b4=b5.renderer.symbol(b8,bY-bX,L-bX,2*bX,2*bX).attr(b3).add(b2)}}}else{if(b4){b7.graphic=b4.destroy()}}}}},convertAttribs:function(bX,M,b2,b1){var bZ=this.pointAttrToOptions,L,bY,b0={};bX=bX||{};M=M||{};b2=b2||{};b1=b1||{};for(L in bZ){bY=bZ[L];b0[L]=aI(bX[bY],M[L],b2[L],b1[L])}return b0},getAttribs:function(){var b2=this,bX=ag[b2.type].marker?b2.options.marker:b2.options,b9=bX.states,M=b9[aJ],b3,bY=b2.color,b4={stroke:bY,fill:bY},b8=b2.points||[],b1,b6,b0=[],L,bZ=b2.pointAttrToOptions,b5,b7;if(b2.options.marker){M.radius=M.radius||bX.radius+2;M.lineWidth=M.lineWidth||bX.lineWidth+1}else{M.color=M.color||bA(M.color||bY).brighten(M.brightness).get()}b0[ah]=b2.convertAttribs(bX,b4);C([aJ,bg],function(ca){b0[ca]=b2.convertAttribs(b9[ca],b0[ah])});b2.pointAttr=b0;b1=b8.length;while(b1--){b6=b8[b1];bX=(b6.options&&b6.options.marker)||b6.options;if(bX&&bX.enabled===false){bX.radius=0}b5=b2.options.colorByPoint;if(b6.options){for(b7 in bZ){if(ac(bX[bZ[b7]])){b5=true}}}if(b5){bX=bX||{};L=[];b9=bX.states||{};b3=b9[aJ]=b9[aJ]||{};if(!b2.options.marker){b3.color=bA(b3.color||b6.color).brighten(b3.brightness||M.brightness).get()}L[ah]=b2.convertAttribs(bc({color:b6.color},bX),b0[ah]);L[aJ]=b2.convertAttribs(b9[aJ],b0[aJ],L[ah]);L[bg]=b2.convertAttribs(b9[bg],b0[bg],L[ah])}else{L=b0}b6.pointAttr=L}},destroy:function(){var bY=this,b0=bY.chart,b3=/AppleWebKit\/533/.test(q),b1,bZ,bX=bY.data||[],b2,L,M;bj(bY,"destroy");aV(bY);C(["xAxis","yAxis"],function(b4){M=bY[b4];if(M){N(M.series,bY);M.isDirty=true}});if(bY.legendItem){bY.chart.legend.destroyItem(bY)}bZ=bX.length;while(bZ--){b2=bX[bZ];if(b2&&b2.destroy){b2.destroy()}}bY.points=null;clearTimeout(bY.animationTimeout);C(["area","graph","dataLabelsGroup","group","markerGroup","tracker","trackerGroup"],function(b4){if(bY[b4]){b1=b3&&b4==="group"?"hide":"destroy";bY[b4][b1]()}});if(b0.hoverSeries===bY){b0.hoverSeries=null}N(b0.series,bY);for(L in bY){delete bY[L]}},drawDataLabels:function(){var bX=this,L=bX.options,M=L.dataLabels,bZ=bX.points,bY,b2,b1,b0;if(M.enabled||bX._hasPointLabels){if(bX.dlProcessOptions){bX.dlProcessOptions(M)}b0=bX.plotGroup("dataLabelsGroup","data-labels",bX.visible?ai:ae,6);b2=M;C(bZ,function(b5){var b7,b9=b5.dataLabel,b4,b6,b8,b3=true;bY=b5.options&&b5.options.dataLabels;b7=b2.enabled||(bY&&bY.enabled);if(b9&&!b7){b5.dataLabel=b9.destroy()}else{if(b7){b8=M.rotation;M=aH(b2,bY);b1=M.formatter.call(b5.getLabelConfig(),M);M.style.color=aI(M.color,M.style.color,bX.color,"black");if(b9){b9.attr({text:b1});b3=false}else{if(ac(b1)){b4={fill:M.backgroundColor,stroke:M.borderColor,"stroke-width":M.borderWidth,r:M.borderRadius||0,rotation:b8,padding:M.padding,zIndex:1};for(b6 in b4){if(b4[b6]===k){delete b4[b6]}}b9=b5.dataLabel=bX.chart.renderer[b8?"text":"label"](b1,0,-999,null,null,null,M.useHTML).attr(b4).css(M.style).add(b0).shadow(M.shadow)}}if(b9){bX.alignDataLabel(b5,b9,M,null,b3)}}}})}},alignDataLabel:function(b1,b4,b5,bZ,bY){var b0=this.chart,M=b0.inverted,L=aI(b1.plotX,-999),b3=aI(b1.plotY,-999),b2=b4.getBBox(),bX;bZ=bc({x:M?b0.plotWidth-b3:L,y:m(M?b0.plotHeight-L:b3),width:0,height:0},bZ);bc(b5,{width:b2.width,height:b2.height});if(b5.rotation){bX={align:b5.align,x:bZ.x+b5.x+bZ.width/2,y:bZ.y+b5.y+bZ.height/2};b4[bY?"attr":"animate"](bX)}else{b4.align(b5,null,bZ);bX=b4.alignAttr}b4.attr({visibility:b5.crop===false||b0.isInsidePlot(bX.x,bX.y)||b0.isInsidePlot(L,b3,M)?(bL?"inherit":ai):ae})},getSegmentPath:function(bX){var M=this,L=[];C(bX,function(bY,bZ){if(M.getPointSpline){L.push.apply(L,M.getPointSpline(bX,bY,bZ))}else{L.push(bZ?bl:bk);if(bZ&&M.options.step){var b0=bX[bZ-1];L.push(bY.plotX,b0.plotY)}L.push(bY.plotX,bY.plotY)}});return L},getGraphPath:function(){var bX=this,bY=[],L,M=[];C(bX.segments,function(bZ){L=bX.getSegmentPath(bZ);if(bZ.length>1){bY=bY.concat(L)}else{M.push(bZ[0])}});bX.singlePoints=M;bX.graphPath=bY;return bY},drawGraph:function(){var bX=this.options,bY=this.graph,b0=this.group,M=bX.lineColor||this.color,L=bX.lineWidth,bZ=bX.dashStyle,b2,b1=this.getGraphPath();if(bY){aP(bY);bY.animate({d:b1})}else{if(L){b2={stroke:M,"stroke-width":L,zIndex:1};if(bZ){b2.dashstyle=bZ}this.graph=this.chart.renderer.path(b1).attr(b2).add(b0).shadow(bX.shadow)}}},invertGroups:function(){var L=this,M=L.chart;function bX(){var bY={width:L.yAxis.len,height:L.xAxis.len};C(["group","trackerGroup","markerGroup"],function(bZ){if(L[bZ]){L[bZ].attr(bY).invert()}})}v(M,"resize",bX);v(L,"destroy",function(){aV(M,"resize",bX)});bX();L.invertGroups=bX},plotGroup:function(M,bX,bY,b1,b2){var b3=this[M],b0=this.chart,bZ=this.xAxis,L=this.yAxis;if(!b3){this[M]=b3=b0.renderer.g(bX).attr({visibility:bY,zIndex:b1||0.1}).add(b2)}b3.translate(bZ?bZ.left:b0.plotLeft,L?L.top:b0.plotTop);return b3},render:function(){var bX=this,bZ=bX.chart,b2,b4=bX.options,M=b4.animation,b3=M&&!!bX.animate,L=bX.visible?ai:ae,b0=b4.zIndex,bY=bX.hasRendered,b1=bZ.seriesGroup;b2=bX.plotGroup("group","series",L,b0,b1);bX.markerGroup=bX.plotGroup("markerGroup","markers",L,b0,b1);if(b3){bX.animate(true)}bX.getAttribs();b2.inverted=bZ.inverted;if(bX.drawGraph){bX.drawGraph()}bX.drawPoints();bX.drawDataLabels();if(bX.options.enableMouseTracking!==false){bX.drawTracker()}if(bZ.inverted){bX.invertGroups()}if(b4.clip!==false&&!bX.sharedClipKey&&!bY){b2.clip(bZ.clipRect);if(this.trackerGroup){this.trackerGroup.clip(bZ.clipRect)}}if(b3){bX.animate()}else{if(!bY){bX.afterAnimate()}}bX.isDirty=bX.isDirtyData=false;bX.hasRendered=true},redraw:function(){var M=this,bX=M.chart,L=M.isDirtyData,bY=M.group;if(bY){if(bX.inverted){bY.attr({width:bX.plotWidth,height:bX.plotHeight})}bY.animate({translateX:M.xAxis.left,translateY:M.yAxis.top})}M.translate();M.setTooltipPoints(true);M.render();if(L){bj(M,"updatedData")}},setState:function(bZ){var bX=this,M=bX.options,bY=bX.graph,b0=M.states,L=M.lineWidth;bZ=bZ||ah;if(bX.state!==bZ){bX.state=bZ;if(b0[bZ]&&b0[bZ].enabled===false){return}if(bZ){L=b0[bZ].lineWidth||L+1}if(bY&&!bY.dashstyle){bY.attr({"stroke-width":L},bZ?0:500)}}},setVisible:function(M,b7){var bY=this,b2=bY.chart,b1=bY.legendItem,b3=bY.group,b9=bY.tracker,b0=bY.dataLabelsGroup,b6=bY.markerGroup,L,bX,b5=bY.points,b4,b8=b2.options.chart.ignoreHiddenSeries,bZ=bY.visible;bY.visible=M=M===k?!bZ:M;L=M?"show":"hide";if(b3){b3[L]()}if(b6){b6[L]()}if(b9){b9[L]()}else{if(b5){bX=b5.length;while(bX--){b4=b5[bX];if(b4.tracker){b4.tracker[L]()}}}}if(b0){b0[L]()}if(b1){b2.legend.colorizeItem(bY,M)}bY.isDirty=true;if(bY.options.stacking){C(b2.series,function(ca){if(ca.options.stacking&&ca.visible){ca.isDirty=true}})}if(b8){b2.isDirtyBox=true}if(b7!==false){b2.redraw()}bj(bY,L)},show:function(){this.setVisible(true)},hide:function(){this.setVisible(false)},select:function(M){var L=this;L.selected=M=(M===k)?!L.selected:M;if(L.checkbox){L.checkbox.checked=M}bj(L,M?"select":"unselect")},drawTracker:function(){var b0=this,b9=b0.options,b8=b9.trackByArea,L=[].concat(b8?b0.areaPath:b0.graphPath),b4=L.length,b3=b0.chart,b2=b3.renderer,M=b3.options.tooltip.snap,b6=b0.tracker,b7=b9.cursor,b1=b7&&{cursor:b7},bZ=b0.singlePoints,b5=this.isCartesian&&this.plotGroup("trackerGroup",null,ai,b9.zIndex||1,b3.trackerGroup),bX,bY;if(b4&&!b8){bY=b4+1;while(bY--){if(L[bY]===bk){L.splice(bY+1,0,L[bY+1]-M,L[bY+2],bl)}if((bY&&L[bY]===bk)||bY===b4){L.splice(bY,0,bl,L[bY-2]+M,L[bY-1])}}}for(bY=0;bY<bZ.length;bY++){bX=bZ[bY];L.push(bk,bX.plotX-M,bX.plotY,bl,bX.plotX+M,bX.plotY)}if(b6){b6.attr({d:L})}else{b0.tracker=b2.path(L).attr({isTracker:true,"stroke-linejoin":"bevel",visibility:b0.visible?ai:ae,stroke:bP,fill:b8?bP:x,"stroke-width":b9.lineWidth+(b8?0:2*M)}).on(B?"touchstart":"mouseover",function(){if(b3.hoverSeries!==b0){b0.onMouseOver()}}).on("mouseout",function(){if(!b9.stickyTracking){b0.onMouseOut()}}).css(b1).add(b5)}}};var R=a9(a3);a.line=R;ag.area=aH(aL,{threshold:0});var az=a9(a3,{type:"area",getSegmentPath:function(bZ){var L=a3.prototype.getSegmentPath.call(this,bZ),b0=[].concat(L),bY,bX=this.options,M=L.length;if(M===3){b0.push(bl,L[1],L[2])}if(bX.stacking&&!this.closedStacks){for(bY=bZ.length-1;bY>=0;bY--){if(bY<bZ.length-1&&bX.step){b0.push(bZ[bY+1].plotX,bZ[bY].yBottom)}b0.push(bZ[bY].plotX,bZ[bY].yBottom)}}else{this.closeSegment(b0,bZ)}this.areaPath=this.areaPath.concat(b0);return L},closeSegment:function(M,L){var bX=this.yAxis.getThreshold(this.options.threshold);M.push(bl,L[L.length-1].plotX,bX,bl,L[0].plotX,bX)},drawGraph:function(){this.areaPath=[];a3.prototype.drawGraph.apply(this);var M=this.areaPath,L=this.options,bX=this.area;if(bX){bX.animate({d:M})}else{this.area=this.chart.renderer.path(M).attr({fill:aI(L.fillColor,bA(this.color).setOpacity(L.fillOpacity||0.75).get()),zIndex:0}).add(this.group)}},drawLegendSymbol:function(L,M){M.legendSymbol=this.chart.renderer.rect(0,L.baseline-11,L.options.symbolWidth,12,2).attr({zIndex:3}).add(M.legendGroup)}});a.area=az;ag.spline=aH(aL);var b=a9(a3,{type:"spline",getPointSpline:function(M,b8,b9){var b6=1.5,L=b6+1,bZ=b8.plotX,bX=b8.plotY,bY=M[b9-1],ca=M[b9+1],b3,b2,b5,b4,cd;if(bY&&ca){var b1=bY.plotX,b0=bY.plotY,cc=ca.plotX,cb=ca.plotY,b7;b3=(b6*bZ+b1)/L;b2=(b6*bX+b0)/L;b5=(b6*bZ+cc)/L;b4=(b6*bX+cb)/L;b7=((b4-b2)*(b5-bZ))/(b5-b3)+bX-b4;b2+=b7;b4+=b7;if(b2>b0&&b2>bX){b2=bV(b0,bX);b4=2*bX-b2}else{if(b2<b0&&b2<bX){b2=aj(b0,bX);b4=2*bX-b2}}if(b4>cb&&b4>bX){b4=bV(cb,bX);b2=2*bX-b4}else{if(b4<cb&&b4<bX){b4=aj(cb,bX);b2=2*bX-b4}}b8.rightContX=b5;b8.rightContY=b4}if(!b9){cd=[bk,bZ,bX]}else{cd=["C",bY.rightContX||bY.plotX,bY.rightContY||bY.plotY,b3||bZ,b2||bX,bZ,bX];bY.rightContX=bY.rightContY=null}return cd}});a.spline=b;ag.areaspline=aH(ag.area);var aS=az.prototype,t=a9(b,{type:"areaspline",closedStacks:true,getSegmentPath:aS.getSegmentPath,closeSegment:aS.closeSegment,drawGraph:aS.drawGraph});a.areaspline=t;ag.column=aH(aL,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:false},select:{color:"#C0C0C0",borderColor:"#000000",shadow:false}},dataLabels:{align:null,verticalAlign:null,y:null},threshold:0});var h=a9(a3,{type:"column",tooltipOutsidePlot:true,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){a3.prototype.init.apply(this,arguments);var L=this,M=L.chart;if(M.hasRendered){C(M.series,function(bX){if(bX.type===L.type){bX.isDirty=true}})}},translate:function(){var b6=this,b9=b6.chart,bZ=b6.options,bX=bZ.stacking,cj=bZ.borderWidth,cg=0,b5=b6.xAxis,L=b5.reversed,ci={},M,ch;a3.prototype.translate.apply(b6);if(bZ.grouping===false){cg=1}else{C(b9.series,function(cl){var ck=cl.options;if(cl.type===b6.type&&cl.visible&&b6.options.group===ck.group){if(ck.stacking){M=cl.stackKey;if(ci[M]===k){ci[M]=cg++}ch=ci[M]}else{if(ck.grouping!==false){ch=cg++}}cl.columnIndex=ch}})}var ce=b6.points,b0=e(b5.transA)*(b5.ordinalSlope||bZ.pointRange||b5.closestPointRange||1),cd=b0*bZ.groupPadding,b7=b0-2*cd,cc=b7/cg,cb=bZ.pointWidth,b4=ac(cb)?(cc-cb)/2:cc*bZ.pointPadding,b2=aI(cb,cc-2*b4),b1=ax(bV(b2,1+2*cj)),ca=(L?cg-b6.columnIndex:b6.columnIndex)||0,cf=b4+(cd+ca*cc-(b0/2))*(L?-1:1),bY=bZ.threshold,b8=b6.translatedThreshold=b6.yAxis.getThreshold(bY),b3=aI(bZ.minPointLength,5);C(ce,function(cm){var co=cm.plotY,cl=aI(cm.yBottom,b8),cr=cm.plotX+cf,cq=ax(aj(co,cl)),cn=ax(bV(co,cl)-cq),ck=b6.yAxis.stacks[(cm.y<0?"-":"")+b6.stackKey],cp;if(bX&&b6.visible&&ck&&ck[cm.x]){ck[cm.x].setOffset(cf,b1)}if(e(cn)<b3){if(b3){cn=b3;cq=e(cq-b8)>b3?cl-b3:b8-(co<=b8?b3:0)}}cm.barX=cr;cm.pointWidth=b2;cm.shapeType="rect";cm.shapeArgs=cp=b9.renderer.Element.prototype.crisp.call(0,cj,cr,cq,b1,cn);if(cj%2){cp.y-=1;cp.height+=1}cm.trackerArgs=e(cn)<3&&aH(cm.shapeArgs,{height:6,y:cq-3})})},getSymbol:j,drawLegendSymbol:az.prototype.drawLegendSymbol,drawGraph:j,drawPoints:function(){var bX=this,L=bX.options,bY=bX.chart.renderer,M;C(bX.points,function(bZ){var b0=bZ.plotY,b1=bZ.graphic;if(b0!==k&&!isNaN(b0)&&bZ.y!==null){M=bZ.shapeArgs;if(b1){aP(b1);b1.animate(aH(M))}else{bZ.graphic=b1=bY[bZ.shapeType](M).attr(bZ.pointAttr[bZ.selected?bg:ah]).add(bX.group).shadow(L.shadow,null,L.stacking&&!L.borderRadius)}}else{if(b1){bZ.graphic=b1.destroy()}}})},drawTracker:function(){var bX=this,b1=bX.chart,b0=b1.renderer,M,b3,bZ=+new Date(),b7=bX.options,b4=b7.cursor,bY=b4&&{cursor:b4},b2=bX.isCartesian&&bX.plotGroup("trackerGroup",null,ai,b7.zIndex||1,b1.trackerGroup),b5,b6,L;C(bX.points,function(b8){b3=b8.tracker;M=b8.trackerArgs||b8.shapeArgs;b6=b8.plotY;L=!bX.isCartesian||(b6!==k&&!isNaN(b6));delete M.strokeWidth;if(b8.y!==null&&L){if(b3){b3.attr(M)}else{b8.tracker=b0[b8.shapeType](M).attr({isTracker:bZ,fill:bP,visibility:bX.visible?ai:ae}).on(B?"touchstart":"mouseover",function(b9){b5=b9.relatedTarget||b9.fromElement;if(b1.hoverSeries!==bX&&P(b5,"isTracker")!==bZ){bX.onMouseOver()}b8.onMouseOver()}).on("mouseout",function(b9){if(!b7.stickyTracking){b5=b9.relatedTarget||b9.toElement;if(P(b5,"isTracker")!==bZ){bX.onMouseOut()}}}).css(bY).add(b8.group||b2)}}})},alignDataLabel:function(b1,b2,b3,bY,bX){var bZ=this.chart,M=bZ.inverted,b0=b1.below||(b1.plotY>(this.translatedThreshold||bZ.plotSizeY)),L=(this.options.stacking||b3.inside);if(b1.shapeArgs){bY=aH(b1.shapeArgs);if(M){bY={x:bZ.plotWidth-bY.y-bY.height,y:bZ.plotHeight-bY.x-bY.width,width:bY.height,height:bY.width}}if(!L){if(M){bY.x+=b0?0:bY.width;bY.width=0}else{bY.y+=b0?bY.height:0;bY.height=0}}}b3.align=aI(b3.align,!M||L?"center":b0?"right":"left");b3.verticalAlign=aI(b3.verticalAlign,M||L?"middle":b0?"top":"bottom");a3.prototype.alignDataLabel.call(this,b1,b2,b3,bY,bX)},animate:function(bY){var M=this,bX=M.points,L=M.options;if(!bY){C(bX,function(b0){var b3=b0.graphic,b2=b0.shapeArgs,b1=M.yAxis,bZ=L.threshold;if(b3){b3.attr({height:0,y:ac(bZ)?b1.getThreshold(bZ):b1.translate(b1.getExtremes().min,0,1,0,1)});b3.animate({height:b2.height,y:b2.y},L.animation)}});M.animate=null}},remove:function(){var L=this,M=L.chart;if(M.hasRendered){C(M.series,function(bX){if(bX.type===L.type){bX.isDirty=true}})}a3.prototype.remove.apply(L,arguments)}});a.column=h;ag.bar=aH(ag.column);var bi=a9(h,{type:"bar",inverted:true});a.bar=bi;ag.scatter=aH(aL,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var bq=a9(a3,{type:"scatter",sorted:false,translate:function(){var L=this;a3.prototype.translate.apply(L);C(L.points,function(M){M.shapeType="circle";M.shapeArgs={x:M.plotX,y:M.plotY,r:L.chart.options.tooltip.snap}})},drawTracker:function(){var bX=this,bZ=bX.options.cursor,M=bZ&&{cursor:bZ},bY=bX.points,L=bY.length,b0;while(L--){b0=bY[L].graphic;if(b0){b0.element._i=L}}if(!bX._hasTracking){bX.markerGroup.attr({isTracker:true}).on(B?"touchstart":"mouseover",function(b1){bX.onMouseOver();if(b1.target._i!==k){bY[b1.target._i].onMouseOver()}}).on("mouseout",function(){if(!bX.options.stickyTracking){bX.onMouseOut()}}).css(M)}else{bX._hasTracking=true}}});a.scatter=bq;ag.pie=aH(aL,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:true,dataLabels:{distance:30,enabled:true,formatter:function(){return this.point.name}},legendType:"point",marker:null,size:"75%",showInLegend:false,slicedOffset:10,states:{hover:{brightness:0.1,shadow:false}}});var aO=a9(bp,{init:function(){bp.prototype.init.apply(this,arguments);var L=this,M;bc(L,{visible:L.visible!==false,name:aI(L.name,"Slice")});M=function(){L.slice()};v(L,"select",M);v(L,"unselect",M);return L},setVisible:function(bX){var b2=this,bZ=b2.series,b0=bZ.chart,b1=b2.tracker,b3=b2.dataLabel,bY=b2.connector,M=b2.shadowGroup,L;b2.visible=bX=bX===k?!b2.visible:bX;L=bX?"show":"hide";b2.group[L]();if(b1){b1[L]()}if(b3){b3[L]()}if(bY){bY[L]()}if(M){M[L]()}if(b2.legendItem){b0.legend.colorizeItem(b2,bX)}if(!bZ.isDirty&&bZ.options.ignoreHiddenPoint){bZ.isDirty=true;b0.redraw()}},slice:function(bX,b2,b0){var L=this,bY=L.series,bZ=bY.chart,M=L.slicedTranslation,b1;bR(b0,bZ);b2=aI(b2,true);bX=L.sliced=ac(bX)?bX:!L.sliced;b1={translateX:(bX?M[0]:bZ.plotLeft),translateY:(bX?M[1]:bZ.plotTop)};L.group.animate(b1);if(L.shadowGroup){L.shadowGroup.animate(b1)}}});var n={type:"pie",isCartesian:false,pointClass:aO,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var L=this,M=L.points;C(M,function(bY){var b0=bY.graphic,bZ=bY.shapeArgs,bX=-K/2;if(b0){b0.attr({r:0,start:bX,end:bX});b0.animate({r:bZ.r,start:bZ.start,end:bZ.end},L.options.animation)}});L.animate=null},setData:function(L,M){a3.prototype.setData.call(this,L,false);this.processData();this.generatePoints();if(aI(M,true)){this.chart.redraw()}},getCenter:function(){var M=this.options,bZ=this.chart,bY=bZ.plotWidth,bX=bZ.plotHeight,L=M.center.concat([M.size,M.innerSize||0]),b0=aj(bY,bX),b1;return af(L,function(b3,b2){b1=/%$/.test(b3);return b1?[bY,bX,b0,b0][b2]*bC(b3)/100:b3})},translate:function(){this.generatePoints();var cg=0,b6=this,b9=-0.25,ce=1000,M=b6.options,bY=M.slicedOffset,b5=bY+M.borderWidth,b4,b8=b6.chart,bZ,bX,cf,cc=b6.points,b7=2*K,b1,b3,b2,b0=M.dataLabels.distance,L=M.ignoreHiddenPoint,cb,cd=cc.length,ca;b6.center=b4=b6.getCenter();b6.getX=function(ci,ch){cf=aN.asin((ci-b4[1])/(b4[2]/2+b0));return b4[0]+(ch?-1:1)*(bM(cf)*(b4[2]/2+b0))};for(cb=0;cb<cd;cb++){ca=cc[cb];cg+=(L&&!ca.visible)?0:ca.y}for(cb=0;cb<cd;cb++){ca=cc[cb];b1=cg?ca.y/cg:0;bZ=m(b9*b7*ce)/ce;if(!L||ca.visible){b9+=b1}bX=m(b9*b7*ce)/ce;ca.shapeType="arc";ca.shapeArgs={x:b4[0],y:b4[1],r:b4[2]/2,innerR:b4[3]/2,start:bZ,end:bX};cf=(bX+bZ)/2;ca.slicedTranslation=af([bM(cf)*bY+b8.plotLeft,Y(cf)*bY+b8.plotTop],m);b3=bM(cf)*b4[2]/2;b2=Y(cf)*b4[2]/2;ca.tooltipPos=[b4[0]+b3*0.7,b4[1]+b2*0.7];ca.labelPos=[b4[0]+b3+bM(cf)*b0,b4[1]+b2+Y(cf)*b0,b4[0]+b3+bM(cf)*b5,b4[1]+b2+Y(cf)*b5,b4[0]+b3,b4[1]+b2,b0<0?"center":cf<b7/4?"left":"right",cf];ca.percentage=b1*100;ca.total=cg}this.setTooltipPoints()},render:function(){var L=this;L.getAttribs();this.drawPoints();if(L.options.enableMouseTracking!==false){L.drawTracker()}this.drawDataLabels();if(L.options.animation&&L.animate){L.animate()}L.isDirty=false},drawPoints:function(){var bZ=this,b1=bZ.chart,b0=b1.renderer,bX,L,b3,b2=bZ.options.shadow,M,bY;C(bZ.points,function(b4){L=b4.graphic;bY=b4.shapeArgs;b3=b4.group;M=b4.shadowGroup;if(b2&&!M){M=b4.shadowGroup=b0.g("shadow").attr({zIndex:4}).add()}if(!b3){b3=b4.group=b0.g("point").attr({zIndex:5}).add()}bX=b4.sliced?b4.slicedTranslation:[b1.plotLeft,b1.plotTop];b3.translate(bX[0],bX[1]);if(M){M.translate(bX[0],bX[1])}if(L){L.animate(bY)}else{b4.graphic=L=b0.arc(bY).setRadialReference(bZ.center).attr(bc(b4.pointAttr[ah],{"stroke-linejoin":"round"})).add(b4.group).shadow(b2,M)}if(b4.visible===false){b4.setVisible(false)}})},drawDataLabels:function(){var b1=this,ct=b1.data,cj,cu=b1.chart,cg=b1.options.dataLabels,bY=aI(cg.connectorPadding,10),ce=aI(cg.connectorWidth,1),L,cq,cf=aI(cg.softConnector,true),b7=cg.distance,b0=b1.center,co=b0[2]/2,M=b0[1],b5=b7>0,bZ,b6,cn,ci=[[],[]],cm,cl,b8,b3,cs,cr=2,cp;if(!cg.enabled&&!b1._hasPointLabels){return}a3.prototype.drawDataLabels.apply(b1);C(ct,function(cx){if(cx.dataLabel){ci[cx.labelPos[7]<K/2?0:1].push(cx)}});ci[1].reverse();cs=function(cy,cx){return cx.y-cy.y};cn=ci[0][0]&&ci[0][0].dataLabel&&(ci[0][0].dataLabel.getBBox().height||21);while(cr--){var cv=[],b2,cc=[],ck=ci[cr],ch,ca=ck.length,cw;if(b7>0){for(ch=M-co-b7;ch<=M+co+b7;ch+=cn){cv.push(ch)}b2=cv.length;if(ca>b2){b3=[].concat(ck);b3.sort(cs);cp=ca;while(cp--){b3[cp].rank=cp}cp=ca;while(cp--){if(ck[cp].rank>=b2){ck.splice(cp,1)}}ca=ck.length}for(cp=0;cp<ca;cp++){cj=ck[cp];b6=cj.labelPos;var b9=9999,cd,cb;for(cb=0;cb<b2;cb++){cd=e(cv[cb]-b6[1]);if(cd<b9){b9=cd;cw=cb}}if(cw<cp&&cv[cp]!==null){cw=cp}else{if(b2<ca-cp+cw&&cv[cp]!==null){cw=b2-ca+cp;while(cv[cw]===null){cw++}}else{while(cv[cw]===null){cw++}}}cc.push({i:cw,y:cv[cw]});cv[cw]=null}cc.sort(cs)}for(cp=0;cp<ca;cp++){var b4,bX;cj=ck[cp];b6=cj.labelPos;bZ=cj.dataLabel;b8=cj.visible===false?ae:ai;bX=b6[1];if(b7>0){b4=cc.pop();cw=b4.i;cl=b4.y;if((bX>cl&&cv[cw+1]!==null)||(bX<cl&&cv[cw-1]!==null)){cl=bX}}else{cl=bX}cm=cg.justify?b0[0]+(cr?-1:1)*(co+b7):b1.getX(cw===0||cw===cv.length-1?bX:cl,cr);bZ.attr({visibility:b8,align:b6[6]})[bZ.moved?"animate":"attr"]({x:cm+cg.x+({left:bY,right:-bY}[b6[6]]||0),y:cl+cg.y-10});bZ.moved=true;if(b5&&ce){L=cj.connector;cq=cf?[bk,cm+(b6[6]==="left"?5:-5),cl,"C",cm,cl,2*b6[2]-b6[4],2*b6[3]-b6[5],b6[2],b6[3],bl,b6[4],b6[5]]:[bk,cm+(b6[6]==="left"?5:-5),cl,bl,b6[2],b6[3],bl,b6[4],b6[5]];if(L){L.animate({d:cq});L.attr("visibility",b8)}else{cj.connector=L=b1.chart.renderer.path(cq).attr({"stroke-width":ce,stroke:cg.connectorColor||cj.color||"#606060",visibility:b8,zIndex:3}).translate(cu.plotLeft,cu.plotTop).add()}}}}},alignDataLabel:j,drawTracker:h.prototype.drawTracker,drawLegendSymbol:az.prototype.drawLegendSymbol,getSymbol:function(){}};n=a9(a3,n);a.pie=n;bc(Highcharts,{Axis:z,CanVGRenderer:bU,Chart:ba,Color:bA,Legend:bm,MouseTracker:G,Point:bp,Tick:ay,Tooltip:bI,Renderer:bH,Series:a3,SVGRenderer:d,VMLRenderer:bT,dateFormat:bF,pathAnim:an,getOptions:aB,hasBidiBug:aa,numberFormat:l,seriesTypes:a,setOptions:aZ,addEvent:v,removeEvent:aV,createElement:be,discardElement:bE,css:bQ,each:C,extend:bc,map:af,merge:aH,pick:aI,splat:a6,extendClass:a9,pInt:bC,wrap:aQ,svg:bL,canvas:aX,vml:!bL&&!aX,product:"Highcharts",version:"2.3.3"})}());(function(b){function d(f){var e=["transform","WebkitTransform","msTransform","MozTransform","OTransform"];var h;while(h=e.shift()){if(typeof f.style[h]!="undefined"){return h}}return"transform"}var c=null;var a=b.fn.css;b.fn.css=function(e,f){if(c===null){if(typeof b.cssProps!="undefined"){c=b.cssProps}else{if(typeof b.props!="undefined"){c=b.props}else{c={}}}}if(typeof c.transform=="undefined"&&(e=="transform"||(typeof e=="object"&&typeof e.transform!="undefined"))){c.transform=d(this.get(0))}if(c.transform!="transform"){if(e=="transform"){e=c.transform;if(typeof f=="undefined"&&jQuery.style){return jQuery.style(this.get(0),e)}}else{if(typeof e=="object"&&typeof e.transform!="undefined"){e[c.transform]=e.transform;delete e.transform}}}return a.apply(this,arguments)}})(jQuery);(function(L,n,Y){var M={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,reposition:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},z="colorbox",U="cbox",t=U+"Element",X=U+"_open",e=U+"_load",W=U+"_complete",w=U+"_cleanup",ae=U+"_closed",k=U+"_purge",x=!L.support.opacity&&!L.support.style,ah=x&&!Y.XMLHttpRequest,ac=U+"_IE6",S,ai,aj,d,J,r,b,R,c,ab,P,m,j,q,v,Z,u,T,B,D,ag,ak,o,h,a,y,K,p,F,aa,O,C,N,af="div",ad;function I(al,ao,an){var am=n.createElement(al);if(ao){am.id=U+ao}if(an){am.style.cssText=an}return L(am)}function G(am){var al=c.length,an=(K+am)%al;return(an<0)?al+an:an}function Q(al,am){return Math.round((/%/.test(al)?((am==="x"?ab.width():ab.height())/100):1)*parseInt(al,10))}function E(al){return ag.photo||/\.(gif|png|jpe?g|bmp|ico)((#|\?).*)?$/i.test(al)}function V(){var al;ag=L.extend({},L.data(y,z));for(al in ag){if(L.isFunction(ag[al])&&al.slice(0,2)!=="on"){ag[al]=ag[al].call(y)}}ag.rel=ag.rel||y.rel||"nofollow";ag.href=ag.href||L(y).attr("href");ag.title=ag.title||y.title;if(typeof ag.href==="string"){ag.href=L.trim(ag.href)}}function H(al,am){L.event.trigger(al);if(am){am.call(y)}}function A(){var am,ao=U+"Slideshow_",ap="click."+U,aq,an,al;if(ag.slideshow&&c[1]){aq=function(){Z.text(ag.slideshowStop).unbind(ap).bind(W,function(){if(ag.loop||c[K+1]){am=setTimeout(N.next,ag.slideshowSpeed)}}).bind(e,function(){clearTimeout(am)}).one(ap+" "+w,an);ai.removeClass(ao+"off").addClass(ao+"on");am=setTimeout(N.next,ag.slideshowSpeed)};an=function(){clearTimeout(am);Z.text(ag.slideshowStart).unbind([W,e,w,ap].join(" ")).one(ap,function(){N.next();aq()});ai.removeClass(ao+"on").addClass(ao+"off")};if(ag.slideshowAuto){aq()}else{an()}}else{ai.removeClass(ao+"off "+ao+"on")}}function f(al){if(!O){y=al;V();c=L(y);K=0;if(ag.rel!=="nofollow"){c=L("."+t).filter(function(){var am=L.data(this,z).rel||this.rel;return(am===ag.rel)});K=c.index(y);if(K===-1){c=c.add(y);K=c.length-1}}if(!F){F=aa=true;ai.show();if(ag.returnFocus){L(y).blur().one(ae,function(){L(this).focus()})}S.css({opacity:+ag.opacity,cursor:ag.overlayClose?"pointer":"auto"}).show();ag.w=Q(ag.initialWidth,"x");ag.h=Q(ag.initialHeight,"y");N.position();if(ah){ab.bind("resize."+ac+" scroll."+ac,function(){S.css({width:ab.width(),height:ab.height(),top:ab.scrollTop(),left:ab.scrollLeft()})}).trigger("resize."+ac)}H(X,ag.onOpen);D.add(q).hide()}N.load(true)}}function s(){if(!ai&&n.body){ad=false;ab=L(Y);ai=I(af).attr({id:z,"class":x?U+(ah?"IE6":"IE"):""}).hide();S=I(af,"Overlay",ah?"position:absolute":"").hide();aj=I(af,"Wrapper");d=I(af,"Content").append(P=I(af,"LoadedContent","width:0; height:0; overflow:hidden"),j=I(af,"LoadingOverlay").add(I(af,"LoadingGraphic")),q=I(af,"Title"),v=I(af,"Current"),u=I(af,"Next"),T=I(af,"Previous"),Z=I(af,"Slideshow").bind(X,A),B=I(af,"Close"));aj.append(I(af).append(I(af,"TopLeft"),J=I(af,"TopCenter"),I(af,"TopRight")),I(af,false,"clear:left").append(r=I(af,"MiddleLeft"),d,b=I(af,"MiddleRight")),I(af,false,"clear:left").append(I(af,"BottomLeft"),R=I(af,"BottomCenter"),I(af,"BottomRight"))).find("div div").css({"float":"left"});m=I(af,false,"position:absolute; width:9999px; visibility:hidden; display:none");D=u.add(T).add(v).add(Z);L(n.body).append(S,ai.append(aj,m))}}function l(){if(ai){if(!ad){ad=true;ak=J.height()+R.height()+d.outerHeight(true)-d.height();o=r.width()+b.width()+d.outerWidth(true)-d.width();h=P.outerHeight(true);a=P.outerWidth(true);ai.css({"padding-bottom":ak,"padding-right":o});u.click(function(){N.next()});T.click(function(){N.prev()});B.click(function(){N.close()});S.click(function(){if(ag.overlayClose){N.close()}});L(n).bind("keydown."+U,function(am){var al=am.keyCode;if(F&&ag.escKey&&al===27){am.preventDefault();N.close()}if(F&&ag.arrowKey&&c[1]){if(al===37){am.preventDefault();T.click()}else{if(al===39){am.preventDefault();u.click()}}}});L("."+t,n).live("click",function(al){if(!(al.which>1||al.shiftKey||al.altKey||al.metaKey)){al.preventDefault();f(this)}})}return true}return false}if(L.colorbox){return}L(s);N=L.fn[z]=L[z]=function(al,an){var am=this;al=al||{};s();if(l()){if(!am[0]){if(am.selector){return am}am=L("<a/>");al.open=true}if(an){al.onComplete=an}am.each(function(){L.data(this,z,L.extend({},L.data(this,z)||M,al))}).addClass(t);if((L.isFunction(al.open)&&al.open.call(am))||al.open){f(am[0])}}return am};N.position=function(am,al){var ap=0,ao=0,ar=ai.offset(),an=ab.scrollTop(),aq=ab.scrollLeft();ab.unbind("resize."+U);ai.css({top:-90000,left:-90000});if(ag.fixed&&!ah){ar.top-=an;ar.left-=aq;ai.css({position:"fixed"})}else{ap=an;ao=aq;ai.css({position:"absolute"})}if(ag.right!==false){ao+=Math.max(ab.width()-ag.w-a-o-Q(ag.right,"x"),0)}else{if(ag.left!==false){ao+=Q(ag.left,"x")}else{ao+=Math.round(Math.max(ab.width()-ag.w-a-o,0)/2)}}if(ag.bottom!==false){ap+=Math.max(ab.height()-ag.h-h-ak-Q(ag.bottom,"y"),0)}else{if(ag.top!==false){ap+=Q(ag.top,"y")}else{ap+=Math.round(Math.max(ab.height()-ag.h-h-ak,0)/2)}}ai.css({top:ar.top,left:ar.left});am=(ai.width()===ag.w+a&&ai.height()===ag.h+h)?0:am||0;aj[0].style.width=aj[0].style.height="9999px";function at(au){J[0].style.width=R[0].style.width=d[0].style.width=au.style.width;d[0].style.height=r[0].style.height=b[0].style.height=au.style.height}ai.dequeue().animate({width:ag.w+a,height:ag.h+h,top:ap,left:ao},{duration:am,complete:function(){at(this);aa=false;aj[0].style.width=(ag.w+a+o)+"px";aj[0].style.height=(ag.h+h+ak)+"px";if(ag.reposition){setTimeout(function(){ab.bind("resize."+U,N.position)},1)}if(al){al()}},step:function(){at(this)}})};N.resize=function(al){if(F){al=al||{};if(al.width){ag.w=Q(al.width,"x")-a-o}if(al.innerWidth){ag.w=Q(al.innerWidth,"x")}P.css({width:ag.w});if(al.height){ag.h=Q(al.height,"y")-h-ak}if(al.innerHeight){ag.h=Q(al.innerHeight,"y")}if(!al.innerHeight&&!al.height){P.css({height:"auto"});ag.h=P.height()}P.css({height:ag.h});N.position(ag.transition==="none"?0:ag.speed)}};N.prep=function(am){if(!F){return}var ap,an=ag.transition==="none"?0:ag.speed;P.remove();P=I(af,"LoadedContent").append(am);function al(){ag.w=ag.w||P.width();ag.w=ag.mw&&ag.mw<ag.w?ag.mw:ag.w;return ag.w}function ao(){ag.h=ag.h||P.height();ag.h=ag.mh&&ag.mh<ag.h?ag.mh:ag.h;return ag.h}P.hide().appendTo(m.show()).css({width:al(),overflow:ag.scrolling?"auto":"hidden"}).css({height:ao()}).prependTo(d);m.hide();L(p).css({"float":"none"});if(ah){L("select").not(ai.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(w,function(){this.style.visibility="inherit"})}ap=function(){var aA,ax,ay=c.length,av,az="frameBorder",au="allowTransparency",ar,aq,aw;if(!F){return}function at(){if(x){ai[0].style.removeAttribute("filter")}}ar=function(){clearTimeout(C);j.hide();H(W,ag.onComplete)};if(x){if(p){P.fadeIn(100)}}q.html(ag.title).add(P).show();if(ay>1){if(typeof ag.current==="string"){v.html(ag.current.replace("{current}",K+1).replace("{total}",ay)).show()}u[(ag.loop||K<ay-1)?"show":"hide"]().html(ag.next);T[(ag.loop||K)?"show":"hide"]().html(ag.previous);if(ag.slideshow){Z.show()}if(ag.preloading){aA=[G(-1),G(1)];while(ax=c[aA.pop()]){aq=L.data(ax,z).href||ax.href;if(L.isFunction(aq)){aq=aq.call(ax)}if(E(aq)){aw=new Image();aw.src=aq}}}}else{D.hide()}if(ag.iframe){av=I("iframe")[0];if(az in av){av[az]=0}if(au in av){av[au]="true"}av.name=U+(+new Date());if(ag.fastIframe){ar()}else{L(av).one("load",ar)}av.src=ag.href;if(!ag.scrolling){av.scrolling="no"}L(av).addClass(U+"Iframe").appendTo(P).one(k,function(){av.src="//about:blank"})}else{ar()}if(ag.transition==="fade"){ai.fadeTo(an,1,at)}else{at()}};if(ag.transition==="fade"){ai.fadeTo(an,0,function(){N.position(0,ap)})}else{N.position(an,ap)}};N.load=function(an){var am,ao,al=N.prep;aa=true;p=false;y=c[K];if(!an){V()}H(k);H(e,ag.onLoad);ag.h=ag.height?Q(ag.height,"y")-h-ak:ag.innerHeight&&Q(ag.innerHeight,"y");ag.w=ag.width?Q(ag.width,"x")-a-o:ag.innerWidth&&Q(ag.innerWidth,"x");ag.mw=ag.w;ag.mh=ag.h;if(ag.maxWidth){ag.mw=Q(ag.maxWidth,"x")-a-o;ag.mw=ag.w&&ag.w<ag.mw?ag.w:ag.mw}if(ag.maxHeight){ag.mh=Q(ag.maxHeight,"y")-h-ak;ag.mh=ag.h&&ag.h<ag.mh?ag.h:ag.mh}am=ag.href;C=setTimeout(function(){j.show()},100);if(ag.inline){I(af).hide().insertBefore(L(am)[0]).one(k,function(){L(this).replaceWith(P.children())});al(L(am))}else{if(ag.iframe){al(" ")}else{if(ag.html){al(ag.html)}else{if(E(am)){L(p=new Image()).addClass(U+"Photo").error(function(){ag.title=false;al(I(af,"Error").text("This image could not be loaded"))}).load(function(){var ap;p.onload=null;if(ag.scalePhotos){ao=function(){p.height-=p.height*ap;p.width-=p.width*ap};if(ag.mw&&p.width>ag.mw){ap=(p.width-ag.mw)/p.width;ao()}if(ag.mh&&p.height>ag.mh){ap=(p.height-ag.mh)/p.height;ao()}}if(ag.h){p.style.marginTop=Math.max(ag.h-p.height,0)/2+"px"}if(c[1]&&(ag.loop||c[K+1])){p.style.cursor="pointer";p.onclick=function(){N.next()}}if(x){p.style.msInterpolationMode="bicubic"}setTimeout(function(){al(p)},1)});setTimeout(function(){p.src=am},1)}else{if(am){m.load(am,ag.data,function(aq,ap,ar){al(ap==="error"?I(af,"Error").text("Request unsuccessful: "+ar.statusText):L(this).contents())})}}}}}};N.next=function(){if(!aa&&c[1]&&(ag.loop||c[K+1])){K=G(1);N.load()}};N.prev=function(){if(!aa&&c[1]&&(ag.loop||K)){K=G(-1);N.load()}};N.close=function(){if(F&&!O){O=true;F=false;H(w,ag.onCleanup);ab.unbind("."+U+" ."+ac);S.fadeTo(200,0);ai.stop().fadeTo(300,0,function(){ai.add(S).css({opacity:1,cursor:"auto"}).hide();H(k);P.remove();setTimeout(function(){O=false;H(ae,ag.onClosed)},1)})}};N.remove=function(){L([]).add(ai).add(S).remove();ai=null;L("."+t).removeData(z).removeClass(t).die()};N.element=function(){return L(y)};N.settings=M}(jQuery,document,this));jQuery.cookie=function(b,k,n){if(typeof k!="undefined"){n=n||{};if(k===null){k="";n.expires=-1}var e="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var f;if(typeof n.expires=="number"){f=new Date();f.setTime(f.getTime()+(n.expires*24*60*60*1000))}else{f=n.expires}e="; expires="+f.toUTCString()}var m=n.path?"; path="+(n.path):"";var h=n.domain?"; domain="+(n.domain):"";var a=n.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(k),e,m,h,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var j=0;j<l.length;j++){var c=jQuery.trim(l[j]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(a){a.fn.spin=function(d,c){var b={tiny:{lines:8,length:2,width:2,radius:3},xsmall:{lines:8,length:3,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}};if(Spinner){return this.each(function(){var f=a(this),e=f.data();if(e.spinner){e.spinner.stop();delete e.spinner}if(d!==false){if(typeof d==="string"){if(d in b){d=b[d]}else{d={}}if(c){d.color=c}}e.spinner=new Spinner(a.extend({color:f.css("color")},d)).spin(this)}})}else{throw"Spinner class not available."}}})(jQuery);
/*!
jQuery Waypoints - v1.1.7
Copyright (c) 2011-2012 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/MIT-license.txt
https://github.com/imakewebthings/jquery-waypoints/blob/master/GPL-license.txt
*/
(function($,m,o,k,d){var e=$(k),h="waypoint.reached",b=function(q,p){q.element.trigger(h,p);if(q.options.triggerOnce){q.element[m]("destroy")}},j=function(r,q){if(!q){return -1}var p=q.waypoints.length-1;while(p>=0&&q.waypoints[p].element[0]!==r[0]){p-=1}return p},f=[],n=function(p){$.extend(this,{element:$(p),oldScroll:0,waypoints:[],didScroll:false,didResize:false,doScroll:$.proxy(function(){var s=this.element.scrollTop(),r=s>this.oldScroll,u=this,t=$.grep(this.waypoints,function(w,v){return r?(w.offset>u.oldScroll&&w.offset<=s):(w.offset<=u.oldScroll&&w.offset>s)}),q=t.length;if(!this.oldScroll||!s){$[o]("refresh")}this.oldScroll=s;if(!q){return}if(!r){t.reverse()}$.each(t,function(w,v){if(v.options.continuous||w===q-1){b(v,[r?"down":"up"])}})},this)});$(p).bind("scroll.waypoints",$.proxy(function(){if(!this.didScroll){this.didScroll=true;k.setTimeout($.proxy(function(){this.doScroll();this.didScroll=false},this),$[o].settings.scrollThrottle)}},this)).bind("resize.waypoints",$.proxy(function(){if(!this.didResize){this.didResize=true;k.setTimeout($.proxy(function(){$[o]("refresh");this.didResize=false},this),$[o].settings.resizeThrottle)}},this));e.load($.proxy(function(){this.doScroll()},this))},l=function(p){var q=null;$.each(f,function(r,s){if(s.element[0]===p){q=s;return false}});return q},c={init:function(q,p){this.each(function(){var w=$.fn[m].defaults.context,s,v=$(this);if(p&&p.context){w=p.context}if(!$.isWindow(w)){w=v.closest(w)[0]}s=l(w);if(!s){s=new n(w);f.push(s)}var r=j(v,s),u=r<0?$.fn[m].defaults:s.waypoints[r].options,t=$.extend({},u,p);t.offset=t.offset==="bottom-in-view"?function(){var x=$.isWindow(w)?$[o]("viewportHeight"):$(w).height();return x-$(this).outerHeight()}:t.offset;if(r<0){s.waypoints.push({element:v,offset:null,options:t})}else{s.waypoints[r].options=t}if(q){v.bind(h,q)}if(p&&p.handler){v.bind(h,p.handler)}});$[o]("refresh");return this},remove:function(){return this.each(function(q,r){var p=$(r);$.each(f,function(t,u){var s=j(p,u);if(s>=0){u.waypoints.splice(s,1);if(!u.waypoints.length){u.element.unbind("scroll.waypoints resize.waypoints");f.splice(t,1)}}})})},destroy:function(){return this.unbind(h)[m]("remove")}},a={refresh:function(){$.each(f,function(t,u){var s=$.isWindow(u.element[0]),p=s?0:u.element.offset().top,r=s?$[o]("viewportHeight"):u.element.height(),q=s?0:u.element.scrollTop();$.each(u.waypoints,function(w,z){if(!z){return}var v=z.options.offset,y=z.offset;if(typeof z.options.offset==="function"){v=z.options.offset.apply(z.element)}else{if(typeof z.options.offset==="string"){var x=parseFloat(z.options.offset);v=z.options.offset.indexOf("%")?Math.ceil(r*(x/100)):x}}z.offset=z.element.offset().top-p+q-v;if(z.options.onlyOnScroll){return}if(y!==null&&u.oldScroll>y&&u.oldScroll<=z.offset){b(z,["up"])}else{if(y!==null&&u.oldScroll<y&&u.oldScroll>=z.offset){b(z,["down"])}else{if(!y&&u.element.scrollTop()>z.offset){b(z,["down"])}}}});u.waypoints.sort(function(w,v){return w.offset-v.offset})})},viewportHeight:function(){return(k.innerHeight?k.innerHeight:e.height())},aggregate:function(){var p=$();$.each(f,function(q,r){$.each(r.waypoints,function(s,t){p=p.add(t.element)})});return p}};$.fn[m]=function(p){if(c[p]){return c[p].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof p==="function"||!p){return c.init.apply(this,arguments)}else{if(typeof p==="object"){return c.init.apply(this,[null,p])}else{$.error("Method "+p+" does not exist on jQuery "+m)}}}};$.fn[m].defaults={continuous:true,offset:0,triggerOnce:false,context:k};$[o]=function(p){if(a[p]){return a[p].apply(this)}else{return a.aggregate()}};$[o].settings={resizeThrottle:200,scrollThrottle:100};e.load(function(){$[o]("refresh")})})(jQuery,"waypoint","waypoints",window);!function(B,H,q){function k(d,f){var c=H.createElement(d||"div"),a;for(a in f){c[a]=f[a]}return c}function G(c){for(var a=1,d=arguments.length;a<d;a++){c.appendChild(arguments[a])}return c}function A(s,K,h,a){var d=["opacity",K,~~(s*100),h,a].join("-"),J=0.01+h/a*100,p=Math.max(1-(1-s)/K*(100-J),s),m=I.substring(0,I.indexOf("Animation")).toLowerCase(),v=m&&"-"+m+"-"||"";return y[d]||(E.insertRule("@"+v+"keyframes "+d+"{0%{opacity:"+p+"}"+J+"%{opacity:"+s+"}"+(J+0.01)+"%{opacity:1}"+(J+K)%100+"%{opacity:"+s+"}100%{opacity:"+p+"}}",E.cssRules.length),y[d]=1),d}function x(f,c){var a=f.style,d,h;if(a[c]!==q){return c}c=c.charAt(0).toUpperCase()+c.slice(1);for(h=0;h<b.length;h++){d=b[h]+c;if(a[d]!==q){return d}}}function D(c,a){for(var d in a){c.style[x(c,d)||d]=a[d]}return c}function z(f){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var a in d){f[a]===q&&(f[a]=d[a])}}return f}function j(c){var a={x:c.offsetLeft,y:c.offsetTop};while(c=c.offsetParent){a.x+=c.offsetLeft,a.y+=c.offsetTop}return a}var b=["webkit","Moz","ms","O"],y={},I,E=function(){var a=k("style",{type:"text/css"});return G(H.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),C={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto",position:"relative"},F=function w(a){if(!this.spin){return new w(a)}this.opts=z(a||{},w.defaults,C)};F.defaults={},z(F.prototype,{spin:function(M){this.stop();var R=this,o=R.opts,c=R.el=D(k(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),J=o.radius+o.length+o.width,Q,O;M&&(M.insertBefore(c,M.firstChild||null),O=j(M),Q=j(c),D(c,{left:(o.left=="auto"?O.x-Q.x+(M.offsetWidth>>1):parseInt(o.left,10)+J)+"px",top:(o.top=="auto"?O.y-Q.y+(M.offsetHeight>>1):parseInt(o.top,10)+J)+"px"})),c.setAttribute("aria-role","progressbar"),R.lines(c,R.opts);if(!I){var L=0,s=o.fps,K=s/o.speed,N=(1-o.opacity)/(K*o.trail/100),P=K/o.lines;(function p(){L++;for(var d=o.lines;d;d--){var a=Math.max(1-(L+d*P)%K*N,o.opacity);R.opacity(c,o.lines-d,a,o)}R.timeout=R.el&&setTimeout(p,~~(1000/s))})()}return R},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=q),this},lines:function(f,c){function a(m,l){return D(k(),{position:"absolute",width:c.length+c.width+"px",height:c.width+"px",background:m,boxShadow:l,transformOrigin:"left",transform:"rotate("+~~(360/c.lines*h+c.rotate)+"deg) translate("+c.radius+"px,0)",borderRadius:(c.corners*c.width>>1)+"px"})}var h=0,d;for(;h<c.lines;h++){d=D(k(),{position:"absolute",top:1+~(c.width/2)+"px",transform:c.hwaccel?"translate3d(0,0,0)":"",opacity:c.opacity,animation:I&&A(c.opacity,c.trail,h,c.lines)+" "+1/c.speed+"s linear infinite"}),c.shadow&&G(d,D(a("#000","0 0 4px #000"),{top:"2px"})),G(f,G(d,a(c.color,"0 0 1px rgba(0,0,0,.1)")))}return f},opacity:function(c,a,d){a<c.childNodes.length&&(c.childNodes[a].style.opacity=d)}}),function(){function c(f,d){return k("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',d)}var a=D(k("group"),{behavior:"url(#default#VML)"});!x(a,"transform")&&a.adj?(E.addRule(".spin-vml","behavior:url(#default#VML)"),F.prototype.lines=function(J,h){function K(){return D(c("group",{coordsize:p+" "+p,coordorigin:-d+" "+-d}),{width:p,height:p})}function m(l,f,n){G(v,G(D(K(),{rotation:360/h.lines*l+"deg",left:~~f}),G(D(c("roundrect",{arcsize:h.corners}),{width:d,height:h.width,left:h.radius,top:-h.width>>1,filter:n}),c("fill",{color:h.color,opacity:h.opacity}),c("stroke",{opacity:0}))))}var d=h.length+h.width,p=2*d,e=-(h.width+h.length)*2+"px",v=D(K(),{position:"absolute",top:e,left:e}),u;if(h.shadow){for(u=1;u<=h.lines;u++){m(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(u=1;u<=h.lines;u++){m(u)}return G(J,v)},F.prototype.opacity=function(l,f,m,h){var d=l.firstChild;h=h.shadow&&h.lines||0,d&&f+h<d.childNodes.length&&(d=d.childNodes[f+h],d=d&&d.firstChild,d=d&&d.firstChild,d&&(d.opacity=m))}):I=x(a,"animation")}(),typeof define=="function"&&define.amd?define(function(){return F}):B.Spinner=F}(window,document);var Attacklab=Attacklab||{};Attacklab.showdown=Attacklab.showdown||{};Attacklab.showdown.converter=function(){var a;var l;var D;var k=0;this.makeHtml=function(K){a=new Array();l=new Array();D=new Array();K=K.replace(/~/g,"~T");K=K.replace(/\$/g,"~D");K=K.replace(/\r\n/g,"\n");K=K.replace(/\r/g,"\n");K="\n\n"+K+"\n\n";K=C(K);K=K.replace(/^[ \t]+$/mg,"");K=o(K);K=d(K);K=J(K);K=s(K);K=K.replace(/~D/g,"$$");K=K.replace(/~T/g,"~");K=z(K);return K};var z=function(K){return K.replace(/<([A-Z][A-Z0-9]*)\b[^>]*(?=>(.*?)<\/\1>)/gim,function(L){return L.replace(/on[a-zA-Z]+=("|')[^"']*("|')/gim,"")})};var d=function(K){var K=K.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(N,P,O,M,L){P=P.toLowerCase();a[P]=j(O);if(M){return M+L}else{if(L){l[P]=L.replace(/"/g,"&quot;")}}return""});return K};var o=function(M){M=M.replace(/\n/g,"\n\n");var L="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del";var K="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";M=M.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,A);M=M.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,A);M=M.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,A);M=M.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,A);M=M.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,A);M=M.replace(/\n\n/g,"\n");return M};var A=function(K,L){var M=L;M=M.replace(/\n\n/g,"\n");M=M.replace(/^\n/,"");M=M.replace(/\n+$/g,"");M="\n\n~K"+(D.push(M)-1)+"K\n\n";return M};var J=function(L){L=f(L);var K=q("<hr />");L=L.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,K);L=L.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,K);L=L.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,K);L=H(L);L=b(L);L=w(L);L=o(L);L=h(L);return L};var t=function(K){K=F(K);K=n(K);K=e(K);K=I(K);K=B(K);K=p(K);K=j(K);K=c(K);K=K.replace(/  +\n/g," <br />\n");return K};var n=function(L){var K=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;L=L.replace(K,function(N){var M=N.replace(/(.)<\/?code>(?=.)/g,"$1`");M=y(M,"\\`*_");return M});return L};var B=function(K){K=K.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,G);K=K.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,G);K=K.replace(/(\[([^\[\]]+)\])()()()()()/g,G);return K};var G=function(Q,W,V,U,T,S,P,O){if(O==undefined){O=""}var N=W;var L=V;var M=U.toLowerCase();var K=T;var R=O;if(K==""){if(M==""){M=L.toLowerCase().replace(/ ?\n/g," ")}K="#"+M;if(a[M]!=undefined){K=a[M];if(l[M]!=undefined){R=l[M]}}else{if(N.search(/\(\s*\)$/m)>-1){K=""}else{return N}}}K=y(K,"*_");var X='<a href="'+K+'"';if(R!=""){R=R.replace(/"/g,"&quot;");R=y(R,"*_");X+=' title="'+R+'"'}X+=">"+L+"</a>";return X};var I=function(K){K=K.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,v);K=K.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,v);return K};var v=function(Q,W,V,U,T,S,P,O){var N=W;var M=V;var L=U.toLowerCase();var K=T;var R=O;if(!R){R=""}if(K==""){if(L==""){L=M.toLowerCase().replace(/ ?\n/g," ")}K="#"+L;if(a[L]!=undefined){K=a[L];if(l[L]!=undefined){R=l[L]}}else{return N}}M=M.replace(/"/g,"&quot;");K=y(K,"*_");var X='<img src="'+K+'" alt="'+M+'"';R=R.replace(/"/g,"&quot;");R=y(R,"*_");X+=' title="'+R+'"';X+=" />";return X};var f=function(K){K=K.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(L,M){return q("<h1>"+t(M)+"</h1>")});K=K.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(M,L){return q("<h2>"+t(L)+"</h2>")});K=K.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(L,O,N){var M=O.length;return q("<h"+M+">"+t(N)+"</h"+M+">")});return K};var r;var H=function(L){L+="~0";var K=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;if(k){L=L.replace(K,function(N,Q,P){var R=Q;var O=(P.search(/[*+-]/g)>-1)?"ul":"ol";R=R.replace(/\n{2,}/g,"\n\n\n");var M=r(R);M=M.replace(/\s+$/,"");M="<"+O+">"+M+"</"+O+">\n";return M})}else{K=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;L=L.replace(K,function(O,S,Q,N){var R=S;var T=Q;var P=(N.search(/[*+-]/g)>-1)?"ul":"ol";var T=T.replace(/\n{2,}/g,"\n\n\n");var M=r(T);M=R+"<"+P+">\n"+M+"</"+P+">\n";return M})}L=L.replace(/~0/,"");return L};r=function(K){k++;K=K.replace(/\n{2,}$/,"\n");K+="~0";K=K.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(N,P,O,M,L){var R=L;var Q=P;var S=O;if(Q||(R.search(/\n{2,}/)>-1)){R=J(u(R))}else{R=H(u(R));R=R.replace(/\n$/,"");R=t(R)}return"<li>"+R+"</li>\n"});K=K.replace(/~0/g,"");k--;return K};var b=function(K){K+="~0";K=K.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(L,N,M){var O=N;var P=M;O=x(u(O));O=C(O);O=O.replace(/^\n+/g,"");O=O.replace(/\n+$/g,"");O="<pre><code>"+O+"\n</code></pre>";return q(O)+P});K=K.replace(/~0/,"");return K};var q=function(K){K=K.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(D.push(K)-1)+"K\n\n"};var F=function(K){K=K.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(N,P,O,M,L){var Q=M;Q=Q.replace(/^([ \t]*)/g,"");Q=Q.replace(/[ \t]*$/g,"");Q=x(Q);return P+"<code>"+Q+"</code>"});return K};var x=function(K){K=K.replace(/&/g,"&amp;");K=K.replace(/</g,"&lt;");K=K.replace(/>/g,"&gt;");K=y(K,"*_{}[]\\",false);return K};var c=function(K){K=K.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2</strong>");K=K.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return K};var w=function(K){K=K.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(L,M){var N=M;N=N.replace(/^[ \t]*>[ \t]?/gm,"~0");N=N.replace(/~0/g,"");N=N.replace(/^[ \t]+$/gm,"");N=J(N);N=N.replace(/(^|\n)/g,"$1  ");N=N.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(O,P){var Q=P;Q=Q.replace(/^  /mg,"~0");Q=Q.replace(/~0/g,"");return Q});return q("<blockquote>\n"+N+"\n</blockquote>")});return K};var h=function(Q){Q=Q.replace(/^\n+/g,"");Q=Q.replace(/\n+$/g,"");var P=Q.split(/\n{2,}/g);var M=new Array();var K=P.length;for(var L=0;L<K;L++){var O=P[L];if(O.search(/~K(\d+)K/g)>=0){M.push(O)}else{if(O.search(/\S/)>=0){O=t(O);O=O.replace(/^([ \t]*)/g,"<p>");O+="</p>";M.push(O)}}}K=M.length;for(var L=0;L<K;L++){while(M[L].search(/~K(\d+)K/)>=0){var N=D[RegExp.$1];N=N.replace(/\$/g,"$$$$");M[L]=M[L].replace(/~K\d+K/,N)}}return M.join("\n\n")};var j=function(K){K=K.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");K=K.replace(/<(?![a-z\/?\$!])/gi,"&lt;");return K};var e=function(K){K=K.replace(/\\(\\)/g,m);K=K.replace(/\\([`*_{}\[\]()>#+-.!])/g,m);return K};var p=function(K){K=K.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');K=K.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(L,M){return E(s(M))});return K};var E=function(M){function L(O){var N="0123456789ABCDEF";var P=O.charCodeAt(0);return(N.charAt(P>>4)+N.charAt(P&15))}var K=[function(N){return"&#"+N.charCodeAt(0)+";"},function(N){return"&#x"+L(N)+";"},function(N){return N}];M="mailto:"+M;M=M.replace(/./g,function(N){if(N=="@"){N=K[Math.floor(Math.random()*2)](N)}else{if(N!=":"){var O=Math.random();N=(O>0.9?K[2](N):O>0.45?K[1](N):K[0](N))}}return N});M='<a href="'+M+'">'+M+"</a>";M=M.replace(/">.+:/g,'">');return M};var s=function(K){K=K.replace(/~E(\d+)E/g,function(L,N){var M=parseInt(N);return String.fromCharCode(M)});return K};var u=function(K){K=K.replace(/^(\t|[ ]{1,4})/gm,"~0");K=K.replace(/~0/g,"");return K};var C=function(K){K=K.replace(/\t(?=\t)/g,"    ");K=K.replace(/\t/g,"~A~B");K=K.replace(/~B(.+?)~A/g,function(L,O,N){var Q=O;var M=4-Q.length%4;for(var P=0;P<M;P++){Q+=" "}return Q});K=K.replace(/~A/g,"    ");K=K.replace(/~B/g,"");return K};var y=function(O,L,M){var K="(["+L.replace(/([\[\]\\])/g,"\\$1")+"])";if(M){K="\\\\"+K}var N=new RegExp(K,"g");O=O.replace(N,m);return O};var m=function(K,M){var L=M.charCodeAt(0);return"~E"+L+"E"}};var Showdown=Attacklab.showdown;if(Attacklab.fileLoaded){Attacklab.fileLoaded("showdown.js")}var Attacklab=Attacklab||{};Attacklab.wmdBase=function(){var o=top.Attacklab;var s=top.document;var k=top.RegExp;var f=top.navigator;o.Util={};o.Position={};o.Command={};o.Global={};var a=o.Util;var r=o.Position;var d=o.Command;var l=o.Global;l.isIE=/msie/.test(f.userAgent.toLowerCase());l.isIE_5or6=/msie 6/.test(f.userAgent.toLowerCase())||/msie 5/.test(f.userAgent.toLowerCase());l.isIE_7plus=l.isIE&&!l.isIE_5or6;l.isOpera=/opera/.test(f.userAgent.toLowerCase());l.isKonqueror=/konqueror/.test(f.userAgent.toLowerCase());var q="<h2>Enter an image URL</h2>";var t="<h2>Enter a URL</h2>";var b="http://";var c="http://";var h="images/";var p=500;var n=100;var e="http://wmd-editor.com/";var j="WMD website";var m="_blank";o.PanelCollection=function(){this.buttonBar=s.getElementById("wmd-button-bar");this.preview=s.getElementById("wmd-preview");this.output=s.getElementById("wmd-output");this.input=s.getElementById("wmd-input")};o.panels=undefined;o.ieCachedRange=null;o.ieRetardedClick=false;a.isVisible=function(u){if(window.getComputedStyle){return window.getComputedStyle(u,null).getPropertyValue("display")!=="none"}else{if(u.currentStyle){return u.currentStyle.display!=="none"}}};a.addEvent=function(v,u,w){if(v.attachEvent){v.attachEvent("on"+u,w)}else{v.addEventListener(u,w,false)}};a.removeEvent=function(v,u,w){if(v.detachEvent){v.detachEvent("on"+u,w)}else{v.removeEventListener(u,w,false)}};a.fixEolChars=function(u){u=u.replace(/\r\n/g,"\n");u=u.replace(/\r/g,"\n");return u};a.extendRegExp=function(x,z,w){if(z===null||z===undefined){z=""}if(w===null||w===undefined){w=""}var y=x.toString();var v="";var u=y.match(/\/([gim]*)$/);if(u===null){v=u[0]}else{v=""}y=y.replace(/(^\/|\/[gim]*$)/g,"");y=z+y+w;return new RegExp(y,v)};a.createImage=function(u){var w=h+u;var v=s.createElement("img");v.className="wmd-button";v.src=w;return v};a.prompt=function(A,D,w){var x;var u;var y;if(D===undefined){D=""}var z=function(E){var F=(E.charCode||E.keyCode);if(F===27){B(true)}};var B=function(E){a.removeEvent(s.body,"keydown",z);var F=y.value;if(E){F=null}else{F=F.replace("http://http://","http://");F=F.replace("http://https://","https://");F=F.replace("http://ftp://","ftp://");if(F.indexOf("http://")===-1&&F.indexOf("ftp://")===-1&&F.indexOf("https://")===-1){F="http://"+F}}x.parentNode.removeChild(x);u.parentNode.removeChild(u);w(F);return false};var v=function(){u=s.createElement("div");u.className="wmd-prompt-background";style=u.style;style.position="absolute";style.top="0";style.zIndex="1000";if(l.isKonqueror){style.backgroundColor="transparent"}else{if(l.isIE){style.filter="alpha(opacity=50)"}else{style.opacity="0.5"}}var E=r.getPageSize();style.height=E[1]+"px";if(l.isIE){style.left=s.documentElement.scrollLeft;style.width=s.documentElement.clientWidth}else{style.left="0";style.width="100%"}s.body.appendChild(u)};var C=function(){x=s.createElement("div");x.className="wmd-prompt-dialog";x.style.padding="10px;";x.style.position="fixed";x.style.width="400px";x.style.zIndex="1001";var E=s.createElement("div");E.innerHTML=A;E.style.padding="5px";x.appendChild(E);var F=s.createElement("form");F.onsubmit=function(){return B(false)};style=F.style;style.padding="0";style.margin="0";style.cssFloat="left";style.width="100%";style.textAlign="center";style.position="relative";x.appendChild(F);y=s.createElement("input");y.type="text";y.value=D;style=y.style;style.display="block";style.width="80%";style.marginLeft=style.marginRight="auto";F.appendChild(y);var H=s.createElement("input");H.type="button";H.onclick=function(){return B(false)};H.value="OK";style=H.style;style.margin="10px";style.display="inline";style.width="7em";var G=s.createElement("input");G.type="button";G.onclick=function(){return B(true)};G.value="Cancel";style=G.style;style.margin="10px";style.display="inline";style.width="7em";if(/mac/.test(f.platform.toLowerCase())){F.appendChild(G);F.appendChild(H)}else{F.appendChild(H);F.appendChild(G)}a.addEvent(s.body,"keydown",z);x.style.top="50%";x.style.left="50%";x.style.display="block";if(l.isIE_5or6){x.style.position="absolute";x.style.top=s.documentElement.scrollTop+200+"px";x.style.left="50%"}s.body.appendChild(x);x.style.marginTop=-(r.getHeight(x)/2)+"px";x.style.marginLeft=-(r.getWidth(x)/2)+"px"};v();top.setTimeout(function(){C();var F=D.length;if(y.selectionStart!==undefined){y.selectionStart=0;y.selectionEnd=F}else{if(y.createTextRange){var E=y.createTextRange();E.collapse(false);E.moveStart("character",-F);E.moveEnd("character",F);E.select()}}y.focus()},0)};r.getTop=function(w,v){var u=w.offsetTop;if(!v){while(w=w.offsetParent){u+=w.offsetTop}}return u};r.getHeight=function(u){return u.offsetHeight||u.scrollHeight};r.getWidth=function(u){return u.offsetWidth||u.scrollWidth};r.getPageSize=function(){var v,w;var u,z;if(self.innerHeight&&self.scrollMaxY){v=s.body.scrollWidth;w=self.innerHeight+self.scrollMaxY}else{if(s.body.scrollHeight>s.body.offsetHeight){v=s.body.scrollWidth;w=s.body.scrollHeight}else{v=s.body.offsetWidth;w=s.body.offsetHeight}}if(self.innerHeight){u=self.innerWidth;z=self.innerHeight}else{if(s.documentElement&&s.documentElement.clientHeight){u=s.documentElement.clientWidth;z=s.documentElement.clientHeight}else{if(s.body){u=s.body.clientWidth;z=s.body.clientHeight}}}var y=Math.max(v,u);var x=Math.max(w,z);return[y,x,u,z]};o.inputPoller=function(D,w){var u=this;var z=o.panels.input;var v;var x;var A;var y;this.tick=function(){if(!a.isVisible(z)){return}if(z.selectionStart||z.selectionStart===0){var F=z.selectionStart;var E=z.selectionEnd;if(F!=v||E!=x){v=F;x=E;if(A!=z.value){A=z.value;return true}}}return false};var C=function(){if(!a.isVisible(z)){return}if(u.tick()){D()}};var B=function(){y=top.setInterval(C,w)};this.destroy=function(){top.clearInterval(y)};B()};o.undoManager=function(F){var J=this;var D=[];var B=0;var A="none";var v;var G;var w;var z;var u=function(L,K){if(A!=L){A=L;if(!K){x()}}if(!l.isIE||A!="moving"){w=top.setTimeout(C,1)}else{z=null}};var C=function(){z=new o.TextareaState();G.tick();w=undefined};this.setCommandMode=function(){A="command";x();w=top.setTimeout(C,0)};this.canUndo=function(){return B>1};this.canRedo=function(){if(D[B+1]){return true}return false};this.undo=function(){if(J.canUndo()){if(v){v.restore();v=null}else{D[B]=new o.TextareaState();D[--B].restore();if(F){F()}}}A="none";o.panels.input.focus();C()};this.redo=function(){if(J.canRedo()){D[++B].restore();if(F){F()}}A="none";o.panels.input.focus();C()};var x=function(){var K=z||new o.TextareaState();if(!K){return false}if(A=="moving"){if(!v){v=K}return}if(v){if(D[B-1].text!=v.text){D[B++]=v}v=null}D[B++]=K;D[B+1]=null;if(F){F()}};var E=function(K){var M=false;if(K.ctrlKey||K.metaKey){var L=K.charCode||K.keyCode;var N=String.fromCharCode(L);switch(N){case"y":J.redo();M=true;break;case"z":if(!K.shiftKey){J.undo()}else{J.redo()}M=true;break}}if(M){if(K.preventDefault){K.preventDefault()}if(top.event){top.event.returnValue=false}return}};var I=function(K){if(!K.ctrlKey&&!K.metaKey){var L=K.keyCode;if((L>=33&&L<=40)||(L>=63232&&L<=63235)){u("moving")}else{if(L==8||L==46||L==127){u("deleting")}else{if(L==13){u("newlines")}else{if(L==27){u("escape")}else{if((L<16||L>20)&&L!=91){u("typing")}}}}}}};var y=function(){a.addEvent(o.panels.input,"keypress",function(L){if((L.ctrlKey||L.metaKey)&&(L.keyCode==89||L.keyCode==90)){L.preventDefault()}});var K=function(){if(l.isIE||(z&&z.text!=o.panels.input.value)){if(w==undefined){A="paste";x();C()}}};G=new o.inputPoller(K,n);a.addEvent(o.panels.input,"keydown",E);a.addEvent(o.panels.input,"keydown",I);a.addEvent(o.panels.input,"mousedown",function(){u("moving")});o.panels.input.onpaste=K;o.panels.input.ondrop=K};var H=function(){y();C();x()};this.destroy=function(){if(G){G.destroy()}};H()};o.editor=function(D){if(!D){D=function(){}}var A=o.panels.input;var x=0;var E=this;var z;var G;var v;var B;var C;var J=function(L){A.focus();if(L.textOp){if(C){C.setCommandMode()}var N=new o.TextareaState();if(!N){return}var P=N.getChunks();var K=function(){A.focus();if(P){N.setChunks(P)}N.restore();D()};var O=true;var M=L.textOp(P,K,O);if(!M){K()}}if(L.execute){L.execute(E)}};var H=function(){if(C){u(document.getElementById("wmd-undo-button"),C.canUndo());u(document.getElementById("wmd-redo-button"),C.canRedo())}};var u=function(K,M){var N="0px";var O="-20px";var L="-40px";if(M){K.style.backgroundPosition=K.XShift+" "+N;K.onmouseover=function(){this.style.backgroundPosition=this.XShift+" "+L};K.onmouseout=function(){this.style.backgroundPosition=this.XShift+" "+N};if(l.isIE){K.onmousedown=function(){o.ieRetardedClick=true;o.ieCachedRange=document.selection.createRange()}}if(!K.isHelp){K.onclick=function(){if(this.onmouseout){this.onmouseout()}J(this);return false}}}else{K.style.backgroundPosition=K.XShift+" "+O;K.onmouseover=K.onmouseout=K.onclick=function(){}}};var y=function(){var O=document.getElementById("wmd-button-bar");var L="0px";var N="-20px";var T="-40px";var Z=document.createElement("ul");Z.id="wmd-button-row";Z=O.appendChild(Z);var S=document.createElement("li");S.className="wmd-button";S.id="wmd-bold-button";S.title="Strong <strong> Ctrl+B";S.XShift="0px";S.textOp=d.doBold;u(S,true);Z.appendChild(S);var R=document.createElement("li");R.className="wmd-button";R.id="wmd-italic-button";R.title="Emphasis <em> Ctrl+I";R.XShift="-20px";R.textOp=d.doItalic;u(R,true);Z.appendChild(R);var W=document.createElement("li");W.className="wmd-spacer";W.id="wmd-spacer1";Z.appendChild(W);var X=document.createElement("li");X.className="wmd-button";X.id="wmd-link-button";X.title="Hyperlink <a> Ctrl+L";X.XShift="-40px";X.textOp=function(ae,af,ag){return d.doLinkOrImage(ae,af,false)};u(X,true);Z.appendChild(X);var aa=document.createElement("li");aa.className="wmd-button";aa.id="wmd-quote-button";aa.title="Blockquote <blockquote> Ctrl+Q";aa.XShift="-60px";aa.textOp=d.doBlockquote;u(aa,true);Z.appendChild(aa);var ab=document.createElement("li");ab.className="wmd-button";ab.id="wmd-code-button";ab.title="Code Sample <pre><code> Ctrl+K";ab.XShift="-80px";ab.textOp=d.doCode;u(ab,true);Z.appendChild(ab);var P=document.createElement("li");P.className="wmd-button";P.id="wmd-image-button";P.title="Image <img> Ctrl+G";P.XShift="-100px";P.textOp=function(ae,af,ag){return d.doLinkOrImage(ae,af,true)};u(P,true);Z.appendChild(P);var V=document.createElement("li");V.className="wmd-spacer";V.id="wmd-spacer2";Z.appendChild(V);var Q=document.createElement("li");Q.className="wmd-button";Q.id="wmd-olist-button";Q.title="Numbered List <ol> Ctrl+O";Q.XShift="-120px";Q.textOp=function(ae,af,ag){d.doList(ae,af,true,ag)};u(Q,true);Z.appendChild(Q);var ad=document.createElement("li");ad.className="wmd-button";ad.id="wmd-ulist-button";ad.title="Bulleted List <ul> Ctrl+U";ad.XShift="-140px";ad.textOp=function(ae,af,ag){d.doList(ae,af,false,ag)};u(ad,true);Z.appendChild(ad);var Y=document.createElement("li");Y.className="wmd-button";Y.id="wmd-heading-button";Y.title="Heading <h1>/<h2> Ctrl+H";Y.XShift="-160px";Y.textOp=d.doHeading;u(Y,true);Z.appendChild(Y);var M=document.createElement("li");M.className="wmd-button";M.id="wmd-hr-button";M.title="Horizontal Rule <hr> Ctrl+R";M.XShift="-180px";M.textOp=d.doHorizontalRule;u(M,true);Z.appendChild(M);var U=document.createElement("li");U.className="wmd-spacer";U.id="wmd-spacer3";Z.appendChild(U);var K=document.createElement("li");K.className="wmd-button";K.id="wmd-undo-button";K.title="Undo - Ctrl+Z";K.XShift="-200px";K.execute=function(ae){ae.undo()};u(K,true);Z.appendChild(K);var ac=document.createElement("li");ac.className="wmd-button";ac.id="wmd-redo-button";ac.title="Redo - Ctrl+Y";if(/win/.test(f.platform.toLowerCase())){ac.title="Redo - Ctrl+Y"}else{ac.title="Redo - Ctrl+Shift+Z"}ac.XShift="-220px";ac.execute=function(ae){ae.redo()};u(ac,true);Z.appendChild(ac);H()};var w=function(){if(/\?noundo/.test(s.location.href)){o.nativeUndo=true}if(!o.nativeUndo){C=new o.undoManager(function(){D();H()})}y();var L="keydown";if(l.isOpera){L="keypress"}a.addEvent(A,L,function(N){if(N.ctrlKey||N.metaKey){var O=N.charCode||N.keyCode;var M=String.fromCharCode(O).toLowerCase();switch(M){case"b":J(document.getElementById("wmd-bold-button"));break;case"i":J(document.getElementById("wmd-italic-button"));break;case"l":J(document.getElementById("wmd-link-button"));break;case"q":J(document.getElementById("wmd-quote-button"));break;case"k":J(document.getElementById("wmd-code-button"));break;case"g":J(document.getElementById("wmd-image-button"));break;case"o":J(document.getElementById("wmd-olist-button"));break;case"u":J(document.getElementById("wmd-ulist-button"));break;case"h":J(document.getElementById("wmd-heading-button"));break;case"r":J(document.getElementById("wmd-hr-button"));break;case"y":J(document.getElementById("wmd-redo-button"));break;case"z":if(N.shiftKey){J(document.getElementById("wmd-redo-button"))}else{J(document.getElementById("wmd-undo-button"))}break;default:return}if(N.preventDefault){N.preventDefault()}if(top.event){top.event.returnValue=false}}});a.addEvent(A,"keyup",function(M){if(!M.shiftKey&&!M.ctrlKey&&!M.metaKey){var N=M.charCode||M.keyCode;if(N===13){fakeButton={};fakeButton.textOp=d.doAutoindent;J(fakeButton)}}});if(l.isIE){a.addEvent(A,"keydown",function(M){var N=M.keyCode;if(N===27){return false}})}if(A.form){var K=A.form.onsubmit;A.form.onsubmit=function(){F();if(K){return K.apply(this,arguments)}}}};var F=function(){if(o.showdown){var K=new o.showdown.converter()}var L=A.value;var M=function(){A.value=L};if(!/markdown/.test(o.wmd_env.output.toLowerCase())){if(K){A.value=K.makeHtml(L);top.setTimeout(M,0)}}return true};this.undo=function(){if(C){C.undo()}};this.redo=function(){if(C){C.redo()}};var I=function(){w()};this.destroy=function(){if(C){C.destroy()}if(v.parentNode){v.parentNode.removeChild(v)}if(A){A.style.marginTop=""}top.clearInterval(B)};I()};o.TextareaState=function(){var u=this;var v=o.panels.input;this.init=function(){if(!a.isVisible(v)){return}this.setInputAreaSelectionStartEnd();this.scrollTop=v.scrollTop;if(!this.text&&v.selectionStart||v.selectionStart===0){this.text=v.value}};this.setInputAreaSelection=function(){if(!a.isVisible(v)){return}if(v.selectionStart!==undefined&&!l.isOpera){v.focus();v.selectionStart=u.start;v.selectionEnd=u.end;v.scrollTop=u.scrollTop}else{if(s.selection){if(s.activeElement&&s.activeElement!==v){return}v.focus();var w=v.createTextRange();w.moveStart("character",-v.value.length);w.moveEnd("character",-v.value.length);w.moveEnd("character",u.end);w.moveStart("character",u.start);w.select()}}};this.setInputAreaSelectionStartEnd=function(){if(v.selectionStart||v.selectionStart===0){u.start=v.selectionStart;u.end=v.selectionEnd}else{if(s.selection){u.text=a.fixEolChars(v.value);var z;if(o.ieRetardedClick&&o.ieCachedRange){z=o.ieCachedRange;o.ieRetardedClick=false}else{z=s.selection.createRange()}var A=a.fixEolChars(z.text);var y="\x07";var x=y+A+y;z.text=x;var B=a.fixEolChars(v.value);z.moveStart("character",-x.length);z.text=A;u.start=B.indexOf(y);u.end=B.lastIndexOf(y)-y.length;var w=u.text.length-a.fixEolChars(v.value).length;if(w){z.moveStart("character",-A.length);while(w--){A+="\n";u.end+=1}z.text=A}this.setInputAreaSelection()}}};this.restore=function(){if(u.text!=undefined&&u.text!=v.value){v.value=u.text}this.setInputAreaSelection();v.scrollTop=u.scrollTop};this.getChunks=function(){var w=new o.Chunks();w.before=a.fixEolChars(u.text.substring(0,u.start));w.startTag="";w.selection=a.fixEolChars(u.text.substring(u.start,u.end));w.endTag="";w.after=a.fixEolChars(u.text.substring(u.end));w.scrollTop=u.scrollTop;return w};this.setChunks=function(w){w.before=w.before+w.startTag;w.after=w.endTag+w.after;if(l.isOpera){w.before=w.before.replace(/\n/g,"\r\n");w.selection=w.selection.replace(/\n/g,"\r\n");w.after=w.after.replace(/\n/g,"\r\n")}this.start=w.before.length;this.end=w.before.length+w.selection.length;this.text=w.before+w.selection+w.after;this.scrollTop=w.scrollTop};this.init()};o.Chunks=function(){};o.Chunks.prototype.findTags=function(v,x){var u=this;var w;if(v){w=a.extendRegExp(v,"","$");this.before=this.before.replace(w,function(y){u.startTag=u.startTag+y;return""});w=a.extendRegExp(v,"^","");this.selection=this.selection.replace(w,function(y){u.startTag=u.startTag+y;return""})}if(x){w=a.extendRegExp(x,"","$");this.selection=this.selection.replace(w,function(y){u.endTag=y+u.endTag;return""});w=a.extendRegExp(x,"^","");this.after=this.after.replace(w,function(y){u.endTag=y+u.endTag;return""})}};o.Chunks.prototype.trimWhitespace=function(u){this.selection=this.selection.replace(/^(\s*)/,"");if(!u){this.before+=k.$1}this.selection=this.selection.replace(/(\s*)$/,"");if(!u){this.after=k.$1+this.after}};o.Chunks.prototype.addBlankLines=function(w,v,u){if(w===undefined){w=1}if(v===undefined){v=1}w++;v++;var x;var y;this.selection=this.selection.replace(/(^\n*)/,"");this.startTag=this.startTag+k.$1;this.selection=this.selection.replace(/(\n*$)/,"");this.endTag=this.endTag+k.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before=this.before+k.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after=this.after+k.$1;if(this.before){x=y="";while(w--){x+="\\n?";y+="\n"}if(u){x="\\n*"}this.before=this.before.replace(new k(x+"$",""),y)}if(this.after){x=y="";while(v--){x+="\\n?";y+="\n"}if(u){x="\\n*"}this.after=this.after.replace(new k(x,""),y)}};d.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";d.unwrap=function(v){var u=new k("([^\\n])\\n(?!(\\n|"+d.prefixes+"))","g");v.selection=v.selection.replace(u,"$1 $2")};d.wrap=function(v,u){d.unwrap(v);var w=new k("(.{1,"+u+"})( +|$\\n?)","gm");v.selection=v.selection.replace(w,function(x,y){if(new k("^"+d.prefixes,"").test(x)){return x}return y+"\n"});v.selection=v.selection.replace(/\s+$/,"")};d.doBold=function(u,v,w){return d.doBorI(u,2,"strong text")};d.doItalic=function(u,v,w){return d.doBorI(u,1,"emphasized text")};d.doBorI=function(x,B,A){x.trimWhitespace();x.selection=x.selection.replace(/\n{2,}/g,"\n");x.before.search(/(\**$)/);var z=k.$1;x.after.search(/(^\**)/);var y=k.$1;var u=Math.min(z.length,y.length);if((u>=B)&&(u!=2||B!=1)){x.before=x.before.replace(k("[*]{"+B+"}$",""),"");x.after=x.after.replace(k("^[*]{"+B+"}",""),"")}else{if(!x.selection&&y){x.after=x.after.replace(/^([*_]*)/,"");x.before=x.before.replace(/(\s?)$/,"");var w=k.$1;x.before=x.before+y+w}else{if(!x.selection&&!y){x.selection=A}var v=B<=1?"*":"**";x.before=x.before+v;x.after=v+x.after}}return};d.stripLinkDefs=function(v,u){v=v.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(z,A,w,x,y){u[A]=z.replace(/\s*$/,"");if(x){u[A]=z.replace(/["(](.+?)[")]$/,"");return x+y}return""});return v};d.addLinkDef=function(B,x){var u=0;var w={};B.before=d.stripLinkDefs(B.before,w);B.selection=d.stripLinkDefs(B.selection,w);B.after=d.stripLinkDefs(B.after,w);var v="";var A=/(\[(?:\[[^\]]*\]|[^\[\]])*\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g;var z=function(D){u++;D=D.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+u+"]:");v+="\n"+D};var y=function(E,F,G,D){if(w[G]){z(w[G]);return F+u+D}return E};B.before=B.before.replace(A,y);if(x){z(x)}else{B.selection=B.selection.replace(A,y)}var C=u;B.after=B.after.replace(A,y);if(B.after){B.after=B.after.replace(/\n*$/,"")}if(!B.after){B.selection=B.selection.replace(/\n*$/,"")}B.after+="\n\n"+v;return C};d.doLinkOrImage=function(u,v,x){u.trimWhitespace();u.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);if(u.endTag.length>1){u.startTag=u.startTag.replace(/!?\[/,"");u.endTag="";d.addLinkDef(u,null)}else{if(/\n\n/.test(u.selection)){d.addLinkDef(u,null);return}var w=function(A){if(A!==null){u.startTag=u.endTag="";var z=" [999]: "+A;var y=d.addLinkDef(u,z);u.startTag=x?"![":"[";u.endTag="]["+y+"]";if(!u.selection){if(x){u.selection="alt text"}else{u.selection="link text"}}}v()};if(x){a.prompt(q,b,w)}else{a.prompt(t,c,w)}return true}};a.makeAPI=function(){o.wmd={};o.wmd.editor=o.editor;o.wmd.previewManager=o.previewManager};a.startEditor=function(){if(o.wmd_env.autostart===false){a.makeAPI();return}var v;var u;var w=function(){o.panels=new o.PanelCollection();u=new o.previewManager();var x=u.refresh;v=new o.editor(x);u.refresh(true)};a.addEvent(top,"DOMContentLoaded",w)};o.previewManager=function(){var w=this;var K;var u;var C;var B;var H;var D;var x=3000;var E="delayed";var z=function(M,N){a.addEvent(M,"input",N);M.onpaste=N;M.ondrop=N;a.addEvent(M,"keypress",N);a.addEvent(M,"keydown",N);u=new o.inputPoller(N,p)};var G=function(){var M=0;if(top.innerHeight){M=top.pageYOffset}else{if(s.documentElement&&s.documentElement.scrollTop){M=s.documentElement.scrollTop}else{if(s.body){M=s.body.scrollTop}}}return M};var A=function(){if(!o.panels.preview&&!o.panels.output){return}var O=o.panels.input.value;if(O&&O==H){return}else{H=O}var N=new Date().getTime();if(!K&&o.showdown){K=new o.showdown.converter()}if(K){O=K.makeHtml(O)}var M=new Date().getTime();B=M-N;v(O);D=O};var J=function(){if(C){top.clearTimeout(C);C=undefined}if(E!=="manual"){var M=0;if(E==="delayed"){M=B}if(M>x){M=x}C=top.setTimeout(A,M)}};var y=function(M){if(M.scrollHeight<=M.clientHeight){return 1}return M.scrollTop/(M.scrollHeight-M.clientHeight)};var L=function(){if(o.panels.preview){o.panels.preview.scrollTop=(o.panels.preview.scrollHeight-o.panels.preview.clientHeight)*y(o.panels.preview)}if(o.panels.output){o.panels.output.scrollTop=(o.panels.output.scrollHeight-o.panels.output.clientHeight)*y(o.panels.output)}};this.refresh=function(M){if(M){H="";A()}else{J()}};this.processingTime=function(){return B};this.output=function(){return D};this.setUpdateMode=function(M){E=M;w.refresh()};var F=true;var v=function(P){var M=r.getTop(o.panels.input)-G();if(o.panels.output){if(o.panels.output.value!==undefined){o.panels.output.value=P;o.panels.output.readOnly=true}else{var O=P.replace(/&/g,"&amp;");O=O.replace(/</g,"&lt;");o.panels.output.innerHTML="<pre><code>"+O+"</code></pre>"}}if(o.panels.preview){o.panels.preview.innerHTML=P}L();if(F){F=false;return}var N=r.getTop(o.panels.input)-G();if(l.isIE){top.setTimeout(function(){top.scrollBy(0,N-M)},0)}else{top.scrollBy(0,N-M)}};var I=function(){z(o.panels.input,J);A();if(o.panels.preview){o.panels.preview.scrollTop=0}if(o.panels.output){o.panels.output.scrollTop=0}};this.destroy=function(){if(u){u.destroy()}};I()};d.doAutoindent=function(u,v,w){u.before=u.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");u.before=u.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");u.before=u.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");w=false;if(/(\n|^)[ ]{0,3}([*+-])[ \t]+.*\n$/.test(u.before)){if(d.doList){d.doList(u,v,false,true)}}if(/(\n|^)[ ]{0,3}(\d+[.])[ \t]+.*\n$/.test(u.before)){if(d.doList){d.doList(u,v,true,true)}}if(/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(u.before)){if(d.doBlockquote){d.doBlockquote(u,v,w)}}if(/(\n|^)(\t|[ ]{4,}).*\n$/.test(u.before)){if(d.doCode){d.doCode(u,v,w)}}};d.doBlockquote=function(v,w,y){v.selection=v.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(C,B,A,z){v.before+=B;v.after=z+v.after;return A});v.before=v.before.replace(/(>[ \t]*)$/,function(A,z){v.selection=z+v.selection;return""});var u=y?"Blockquote":"";v.selection=v.selection.replace(/^(\s|>)+$/,"");v.selection=v.selection||u;if(v.before){v.before=v.before.replace(/\n?$/,"\n")}if(v.after){v.after=v.after.replace(/^\n?/,"\n")}v.before=v.before.replace(/(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*$)/,function(z){v.startTag=z;return""});v.after=v.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(z){v.endTag=z;return""});var x=function(A){var z=A?"> ":"";if(v.startTag){v.startTag=v.startTag.replace(/\n((>|\s)*)\n$/,function(C,B){return"\n"+B.replace(/^[ ]{0,3}>?[ \t]*$/gm,z)+"\n"})}if(v.endTag){v.endTag=v.endTag.replace(/^\n((>|\s)*)\n/,function(C,B){return"\n"+B.replace(/^[ ]{0,3}>?[ \t]*$/gm,z)+"\n"})}};if(/^(?![ ]{0,3}>)/m.test(v.selection)){d.wrap(v,o.wmd_env.lineLength-2);v.selection=v.selection.replace(/^/gm,"> ");x(true);v.addBlankLines()}else{v.selection=v.selection.replace(/^[ ]{0,3}> ?/gm,"");d.unwrap(v);x(false);if(!/^(\n|^)[ ]{0,3}>/.test(v.selection)&&v.startTag){v.startTag=v.startTag.replace(/\n{0,2}$/,"\n\n")}if(!/(\n|^)[ ]{0,3}>.*$/.test(v.selection)&&v.endTag){v.endTag=v.endTag.replace(/^\n{0,2}/,"\n\n")}}if(!/\n/.test(v.selection)){v.selection=v.selection.replace(/^(> *)/,function(z,A){v.startTag+=A;return""})}};d.doCode=function(u,v,z){var y=/\S[ ]*$/.test(u.before);var A=/^[ ]*\S/.test(u.after);if((!A&&!y)||/\n/.test(u.selection)){u.before=u.before.replace(/[ ]{4}$/,function(B){u.selection=B+u.selection;return""});var x=1;var w=1;if(/\n(\t|[ ]{4,}).*\n$/.test(u.before)||u.after===""){x=0}if(/^\n(\t|[ ]{4,})/.test(u.after)){w=0}u.addBlankLines(x,w);if(!u.selection){u.startTag="    ";u.selection=z?"enter code here":""}else{if(/^[ ]{0,3}\S/m.test(u.selection)){u.selection=u.selection.replace(/^/gm,"    ")}else{u.selection=u.selection.replace(/^[ ]{4}/gm,"")}}}else{u.trimWhitespace();u.findTags(/`/,/`/);if(!u.startTag&&!u.endTag){u.startTag=u.endTag="`";if(!u.selection){u.selection=z?"enter code here":""}}else{if(u.endTag&&!u.startTag){u.before+=u.endTag;u.endTag=""}else{u.startTag=u.endTag=""}}}};d.doList=function(F,y,x,H){var I=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/;var G=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/;var u="-";var C=1;var A=function(){var J;if(x){J=" "+C+". ";C++}else{J=" "+u+" "}return J};var B=function(J){if(x===undefined){x=/^\s*\d/.test(J)}J=J.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(K){return A()});return J};F.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);if(F.before&&!/\n$/.test(F.before)&&!/^\n/.test(F.startTag)){F.before+=F.startTag;F.startTag=""}if(F.startTag){var w=/\d+[.]/.test(F.startTag);F.startTag="";F.selection=F.selection.replace(/\n[ ]{4}/g,"\n");d.unwrap(F);F.addBlankLines();if(w){F.after=F.after.replace(G,B)}if(x==w){return}}var z=1;F.before=F.before.replace(I,function(J){if(/^\s*([*+-])/.test(J)){u=k.$1}z=/[^\n]\n\n[^\n]/.test(J)?1:0;return B(J)});if(!F.selection){F.selection=H?"List item":" "}var D=A();var v=1;F.after=F.after.replace(G,function(J){v=/[^\n]\n\n[^\n]/.test(J)?1:0;return B(J)});F.trimWhitespace(true);F.addBlankLines(z,v,true);F.startTag=D;var E=D.replace(/./g," ");d.wrap(F,o.wmd_env.lineLength-E.length);F.selection=F.selection.replace(/\n/g,"\n"+E)};d.doHeading=function(w,x,A){w.selection=w.selection.replace(/\s+/g," ");w.selection=w.selection.replace(/(^\s+|\s+$)/g,"");if(!w.selection){w.startTag="## ";w.selection="Heading";w.endTag=" ##";return}var y=0;w.findTags(/#+[ ]*/,/[ ]*#+/);if(/#+/.test(w.startTag)){y=k.lastMatch.length}w.startTag=w.endTag="";w.findTags(null,/\s?(-+|=+)/);if(/=+/.test(w.endTag)){y=1}if(/-+/.test(w.endTag)){y=2}w.startTag=w.endTag="";w.addBlankLines(1,1);var z=y==0?2:y-1;if(z>0){var v=z>=2?"-":"=";var u=w.selection.length;if(u>o.wmd_env.lineLength){u=o.wmd_env.lineLength}w.endTag="\n";while(u--){w.endTag+=v}}};d.doHorizontalRule=function(u,v,w){u.startTag="----------\n";u.selection="";u.addBlankLines(2,1,true)}};Attacklab.wmd_env={};Attacklab.account_options={};Attacklab.wmd_defaults={version:1,output:"Markdown",lineLength:40,delayLoad:false};if(!Attacklab.wmd){Attacklab.wmd=function(){Attacklab.loadEnv=function(){var b=function(d){if(!d){return}for(var c in d){Attacklab.wmd_env[c]=d[c]}};b(Attacklab.wmd_defaults);b(Attacklab.account_options);b(top.wmd_options);Attacklab.full=true;var a="bold italic link blockquote code image ol ul heading hr";Attacklab.wmd_env.buttons=Attacklab.wmd_env.buttons||a};Attacklab.loadEnv()};Attacklab.wmd();Attacklab.wmdBase()}(function(b){b.extend(true,window,{Slick:{AutoTooltips:a}});function a(e){var d;var c=this;var k={maxToolTipLength:null};function j(l){e=b.extend(true,{},k,e);d=l;d.onMouseEnter.subscribe(h)}function f(){d.onMouseEnter.unsubscribe(h)}function h(o,m){var l=d.getCellFromEvent(o);if(l){var n=d.getCellNode(l.row,l.cell);if(b(n).innerWidth()<n.scrollWidth){var p=b.trim(b(n).text());if(e.maxToolTipLength&&p.length>e.maxToolTipLength){p=p.substr(0,e.maxToolTipLength-3)+"..."}b(n).attr("title",p)}else{b(n).attr("title","")}}}b.extend(this,{init:j,destroy:f})}})(jQuery);(function(b){b.extend(true,window,{Slick:{CellRangeDecorator:a}});function a(h,d){var f;var j={selectionCss:{zIndex:"9999",border:"2px dashed red"}};d=b.extend(true,{},j,d);function c(k){if(!f){f=b("<div></div>",{css:d.selectionCss}).css("position","absolute").appendTo(h.getCanvasNode())}var m=h.getCellNodeBox(k.fromRow,k.fromCell);var l=h.getCellNodeBox(k.toRow,k.toCell);f.css({top:m.top-1,left:m.left-1,height:l.bottom-m.top-2,width:l.right-m.left-2});return f}function e(){if(f){f.remove();f=null}}b.extend(this,{show:c,hide:e})}})(jQuery);(function(b){b.extend(true,window,{Slick:{CellRangeSelector:a}});function a(q){var k;var h;var p;var d;var j=this;var e={selectionCss:{border:"2px dashed blue"}};function o(r){q=b.extend(true,{},e,q);d=new Slick.CellRangeDecorator(r,q);k=r;h=k.getCanvasNode();k.onDragInit.subscribe(m);k.onDragStart.subscribe(f);k.onDrag.subscribe(c);k.onDragEnd.subscribe(l)}function n(){k.onDragInit.unsubscribe(m);k.onDragStart.unsubscribe(f);k.onDrag.unsubscribe(c);k.onDragEnd.unsubscribe(l)}function m(s,r){s.stopImmediatePropagation()}function f(t,s){var r=k.getCellFromEvent(t);if(j.onBeforeCellRangeSelected.notify(r)!==false){if(k.canCellBeSelected(r.row,r.cell)){p=true;t.stopImmediatePropagation()}}if(!p){return}var u=k.getCellFromPoint(s.startX-b(h).offset().left,s.startY-b(h).offset().top);s.range={start:u,end:{}};return d.show(new Slick.Range(u.row,u.cell))}function c(t,r){if(!p){return}t.stopImmediatePropagation();var s=k.getCellFromPoint(t.pageX-b(h).offset().left,t.pageY-b(h).offset().top);if(!k.canCellBeSelected(s.row,s.cell)){return}r.range.end=s;d.show(new Slick.Range(r.range.start.row,r.range.start.cell,s.row,s.cell))}function l(s,r){if(!p){return}p=false;s.stopImmediatePropagation();d.hide();j.onCellRangeSelected.notify({range:new Slick.Range(r.range.start.row,r.range.start.cell,r.range.end.row,r.range.end.cell)})}b.extend(this,{init:o,destroy:n,onBeforeCellRangeSelected:new Slick.Event(),onCellRangeSelected:new Slick.Event()})}})(jQuery);(function(b){b.extend(true,window,{Slick:{CellSelectionModel:a}});function a(t){var n;var k;var h=[];var m=this;var e=new Slick.CellRangeSelector({selectionCss:{border:"2px solid black"}});var p;var f={selectActiveCell:true};function q(u){p=b.extend(true,{},f,t);n=u;k=n.getCanvasNode();n.onActiveCellChanged.subscribe(j);u.registerPlugin(e);e.onCellRangeSelected.subscribe(r);e.onBeforeCellRangeSelected.subscribe(s)}function o(){n.onActiveCellChanged.unsubscribe(j);e.onCellRangeSelected.unsubscribe(r);e.onBeforeCellRangeSelected.unsubscribe(s);n.unregisterPlugin(e)}function d(v){var u=[];for(var w=0;w<v.length;w++){var x=v[w];if(n.canCellBeSelected(x.fromRow,x.fromCell)&&n.canCellBeSelected(x.toRow,x.toCell)){u.push(x)}}return u}function c(u){h=d(u);m.onSelectedRangesChanged.notify(h)}function l(){return h}function s(v,u){if(n.getEditorLock().isActive()){v.stopPropagation();return false}}function r(v,u){c([u.range])}function j(v,u){if(p.selectActiveCell){c([new Slick.Range(u.row,u.cell)])}}b.extend(this,{getSelectedRanges:l,setSelectedRanges:c,init:q,destroy:o,onSelectedRangesChanged:new Slick.Event()})}})(jQuery);(function(a){a.extend(true,window,{Slick:{CheckboxSelectColumn:b}});function b(q){var j;var h=this;var p={};var e={columnId:"_checkbox_selector",cssClass:null,toolTip:"Select/Deselect All",width:30};var n=a.extend(true,{},e,q);function o(r){j=r;j.onSelectedRowsChanged.subscribe(k);j.onClick.subscribe(f);j.onHeaderClick.subscribe(m)}function l(){j.onSelectedRowsChanged.unsubscribe(k);j.onClick.unsubscribe(f);j.onHeaderClick.unsubscribe(m)}function k(v,r){var u=j.getSelectedRows();var t={},w,s;for(s=0;s<u.length;s++){w=u[s];t[w]=true;if(t[w]!==p[w]){j.invalidateRow(w);delete p[w]}}for(s in p){j.invalidateRow(s)}p=t;j.render();if(u.length===j.getDataLength()&&u.length!==0){j.updateColumnHeader(n.columnId,"<input type='checkbox' checked='checked'>",n.toolTip)}else{j.updateColumnHeader(n.columnId,"<input type='checkbox'>",n.toolTip)}}function f(s,r){if(j.getColumns()[r.cell].id===n.columnId&&a(s.target).is(":checkbox")){if(j.getEditorLock().isActive()&&!j.getEditorLock().commitCurrentEdit()){s.preventDefault();s.stopImmediatePropagation();return}if(p[r.row]){j.setSelectedRows(a.grep(j.getSelectedRows(),function(t){return t!=r.row}))}else{j.setSelectedRows(j.getSelectedRows().concat(r.row))}s.stopPropagation();s.stopImmediatePropagation()}}function m(u,r){if(r.column.id==n.columnId&&a(u.target).is(":checkbox")){if(j.getEditorLock().isActive()&&!j.getEditorLock().commitCurrentEdit()){u.preventDefault();u.stopImmediatePropagation();return}if(a(u.target).is(":checked")){var t=[];for(var s=0;s<j.getDataLength();s++){t.push(s)}j.setSelectedRows(t)}else{j.setSelectedRows([])}u.stopPropagation();u.stopImmediatePropagation()}}function c(){return{id:n.columnId,name:"<input type='checkbox'>",toolTip:n.toolTip,field:"sel",width:n.width,resizable:false,sortable:false,cssClass:n.cssClass,formatter:d}}function d(v,s,u,t,r){if(r){if(!_.isUndefined(r.id)){return p[v]?"<input type='checkbox' checked='checked'>":"<input type='checkbox'>"}}return null}a.extend(this,{init:o,destroy:l,getColumnDefinition:c})}})(jQuery);(function(a){var b={SelectorCellFormatter:function(h,d,f,e,c){return(!c?"":h)},PercentCompleteCellFormatter:function(h,d,f,e,c){if(f==null||f===""){return"-"}else{if(f<50){return"<span style='color:red;font-weight:bold;'>"+f+"%</span>"}else{return"<span style='color:green'>"+f+"%</span>"}}},GraphicalPercentCompleteCellFormatter:function(j,d,h,f,c){if(h==null||h===""){return""}var e;if(h<30){e="red"}else{if(h<70){e="silver"}else{e="green"}}return"<span class='percent-complete-bar' style='background:"+e+";width:"+h+"%'></span>"},YesNoCellFormatter:function(h,d,f,e,c){return f?"Yes":"No"},BoolCellFormatter:function(h,d,f,e,c){return f?"<img src='../images/tick.png'>":""},TaskNameFormatter:function(j,d,h,e,c){var f="<span style='display:inline-block;height:1px;width:"+(2+15*c.indent)+"px'></span>";return f+" <img src='../images/expand.gif'>&nbsp;"+h},ResourcesFormatter:function(j,d,f,e,c){var h=c.resources;if(!h||h.length==0){return""}if(e.width<50){return(h.length>1?"<center><img src='../images/user_identity_plus.gif' ":"<center><img src='../images/user_identity.gif' ")+" title='"+h.join(", ")+"'></center>"}else{return h.join(", ")}},StarFormatter:function(h,d,f,e,c){return(f)?"<img src='../images/bullet_star.png' align='absmiddle'>":""},TextCellEditor:function(d){var f;var c;var e=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />").appendTo(d.container).bind("keydown.nav",function(h){if(h.keyCode===a.ui.keyCode.LEFT||h.keyCode===a.ui.keyCode.RIGHT){h.stopImmediatePropagation()}}).focus().select()};this.destroy=function(){f.remove()};this.focus=function(){f.focus()};this.getValue=function(){return f.val()};this.setValue=function(h){f.val(h)};this.loadValue=function(h){c=h[d.column.field]||"";f.val(c);f[0].defaultValue=c;f.select()};this.serializeValue=function(){return f.val()};this.applyValue=function(h,j){h[d.column.field]=j};this.isValueChanged=function(){return(!(f.val()==""&&c==null))&&(f.val()!=c)};this.validate=function(){if(d.column.validator){var h=d.column.validator(f.val());if(!h.valid){return h}}return{valid:true,msg:null}};this.init()},IntegerCellEditor:function(d){var f;var c;var e=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />");f.bind("keydown.nav",function(h){if(h.keyCode===a.ui.keyCode.LEFT||h.keyCode===a.ui.keyCode.RIGHT){h.stopImmediatePropagation()}});f.appendTo(d.container);f.focus().select()};this.destroy=function(){f.remove()};this.focus=function(){f.focus()};this.loadValue=function(h){c=h[d.column.field];f.val(c);f[0].defaultValue=c;f.select()};this.serializeValue=function(){return parseInt(f.val(),10)||0};this.applyValue=function(h,j){h[d.column.field]=j};this.isValueChanged=function(){return(!(f.val()==""&&c==null))&&(f.val()!=c)};this.validate=function(){if(isNaN(f.val())){return{valid:false,msg:"Please enter a valid integer"}}return{valid:true,msg:null}};this.init()},DateCellEditor:function(d){var h;var c;var e=this;var f=false;this.init=function(){h=a("<INPUT type=text class='editor-text' />");h.appendTo(d.container);h.focus().select();h.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:"../images/calendar.gif",beforeShow:function(){f=true},onClose:function(){f=false}});h.width(h.width()-18)};this.destroy=function(){a.datepicker.dpDiv.stop(true,true);h.datepicker("hide");h.datepicker("destroy");h.remove()};this.show=function(){if(f){a.datepicker.dpDiv.stop(true,true).show()}};this.hide=function(){if(f){a.datepicker.dpDiv.stop(true,true).hide()}};this.position=function(j){if(!f){return}a.datepicker.dpDiv.css("top",j.top+30).css("left",j.left)};this.focus=function(){h.focus()};this.loadValue=function(j){c=j[d.column.field];h.val(c);h[0].defaultValue=c;h.select()};this.serializeValue=function(){return h.val()};this.applyValue=function(j,k){j[d.column.field]=k};this.isValueChanged=function(){return(!(h.val()==""&&c==null))&&(h.val()!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()},YesNoSelectCellEditor:function(e){var d;var c;var f=this;this.init=function(){d=a("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>");d.appendTo(e.container);d.focus()};this.destroy=function(){d.remove()};this.focus=function(){d.focus()};this.loadValue=function(h){d.val((c=h[e.column.field])?"yes":"no");d.select()};this.serializeValue=function(){return(d.val()=="yes")};this.applyValue=function(h,j){h[e.column.field]=j};this.isValueChanged=function(){return(d.val()!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()},YesNoCheckboxCellEditor:function(e){var d;var c;var f=this;this.init=function(){d=a("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>");d.appendTo(e.container);d.focus()};this.destroy=function(){d.remove()};this.focus=function(){d.focus()};this.loadValue=function(h){c=h[e.column.field];if(c){d.attr("checked","checked")}else{d.removeAttr("checked")}};this.serializeValue=function(){if(d.attr("checked")){return true}else{return false}};this.applyValue=function(h,j){h[e.column.field]=j};this.isValueChanged=function(){return(d.attr("checked")!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()},PercentCompleteCellEditor:function(d){var h,f;var c;var e=this;this.init=function(){h=a("<INPUT type=text class='editor-percentcomplete' />");h.width(a(d.container).innerWidth()-25);h.appendTo(d.container);f=a("<div class='editor-percentcomplete-picker' />").appendTo(d.container);f.append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>");f.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>");h.focus().select();f.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:c,slide:function(j,k){h.val(k.value)}});f.find(".editor-percentcomplete-buttons button").bind("click",function(j){h.val(a(this).attr("val"));f.find(".editor-percentcomplete-slider").slider("value",a(this).attr("val"))})};this.destroy=function(){h.remove();f.remove()};this.focus=function(){h.focus()};this.loadValue=function(j){h.val(c=j[d.column.field]);h.select()};this.serializeValue=function(){return parseInt(h.val(),10)||0};this.applyValue=function(j,k){j[d.column.field]=k};this.isValueChanged=function(){return(!(h.val()==""&&c==null))&&((parseInt(h.val(),10)||0)!=c)};this.validate=function(){if(isNaN(parseInt(h.val(),10))){return{valid:false,msg:"Please enter a valid positive number"}}return{valid:true,msg:null}};this.init()},StarCellEditor:function(e){var h;var d;var f=this;function c(j){if(j.type=="keydown"&&j.which!=32){return}if(h.css("opacity")=="1"){h.css("opacity",0.5)}else{h.css("opacity",1)}j.preventDefault();j.stopPropagation();return false}this.init=function(){h=a("<IMG src='../images/bullet_star.png' align=absmiddle tabIndex=0 title='Click or press Space to toggle' />").bind("click keydown",c).appendTo(e.container).focus()};this.destroy=function(){h.unbind("click keydown",c);h.remove()};this.focus=function(){h.focus()};this.loadValue=function(j){d=j[e.column.field];h.css("opacity",d?1:0.2)};this.serializeValue=function(){return(h.css("opacity")=="1")};this.applyValue=function(j,k){j[e.column.field]=k};this.isValueChanged=function(){return d!=(h.css("opacity")=="1")};this.validate=function(){return{valid:true,msg:null}};this.init()},LongTextCellEditor:function(d){var h,f;var c;var e=this;this.init=function(){var j=a("body");f=a("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(j);h=a("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(f);a("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(f);f.find("button:first").bind("click",this.save);f.find("button:last").bind("click",this.cancel);h.bind("keydown",this.handleKeyDown);e.position(d.position);h.focus().select()};this.handleKeyDown=function(j){if(j.which==a.ui.keyCode.ENTER&&j.ctrlKey){e.save()}else{if(j.which==a.ui.keyCode.ESCAPE){j.preventDefault();e.cancel()}else{if(j.which==a.ui.keyCode.TAB&&j.shiftKey){j.preventDefault();grid.navigatePrev()}else{if(j.which==a.ui.keyCode.TAB){j.preventDefault();grid.navigateNext()}}}}};this.save=function(){d.commitChanges()};this.cancel=function(){h.val(c);d.cancelChanges()};this.hide=function(){f.hide()};this.show=function(){f.show()};this.position=function(j){f.css("top",j.top-5).css("left",j.left-5)};this.destroy=function(){f.remove()};this.focus=function(){h.focus()};this.loadValue=function(j){h.val(c=j[d.column.field]);h.select()};this.serializeValue=function(){return h.val()};this.applyValue=function(j,k){j[d.column.field]=k};this.isValueChanged=function(){return(!(h.val()==""&&c==null))&&(h.val()!=c)};this.validate=function(){return{valid:true,msg:null}};this.init()}};a.extend(window,b)})(jQuery);if(typeof jQuery==="undefined"){throw"SlickGrid requires jquery module to be loaded"}if(!jQuery.fn.drag){throw"SlickGrid requires jquery.event.drag module to be loaded"}if(typeof Slick==="undefined"){throw"slick.core.js not loaded"}(function($){$.extend(true,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions;function SlickGrid(container,data,columns,options,state){var defaults={headerHeight:25,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableCellRangeSelection:false,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:60,autoHeight:false,editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,showTopPanel:false,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true,enableTextSelectionOnCells:false};var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,headerCssClass:null};var maxSupportedCssHeight;var th;var h;var ph;var n;var cj;var page=0;var offset=0;var scrollDir=1;var $container;var uid="slickgrid_"+Math.round(1000000*Math.random());var self=this;var $headerScroller;var $headers;var $headerRow,$headerRowScroller;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var stylesheet;var viewportH,viewportW;var viewportHasHScroll;var headerColumnWidthDiff,headerColumnHeightDiff,cellWidthDiff,cellHeightDiff;var absoluteColumnMinWidth;var activePosX;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var prevScrollLeft=0;var avgRowRenderTime=10;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumnId;var sortAsc=true;var h_editorLoader=null;var h_render=null;var h_postrender=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var counter_rows_rendered=0;var counter_rows_removed=0;this.state=state;function init(){$container=$(container);if($container.length<1){throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.")}maxSupportedCssHeight=getMaxSupportedCssHeight();scrollbarDimensions=scrollbarDimensions||measureScrollbar();options=$.extend({},defaults,options);columnDefaults.width=options.defaultColumnWidth;if(options.enableColumnReorder&&!$.fn.sortable){throw new Error('SlickGrid\'s "enableColumnReorder = true" option requires jquery-ui.sortable module to be loaded')}editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit};$container.empty().attr("tabIndex",0).attr("hideFocus",true).css("overflow","scroll").css("outline",0).addClass(uid).addClass("ui-widget");if(!/relative|absolute|fixed/.test($container.css("position"))){$container.css("position","relative")}$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller);$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller);$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$topPanel=$("<div class='slick-top-panel' />").appendTo($topPanelScroller);if(!options.showTopPanel){$topPanelScroller.hide()}if(!options.showHeaderRow){$headerRowScroller.hide()}$viewport=$("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo($container);$canvas=$("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo($viewport);measureCellPaddingAndBorder();disableSelection($headers);if(!options.enableTextSelectionOnCells){$viewport.bind("selectstart.ui",function(event){return $(event.target).is("input,textarea")})}viewportW=parseFloat($.css($container[0],"width",true));createColumnHeaders();setupColumnSort();createCssRules();resizeAndRender();bindAncestorScrollEvents();$viewport.bind("scroll.slickgrid",handleScroll);$container.bind("resize.slickgrid",resizeAndRender);$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu).bind("click.slickgrid",handleHeaderClick);$canvas.bind("keydown.slickgrid",handleKeyDown).bind("click.slickgrid",handleClick).bind("dblclick.slickgrid",handleDblClick).bind("contextmenu.slickgrid",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).bind("commit",handleCommit);$canvas.delegate(".slick-cell","mouseenter",handleMouseEnter);$canvas.delegate(".slick-cell","mouseleave",handleMouseLeave)}function registerPlugin(plugin){plugins.unshift(plugin);plugin.init(self)}function unregisterPlugin(plugin){for(var i=plugins.length;i>=0;i--){if(plugins[i]===plugin){if(plugins[i].destroy){plugins[i].destroy()}plugins.splice(i,1);break}}}function setSelectionModel(model){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);if(selectionModel.destroy){selectionModel.destroy()}}selectionModel=model;selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged)}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var $c=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");var dim={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();return dim}function getRowWidth(){var rowWidth=0;var i=columns.length;while(i--){rowWidth+=(columns[i].width||columnDefaults.width)}return rowWidth}function setCanvasWidth(width){$canvas.width(width);$container.width(width);viewportHasHScroll=(width>viewportW-scrollbarDimensions.width)}function disableSelection($target){if($target&&$target.jquery){$target.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}}function getMaxSupportedCssHeight(){var increment=1000000;var supportedHeight=increment;var testUpTo=($.browser.mozilla)?5000000:1000000000;var div=$("<div style='display:none' />").appendTo(document.body);while(supportedHeight<=testUpTo){div.css("height",supportedHeight+increment);if(div.height()!==supportedHeight+increment){break}else{supportedHeight+=increment}}div.remove();return supportedHeight}function bindAncestorScrollEvents(){var elem=$canvas[0];while((elem=elem.parentNode)!=document.body){if(elem==$viewport[0]||elem.scrollWidth!=elem.clientWidth||elem.scrollHeight!=elem.clientHeight){$(elem).bind("scroll.slickgrid",handleActiveCellPositionChange)}}}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid")}function updateColumnHeader(columnId,title,toolTip){var idx=getColumnIndex(columnId);var $header=$headers.children().eq(idx);if($header){columns[idx].name=title;columns[idx].toolTip=toolTip;$header.attr("title",toolTip||title||"").children().eq(0).html(title)}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(columnId){var idx=getColumnIndex(columnId);var $header=$headerRow.children().eq(idx);return $header&&$header[0]}function createColumnHeaders(){var i;function hoverBegin(){$(this).addClass("ui-state-hover")}function hoverEnd(){$(this).removeClass("ui-state-hover")}$headers.empty();$headerRow.empty();columnsById={};for(i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;var title=m.name;if(m.type){title+=" <span class='type'>"+m.type+"</span>"}var header=$("<div class='ui-state-default slick-header-column' id='"+uid+m.id+"' />").html("<span class='slick-column-name'>"+title+"</span>").width(m.width-headerColumnWidthDiff).attr("title",m.toolTip||m.name||"").data("fieldId",m.id).addClass(m.headerCssClass||"").appendTo($headers);if(options.enableColumnReorder||m.sortable){header.hover(hoverBegin,hoverEnd)}if(m.sortable){header.append("<span class='slick-sort-indicator' />")}if(options.showHeaderRow){$("<div class='ui-state-default slick-headerrow-column c"+i+"'></div>").appendTo($headerRow)}}setSortColumn(sortColumnId,sortAsc);setupColumnResize();if(options.enableColumnReorder){setupColumnReorder()}}function setupColumnSort(){$headers.click(function(e){if($(e.target).hasClass("slick-resizable-handle")){return}var $col=$(e.target).closest(".slick-header-column");if(!$col.length){return}var column=columns[getColumnIndex($col.data("fieldId"))];if(column.sortable){if(!getEditorLock().commitCurrentEdit()){return}if(column.id===sortColumnId){sortAsc=!sortAsc}else{sortColumnId=column.id;sortAsc=true}trigger(self.onSort,{sortCol:column,sortAsc:sortAsc})}})}function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(e,ui){$(ui.helper).addClass("slick-header-column-active")},beforeStop:function(e,ui){$(ui.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var reorderedIds=$headers.sortable("toArray");var reorderedColumns=[];for(var i=0;i<reorderedIds.length;i++){reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid,""))])}setColumns(reorderedColumns);trigger(self.onColumnsReordered,{});e.stopPropagation();setupColumnResize()}})}function setupColumnResize(){var $col,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable,originalCanvasWidth;columnElements=$headers.children();columnElements.find(".slick-resizable-handle").remove();columnElements.each(function(i,e){if(columns[i].resizable){if(firstResizable===undefined){firstResizable=i}lastResizable=i}});if(firstResizable===undefined){return}columnElements.each(function(i,e){if(i<firstResizable||(options.forceFitColumns&&i>=lastResizable)){return}$col=$(e);$("<div class='slick-resizable-handle' />").appendTo(e).bind("dragstart",function(e,dd){if(!getEditorLock().commitCurrentEdit()){return false}pageX=e.pageX;$(this).parent().addClass("slick-header-column-active");var shrinkLeewayOnRight=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){columns[i].previousWidth=$(e).outerWidth()});if(options.forceFitColumns){shrinkLeewayOnRight=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnRight!==null){if(c.maxWidth){stretchLeewayOnRight+=c.maxWidth-c.previousWidth}else{stretchLeewayOnRight=null}}shrinkLeewayOnRight+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}}var shrinkLeewayOnLeft=0,stretchLeewayOnLeft=0;for(j=0;j<=i;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnLeft!==null){if(c.maxWidth){stretchLeewayOnLeft+=c.maxWidth-c.previousWidth}else{stretchLeewayOnLeft=null}}shrinkLeewayOnLeft+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}if(shrinkLeewayOnRight===null){shrinkLeewayOnRight=100000}if(shrinkLeewayOnLeft===null){shrinkLeewayOnLeft=100000}if(stretchLeewayOnRight===null){stretchLeewayOnRight=100000}if(stretchLeewayOnLeft===null){stretchLeewayOnLeft=100000}maxPageX=pageX+Math.min(shrinkLeewayOnRight,stretchLeewayOnLeft);minPageX=pageX-Math.min(shrinkLeewayOnLeft,stretchLeewayOnRight);originalCanvasWidth=$canvas.width()}).bind("drag",function(e,dd){var actualMinWidth,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x,ci;if(d<0){x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+x;x=0}}}}else{if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}}else{x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+x;x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}}else{if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d)}}}applyColumnHeaderWidths();if(options.syncColumnCellResize){applyColumnWidths()}}).bind("dragend",function(e,dd){var newWidth;$(this).parent().removeClass("slick-header-column-active");for(j=0;j<columnElements.length;j++){c=columns[j];newWidth=$(columnElements[j]).outerWidth();if(c.previousWidth!==newWidth&&c.rerenderOnResize){invalidateAllRows()}}applyColumnWidths();resizeCanvas();trigger(self.onColumnsResized,{})})})}function getVBoxDelta($el){var p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var delta=0;$.each(p,function(n,val){delta+=parseFloat($el.css(val))||0});return delta}function measureCellPaddingAndBorder(){var el;var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var v=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];el=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);headerColumnWidthDiff=headerColumnHeightDiff=0;$.each(h,function(n,val){headerColumnWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){headerColumnHeightDiff+=parseFloat(el.css(val))||0});el.remove();var r=$("<div class='slick-row' />").appendTo($canvas);el=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);cellWidthDiff=cellHeightDiff=0;$.each(h,function(n,val){cellWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){cellHeightDiff+=parseFloat(el.css(val))||0});r.remove();absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var rowHeight=(options.rowHeight-cellHeightDiff);var rules=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+rowHeight+"px; }","."+uid+" .slick-row { width:"+getRowWidth()+"px; }","."+uid+" .lr { float:none; position:absolute; }"];var rowWidth=getRowWidth();var x=0,w;for(var i=0;i<columns.length;i++){w=columns[i].width;rules.push("."+uid+" .l"+i+" { left: "+x+"px; }");rules.push("."+uid+" .r"+i+" { right: "+(rowWidth-x-w)+"px; }");rules.push("."+uid+" .c"+i+" { width:"+(w-cellWidthDiff)+"px; }");x+=columns[i].width}if($style[0].styleSheet){$style[0].styleSheet.cssText=rules.join(" ")}else{$style[0].appendChild(document.createTextNode(rules.join(" ")))}var sheets=document.styleSheets;for(var i=0;i<sheets.length;i++){if((sheets[i].ownerNode||sheets[i].owningElement)==$style[0]){stylesheet=sheets[i];break}}}function findCssRule(selector){var rules=(stylesheet.cssRules||stylesheet.rules);for(var i=0;i<rules.length;i++){if(rules[i].selectorText==selector){return rules[i]}}return null}function removeCssRules(){$style.remove()}function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{});for(var i=0;i<plugins.length;i++){unregisterPlugin(plugins[i])}if(options.enableColumnReorder&&$headers.sortable){$headers.sortable("destroy")}unbindAncestorScrollEvents();$container.unbind(".slickgrid");removeCssRules();$canvas.unbind("draginit dragstart dragend drag");$container.empty().removeClass(uid)}function trigger(evt,args,e){e=e||new Slick.EventData();args=args||{};args.grid=self;return evt.notify(args,e,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(id){return columnsById[id]}function autosizeColumns(){var i,c,widths=[],shrinkLeeway=0,availWidth=(options.autoHeight?viewportW:viewportW-scrollbarDimensions.width),total=0,existingTotal=0;for(i=0;i<columns.length;i++){c=columns[i];widths.push(c.width);existingTotal+=c.width;shrinkLeeway+=c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth)}total=existingTotal;invalidateAllRows();while(total>availWidth){if(!shrinkLeeway){return}var shrinkProportion=(total-availWidth)/shrinkLeeway;for(i=0;i<columns.length&&total>availWidth;i++){c=columns[i];if(!c.resizable||c.minWidth===c.width||c.width===absoluteColumnMinWidth){continue}var shrinkSize=Math.floor(shrinkProportion*(c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth)))||1;total-=shrinkSize;widths[i]-=shrinkSize}}var previousTotal=total;while(total<availWidth){var growProportion=availWidth/total;for(i=0;i<columns.length&&total<availWidth;i++){c=columns[i];if(!c.resizable||c.maxWidth<=c.width){continue}var growSize=Math.min(Math.floor(growProportion*c.width)-c.width,(c.maxWidth-c.width)||1000000)||1;total+=growSize;widths[i]+=growSize}if(previousTotal==total){break}previousTotal=total}for(i=0;i<columns.length;i++){columns[i].width=widths[i]}applyColumnHeaderWidths();applyColumnWidths();resizeCanvas()}function applyColumnHeaderWidths(){var h;for(var i=0,headers=$headers.children(),ii=headers.length;i<ii;i++){h=$(headers[i]);if(h.width()!==columns[i].width-headerColumnWidthDiff){h.width(columns[i].width-headerColumnWidthDiff)}}}function applyColumnWidths(){var rowWidth=getRowWidth();var x=0,w,rule;for(var i=0;i<columns.length;i++){w=columns[i].width;rule=findCssRule("."+uid+" .c"+i);rule.style.width=(w-cellWidthDiff)+"px";rule=findCssRule("."+uid+" .l"+i);rule.style.left=x+"px";rule=findCssRule("."+uid+" .r"+i);rule.style.right=(rowWidth-x-w)+"px";x+=columns[i].width}rule=findCssRule("."+uid+" .slick-row");rule.style.width=rowWidth+"px"}function setSortColumn(columnId,ascending){sortColumnId=columnId;sortAsc=ascending;var columnIndex=getColumnIndex(sortColumnId);$headers.children().removeClass("slick-header-column-sorted");$headers.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");if(columnIndex!=null){$headers.children().eq(columnIndex).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}}function handleSelectedRangesChanged(e,ranges){selectedRows=[];var hash={};for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){if(!hash[j]){selectedRows.push(j)}hash[j]={};for(var k=ranges[i].fromCell;k<=ranges[i].toCell;k++){if(canCellBeSelected(j,k)){hash[j][columns[k].id]=options.selectedCellCssClass}}}}setCellCssStyles(options.selectedCellCssClass,hash);trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function setColumns(columnDefinitions){columns=columnDefinitions;invalidateAllRows();createColumnHeaders();removeCssRules();createCssRules();resizeAndRender();handleScroll()}function getOptions(){return options}function setOptions(args){if(!getEditorLock().commitCurrentEdit()){return}makeActiveCellNormal();if(options.enableAddRow!==args.enableAddRow){invalidateRow(getDataLength())}options=$.extend(options,args);render()}function setData(newData,scrollToTop){invalidateAllRows();data=newData;if(scrollToTop){scrollTo(0)}}function getData(){return data}function getDataLength(){if(data.getLength){return data.getLength()}else{return data.length}}function getDataItem(i){if(data.getItem){return data.getItem(i)}else{return data[i]}}function getTopPanel(){return $topPanel[0]}function showTopPanel(){options.showTopPanel=true;$topPanelScroller.slideDown("fast",resizeCanvas)}function hideTopPanel(){options.showTopPanel=false;$topPanelScroller.slideUp("fast",resizeCanvas)}function showHeaderRowColumns(){options.showHeaderRow=true;$headerRowScroller.slideDown("fast",resizeCanvas)}function hideHeaderRowColumns(){options.showHeaderRow=false;$headerRowScroller.slideUp("fast",resizeCanvas)}function scrollTo(y){var oldOffset=offset;page=Math.min(n-1,Math.floor(y/ph));offset=Math.round(page*cj);var newScrollTop=y-offset;if(offset!=oldOffset){var range=getVisibleRange(newScrollTop);cleanupRows(range.top,range.bottom);updateRowPositions()}if(prevScrollTop!=newScrollTop){scrollDir=(prevScrollTop+oldOffset<newScrollTop+offset)?1:-1;$viewport[0].scrollTop=(lastRenderedScrollTop=scrollTop=prevScrollTop=newScrollTop);trigger(self.onViewportChanged,{})}}function defaultFormatter(row,cell,value,columnDef,dataContext){return(value===null||value===undefined)?"":value}function getFormatter(row,column){var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnOverrides=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[column.id]||rowMetadata.columns[getColumnIndex(column.id)]);return(columnOverrides&&columnOverrides.formatter)||(rowMetadata&&rowMetadata.formatter)||column.formatter||(options.formatterFactory&&options.formatterFactory.getFormatter(column))||defaultFormatter}function getEditor(row,cell){var column=columns[cell];var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[column.id]&&columnMetadata[column.id].editor!==undefined){return columnMetadata[column.id].editor}if(columnMetadata&&columnMetadata[cell]&&columnMetadata[cell].editor!==undefined){return columnMetadata[cell].editor}return column.editor||(options.editorFactory&&options.editorFactory.getEditor(column))}function appendRowHtml(stringArray,row){var d=getDataItem(row);var dataLoading=row<getDataLength()&&!d;var cellCss;var rowCss="slick-row "+(dataLoading?" loading":"")+(row%2==1?" odd":" even");var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(metadata&&metadata.cssClasses){rowCss+=" "+metadata.cssClasses}stringArray.push("<div class='ui-widget-content "+rowCss+"' row='"+row+"' style='top:"+(options.rowHeight*row-offset)+"px'>");var colspan;var rowHasColumnData=metadata&&metadata.columns;for(var i=0,cols=columns.length;i<cols;i++){var m=columns[i];colspan=getColspan(row,i);if(true||rowHasColumnData){cellCss="slick-cell lr l"+i+" r"+Math.min(columns.length-1,i+colspan-1)+(m.cssClass?" "+m.cssClass:"")}else{cellCss="slick-cell c"+i+(m.cssClass?" "+m.cssClass:"")}if(row===activeRow&&i===activeCell){cellCss+=(" active")}for(var key in cellCssClasses){if(cellCssClasses[key][row]&&cellCssClasses[key][row][m.id]){cellCss+=(" "+cellCssClasses[key][row][m.id])}}stringArray.push("<div class='"+cellCss+"'>");if(d){stringArray.push(getFormatter(row,m)(row,i,d[m.field],m,d,state))}stringArray.push("</div>");if(colspan){i+=(colspan-1)}}stringArray.push("</div>")}function cleanupRows(rangeToKeep){for(var i in rowsCache){if(((i=parseInt(i,10))!==activeRow)&&(i<rangeToKeep.top||i>rangeToKeep.bottom)){removeRowFromCache(i)}}}function invalidate(){updateRowCount();invalidateAllRows();render()}function invalidateAllRows(){if(currentEditor){makeActiveCellNormal()}for(var row in rowsCache){removeRowFromCache(row)}}function removeRowFromCache(row){var node=rowsCache[row];if(!node){return}$canvas[0].removeChild(node);delete rowsCache[row];delete postProcessedRows[row];renderedRows--;counter_rows_removed++}function invalidateRows(rows){var i,rl;if(!rows||!rows.length){return}scrollDir=0;for(i=0,rl=rows.length;i<rl;i++){if(currentEditor&&activeRow===i){makeActiveCellNormal()}if(rowsCache[rows[i]]){removeRowFromCache(rows[i])}}}function invalidateRow(row){invalidateRows([row])}function updateCell(row,cell){var cellNode=getCellNode(row,cell);if(!cellNode){return}var m=columns[cell],d=getDataItem(row);if(currentEditor&&activeRow===row&&activeCell===cell){currentEditor.loadValue(d)}else{cellNode.innerHTML=d?getFormatter(row,m)(row,cell,d[m.field],m,d,state):"";invalidatePostProcessingResults(row)}}function updateRow(row){if(!rowsCache[row]){return}$(rowsCache[row]).children().each(function(i){var m=columns[i];if(row===activeRow&&i===activeCell&&currentEditor){currentEditor.loadValue(getDataItem(activeRow))}else{if(getDataItem(row)){this.innerHTML=getFormatter(row,m)(row,i,getDataItem(row)[m.field],m,getDataItem(row),state)}else{this.innerHTML=""}}});invalidatePostProcessingResults(row)}function getViewportHeight(){return parseFloat($.css($container[0],"height",true))-options.headerHeight-getVBoxDelta($headers)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){if(options.autoHeight){viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0))}else{viewportH=getViewportHeight()}numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));if(!options.autoHeight){$viewport.height(viewportH)}var w=0,i=columns.length;while(i--){w+=columns[i].width}setCanvasWidth(w);updateRowCount();render()}function resizeAndRender(){if(options.forceFitColumns){autosizeColumns()}else{resizeCanvas()}}function updateRowCount(){var newRowCount=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var oldH=h;var l=options.enableAddRow?getDataLength():getDataLength()-1;for(var i in rowsCache){if(i>=l){removeRowFromCache(i)}}th=Math.max(options.rowHeight*newRowCount,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;cj=0}else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/ph);cj=(th-h)/(n-1)}if(h!==oldH){$canvas.css("height",h);scrollTop=$viewport[0].scrollTop}var oldScrollTopInRange=(scrollTop+offset<=th-viewportH);if(th==0||scrollTop==0){page=offset=0}else{if(oldScrollTopInRange){scrollTo(scrollTop+offset)}else{scrollTo(th-viewportH)}}if(h!=oldH&&options.autoHeight){resizeCanvas()}}function getVisibleRange(viewportTop){if(viewportTop==null){viewportTop=scrollTop}return{top:Math.floor((scrollTop+offset)/options.rowHeight),bottom:Math.ceil((scrollTop+offset+viewportH)/options.rowHeight)}}function getRenderedRange(viewportTop){var range=getVisibleRange(viewportTop);var buffer=Math.round(viewportH/options.rowHeight);var minBuffer=3;if(scrollDir==-1){range.top-=buffer;range.bottom+=minBuffer}else{if(scrollDir==1){range.top-=minBuffer;range.bottom+=buffer}else{range.top-=minBuffer;range.bottom+=minBuffer}}range.top=Math.max(0,range.top);range.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,range.bottom);return range}function renderRows(range){var i,l,parentNode=$canvas[0],rowsBefore=renderedRows,stringArray=[],rows=[],startTimestamp=new Date(),needToReselectCell=false;for(i=range.top;i<=range.bottom;i++){if(rowsCache[i]){continue}renderedRows++;rows.push(i);appendRowHtml(stringArray,i);if(activeCellNode&&activeRow===i){needToReselectCell=true}counter_rows_rendered++}var x=document.createElement("div");x.innerHTML=stringArray.join("");for(i=0,l=x.childNodes.length;i<l;i++){rowsCache[rows[i]]=parentNode.appendChild(x.firstChild)}if(needToReselectCell){activeCellNode=getCellNode(activeRow,activeCell)}if(renderedRows-rowsBefore>5){avgRowRenderTime=(new Date()-startTimestamp)/(renderedRows-rowsBefore)}}function startPostProcessing(){if(!options.enableAsyncPostRender){return}clearTimeout(h_postrender);h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay)}function invalidatePostProcessingResults(row){delete postProcessedRows[row];postProcessFromRow=Math.min(postProcessFromRow,row);postProcessToRow=Math.max(postProcessToRow,row);startPostProcessing()}function updateRowPositions(){for(var row in rowsCache){rowsCache[row].style.top=(row*options.rowHeight-offset)+"px"}}function render(){var visible=getVisibleRange();var rendered=getRenderedRange();cleanupRows(rendered);renderRows(rendered);postProcessFromRow=visible.top;postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,visible.bottom);startPostProcessing();lastRenderedScrollTop=scrollTop;h_render=null}function handleScroll(){scrollTop=$viewport[0].scrollTop;var scrollLeft=$viewport[0].scrollLeft;var scrollDist=Math.abs(scrollTop-prevScrollTop);if(scrollLeft!==prevScrollLeft){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft}if(scrollDist){scrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(scrollDist<viewportH){scrollTo(scrollTop+offset)}else{var oldOffset=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)));offset=Math.round(page*cj);if(oldOffset!=offset){invalidateAllRows()}}if(h_render){clearTimeout(h_render)}if(Math.abs(lastRenderedScrollTop-scrollTop)<viewportH){render()}else{h_render=setTimeout(render,50)}trigger(self.onViewportChanged,{})}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var row=(scrollDir>=0)?postProcessFromRow++:postProcessToRow--;var rowNode=rowsCache[row];if(!rowNode||postProcessedRows[row]||row>=getDataLength()){continue}var d=getDataItem(row),cellNodes=rowNode.childNodes;for(var i=0,j=0,l=columns.length;i<l;++i){var m=columns[i];if(m.asyncPostRender){m.asyncPostRender(cellNodes[j],postProcessFromRow,d,m)}++j}postProcessedRows[row]=true;h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function addCellCssStyles(key,hash){if(cellCssClasses[key]){throw"addCellCssStyles: cell CSS hash with key '"+key+"' already exists."}cellCssClasses[key]=hash;var node;for(var row in rowsCache){if(hash[row]){for(var columnId in hash[row]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).addClass(hash[row][columnId])}}}}}function removeCellCssStyles(key){if(!cellCssClasses[key]){return}var node;for(var row in rowsCache){if(cellCssClasses[key][row]){for(var columnId in cellCssClasses[key][row]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).removeClass(cellCssClasses[key][row][columnId])}}}}delete cellCssClasses[key]}function setCellCssStyles(key,hash){removeCellCssStyles(key);addCellCssStyles(key,hash)}function flashCell(row,cell,speed){speed=speed||100;if(rowsCache[row]){var $cell=$(getCellNode(row,cell));function toggleCellClass(times){if(!times){return}setTimeout(function(){$cell.queue(function(){$cell.toggleClass(options.cellFlashingCssClass).dequeue();toggleCellClass(times-1)})},speed)}toggleCellClass(4)}}function handleDragInit(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}retval=trigger(self.onDragInit,dd,e);if(e.isImmediatePropagationStopped()){return retval}return false}function handleDragStart(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}var retval=trigger(self.onDragStart,dd,e);if(e.isImmediatePropagationStopped()){return retval}return false}function handleDrag(e,dd){return trigger(self.onDrag,dd,e)}function handleDragEnd(e,dd){trigger(self.onDragEnd,dd,e)}function handleKeyDown(e){trigger(self.onKeyDown,{},e);var handled=e.isImmediatePropagationStopped();if(!handled){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(e.which==27){if(!getEditorLock().isActive()){return}cancelEditAndSetFocus()}else{if(e.which==37){navigateLeft()}else{if(e.which==39){navigateRight()}else{if(e.which==38){navigateUp()}else{if(e.which==40){navigateDown()}else{if(e.which==9){navigateNext()}else{if(e.which==13){if(options.editable){if(currentEditor){if(activeRow===getDataLength()){navigateDown()}else{commitEditAndSetFocus()}}else{if(getEditorLock().commitCurrentEdit()){makeActiveCellEditable()}}}}else{return}}}}}}}}else{if(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey){navigatePrev()}else{return}}}e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0}catch(error){}}function handleCommit(e){commitEditAndSetFocus()}function handleClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return}trigger(self.onClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return}if(canCellBeActive(cell.row,cell.cell)){if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(cell.row,false);setActiveCellInternal(getCellNode(cell.row,cell.cell),(cell.row===getDataLength())||options.autoEdit)}}}function handleContextMenu(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if($cell.length===0){return}if(activeCellNode===$cell[0]&&currentEditor!==null){return}trigger(self.onContextMenu,{},e)}function handleDblClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return}trigger(self.onDblClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return}if(options.editable){gotoCell(cell.row,cell.cell,true)}}function handleHeaderContextMenu(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderContextMenu,{column:column},e)}function handleHeaderClick(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderClick,{column:column},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(row,cell){return !(row<0||row>=getDataLength()||cell<0||cell>=columns.length)}function getCellFromPoint(x,y){var row=Math.floor((y+offset)/options.rowHeight);var cell=0;var w=0;for(var i=0;i<columns.length&&w<x;i++){w+=columns[i].width;cell++}if(cell<0){cell=0}return{row:row,cell:cell-1}}function getCellFromNode(node){var cls=/l\d+/.exec(node.className)||/c\d+/.exec(node.className);if(!cls){throw"getCellFromNode: cannot get cell - "+node.className}return parseInt(cls[0].substr(1,cls[0].length-1),10)}function getCellFromEvent(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if(!$cell.length){return null}return{row:$cell.parent().attr("row")|0,cell:getCellFromNode($cell[0])}}function getCellNodeBox(row,cell){if(!cellExists(row,cell)){return null}var y1=row*options.rowHeight-offset;var y2=y1+options.rowHeight-1;var x1=0;for(var i=0;i<cell;i++){x1+=columns[i].width}var x2=x1+columns[cell].width;return{top:y1,left:x1,bottom:y2,right:x2}}function resetActiveCell(){setActiveCellInternal(null,false)}function setFocus(){if($.browser.msie){$canvas[0].setActive()}else{$canvas[0].focus()}}function scrollActiveCellIntoView(){if(activeCellNode){var left=$(activeCellNode).position().left,right=left+$(activeCellNode).outerWidth(),scrollLeft=$viewport.scrollLeft(),scrollRight=scrollLeft+$viewport.width();if(left<scrollLeft){$viewport.scrollLeft(left)}else{if(right>scrollRight){$viewport.scrollLeft(Math.min(left,right-$viewport[0].clientWidth))}}}}function setActiveCellInternal(newCell,editMode){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active")}var activeCellChanged=(activeCellNode!==newCell);activeCellNode=newCell;if(activeCellNode!=null){activeRow=parseInt($(activeCellNode).parent().attr("row"));activeCell=activePosX=getCellFromNode(activeCellNode);$(activeCellNode).addClass("active");if(options.editable&&editMode&&isCellPotentiallyEditable(activeRow,activeCell)){clearTimeout(h_editorLoader);if(options.asyncEditorLoading){h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay)}else{makeActiveCellEditable()}}else{setFocus()}}else{activeRow=activeCell=null}if(activeCellChanged){scrollActiveCellIntoView();trigger(self.onActiveCellChanged,getActiveCell())}}function clearTextSelection(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var sel=window.getSelection();if(sel&&sel.removeAllRanges){sel.removeAllRanges()}}}}function isCellPotentiallyEditable(row,cell){if(row<getDataLength()&&!getDataItem(row)){return false}if(columns[cell].cannotTriggerInsert&&row>=getDataLength()){return false}if(!getEditor(row,cell)){return false}return true}function makeActiveCellNormal(){if(!currentEditor){return}trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor});currentEditor.destroy();currentEditor=null;if(activeCellNode){$(activeCellNode).removeClass("editable invalid");if(getDataItem(activeRow)){var column=columns[activeCell];activeCellNode.innerHTML=getFormatter(activeRow,column)(activeRow,activeCell,getDataItem(activeRow)[column.field],column,getDataItem(activeRow),state);invalidatePostProcessingResults(activeRow)}}if($.browser.msie){clearTextSelection()}getEditorLock().deactivate(editController)}function makeActiveCellEditable(editor){if(!activeCellNode){return}if(!options.editable){throw"Grid : makeActiveCellEditable : should never get called when options.editable is false"}clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell)){return}var columnDef=columns[activeCell];var item=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:item,column:columnDef})===false){setFocus();return}getEditorLock().activate(editController);$(activeCellNode).addClass("editable");if(!editor){activeCellNode.innerHTML=""}currentEditor=new (editor||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:columnDef,item:item||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus});if(item){currentEditor.loadValue(item)}serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position){handleActiveCellPositionChange()}}function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus();if(options.autoEdit){navigateDown()}}}function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit()){setFocus()}}function absBox(elem){var box={top:elem.offsetTop,left:elem.offsetLeft,bottom:0,right:0,width:$(elem).outerWidth(),height:$(elem).outerHeight(),visible:true};box.bottom=box.top+box.height;box.right=box.left+box.width;var offsetParent=elem.offsetParent;while((elem=elem.parentNode)!=document.body){if(box.visible&&elem.scrollHeight!=elem.offsetHeight&&$(elem).css("overflowY")!="visible"){box.visible=box.bottom>elem.scrollTop&&box.top<elem.scrollTop+elem.clientHeight}if(box.visible&&elem.scrollWidth!=elem.offsetWidth&&$(elem).css("overflowX")!="visible"){box.visible=box.right>elem.scrollLeft&&box.left<elem.scrollLeft+elem.clientWidth}box.left-=elem.scrollLeft;box.top-=elem.scrollTop;if(elem===offsetParent){box.left+=elem.offsetLeft;box.top+=elem.offsetTop;offsetParent=elem.offsetParent}box.bottom=box.top+box.height;box.right=box.left+box.width}return box}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode){return}var cellBox;trigger(self.onActiveCellPositionChanged,{});if(currentEditor){cellBox=cellBox||getActiveCellPosition();if(currentEditor.show&&currentEditor.hide){if(!cellBox.visible){currentEditor.hide()}else{currentEditor.show()}}if(currentEditor.position){currentEditor.position(cellBox)}}}function getCellEditor(){return currentEditor}function getActiveCell(){if(!activeCellNode){return null}else{return{row:activeRow,cell:activeCell}}}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(row,doPaging){var rowAtTop=row*options.rowHeight;var rowAtBottom=(row+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((row+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(doPaging?rowAtTop:rowAtBottom);render()}else{if(row*options.rowHeight<scrollTop+offset){scrollTo(doPaging?rowAtBottom:rowAtTop);render()}}}function getColspan(row,cell){var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(!metadata||!metadata.columns){return 1}var columnData=metadata.columns[columns[cell].id]||metadata.columns[cell];var colspan=(columnData&&columnData.colspan);if(colspan==="*"){colspan=columns.length-cell}return(colspan||1)}function findFirstFocusableCell(row){var cell=0;while(cell<columns.length){if(canCellBeActive(row,cell)){return cell}cell+=getColspan(row,cell)}return null}function findLastFocusableCell(row){var cell=0;var lastFocusableCell=null;while(cell<columns.length){if(canCellBeActive(row,cell)){lastFocusableCell=cell}cell+=getColspan(row,cell)}return lastFocusableCell}function gotoRight(row,cell,posX){if(cell>=columns.length){return null}do{cell+=getColspan(row,cell)}while(cell<columns.length&&!canCellBeActive(row,cell));if(cell<columns.length){return{row:row,cell:cell,posX:cell}}return null}function gotoLeft(row,cell,posX){if(cell<=0){return null}var firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell===null||firstFocusableCell>=cell){return null}var prev={row:row,cell:firstFocusableCell,posX:firstFocusableCell};var pos;while(true){pos=gotoRight(prev.row,prev.cell,prev.posX);if(!pos){return null}if(pos.cell>=cell){return prev}prev=pos}}function gotoDown(row,cell,posX){var prevCell;while(true){if(++row>=getDataLength()+(options.enableAddRow?1:0)){return null}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell)){return{row:row,cell:prevCell,posX:posX}}}}function gotoUp(row,cell,posX){var prevCell;while(true){if(--row<0){return null}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell)){return{row:row,cell:prevCell,posX:posX}}}}function gotoNext(row,cell,posX){var pos=gotoRight(row,cell,posX);if(pos){return pos}var firstFocusableCell=null;while(++row<getDataLength()+(options.enableAddRow?1:0)){firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell!==null){return{row:row,cell:firstFocusableCell,posX:firstFocusableCell}}}return null}function gotoPrev(row,cell,posX){var pos;var lastSelectableCell;while(!pos){pos=gotoLeft(row,cell,posX);if(pos){break}if(--row<0){return null}cell=0;lastSelectableCell=findLastFocusableCell(row);if(lastSelectableCell!==null){pos={row:row,cell:lastSelectableCell,posX:lastSelectableCell}}}return pos}function navigateRight(){navigate("right")}function navigateLeft(){navigate("left")}function navigateDown(){navigate("down")}function navigateUp(){navigate("up")}function navigateNext(){navigate("next")}function navigatePrev(){navigate("prev")}function navigate(dir){if(!activeCellNode||!options.enableCellNavigation){return}if(!getEditorLock().commitCurrentEdit()){return}var stepFunctions={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext};var stepFn=stepFunctions[dir];var pos=stepFn(activeRow,activeCell,activePosX);if(pos){var isAddNewRow=(pos.row==getDataLength());scrollRowIntoView(pos.row,!isAddNewRow);setActiveCellInternal(getCellNode(pos.row,pos.cell),isAddNewRow||options.autoEdit);activePosX=pos.posX}}function getCellNode(row,cell){if(rowsCache[row]){var cells=$(rowsCache[row]).children();var nodeCell;for(var i=0;i<cells.length;i++){nodeCell=getCellFromNode(cells[i]);if(nodeCell===cell){return cells[i]}else{if(nodeCell>cell){return null}}}}return null}function setActiveCell(row,cell){if(row>getDataLength()||row<0||cell>=columns.length||cell<0){return}if(!options.enableCellNavigation){return}scrollRowIntoView(row,false);setActiveCellInternal(getCellNode(row,cell),false)}function canCellBeActive(row,cell){if(!options.enableCellNavigation||row>=getDataLength()+(options.enableAddRow?1:0)||row<0||cell>=columns.length||cell<0){return false}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.focusable==="boolean"){return rowMetadata.focusable}var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[columns[cell].id]&&typeof columnMetadata[columns[cell].id].focusable==="boolean"){return columnMetadata[columns[cell].id].focusable}if(columnMetadata&&columnMetadata[cell]&&typeof columnMetadata[cell].focusable==="boolean"){return columnMetadata[cell].focusable}if(typeof columns[cell].focusable==="boolean"){return columns[cell].focusable}return true}function canCellBeSelected(row,cell){if(row>=getDataLength()||row<0||cell>=columns.length||cell<0){return false}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.selectable==="boolean"){return rowMetadata.selectable}var columnMetadata=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[columns[cell].id]||rowMetadata.columns[cell]);if(columnMetadata&&typeof columnMetadata.selectable==="boolean"){return columnMetadata.selectable}if(typeof columns[cell].selectable==="boolean"){return columns[cell].selectable}return true}function gotoCell(row,cell,forceEdit){if(!canCellBeActive(row,cell)){return}if(!getEditorLock().commitCurrentEdit()){return}scrollRowIntoView(row,false);var newCell=getCellNode(row,cell);setActiveCellInternal(newCell,forceEdit||(row===getDataLength())||options.autoEdit);if(!currentEditor){setFocus()}}function commitCurrentEdit(){var item=getDataItem(activeRow);var column=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var validationResults=currentEditor.validate();if(validationResults.valid){if(activeRow<getDataLength()){var editCommand={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(item,this.serializedValue);updateRow(this.row)},undo:function(){this.editor.applyValue(item,this.prevSerializedValue);updateRow(this.row)}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(item,column,editCommand)}else{editCommand.execute();makeActiveCellNormal()}trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item})}else{var newItem={};currentEditor.applyValue(newItem,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:newItem,column:column})}return !getEditorLock().isActive()}else{$(activeCellNode).addClass("invalid");$(activeCellNode).stop(true,true).effect("highlight",{color:"red"},300);trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return false}}makeActiveCellNormal()}return true}function cancelCurrentEdit(){makeActiveCellNormal();return true}function rowsToRanges(rows){var ranges=[];var lastCell=columns.length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell))}return ranges}function getSelectedRows(){if(!selectionModel){throw"Selection model is not set"}return selectedRows}function setSelectedRows(rows){if(!selectionModel){throw"Selection model is not set"}selectionModel.setSelectedRanges(rowsToRanges(rows))}this.debug=function(){var s="";s+=("\ncounter_rows_rendered:  "+counter_rows_rendered);s+=("\ncounter_rows_removed:  "+counter_rows_removed);s+=("\nrenderedRows:  "+renderedRows);s+=("\nnumVisibleRows:  "+numVisibleRows);s+=("\nmaxSupportedCssHeight:  "+maxSupportedCssHeight);s+=("\nn(umber of pages):  "+n);s+=("\n(current) page:  "+page);s+=("\npage height (ph):  "+ph);s+=("\nscrollDir:  "+scrollDir);alert(s)};this.eval=function(expr){return eval(expr)};$.extend(this,{slickGridVersion:"2.0a1",onScroll:new Slick.Event(),onSort:new Slick.Event(),onHeaderContextMenu:new Slick.Event(),onHeaderClick:new Slick.Event(),onMouseEnter:new Slick.Event(),onMouseLeave:new Slick.Event(),onClick:new Slick.Event(),onDblClick:new Slick.Event(),onContextMenu:new Slick.Event(),onKeyDown:new Slick.Event(),onAddNewRow:new Slick.Event(),onValidationError:new Slick.Event(),onViewportChanged:new Slick.Event(),onColumnsReordered:new Slick.Event(),onColumnsResized:new Slick.Event(),onCellChange:new Slick.Event(),onBeforeEditCell:new Slick.Event(),onBeforeCellEditorDestroy:new Slick.Event(),onBeforeDestroy:new Slick.Event(),onActiveCellChanged:new Slick.Event(),onActiveCellPositionChanged:new Slick.Event(),onDragInit:new Slick.Event(),onDragStart:new Slick.Event(),onDrag:new Slick.Event(),onDragEnd:new Slick.Event(),onSelectedRowsChanged:new Slick.Event(),registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,getCanvasNode:getCanvasNode,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,showTopPanel:showTopPanel,hideTopPanel:hideTopPanel,showHeaderRowColumns:showHeaderRowColumns,hideHeaderRowColumns:hideHeaderRowColumns,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController});init()}}(jQuery));(function(b){b.extend(true,window,{Slick:{RowSelectionModel:a}});function a(e){var q;var n=[];var j=this;var p;var r={selectActiveRow:true};function s(w){p=b.extend(true,{},r,e);q=w;q.onActiveCellChanged.subscribe(u);q.onKeyDown.subscribe(m);q.onClick.subscribe(l)}function v(){q.onActiveCellChanged.unsubscribe(u);q.onKeyDown.unsubscribe(m);q.onClick.unsubscribe(l)}function f(w){var z=[];for(var y=0;y<w.length;y++){for(var x=w[y].fromRow;x<=w[y].toRow;x++){z.push(x)}}return z}function h(z){var x=[];var w=q.getColumns().length-1;for(var y=0;y<z.length;y++){x.push(new Slick.Range(z[y],0,z[y],w))}return x}function t(z,y){var w,x=[];for(w=z;w<=y;w++){x.push(w)}for(w=y;w<z;w++){x.push(w)}return x}function d(){return f(n)}function k(w){c(h(w))}function c(w){n=w;j.onSelectedRangesChanged.notify(n)}function o(){return n}function u(x,w){if(p.selectActiveRow){c([new Slick.Range(w.row,0,w.row,q.getColumns().length-1)])}}function m(B){var x=q.getActiveCell();if(x&&B.shiftKey&&!B.ctrlKey&&!B.altKey&&!B.metaKey&&(B.which==38||B.which==40)){var A=d();A.sort(function(C,D){return C-D});if(!A.length){A=[x.row]}var z=A[0];var w=A[A.length-1];var y;if(B.which==40){y=x.row<w||z==w?++w:++z}else{y=x.row<w?--w:--z}if(y>=0&&y<q.getDataLength()){q.scrollRowIntoView(y);n=h(t(z,w));c(n)}B.preventDefault();B.stopPropagation()}}function l(B){var x=q.getCellFromEvent(B);if(!x||!q.canCellBeActive(x.row,x.cell)){return false}var z=f(n);var w=b.inArray(x.row,z);if(!B.ctrlKey&&!B.shiftKey&&!B.metaKey){return false}else{if(q.getOptions().multiSelect){if(w===-1&&(B.ctrlKey||B.metaKey)){z.push(x.row);q.setActiveCell(x.row,x.cell)}else{if(w!==-1&&(B.ctrlKey||B.metaKey)){z=b.grep(z,function(F,E){return(F!==x.row)});q.setActiveCell(x.row,x.cell)}else{if(z.length&&B.shiftKey){var A=z.pop();var D=Math.min(x.row,A);var C=Math.max(x.row,A);z=[];for(var y=D;y<=C;y++){if(y!==A){z.push(y)}}z.push(A);q.setActiveCell(x.row,x.cell)}}}}}n=h(z);c(n);B.stopImmediatePropagation();return true}b.extend(this,{getSelectedRows:d,setSelectedRows:k,getSelectedRanges:o,setSelectedRanges:c,init:s,destroy:v,onSelectedRangesChanged:new Slick.Event()})}})(jQuery);var XRegExp;if(XRegExp){throw Error("can't load XRegExp twice in the same frame")}(function(d){XRegExp=function(y,t){var s=[],w=XRegExp.OUTSIDE_CLASS,z=0,r,u,x,v,A;if(XRegExp.isRegExp(y)){if(t!==d){throw TypeError("can't supply flags when constructing one RegExp from another")}return l(y)}if(h){throw Error("can't call the XRegExp constructor within token definition functions")}t=t||"";r={hasNamedCapture:false,captureNames:[],hasFlag:function(B){return t.indexOf(B)>-1},setFlag:function(B){t+=B}};while(z<y.length){u=q(y,z,w,r);if(u){s.push(u.output);z+=(u.match[0].length||1)}else{if(x=n.exec.call(k[w],y.slice(z))){s.push(x[0]);z+=x[0].length}else{v=y.charAt(z);if(v==="["){w=XRegExp.INSIDE_CLASS}else{if(v==="]"){w=XRegExp.OUTSIDE_CLASS}}s.push(v);z++}}}A=RegExp(s.join(""),n.replace.call(t,j,""));A._xregexp={source:y,captureNames:r.hasNamedCapture?r.captureNames:null};return A};XRegExp.version="1.5.1";XRegExp.INSIDE_CLASS=1;XRegExp.OUTSIDE_CLASS=2;var c=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,j=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,p=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,h=false,m=[],n={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},a=n.exec.call(/()??/,"")[1]===d,f=function(){var r=/^/g;n.test.call(r,"");return !r.lastIndex}(),b=RegExp.prototype.sticky!==d,k={};k[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/;k[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/;XRegExp.addToken=function(u,t,s,r){m.push({pattern:l(u,"g"+(b?"y":"")),handler:t,scope:s||XRegExp.OUTSIDE_CLASS,trigger:r||null})};XRegExp.cache=function(t,r){var s=t+"/"+(r||"");return XRegExp.cache[s]||(XRegExp.cache[s]=XRegExp(t,r))};XRegExp.copyAsGlobal=function(r){return l(r,"g")};XRegExp.escape=function(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};XRegExp.execAt=function(v,u,w,t){var r=l(u,"g"+((t&&b)?"y":"")),s;r.lastIndex=w=w||0;s=r.exec(v);if(t&&s&&s.index!==w){s=null}if(u.global){u.lastIndex=s?r.lastIndex:0}return s};XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens")}};XRegExp.isRegExp=function(r){return Object.prototype.toString.call(r)==="[object RegExp]"};XRegExp.iterate=function(w,v,x,u){var r=l(v,"g"),t=-1,s;while(s=r.exec(w)){if(v.global){v.lastIndex=r.lastIndex}x.call(u,s,++t,w,v);if(r.lastIndex===s.index){r.lastIndex++}}if(v.global){v.lastIndex=0}};XRegExp.matchChain=function(s,r){return function t(u,z){var x=r[z].regex?r[z]:{regex:r[z]},w=l(x.regex,"g"),y=[],v;for(v=0;v<u.length;v++){XRegExp.iterate(u[v],w,function(A){y.push(x.backref?(A[x.backref]||""):A[0])})}return((z===r.length-1)||!y.length)?y:t(y,z+1)}([s],0)};RegExp.prototype.apply=function(s,r){return this.exec(r[0])};RegExp.prototype.call=function(r,s){return this.exec(s)};RegExp.prototype.exec=function(w){var u,t,s,r;if(!this.global){r=this.lastIndex}u=n.exec.apply(this,arguments);if(u){if(!a&&u.length>1&&o(u,"")>-1){s=RegExp(this.source,n.replace.call(e(this),"g",""));n.replace.call((w+"").slice(u.index),s,function(){for(var x=1;x<arguments.length-2;x++){if(arguments[x]===d){u[x]=d}}})}if(this._xregexp&&this._xregexp.captureNames){for(var v=1;v<u.length;v++){t=this._xregexp.captureNames[v-1];if(t){u[t]=u[v]}}}if(!f&&this.global&&!u[0].length&&(this.lastIndex>u.index)){this.lastIndex--}}if(!this.global){this.lastIndex=r}return u};RegExp.prototype.test=function(t){var s,r;if(!this.global){r=this.lastIndex}s=n.exec.call(this,t);if(s&&!f&&this.global&&!s[0].length&&(this.lastIndex>s.index)){this.lastIndex--}if(!this.global){this.lastIndex=r}return !!s};String.prototype.match=function(s){if(!XRegExp.isRegExp(s)){s=RegExp(s)}if(s.global){var r=n.match.apply(this,arguments);s.lastIndex=0;return r}return s.exec(this)};String.prototype.replace=function(u,v){var w=XRegExp.isRegExp(u),t,s,x,r;if(w){if(u._xregexp){t=u._xregexp.captureNames}if(!u.global){r=u.lastIndex}}else{u=u+""}if(Object.prototype.toString.call(v)==="[object Function]"){s=n.replace.call(this+"",u,function(){if(t){arguments[0]=new String(arguments[0]);for(var y=0;y<t.length;y++){if(t[y]){arguments[0][t[y]]=arguments[y+1]}}}if(w&&u.global){u.lastIndex=arguments[arguments.length-2]+arguments[0].length}return v.apply(null,arguments)})}else{x=this+"";s=n.replace.call(x,u,function(){var y=arguments;return n.replace.call(v+"",c,function(A,z,D){if(z){switch(z){case"$":return"$";case"&":return y[0];case"`":return y[y.length-1].slice(0,y[y.length-2]);case"'":return y[y.length-1].slice(y[y.length-2]+y[0].length);default:var B="";z=+z;if(!z){return A}while(z>y.length-3){B=String.prototype.slice.call(z,-1)+B;z=Math.floor(z/10)}return(z?y[z]||"":"$")+B}}else{var C=+D;if(C<=y.length-3){return y[C]}C=t?o(t,D):-1;return C>-1?y[C+1]:A}})})}if(w){if(u.global){u.lastIndex=0}else{u.lastIndex=r}}return s};String.prototype.split=function(w,r){if(!XRegExp.isRegExp(w)){return n.split.apply(this,arguments)}var y=this+"",u=[],x=0,v,t;if(r===d||+r<0){r=Infinity}else{r=Math.floor(+r);if(!r){return[]}}w=XRegExp.copyAsGlobal(w);while(v=w.exec(y)){if(w.lastIndex>x){u.push(y.slice(x,v.index));if(v.length>1&&v.index<y.length){Array.prototype.push.apply(u,v.slice(1))}t=v[0].length;x=w.lastIndex;if(u.length>=r){break}}if(w.lastIndex===v.index){w.lastIndex++}}if(x===y.length){if(!n.test.call(w,"")||t){u.push("")}}else{u.push(y.slice(x))}return u.length>r?u.slice(0,r):u};function l(t,s){if(!XRegExp.isRegExp(t)){throw TypeError("type RegExp expected")}var r=t._xregexp;t=XRegExp(t.source,e(t)+(s||""));if(r){t._xregexp={source:r.source,captureNames:r.captureNames?r.captureNames.slice(0):null}}return t}function e(r){return(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":"")}function q(x,w,y,r){var u=m.length,A,v,z;h=true;try{while(u--){z=m[u];if((y&z.scope)&&(!z.trigger||z.trigger.call(r))){z.pattern.lastIndex=w;v=z.pattern.exec(x);if(v&&v.index===w){A={output:z.handler.call(r,v,y),match:v};break}}}}catch(s){throw s}finally{h=false}return A}function o(u,s,t){if(Array.prototype.indexOf){return u.indexOf(s,t)}for(var r=t||0;r<u.length;r++){if(u[r]===s){return r}}return -1}XRegExp.addToken(/\(\?#[^)]*\)/,function(r){return n.test.call(p,r.input.slice(r.index+r[0].length))?"":"(?:)"});XRegExp.addToken(/\((?!\?)/,function(){this.captureNames.push(null);return"("});XRegExp.addToken(/\(\?<([$\w]+)>/,function(r){this.captureNames.push(r[1]);this.hasNamedCapture=true;return"("});XRegExp.addToken(/\\k<([\w$]+)>/,function(s){var r=o(this.captureNames,s[1]);return r>-1?"\\"+(r+1)+(isNaN(s.input.charAt(s.index+s[0].length))?"":"(?:)"):s[0]});XRegExp.addToken(/\[\^?]/,function(r){return r[0]==="[]"?"\\b\\B":"[\\s\\S]"});XRegExp.addToken(/^\(\?([imsx]+)\)/,function(r){this.setFlag(r[1]);return""});XRegExp.addToken(/(?:\s+|#.*)+/,function(r){return n.test.call(p,r.input.slice(r.index+r[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")});XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})})();if(typeof(SyntaxHighlighter)=="undefined"){var SyntaxHighlighter=function(){if(typeof(require)!="undefined"&&typeof(XRegExp)=="undefined"){XRegExp=require("XRegExp").XRegExp}var n={defaults:{"class-name":"","first-line":1,"pad-line-numbers":false,highlight:null,title:null,"smart-tabs":true,"tab-size":4,gutter:true,toolbar:true,"quick-code":true,collapse:false,"auto-links":true,light:false,unindent:true,"html-script":false},config:{space:"&nbsp;",useScriptTags:true,bloggerMode:false,stripBrs:false,tagName:"pre",strings:{expandSource:"expand source",help:"?",alert:"SyntaxHighlighter\n\n",noBrush:"Can't find brush for: ",brushNotHtmlScript:"Brush wasn't configured for html-script option: ",aboutDialog:"@ABOUT@"}},vars:{discoveredBrushes:null,highlighters:{}},brushes:{},regexLib:{multiLineCComments:/\/\*[\s\S]*?\*\//gm,singleLineCComments:/\/\/.*$/gm,singleLinePerlComments:/#.*$/gm,doubleQuotedString:/"([^\\"\n]|\\.)*"/g,singleQuotedString:/'([^\\'\n]|\\.)*'/g,multiLineDoubleQuotedString:new XRegExp('"([^\\\\"]|\\\\.)*"',"gs"),multiLineSingleQuotedString:new XRegExp("'([^\\\\']|\\\\.)*'","gs"),xmlComments:/(&lt;|<)!--[\s\S]*?--(&gt;|>)/gm,url:/\w+:\/\/[\w-.\/?%&=:@;#]*/g,phpScriptTags:{left:/(&lt;|<)\?(?:=|php)?/g,right:/\?(&gt;|>)/g,eof:true},aspScriptTags:{left:/(&lt;|<)%=?/g,right:/%(&gt;|>)/g},scriptScriptTags:{left:/(&lt;|<)\s*script.*?(&gt;|>)/gi,right:/(&lt;|<)\/\s*script\s*(&gt;|>)/gi}},toolbar:{getHtml:function(N){var P='<div class="toolbar">',M=n.toolbar.items,R=M.list;function Q(T,S){return n.toolbar.getButtonHtml(T,S,n.config.strings[S])}for(var O=0;O<R.length;O++){P+=(M[R[O]].getHtml||Q)(N,R[O])}P+="</div>";return P},getButtonHtml:function(N,O,M){return'<span><a href="#" class="toolbar_item command_'+O+" "+O+'">'+M+"</a></span>"},handler:function(R){var Q=R.target,P=Q.className||"";function M(T){var U=new RegExp(T+"_(\\w+)"),S=U.exec(P);return S?S[1]:null}var N=u(D(Q,".syntaxhighlighter").id),O=M("command");if(N&&O){n.toolbar.items[O].execute(N)}R.preventDefault()},items:{list:["expandSource","help"],expandSource:{getHtml:function(M){if(M.getParam("collapse")!=true){return""}var N=M.getParam("title");return n.toolbar.getButtonHtml(M,"expandSource",N?N:n.config.strings.expandSource)},execute:function(M){var N=K(M.id);l(N,"collapsed")}},help:{execute:function(M){var N=y("","_blank",500,250,"scrollbars=0"),O=N.document;O.write(n.config.strings.aboutDialog);O.close();N.focus()}}}},findElements:function(Q,P){var S=P?[P]:t(document.getElementsByTagName(n.config.tagName)),N=n.config,M=[];if(N.useScriptTags){S=S.concat(L())}if(S.length===0){return M}for(var O=0;O<S.length;O++){var R={target:S[O],params:C(Q,q(S[O].className))};if(R.params.brush==null){continue}M.push(R)}return M},highlight:function(R,P){var M=this.findElements(R,P),S="innerHTML",W=null,U=n.config;if(M.length===0){return}for(var Q=0;Q<M.length;Q++){var P=M[Q],T=P.target,O=P.params,X=O.brush,N;if(X==null){continue}if(O["html-script"]=="true"||n.defaults["html-script"]==true){W=new n.HtmlScript(X);X="htmlscript"}else{var V=h(X);if(V){W=new V()}else{continue}}N=T[S];if(U.useScriptTags){N=E(N)}if((T.title||"")!=""){O.title=T.title}O.brush=X;W.init(O);P=W.getDiv(N);if((T.id||"")!=""){P.id=T.id}T.parentNode.replaceChild(P,T)}$.event.trigger("syntaxComplete")},all:function(M){f(window,"load",function(){n.highlight(M)})}};function F(N,M){return N.className.indexOf(M)!=-1}function v(N,M){if(!F(N,M)){N.className+=" "+M}}function l(N,M){N.className=N.className.replace(M,"")}function t(O){var M=[];for(var N=0;N<O.length;N++){M.push(O[N])}return M}function x(M){return M.split(/\r?\n/)}function G(N){var M="highlighter_";return N.indexOf(M)==0?N:M+N}function u(M){return n.vars.highlighters[G(M)]}function K(M){return document.getElementById(G(M))}function p(M){n.vars.highlighters[G(M.id)]=M}function j(T,Q,O){if(T==null){return null}var N=O!=true?T.childNodes:[T.parentNode],R={"#":"id",".":"className"}[Q.substr(0,1)]||"nodeName",M,S;M=R!="nodeName"?Q.substr(1):Q.toUpperCase();if((T[R]||"").indexOf(M)!=-1){return T}for(var P=0;N&&P<N.length&&S==null;P++){S=j(N[P],Q,O)}return S}function D(N,M){return j(N,M,true)}function m(P,M,O){O=Math.max(O||0,0);for(var N=O;N<P.length;N++){if(P[N]==M){return N}}return -1}function r(M){return(M||"")+Math.round(Math.random()*1000000).toString()}function C(P,O){var M={},N;for(N in P){M[N]=P[N]}for(N in O){M[N]=O[N]}return M}function d(N){var M={"true":true,"false":false}[N];return M==null?N:M}function y(Q,P,R,N,O){var M=(screen.width-R)/2,T=(screen.height-N)/2;O+=", left="+M+", top="+T+", width="+R+", height="+N;O=O.replace(/^,/,"");var S=window.open(Q,P,O);S.focus();return S}function f(Q,O,P,N){function M(R){R=R||window.event;if(!R.target){R.target=R.srcElement;R.preventDefault=function(){this.returnValue=false}}P.call(N||window,R)}if(Q.attachEvent){Q.attachEvent("on"+O,M)}else{Q.addEventListener(O,M,false)}}function A(M){window.alert(n.config.strings.alert+M)}function h(Q,S){var R=n.vars.discoveredBrushes,M=null;if(R==null){R={};for(var O in n.brushes){var T=n.brushes[O],N=T.aliases;if(N==null){continue}T.brushName=O.toLowerCase();for(var P=0;P<N.length;P++){R[N[P]]=O}}n.vars.discoveredBrushes=R}M=n.brushes[R[Q]];if(M==null&&S){A(n.config.strings.noBrush+Q)}return M}function J(O,P){var M=x(O);for(var N=0;N<M.length;N++){M[N]=P(M[N],N)}return M.join("\r\n")}function I(M){return M.replace(/^[ ]*[\n]+|[\n]*[ ]*$/g,"")}function q(S){var O,N={},P=new XRegExp("^\\[(?<values>(.*?))\\]$"),Q=new XRegExp("(?<name>[\\w-]+)\\s*:\\s*(?<value>[\\w-%#]+|\\[.*?\\]|\".*?\"|'.*?')\\s*;?","g");while((O=Q.exec(S))!=null){var R=O.value.replace(/^['"]|['"]$/g,"");if(R!=null&&P.test(R)){var M=P.exec(R);R=M.values.length>0?M.values.split(/\s*,\s*/):[]}N[O.name]=R}return N}function z(N,M){if(N==null||N.length==0||N=="\n"){return N}N=N.replace(/</g,"&lt;");N=N.replace(/ {2,}/g,function(O){var P="";for(var Q=0;Q<O.length-1;Q++){P+=n.config.space}return P+" "});if(M!=null){N=J(N,function(O){if(O.length==0){return""}var P="";O=O.replace(/^(&nbsp;| )+/,function(Q){P=Q;return""});if(O.length==0){return P}return P+'<code class="'+M+'">'+O+"</code>"})}return N}function c(O,N){var M=O.toString();while(M.length<N){M="0"+M}return M}function H(O,P){var N="";for(var M=0;M<P;M++){N+=" "}return O.replace(/\t/g,N)}function w(Q,R){var M=x(Q),P="\t",N="";for(var O=0;O<50;O++){N+="                    "}function S(T,V,U){return T.substr(0,V)+N.substr(0,U)+T.substr(V+1,T.length)}Q=J(Q,function(T){if(T.indexOf(P)==-1){return T}var V=0;while((V=T.indexOf(P))!=-1){var U=R-V%R;T=S(T,V,U)}return T});return Q}function k(N){var M=/<br\s*\/?>|&lt;br\s*\/?&gt;/gi;if(n.config.bloggerMode==true){N=N.replace(M,"\n")}if(n.config.stripBrs==true){N=N.replace(M,"")}return N}function a(M){return M.replace(/^\s+|\s+$/g,"")}function B(T){var N=x(k(T)),S=new Array(),Q=/^\s*/,P=1000;for(var O=0;O<N.length&&P>0;O++){var M=N[O];if(a(M).length==0){continue}var R=Q.exec(M);if(R==null){return T}P=Math.min(R[0].length,P)}if(P>0){for(var O=0;O<N.length;O++){N[O]=N[O].substr(P)}}return N.join("\n")}function o(N,M){if(N.index<M.index){return -1}else{if(N.index>M.index){return 1}else{if(N.length<M.length){return -1}else{if(N.length>M.length){return 1}}}}return 0}function s(Q,S){function T(U,V){return U[0]}var O=0,N=null,R=[],P=S.func?S.func:T;while((N=S.regex.exec(Q))!=null){var M=P(N,S);if(typeof(M)=="string"){M=[new n.Match(M,N.index,S.css)]}R=R.concat(M)}return R}function b(N){var M=/(.*)((&gt;|&lt;).*)/;return N.replace(n.regexLib.url,function(O){var Q="",P=null;if(P=M.exec(O)){O=P[1];Q=P[2]}return'<a href="'+O+'">'+O+"</a>"+Q})}function L(){var N=document.getElementsByTagName("script"),M=[];for(var O=0;O<N.length;O++){if(N[O].type=="syntaxhighlighter"){M.push(N[O])}}return M}function E(P){var R="<![CDATA[",O="]]>",T=a(P),S=false,N=R.length,Q=O.length;if(T.indexOf(R)==0){T=T.substring(N);S=true}var M=T.length;if(T.indexOf(O)==M-Q){T=T.substring(0,M-Q);S=true}return S?T:P}function e(Q){var R=Q.target,P=D(R,".syntaxhighlighter"),M=D(R,".container"),T=document.createElement("textarea"),S;if(!M||!P||j(M,"textarea")){return}S=u(P.id);v(P,"source");var U=M.childNodes,N=[];for(var O=0;O<U.length;O++){N.push(U[O].innerText||U[O].textContent)}N=N.join("\r");N=N.replace(/\u00a0/g," ");T.appendChild(document.createTextNode(N));M.appendChild(T);T.focus();T.select();f(T,"blur",function(V){T.parentNode.removeChild(T);l(P,"source")})}n.Match=function(O,M,N){this.value=O;this.index=M;this.length=O.length;this.css=N;this.brushName=null};n.Match.prototype.toString=function(){return this.value};n.HtmlScript=function(Q){var U=h(Q),T,M=new n.brushes.Xml(),S=null,O=this,P="getDiv getHtml init".split(" ");if(U==null){return}T=new U();for(var R=0;R<P.length;R++){(function(){var W=P[R];O[W]=function(){return M[W].apply(M,arguments)}})()}if(T.htmlScript==null){A(n.config.strings.brushNotHtmlScript+Q);return}M.regexList.push({regex:T.htmlScript.code,func:N});function V(X,Y){for(var W=0;W<X.length;W++){X[W].index+=Y}}function N(ad,X){var W=ad.code,ac=[],ab=T.regexList,Z=ad.index+ad.left.length,ae=T.htmlScript,af;for(var aa=0;aa<ab.length;aa++){af=s(W,ab[aa]);V(af,Z);ac=ac.concat(af)}if(ae.left!=null&&ad.left!=null){af=s(ad.left,ae.left);V(af,ad.index);ac=ac.concat(af)}if(ae.right!=null&&ad.right!=null){af=s(ad.right,ae.right);V(af,ad.index+ad[0].lastIndexOf(ad.right));ac=ac.concat(af)}for(var Y=0;Y<ac.length;Y++){ac[Y].brushName=U.brushName}return ac}};n.Highlighter=function(){};n.Highlighter.prototype={getParam:function(O,N){var M=this.params[O];return d(M==null?N:M)},create:function(M){return document.createElement(M)},findMatches:function(P,O){var M=[];if(P!=null){for(var N=0;N<P.length;N++){if(typeof(P[N])=="object"){M=M.concat(s(O,P[N]))}}}return this.removeNestedMatches(M.sort(o))},removeNestedMatches:function(Q){for(var P=0;P<Q.length;P++){if(Q[P]===null){continue}var M=Q[P],O=M.index+M.length;for(var N=P+1;N<Q.length&&Q[P]!==null;N++){var R=Q[N];if(R===null){continue}else{if(R.index>O){break}else{if(R.index==M.index&&R.length>M.length){Q[P]=null}else{if(R.index>=M.index&&R.index<O){Q[N]=null}}}}}}return Q},figureOutLineNumbers:function(O){var M=[],N=parseInt(this.getParam("first-line"));J(O,function(P,Q){M.push(Q+N)});return M},isLineHighlighted:function(M){var N=this.getParam("highlight",[]);if(typeof(N)!="object"&&N.push==null){N=[N]}return m(N,M.toString())!=-1},getLineHtml:function(P,M,O){var N=["line","number"+M,"index"+P,"alt"+(M%2==0?1:2).toString()];if(this.isLineHighlighted(M)){N.push("highlighted")}if(M==0){N.push("break")}return'<div class="'+N.join(" ")+'">'+O+"</div>"},getLineNumbersHtml:function(S,N){var Q="",R=x(S).length,O=parseInt(this.getParam("first-line")),T=this.getParam("pad-line-numbers");if(T==true){T=(O+R-1).toString().length}else{if(isNaN(T)==true){T=0}}for(var P=0;P<R;P++){var M=N?N[P]:O+P,S=M==0?n.config.space:c(M,T);Q+=this.getLineHtml(P,M,S)}return Q},getCodeLinesHtml:function(P,T){P=a(P);var V=x(P),Q=this.getParam("pad-line-numbers"),S=parseInt(this.getParam("first-line")),P="",U=this.getParam("brush");for(var O=0;O<V.length;O++){var W=V[O],M=/^(&nbsp;|\s)+/.exec(W),R=null,N=T?T[O]:S+O;if(M!=null){R=M[0].toString();W=W.substr(R.length);R=R.replace(" ",n.config.space)}W=a(W);if(W.length==0){W=n.config.space}P+=this.getLineHtml(O,N,(R!=null?'<code class="'+U+' spaces">'+R+"</code>":"")+W)}return P},getTitleHtml:function(M){return M?"<caption>"+M+"</caption>":""},getMatchesHtml:function(M,Q){var S=0,U="",T=this.getParam("brush","");function O(W){var V=W?(W.brushName||T):T;return V?V+" ":""}for(var P=0;P<Q.length;P++){var R=Q[P],N;if(R===null||R.length===0){continue}N=O(R);U+=z(M.substr(S,R.index-S),N+"plain")+z(R.value,N+R.css);S=R.index+R.length+(R.offset||0)}U+=z(M.substr(S),O()+"plain");return U},getHtml:function(P){var O="",N=["syntaxhighlighter"],R,Q,M;if(this.getParam("light")==true){this.params.toolbar=this.params.gutter=false}className="syntaxhighlighter";if(this.getParam("collapse")==true){N.push("collapsed")}if((gutter=this.getParam("gutter"))==false){N.push("nogutter")}N.push(this.getParam("class-name"));N.push(this.getParam("brush"));P=I(P).replace(/\r/g," ");R=this.getParam("tab-size");P=this.getParam("smart-tabs")==true?w(P,R):H(P,R);if(this.getParam("unindent")){P=B(P)}if(gutter){M=this.figureOutLineNumbers(P)}Q=this.findMatches(this.regexList,P);O=this.getMatchesHtml(P,Q);O=this.getCodeLinesHtml(O,M);if(this.getParam("auto-links")){O=b(O)}if(typeof(navigator)!="undefined"&&navigator.userAgent&&navigator.userAgent.match(/MSIE/)){N.push("ie")}O='<div id="'+G(this.id)+'" class="'+N.join(" ")+'">'+(this.getParam("toolbar")?n.toolbar.getHtml(this):"")+'<table border="0" cellpadding="0" cellspacing="0">'+this.getTitleHtml(this.getParam("title"))+"<tbody><tr>"+(gutter?'<td class="gutter">'+this.getLineNumbersHtml(P)+"</td>":"")+'<td class="code"><div class="container">'+O+"</div></td></tr></tbody></table></div>";return O},getDiv:function(M){if(M===null){M=""}this.code=M;var N=this.create("div");N.innerHTML=this.getHtml(M);if(this.getParam("toolbar")){f(j(N,".toolbar"),"click",n.toolbar.handler)}if(this.getParam("quick-code")){f(j(N,".code"),"dblclick",e)}return N},init:function(M){this.id=r();p(this);this.params=C(n.defaults,M||{});if(this.getParam("light")==true){this.params.toolbar=this.params.gutter=false}},getKeywords:function(M){M=M.replace(/^\s+|\s+$/g,"").replace(/\s+/g,"|");return"\\b(?:"+M+")\\b"},forHtmlScript:function(M){var N={end:M.right.source};if(M.eof){N.end="(?:(?:"+N.end+")|$)"}this.htmlScript={left:{regex:M.left,css:"script"},right:{regex:M.right,css:"script"},code:new XRegExp("(?<left>"+M.left.source+")(?<code>.*?)(?<right>"+N.end+")","sgi")}}};return n}()}typeof(exports)!="undefined"?exports.SyntaxHighlighter=SyntaxHighlighter:null;eval(function(j,b,m,f,h,l){h=function(a){return(a<b?"":h(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(m--){l[h(m)]=f[m]||h(m)}f=[function(a){return l[a]}];h=function(){return"\\w+"};m=1}while(m--){if(f[m]){j=j.replace(new RegExp("\\b"+h(m)+"\\b","g"),f[m])}}return j}('(2(){1 h=5;h.I=2(){2 n(c,a){4(1 d=0;d<c.9;d++)i[c[d]]=a}2 o(c){1 a=r.H("J"),d=3;a.K=c;a.M="L/t";a.G="t";a.u=a.v=2(){6(!d&&(!8.7||8.7=="F"||8.7=="z")){d=q;e[c]=q;a:{4(1 p y e)6(e[p]==3)B a;j&&5.C(k)}a.u=a.v=x;a.D.O(a)}};r.N.R(a)}1 f=Q,l=h.P(),i={},e={},j=3,k=x,b;5.T=2(c){k=c;j=q};4(b=0;b<f.9;b++){1 m=f[b].w?f[b]:f[b].S(/\\s+/),g=m.w();n(m,g)}4(b=0;b<l.9;b++)6(g=i[l[b].E.A]){e[g]=3;o(g)}}})();',56,56,"|var|function|false|for|SyntaxHighlighter|if|readyState|this|length|||||||||||||||||true|document||javascript|onload|onreadystatechange|pop|null|in|complete|brush|break|highlight|parentNode|params|loaded|language|createElement|autoloader|script|src|text|type|body|removeChild|findElements|arguments|appendChild|split|all".split("|"),0,{}));(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var c="if fi then elif else for do done until while break continue case function return in eq ne ge le";var b="alias apropos awk basename bash bc bg builtin bzip2 cal cat cd cfdisk chgrp chmod chown chrootcksum clear cmp comm command cp cron crontab csplit cut date dc dd ddrescue declare df diff diff3 dig dir dircolors dirname dirs du echo egrep eject enable env ethtool eval exec exit expand export expr false fdformat fdisk fg fgrep file find fmt fold format free fsck ftp gawk getopts grep groups gzip hash head history hostname id ifconfig import install join kill less let ln local locate logname logout look lpc lpr lprint lprintd lprintq lprm ls lsof make man mkdir mkfifo mkisofs mknod more mount mtools mv netstat nice nl nohup nslookup open op passwd paste pathchk ping popd pr printcap printenv printf ps pushd pwd quota quotacheck quotactl ram rcp read readonly renice remsync rm rmdir rsync screen scp sdiff sed select seq set sftp shift shopt shutdown sleep sort source split ssh strace su sudo sum symlink sync tail tar tee test time times touch top traceroute trap tr true tsort tty type ulimit umask umount unalias uname unexpand uniq units unset unshar useradd usermod users uuencode uudecode v vdir vi watch wc whereis which who whoami Wget xargs yes";this.regexList=[{regex:/^#!.*$/gm,css:"preprocessor bold"},{regex:/\/[\w-\/]+/gm,css:"plain"},{regex:SyntaxHighlighter.regexLib.singleLinePerlComments,css:"comments"},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string"},{regex:SyntaxHighlighter.regexLib.singleQuotedString,css:"string"},{regex:new RegExp(this.getKeywords(c),"gm"),css:"keyword"},{regex:new RegExp(this.getKeywords(b),"gm"),css:"functions"}]}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["bash","shell"];SyntaxHighlighter.brushes.Bash=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var c="abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach get goto if implicit in int interface internal is lock long namespace new null object operator out override params private protected public readonly ref return sbyte sealed set short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual void while var async await add alias ascending descending dynamic equals from global group into join let orderby on remove select value where";function b(d,f){var e=(d[0].indexOf("///")==0)?"color1":"comments";return[new SyntaxHighlighter.Match(d[0],d.index,e)]}this.regexList=[{regex:SyntaxHighlighter.regexLib.singleLineCComments,func:b},{regex:SyntaxHighlighter.regexLib.multiLineCComments,css:"comments"},{regex:/@"(?:[^"]|"")*"/g,css:"string"},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string"},{regex:SyntaxHighlighter.regexLib.singleQuotedString,css:"string"},{regex:/^\s*#.*/gm,css:"preprocessor"},{regex:new RegExp(this.getKeywords(c),"gm"),css:"keyword"},{regex:/\bpartial(?=\s+(?:class|interface|struct)\b)/g,css:"keyword"},{regex:/\byield(?=\s+(?:return|break)\b)/g,css:"keyword"}];this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["c#","c-sharp","csharp"];SyntaxHighlighter.brushes.CSharp=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var b="break case catch continue default delete do else false  for function if in instanceof new null return super switch this throw true try typeof var while with";var c=SyntaxHighlighter.regexLib;this.regexList=[{regex:c.multiLineDoubleQuotedString,css:"string"},{regex:c.multiLineSingleQuotedString,css:"string"},{regex:c.singleLineCComments,css:"comments"},{regex:c.multiLineCComments,css:"comments"},{regex:/\s*#.*/gm,css:"preprocessor"},{regex:new RegExp(this.getKeywords(b),"gm"),css:"keyword bold"}];this.forHtmlScript(c.scriptScriptTags)}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["js","jscript","javascript","json"];SyntaxHighlighter.brushes.JScript=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var b="abstract assert boolean break byte case catch char class const continue default do double else enum extends false final finally float for goto if implements import instanceof int interface long native new null package private protected public return short static strictfp super switch synchronized this throw throws true transient try void volatile while";this.regexList=[{regex:SyntaxHighlighter.regexLib.singleLineCComments,css:"comments"},{regex:/\/\*([^\*][\s\S]*)?\*\//gm,css:"comments"},{regex:/\/\*(?!\*\/)\*[\s\S]*?\*\//gm,css:"preprocessor"},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string"},{regex:SyntaxHighlighter.regexLib.singleQuotedString,css:"string"},{regex:/\b([\d]+(\.[\d]+)?|0x[a-f0-9]+)\b/gi,css:"value"},{regex:/(?!\@interface\b)\@[\$\w]+\b/g,css:"color1"},{regex:/\@interface\b/g,css:"color2"},{regex:new RegExp(this.getKeywords(b),"gm"),css:"keyword"}];this.forHtmlScript({left:/(&lt;|<)%[@!=]?/g,right:/%(&gt;|>)/g})}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["java"];SyntaxHighlighter.brushes.Java=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;var a=(function(){var d="break case catch class copy const __finally __exception __try const_cast continue private public protected __declspec default delete deprecated dllexport dllimport do dynamic_cast else enum explicit extern if for friend getter goto inline mutable naked namespace new nil NO noinline nonatomic noreturn nothrow NULL readonly readwrite register reinterpret_cast retain strong return SEL selectany self setter sizeof static static_cast struct super switch template thread throw true false try typedef typeid typename union using uuid virtual void volatile whcar_t while YES";var c="BOOL BOOLEAN BYTE CHAR INT INT_PTR INT32 INT64 LANGID LCID LCTYPE LONG LONGLONG LONG_PTR LONG32 LONG64 LPCSTR LPCTSTR LPCVOID LPCWSTR LPDWORD LPHANDLE LPINT LPLONG LPSTR LPTSTR LPVOID LPWORD LPWSTR LRESULT PBOOL PBOOLEAN PBYTE PCHAR PCSTR PCTSTR PCWSTR PDWORDLONG PDWORD_PTR PDWORD32 PDWORD64 PFLOAT PHALF_PTR PHANDLE PHKEY PINT PINT_PTR PINT32 PINT64 PLCID PLONG PLONG_PTR PLONG32 PLONG64 POINTER_32 POINTER_64 PSHORT PSIZE_T PSSIZE_T PSTR PTBYTE PTCHAR PTSTR PUCHAR PUHALF_PTR PUSHORT PVOID PWCHAR PWORD PWSTR SC_HANDLE SC_LOCK SERVICE_STATUS_HANDLE SHORT SIZE_T SSIZE_T TBYTE TCHAR UCHAR UHALF_PTR UINT UINT_PTR UINT32 UINT64 ULONG char bool short int __int32 __int64 __int8 __int16 long float double __wchar_t clock_t _complex _dev_t _diskfree_t div_t ldiv_t _exception _EXCEPTION_POINTERS FILE _finddata_t _finddatai64_t _wfinddata_t _wfinddatai64_t __finddata64_t __wfinddata64_t _FPIEEE_RECORD fpos_t _HEAPINFO _HFILE lconv intptr_t id jmp_buf mbstate_t _off_t _onexit_t _PNH ptrdiff_t _purecall_handler sig_atomic_t size_t _stat __stat64 _stati64 terminate_function time_t __time64_t _timeb __timeb64 tm uintptr_t _utimbuf va_list wchar_t wctrans_t wctype_t wint_t signed";var b=function(){var e=[[SyntaxHighlighter.regexLib.singleLineCComments,"comments"],[SyntaxHighlighter.regexLib.multiLineCComments,"comments"],['@"[^"]*"',"gm","string"],["@[[^]]*]","gm","color1"],["@[[^]]*]","gm","color1"],["@\\w+\\b","g","color1"],["[: ]nil","g","color1"],["\\.\\w+","g","constants"],[" \\w+(?=[:\\]])","g","variable"],["@[[^]]*]","gm","value"],["\\d","gm","value"],["^ *#.*","gm","preprocessor"],["\\w+(?= \\*)","g","keywords"],[this.getKeywords(c),"gm","color1"],[this.getKeywords(d),"gm","color1"],[this.getKeywords(d),"gm","color1"]];this.regexList=[];for(var f=0;f<e.length;f++){if(e[f].length==2){this.regexList.push({regex:e[f][0],css:e[f][1]})}else{this.regexList.push({regex:new RegExp(e[f][0],e[f][1]),css:e[f][2]})}}};return b})();a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["objective-c","objc","obj-c"];SyntaxHighlighter.brushes.ObjC=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var d="and assert break class continue def del elif else except exec finally for from global if import in is lambda not or pass print raise return try yield while";var b="__import__ abs all any apply basestring bin bool buffer callable chr classmethod cmp coerce compile complex delattr dict dir divmod enumerate eval execfile file filter float format frozenset getattr globals hasattr hash help hex id input int intern isinstance issubclass iter len list locals long map max min next object oct open ord pow print property range raw_input reduce reload repr reversed round set setattr slice sorted staticmethod str sum super tuple type type unichr unicode vars xrange zip";var c="None True False self cls class_";this.regexList=[{regex:SyntaxHighlighter.regexLib.singleLinePerlComments,css:"comments"},{regex:/^\s*@\w+/gm,css:"decorator"},{regex:/(['\"]{3})([^\1])*?\1/gm,css:"comments"},{regex:/"(?!")(?:\.|\\\"|[^\""\n])*"/gm,css:"string"},{regex:/'(?!')(?:\.|(\\\')|[^\''\n])*'/gm,css:"string"},{regex:/\+|\-|\*|\/|\%|=|==/gm,css:"keyword"},{regex:/\b\d+\.?\w*/g,css:"value"},{regex:new RegExp(this.getKeywords(b),"gmi"),css:"functions"},{regex:new RegExp(this.getKeywords(d),"gm"),css:"keyword"},{regex:new RegExp(this.getKeywords(c),"gm"),css:"color1"}];this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["py","python"];SyntaxHighlighter.brushes.Python=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){SyntaxHighlighter=SyntaxHighlighter||(typeof require!=="undefined"?require("shCore").SyntaxHighlighter:null);function a(){var b="alias and BEGIN begin break case class def define_method defined do each else elsif END end ensure false for if in module new next nil not or raise redo rescue retry return self super then throw true undef unless until when while yield";var c="Array Bignum Binding Class Continuation Dir Exception FalseClass File::Stat File Fixnum Fload Hash Integer IO MatchData Method Module NilClass Numeric Object Proc Range Regexp String Struct::TMS Symbol ThreadGroup Thread Time TrueClass";this.regexList=[{regex:SyntaxHighlighter.regexLib.singleLinePerlComments,css:"comments"},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string"},{regex:SyntaxHighlighter.regexLib.singleQuotedString,css:"string"},{regex:/\b[A-Z0-9_]+\b/g,css:"constants"},{regex:/:[a-z][A-Za-z0-9_]*/g,css:"color2"},{regex:/(\$|@@|@)\w+/g,css:"variable bold"},{regex:new RegExp(this.getKeywords(b),"gm"),css:"keyword"},{regex:new RegExp(this.getKeywords(c),"gm"),css:"color1"}];this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["ruby","rails","ror","rb"];SyntaxHighlighter.brushes.Ruby=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){SyntaxHighlighter=SyntaxHighlighter||(typeof require!=="undefined"?require("shCore").SyntaxHighlighter:null);function a(){function f(j,k){return"(?:"+j.replace(/^\s+|\s+$/g,"").replace(/\s+/g,"|"+k+"\\b").replace(/^/,k+"\\b")+")\\b"}function h(l,n){var o=l[0],j=[],q=0,m=0,p=0;while(q<o.length-1){var k=o.substr(q,2);if(p==0){if(k=="/*"){m=q;p++;q+=2}else{q++}}else{if(k=="/*"){p++;q+=2}else{if(k=="*/"){p--;if(p==0){j.push(new SyntaxHighlighter.Match(o.substring(m,q+2),m+l.index,n.css))}q+=2}else{q++}}}}return j}function b(k,m){var n=k[0],j=[],p=0,l=0,o=0;while(p<n.length-1){if(o==0){if(n.substr(p,2)=="\\("){j.push(new SyntaxHighlighter.Match(n.substring(l,p+2),l+k.index,m.css));o++;p+=2}else{p++}}else{if(n[p]=="("){o++}if(n[p]==")"){o--;if(o==0){l=p}}p++}}if(o==0){j.push(new SyntaxHighlighter.Match(n.substring(l,n.length),l+k.index,m.css))}return j}var e="AbsoluteValuable Any AnyClass Array ArrayBound ArrayBuffer ArrayBufferType ArrayLiteralConvertible ArrayType AutoreleasingUnsafePointer BidirectionalIndex Bit BitwiseOperations Bool C CBool CChar CChar16 CChar32 CConstPointer CConstVoidPointer CDouble CFloat CInt CLong CLongLong CMutablePointer CMutableVoidPointer COpaquePointer CShort CSignedChar CString CUnsignedChar CUnsignedInt CUnsignedLong CUnsignedLongLong CUnsignedShort CVaListPointer CVarArg CWideChar Character CharacterLiteralConvertible Collection CollectionOfOne Comparable ContiguousArray ContiguousArrayBuffer DebugPrintable Dictionary DictionaryGenerator DictionaryIndex DictionaryLiteralConvertible Double EmptyCollection EmptyGenerator EnumerateGenerator Equatable ExtendedGraphemeClusterLiteralConvertible ExtendedGraphemeClusterType ExtensibleCollection FilterCollectionView FilterCollectionViewIndex FilterGenerator FilterSequenceView Float Float32 Float64 Float80 FloatLiteralConvertible FloatLiteralType FloatingPointClassification FloatingPointNumber ForwardIndex Generator GeneratorOf GeneratorOfOne GeneratorSequence Hashable HeapBuffer HeapBufferStorage HeapBufferStorageBase ImplicitlyUnwrappedOptional IndexingGenerator Int Int16 Int32 Int64 Int8 IntEncoder IntMax Integer IntegerArithmetic IntegerLiteralConvertible IntegerLiteralType Less LifetimeManager LogicValue MapCollectionView MapSequenceGenerator MapSequenceView MaxBuiltinFloatType MaxBuiltinIntegerType Mirror MirrorDisposition MutableCollection MutableSliceable ObjectIdentifier OnHeap Optional OutputStream PermutationGenerator Printable QuickLookObject RandomAccessIndex Range RangeGenerator RawByte RawOptionSet RawRepresentable Reflectable Repeat ReverseIndex ReverseRange ReverseRangeGenerator ReverseView Sequence SequenceOf SignedInteger SignedNumber Sink SinkOf Slice SliceBuffer Sliceable StaticString Streamable StridedRangeGenerator String StringElement StringInterpolationConvertible StringLiteralConvertible StringLiteralType UInt UInt16 UInt32 UInt64 UInt8 UIntMax UTF16 UTF32 UTF8 UWord UnicodeCodec UnicodeScalar Unmanaged UnsafeArray UnsafePointer UnsignedInteger Void Word Zip2 ZipGenerator2 abs advance alignof alignofValue assert bridgeFromObjectiveC bridgeFromObjectiveCUnconditional bridgeToObjectiveC bridgeToObjectiveCUnconditional c contains count countElements countLeadingZeros debugPrint debugPrintln distance dropFirst dropLast dump encodeBitsAsWords enumerate equal false filter find getBridgedObjectiveCType getVaList indices insertionSort isBridgedToObjectiveC isBridgedVerbatimToObjectiveC isUniquelyReferenced join lexicographicalCompare map max maxElement min minElement nil numericCast partition posix print println quickSort reduce reflect reinterpretCast reverse roundUpToAlignment sizeof sizeofValue sort split startsWith strideof strideofValue swap swift toString transcode true underestimateCount unsafeReflect withExtendedLifetime withObjectAtPlusZero withUnsafePointer withUnsafePointerToObject withUnsafePointers withVaList";var d="as break case class continue default deinit do dynamicType else enum extension fallthrough for func if import in init is let new protocol return self Self static struct subscript super switch Type typealias var where while __COLUMN__ __FILE__ __FUNCTION__ __LINE__ associativity didSet get infix inout left mutating none nonmutating operator override postfix precedence prefix right set unowned unowned(safe) unowned(unsafe) weak willSet";var c="assignment class_protocol exported final lazy noreturn NSCopying NSManaged objc optional required auto_closure noreturn IBAction IBDesignable IBInspectable IBOutlet infix prefix postfix";this.regexList=[{regex:new RegExp("&[a-z]+;","gi"),css:"plain"},{regex:SyntaxHighlighter.regexLib.singleLineCComments,css:"comments"},{regex:new RegExp("\\/\\*[\\s\\S]*\\*\\/","g"),css:"comments",func:h},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string",func:b},{regex:new RegExp("\\b([\\d_]+(\\.[\\de_]+)?|0x[a-f0-9_]+(\\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\\b","gi"),css:"value"},{regex:new RegExp(this.getKeywords(d),"gm"),css:"keyword"},{regex:new RegExp(f(c,"@"),"gm"),css:"color1"},{regex:new RegExp(this.getKeywords(e),"gm"),css:"color2"},{regex:new RegExp("\\b([a-zA-Z_][a-zA-Z0-9_]*)\\b","gi"),css:"variable"},]}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["swift"];SyntaxHighlighter.brushes.Swift=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){var b="AddHandler AddressOf AndAlso Alias And Ansi As Assembly Auto Boolean ByRef Byte ByVal Call Case Catch CBool CByte CChar CDate CDec CDbl Char CInt Class CLng CObj Const CShort CSng CStr CType Date Decimal Declare Default Delegate Dim DirectCast Do Double Each Else ElseIf End Enum Erase Error Event Exit False Finally For Friend Function Get GetType GoSub GoTo Handles If Implements Imports In Inherits Integer Interface Is Let Lib Like Long Loop Me Mod Module MustInherit MustOverride MyBase MyClass Namespace New Next Not Nothing NotInheritable NotOverridable Object On Option Optional Or OrElse Overloads Overridable Overrides ParamArray Preserve Private Property Protected Public RaiseEvent ReadOnly ReDim REM RemoveHandler Resume Return Select Set Shadows Shared Short Single Static Step Stop String Structure Sub SyncLock Then Throw To True Try TypeOf Unicode Until Variant When While With WithEvents WriteOnly Xor Await Async From Where Order By Descending";this.regexList=[{regex:/'.*$/gm,css:"comments"},{regex:SyntaxHighlighter.regexLib.doubleQuotedString,css:"string"},{regex:/^\s*#.*$/gm,css:"preprocessor"},{regex:new RegExp(this.getKeywords(b),"gm"),css:"keyword"}];this.forHtmlScript(SyntaxHighlighter.regexLib.aspScriptTags)}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["vb","vbnet"];SyntaxHighlighter.brushes.Vb=a;typeof(exports)!="undefined"?exports.Brush=a:null})();(function(){typeof(require)!="undefined"?SyntaxHighlighter=require("shCore").SyntaxHighlighter:null;function a(){function b(f,l){var h=SyntaxHighlighter.Match,k=f[0],d=new XRegExp("(&lt;|<)[\\s\\/\\?]*(?<name>[:\\w-\\.]+)","xg").exec(k),c=[];if(f.attributes!=null){var e,j=new XRegExp("(?<name> [\\w:\\-\\.]+)\\s*=\\s*(?<value> \".*?\"|'.*?'|\\w+)","xg");while((e=j.exec(k))!=null){c.push(new h(e.name,f.index+e.index,"color1"));c.push(new h(e.value,f.index+e.index+e[0].indexOf(e.value),"string"))}}if(d!=null){c.push(new h(d.name,f.index+d[0].indexOf(d.name),"keyword"))}return c}this.regexList=[{regex:new XRegExp("(\\&lt;|<)\\!\\[[\\w\\s]*?\\[(.|\\s)*?\\]\\](\\&gt;|>)","gm"),css:"color2"},{regex:SyntaxHighlighter.regexLib.xmlComments,css:"comments"},{regex:new XRegExp("(&lt;|<)[\\s\\/\\?]*(\\w+)(?<attributes>.*?)[\\s\\/\\?]*(&gt;|>)","sg"),func:b}]}a.prototype=new SyntaxHighlighter.Highlighter();a.aliases=["xml","xhtml","xslt","html"];SyntaxHighlighter.brushes.Xml=a;typeof(exports)!="undefined"?exports.Brush=a:null})();"use strict";(function(){var a=this;var d=String.prototype.trim;var c=function(h){return h*1||0};function e(j,h){for(var k=[];h>0;k[--h]=j){}return k.join("")}function b(h){if(h){return f.escapeRegExp(h)}return"\\s"}var f={isBlank:function(h){return h==false},capitalize:function(h){return h.charAt(0).toUpperCase()+h.substring(1).toLowerCase()},chop:function(l,k){k=k||l.length;var h=[];for(var j=0;j<l.length;){h.push(l.slice(j,j+k));j=j+k}return h},clean:function(h){return f.strip(h.replace(/\s+/g," "))},count:function(m,l){var k=0,h;for(var j=0;j<m.length;){h=m.indexOf(l,j);h>=0&&k++;j=j+(h>=0?h:0)+l.length}return k},chars:function(h){return h.split("")},escapeHTML:function(h){return String(h||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},unescapeHTML:function(h){return String(h||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")},escapeRegExp:function(h){return String(h||"").replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(l,j,k){var h=l.split("");h.splice(j,0,k);return h.join("")},includes:function(j,h){return j.indexOf(h)!==-1},join:function(j){var h=Array.prototype.slice.call(arguments);return h.join(h.shift())},lines:function(h){return h.split("\n")},reverse:function(h){return Array.prototype.reverse.apply(h.split("")).join("")},splice:function(m,j,l,k){var h=m.split("");h.splice(j,l,k);return h.join("")},startsWith:function(j,h){return j.length>=h.length&&j.substring(0,h.length)===h},endsWith:function(j,h){return j.length>=h.length&&j.substring(j.length-h.length)===h},succ:function(j){var h=j.split("");h.splice(j.length-1,1,String.fromCharCode(j.charCodeAt(j.length-1)+1));return h.join("")},titleize:function(l){var h=l.split(" "),k;for(var j=0;j<h.length;j++){k=h[j].split("");if(typeof k[0]!=="undefined"){k[0]=k[0].toUpperCase()}j+1===h.length?h[j]=k.join(""):h[j]=k.join("")+" "}return h.join("")},camelize:function(h){return f.trim(h).replace(/(\-|_|\s)+(.)?/g,function(j,l,k){return k?k.toUpperCase():""})},underscored:function(h){return f.trim(h).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/\-|\s+/g,"_").toLowerCase()},dasherize:function(h){return f.trim(h).replace(/([a-z\d])([A-Z]+)/g,"$1-$2").replace(/^([A-Z]+)/,"-$1").replace(/\_|\s+/g,"-").toLowerCase()},trim:function(j,h){if(!h&&d){return d.call(j)}h=b(h);return j.replace(new RegExp("^["+h+"]+|["+h+"]+$","g"),"")},ltrim:function(j,h){h=b(h);return j.replace(new RegExp("^["+h+"]+","g"),"")},rtrim:function(j,h){h=b(h);return j.replace(new RegExp("["+h+"]+$","g"),"")},truncate:function(k,j,h){h=h||"...";return k.length>j?k.slice(0,j)+h:k},words:function(j,h){h=h||" ";return j.split(h)},pad:function(n,k,h,j){var m="";var l=0;if(!h){h=" "}else{if(h.length>1){h=h[0]}}switch(j){case"right":l=(k-n.length);m=e(h,l);n=n+m;break;case"both":l=(k-n.length);m={left:e(h,Math.ceil(l/2)),right:e(h,Math.floor(l/2))};n=m.left+n+m.right;break;default:l=(k-n.length);m=e(h,l);n=m+n}return n},lpad:function(k,j,h){return f.pad(k,j,h)},rpad:function(k,j,h){return f.pad(k,j,h,"right")},lrpad:function(k,j,h){return f.pad(k,j,h,"both")},sprintf:function(){var l=0,r,n=arguments[l++],j=[],k,h,q,t,u="";while(n){if(k=/^[^\x25]+/.exec(n)){j.push(k[0])}else{if(k=/^\x25{2}/.exec(n)){j.push("%")}else{if(k=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)){if(((r=arguments[k[1]||l++])==null)||(r==undefined)){throw new Error("Too few arguments.")}if(/[^s]/.test(k[7])&&(typeof(r)!="number")){throw new TypeError("Expecting number but found "+typeof(r))}switch(k[7]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r);break;case"e":r=k[6]?r.toExponential(k[6]):r.toExponential();break;case"f":r=k[6]?parseFloat(r).toFixed(k[6]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=((r=String(r))&&k[6]?r.substring(0,k[6]):r);break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase();break}r=(/[def]/.test(k[7])&&k[2]&&r>=0?"+"+r:r);q=k[3]?k[3]=="0"?"0":k[3].charAt(1):" ";t=k[5]-String(r).length-u.length;h=k[5]?e(q,t):"";j.push(u+(k[4]?r+h:h+r))}else{throw new Error("Universe error: 17")}}}n=n.substring(k[0].length)}return j.join("")},toNumber:function(j,h){return c(c(j).toFixed(c(h)))},strRight:function(k,h){var j=(!h)?-1:k.indexOf(h);return(j!=-1)?k.slice(j+h.length,k.length):k},strRightBack:function(k,h){var j=(!h)?-1:k.lastIndexOf(h);return(j!=-1)?k.slice(j+h.length,k.length):k},strLeft:function(k,h){var j=(!h)?-1:k.indexOf(h);return(j!=-1)?k.slice(0,j):k},strLeftBack:function(k,h){var j=k.lastIndexOf(h);return(j!=-1)?k.slice(0,j):k}};f.strip=f.trim;f.lstrip=f.ltrim;f.rstrip=f.rtrim;f.center=f.lrpad;f.ljust=f.lpad;f.rjust=f.rpad;if(typeof window==="undefined"&&typeof module!=="undefined"){module.exports=f}else{if(typeof window._!=="undefined"){window._.mixin(f)}else{window._=f}}}());var md5=function(u){function N(b,a){return(b<<a)|(b>>>(32-a))}function M(k,b){var F,a,d,x,c;d=(k&2147483648);x=(b&2147483648);F=(k&1073741824);a=(b&1073741824);c=(k&1073741823)+(b&1073741823);if(F&a){return(c^2147483648^d^x)}if(F|a){if(c&1073741824){return(c^3221225472^d^x)}else{return(c^1073741824^d^x)}}else{return(c^d^x)}}function t(a,c,b){return(a&c)|((~a)&b)}function s(a,c,b){return(a&b)|(c&(~b))}function r(a,c,b){return(a^c^b)}function p(a,c,b){return(c^(a|(~b)))}function w(G,F,ac,ab,k,H,I){G=M(G,M(M(t(F,ac,ab),k),I));return M(N(G,H),F)}function f(G,F,ac,ab,k,H,I){G=M(G,M(M(s(F,ac,ab),k),I));return M(N(G,H),F)}function J(G,F,ac,ab,k,H,I){G=M(G,M(M(r(F,ac,ab),k),I));return M(N(G,H),F)}function v(G,F,ac,ab,k,H,I){G=M(G,M(M(p(F,ac,ab),k),I));return M(N(G,H),F)}function e(k){var G;var d=k.length;var c=d+8;var b=(c-(c%64))/64;var F=(b+1)*16;var H=Array(F-1);var a=0;var x=0;while(x<d){G=(x-(x%4))/4;a=(x%4)*8;H[G]=(H[G]|(k.charCodeAt(x)<<a));x++}G=(x-(x%4))/4;a=(x%4)*8;H[G]=H[G]|(128<<a);H[F-2]=d<<3;H[F-1]=d>>>29;return H}function D(c){var b="",d="",k,a;for(a=0;a<=3;a++){k=(c>>>(a*8))&255;d="0"+k.toString(16);b=b+d.substr(d.length-2,2)}return b}function L(b){b=b.replace(/\r\n/g,"\n");var a="";for(var k=0;k<b.length;k++){var d=b.charCodeAt(k);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a}var E=Array();var R,j,K,y,h,aa,Z,Y,X;var U=7,S=12,P=17,O=22;var C=5,B=9,A=14,z=20;var q=4,o=11,n=16,m=23;var W=6,V=10,T=15,Q=21;u=L(u);E=e(u);aa=1732584193;Z=4023233417;Y=2562383102;X=271733878;for(R=0;R<E.length;R+=16){j=aa;K=Z;y=Y;h=X;aa=w(aa,Z,Y,X,E[R+0],U,3614090360);X=w(X,aa,Z,Y,E[R+1],S,3905402710);Y=w(Y,X,aa,Z,E[R+2],P,606105819);Z=w(Z,Y,X,aa,E[R+3],O,3250441966);aa=w(aa,Z,Y,X,E[R+4],U,4118548399);X=w(X,aa,Z,Y,E[R+5],S,1200080426);Y=w(Y,X,aa,Z,E[R+6],P,2821735955);Z=w(Z,Y,X,aa,E[R+7],O,4249261313);aa=w(aa,Z,Y,X,E[R+8],U,1770035416);X=w(X,aa,Z,Y,E[R+9],S,2336552879);Y=w(Y,X,aa,Z,E[R+10],P,4294925233);Z=w(Z,Y,X,aa,E[R+11],O,2304563134);aa=w(aa,Z,Y,X,E[R+12],U,1804603682);X=w(X,aa,Z,Y,E[R+13],S,4254626195);Y=w(Y,X,aa,Z,E[R+14],P,2792965006);Z=w(Z,Y,X,aa,E[R+15],O,1236535329);aa=f(aa,Z,Y,X,E[R+1],C,4129170786);X=f(X,aa,Z,Y,E[R+6],B,3225465664);Y=f(Y,X,aa,Z,E[R+11],A,643717713);Z=f(Z,Y,X,aa,E[R+0],z,3921069994);aa=f(aa,Z,Y,X,E[R+5],C,3593408605);X=f(X,aa,Z,Y,E[R+10],B,38016083);Y=f(Y,X,aa,Z,E[R+15],A,3634488961);Z=f(Z,Y,X,aa,E[R+4],z,3889429448);aa=f(aa,Z,Y,X,E[R+9],C,568446438);X=f(X,aa,Z,Y,E[R+14],B,3275163606);Y=f(Y,X,aa,Z,E[R+3],A,4107603335);Z=f(Z,Y,X,aa,E[R+8],z,1163531501);aa=f(aa,Z,Y,X,E[R+13],C,2850285829);X=f(X,aa,Z,Y,E[R+2],B,4243563512);Y=f(Y,X,aa,Z,E[R+7],A,1735328473);Z=f(Z,Y,X,aa,E[R+12],z,2368359562);aa=J(aa,Z,Y,X,E[R+5],q,4294588738);X=J(X,aa,Z,Y,E[R+8],o,2272392833);Y=J(Y,X,aa,Z,E[R+11],n,1839030562);Z=J(Z,Y,X,aa,E[R+14],m,4259657740);aa=J(aa,Z,Y,X,E[R+1],q,2763975236);X=J(X,aa,Z,Y,E[R+4],o,1272893353);Y=J(Y,X,aa,Z,E[R+7],n,4139469664);Z=J(Z,Y,X,aa,E[R+10],m,3200236656);aa=J(aa,Z,Y,X,E[R+13],q,681279174);X=J(X,aa,Z,Y,E[R+0],o,3936430074);Y=J(Y,X,aa,Z,E[R+3],n,3572445317);Z=J(Z,Y,X,aa,E[R+6],m,76029189);aa=J(aa,Z,Y,X,E[R+9],q,3654602809);X=J(X,aa,Z,Y,E[R+12],o,3873151461);Y=J(Y,X,aa,Z,E[R+15],n,530742520);Z=J(Z,Y,X,aa,E[R+2],m,3299628645);aa=v(aa,Z,Y,X,E[R+0],W,4096336452);X=v(X,aa,Z,Y,E[R+7],V,1126891415);Y=v(Y,X,aa,Z,E[R+14],T,2878612391);Z=v(Z,Y,X,aa,E[R+5],Q,4237533241);aa=v(aa,Z,Y,X,E[R+12],W,1700485571);X=v(X,aa,Z,Y,E[R+3],V,2399980690);Y=v(Y,X,aa,Z,E[R+10],T,4293915773);Z=v(Z,Y,X,aa,E[R+1],Q,2240044497);aa=v(aa,Z,Y,X,E[R+8],W,1873313359);X=v(X,aa,Z,Y,E[R+15],V,4264355552);Y=v(Y,X,aa,Z,E[R+6],T,2734768916);Z=v(Z,Y,X,aa,E[R+13],Q,1309151649);aa=v(aa,Z,Y,X,E[R+4],W,4149444226);X=v(X,aa,Z,Y,E[R+11],V,3174756917);Y=v(Y,X,aa,Z,E[R+2],T,718787259);Z=v(Z,Y,X,aa,E[R+9],Q,3951481745);aa=M(aa,j);Z=M(Z,K);Y=M(Y,y);X=M(X,h)}var l=D(aa)+D(Z)+D(Y)+D(X);return l.toLowerCase()};
/*!
* ZeroClipboard
* The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
* Copyright (c) 2014 Jon Rohan, James M. Greene
* Licensed MIT
* http://zeroclipboard.org/
* v1.3.5
*/
(function(M){var A;var x={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null};var R={};var r=0;var G={};var H=0;var F={};var t=null;var f=null;var T=function(){var Z,Y,aa,ab,X="ZeroClipboard.swf";if(document.currentScript&&(ab=document.currentScript.src)){}else{var W=document.getElementsByTagName("script");if("readyState" in W[0]){for(Z=W.length;Z--;){if(W[Z].readyState==="interactive"&&(ab=W[Z].src)){break}}}else{if(document.readyState==="loading"){ab=W[W.length-1].src}else{for(Z=W.length;Z--;){aa=W[Z].src;if(!aa){Y=null;break}aa=aa.split("#")[0].split("?")[0];aa=aa.slice(0,aa.lastIndexOf("/")+1);if(Y==null){Y=aa}else{if(Y!==aa){Y=null;break}}}if(Y!==null){ab=Y}}}}if(ab){ab=ab.split("#")[0].split("?")[0];X=ab.slice(0,ab.lastIndexOf("/")+1)+X}return X}();var c=function(){var W=/\-([a-z])/g,X=function(Y,Z){return Z.toUpperCase()};return function(Y){return Y.replace(W,X)}}();var k=function(ab,ad){var ac,X,aa,Y,Z,W;if(M.getComputedStyle){ac=M.getComputedStyle(ab,null).getPropertyValue(ad)}else{X=c(ad);if(ab.currentStyle){ac=ab.currentStyle[X]}else{ac=ab.style[X]}}if(ad==="cursor"){if(!ac||ac==="auto"){aa=ab.tagName.toLowerCase();if(aa==="a"){return"pointer"}}}return ac};var K=function(W){if(!W){W=M.event}var X;if(this!==M){X=this}else{if(W.target){X=W.target}else{if(W.srcElement){X=W.srcElement}}}I.activate(X)};var Q=function(W,Y,X){if(!W||W.nodeType!==1){return}if(W.addEventListener){W.addEventListener(Y,X,false)}else{if(W.attachEvent){W.attachEvent("on"+Y,X)}}};var a=function(W,Y,X){if(!W||W.nodeType!==1){return}if(W.removeEventListener){W.removeEventListener(Y,X,false)}else{if(W.detachEvent){W.detachEvent("on"+Y,X)}}};var V=function(X,Z){if(!X||X.nodeType!==1){return X}if(X.classList){if(!X.classList.contains(Z)){X.classList.add(Z)}return X}if(Z&&typeof Z==="string"){var ab=(Z||"").split(/\s+/);if(X.nodeType===1){if(!X.className){X.className=Z}else{var Y=" "+X.className+" ",aa=X.className;for(var ac=0,W=ab.length;ac<W;ac++){if(Y.indexOf(" "+ab[ac]+" ")<0){aa+=" "+ab[ac]}}X.className=aa.replace(/^\s+|\s+$/g,"")}}}return X};var y=function(X,Z){if(!X||X.nodeType!==1){return X}if(X.classList){if(X.classList.contains(Z)){X.classList.remove(Z)}return X}if(Z&&typeof Z==="string"||Z===undefined){var aa=(Z||"").split(/\s+/);if(X.nodeType===1&&X.className){if(Z){var Y=(" "+X.className+" ").replace(/[\n\t]/g," ");for(var ab=0,W=aa.length;ab<W;ab++){Y=Y.replace(" "+aa[ab]+" "," ")}X.className=Y.replace(/^\s+|\s+$/g,"")}else{X.className=""}}}return X};var S=function(){var Y,Z,W,X=1;if(typeof document.body.getBoundingClientRect==="function"){Y=document.body.getBoundingClientRect();Z=Y.right-Y.left;W=document.body.offsetWidth;X=Math.round(Z/W*100)/100}return X};var m=function(aa,ae){var X={left:0,top:0,width:0,height:0,zIndex:j(ae)-1};if(aa.getBoundingClientRect){var ac=aa.getBoundingClientRect();var Z,ad,W;if("pageXOffset" in M&&"pageYOffset" in M){Z=M.pageXOffset;ad=M.pageYOffset}else{W=S();Z=Math.round(document.documentElement.scrollLeft/W);ad=Math.round(document.documentElement.scrollTop/W)}var ab=document.documentElement.clientLeft||0;var Y=document.documentElement.clientTop||0;X.left=ac.left+Z-ab;X.top=ac.top+ad-Y;X.width="width" in ac?ac.width:ac.right-ac.left;X.height="height" in ac?ac.height:ac.bottom-ac.top}return X};var C=function(Y,W){var X=W==null||W&&W.cacheBust===true&&W.useNoCache===true;if(X){return(Y.indexOf("?")===-1?"?":"&")+"noCache="+new Date().getTime()}else{return""}};var O=function(Y){var Z,X,aa,ab=[],W=[],ac=[];if(Y.trustedOrigins){if(typeof Y.trustedOrigins==="string"){W.push(Y.trustedOrigins)}else{if(typeof Y.trustedOrigins==="object"&&"length" in Y.trustedOrigins){W=W.concat(Y.trustedOrigins)}}}if(Y.trustedDomains){if(typeof Y.trustedDomains==="string"){W.push(Y.trustedDomains)}else{if(typeof Y.trustedDomains==="object"&&"length" in Y.trustedDomains){W=W.concat(Y.trustedDomains)}}}if(W.length){for(Z=0,X=W.length;Z<X;Z++){if(W.hasOwnProperty(Z)&&W[Z]&&typeof W[Z]==="string"){aa=l(W[Z]);if(!aa){continue}if(aa==="*"){ac=[aa];break}ac.push.apply(ac,[aa,"//"+aa,M.location.protocol+"//"+aa])}}}if(ac.length){ab.push("trustedOrigins="+encodeURIComponent(ac.join(",")))}if(typeof Y.jsModuleId==="string"&&Y.jsModuleId){ab.push("jsModuleId="+encodeURIComponent(Y.jsModuleId))}return ab.join("&")};var o=function(Z,aa,Y){if(typeof aa.indexOf==="function"){return aa.indexOf(Z,Y)}var X,W=aa.length;if(typeof Y==="undefined"){Y=0}else{if(Y<0){Y=W+Y}}for(X=Y;X<W;X++){if(aa.hasOwnProperty(X)&&aa[X]===Z){return X}}return -1};var B=function(W){if(typeof W==="string"){throw new TypeError("ZeroClipboard doesn't accept query strings.")}if(!W.length){return[W]}return W};var E=function(Z,X,W,Y){if(Y){M.setTimeout(function(){Z.apply(X,W)},0)}else{Z.apply(X,W)}};var j=function(X){var Y,W;if(X){if(typeof X==="number"&&X>0){Y=X}else{if(typeof X==="string"&&(W=parseInt(X,10))&&!isNaN(W)&&W>0){Y=W}}}if(!Y){if(typeof h.zIndex==="number"&&h.zIndex>0){Y=h.zIndex}else{if(typeof h.zIndex==="string"&&(W=parseInt(h.zIndex,10))&&!isNaN(W)&&W>0){Y=W}}}return Y||0};var q=function(W,Y){if(W&&Y!==false&&typeof console!=="undefined"&&console&&(console.warn||console.log)){var X="`"+W+"` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";if(console.warn){console.warn(X)}else{console.log(X)}}};var w=function(){var Y,X,W,ac,aa,ab,Z=arguments[0]||{};for(Y=1,X=arguments.length;Y<X;Y++){if((W=arguments[Y])!=null){for(ac in W){if(W.hasOwnProperty(ac)){aa=Z[ac];ab=W[ac];if(Z===ab){continue}if(ab!==undefined){Z[ac]=ab}}}}}return Z};var l=function(X){if(X==null||X===""){return null}X=X.replace(/^\s+|\s+$/g,"");if(X===""){return null}var Y=X.indexOf("//");X=Y===-1?X:X.slice(Y+2);var W=X.indexOf("/");X=W===-1?X:Y===-1||W===0?null:X.slice(0,W);if(X&&X.slice(-4).toLowerCase()===".swf"){return null}return X||null};var b=function(){var W=function(ac,ab){var aa,Y,Z;if(ac!=null&&ab[0]!=="*"){if(typeof ac==="string"){ac=[ac]}if(typeof ac==="object"&&"length" in ac){for(aa=0,Y=ac.length;aa<Y;aa++){if(ac.hasOwnProperty(aa)){Z=l(ac[aa]);if(Z){if(Z==="*"){ab.length=0;ab.push("*");break}if(o(Z,ab)===-1){ab.push(Z)}}}}}}};var X={always:"always",samedomain:"sameDomain",never:"never"};return function(ad,Z){var ac,ae=Z.allowScriptAccess;if(typeof ae==="string"&&(ac=ae.toLowerCase())&&/^always|samedomain|never$/.test(ac)){return X[ac]}var ab=l(Z.moviePath);if(ab===null){ab=ad}var aa=[];W(Z.trustedOrigins,aa);W(Z.trustedDomains,aa);var Y=aa.length;if(Y>0){if(Y===1&&aa[0]==="*"){return"always"}if(o(ad,aa)!==-1){if(Y===1&&ad===ab){return"sameDomain"}return"always"}}return"never"}}();var D=function(X){if(X==null){return[]}if(Object.keys){return Object.keys(X)}var W=[];for(var Y in X){if(X.hasOwnProperty(Y)){W.push(Y)}}return W};var e=function(W){if(W){for(var X in W){if(W.hasOwnProperty(X)){delete W[X]}}}return W};var n=function(){try{return document.activeElement}catch(W){}return null};var P=function(){var W=false;if(typeof x.disabled==="boolean"){W=x.disabled===false}else{if(typeof ActiveXObject==="function"){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){W=true}}catch(X){}}if(!W&&navigator.mimeTypes["application/x-shockwave-flash"]){W=true}}return W};function v(W){return W.replace(/,/g,".").replace(/[^0-9\.]/g,"")}function J(W){return parseFloat(v(W))>=10}var I=function(X,W){if(!(this instanceof I)){return new I(X,W)}this.id=""+r++;G[this.id]={instance:this,elements:[],handlers:{}};if(X){this.clip(X)}if(typeof W!=="undefined"){q("new ZeroClipboard(elements, options)",h.debug);I.config(W)}this.options=I.config();if(typeof x.disabled!=="boolean"){x.disabled=!P()}if(x.disabled===false&&x.outdated!==true){if(x.bridge===null){x.outdated=false;x.ready=false;u()}}};I.prototype.setText=function(W){if(W&&W!==""){R["text/plain"]=W;if(x.ready===true&&x.bridge&&typeof x.bridge.setText==="function"){x.bridge.setText(W)}else{x.ready=false}}return this};I.prototype.setSize=function(X,W){if(x.ready===true&&x.bridge&&typeof x.bridge.setSize==="function"){x.bridge.setSize(X,W)}else{x.ready=false}return this};var L=function(W){if(x.ready===true&&x.bridge&&typeof x.bridge.setHandCursor==="function"){x.bridge.setHandCursor(W)}else{x.ready=false}};I.prototype.destroy=function(){this.unclip();this.off();delete G[this.id]};var p=function(){var Z,W,Y,X=[],aa=D(G);for(Z=0,W=aa.length;Z<W;Z++){Y=G[aa[Z]].instance;if(Y&&Y instanceof I){X.push(Y)}}return X};I.version="1.3.5";var h={swfPath:T,trustedDomains:M.location.host?[M.location.host]:[],cacheBust:true,forceHandCursor:false,zIndex:999999999,debug:true,title:null,autoActivate:true};I.config=function(W){if(typeof W==="object"&&W!==null){w(h,W)}if(typeof W==="string"&&W){if(h.hasOwnProperty(W)){return h[W]}return}var Y={};for(var X in h){if(h.hasOwnProperty(X)){if(typeof h[X]==="object"&&h[X]!==null){if("length" in h[X]){Y[X]=h[X].slice(0)}else{Y[X]=w({},h[X])}}else{Y[X]=h[X]}}}return Y};I.destroy=function(){I.deactivate();for(var W in G){if(G.hasOwnProperty(W)&&G[W]){var X=G[W].instance;if(X&&typeof X.destroy==="function"){X.destroy()}}}var Y=s(x.bridge);if(Y&&Y.parentNode){Y.parentNode.removeChild(Y);x.ready=null;x.bridge=null}};I.activate=function(Y){if(A){y(A,h.hoverClass);y(A,h.activeClass)}A=Y;V(Y,h.hoverClass);U();var Z=h.title||Y.getAttribute("title");if(Z){var X=s(x.bridge);if(X){X.setAttribute("title",Z)}}var W=h.forceHandCursor===true||k(Y,"cursor")==="pointer";L(W)};I.deactivate=function(){var W=s(x.bridge);if(W){W.style.left="0px";W.style.top="-9999px";W.removeAttribute("title")}if(A){y(A,h.hoverClass);y(A,h.activeClass);A=null}};var u=function(){var aa,W;var Y=document.getElementById("global-zeroclipboard-html-bridge");if(!Y){var ac=I.config();ac.jsModuleId=typeof t==="string"&&t||typeof f==="string"&&f||null;var ab=b(M.location.host,h);var X=O(ac);var ad=h.moviePath+C(h.moviePath,h);var Z='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+ad+'"/>         <param name="allowScriptAccess" value="'+ab+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+X+'"/>         <embed src="'+ad+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="'+ab+'"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+X+'"           scale="exactfit">         </embed>       </object>';Y=document.createElement("div");Y.id="global-zeroclipboard-html-bridge";Y.setAttribute("class","global-zeroclipboard-container");Y.style.position="absolute";Y.style.left="0px";Y.style.top="-9999px";Y.style.width="15px";Y.style.height="15px";Y.style.zIndex=""+j(h.zIndex);document.body.appendChild(Y);Y.innerHTML=Z}aa=document["global-zeroclipboard-flash-bridge"];if(aa&&(W=aa.length)){aa=aa[W-1]}x.bridge=aa||Y.children[0].lastElementChild};var s=function(Y){var X=/^OBJECT|EMBED$/;var W=Y&&Y.parentNode;while(W&&X.test(W.nodeName)&&W.parentNode){W=W.parentNode}return W||null};var U=function(){if(A){var X=m(A,h.zIndex);var W=s(x.bridge);if(W){W.style.top=X.top+"px";W.style.left=X.left+"px";W.style.width=X.width+"px";W.style.height=X.height+"px";W.style.zIndex=X.zIndex+1}if(x.ready===true&&x.bridge&&typeof x.bridge.setSize==="function"){x.bridge.setSize(X.width,X.height)}else{x.ready=false}}return this};I.prototype.on=function(Y,ac){var aa,W,Z,ab={},X=G[this.id]&&G[this.id].handlers;if(typeof Y==="string"&&Y){Z=Y.toLowerCase().split(/\s+/)}else{if(typeof Y==="object"&&Y&&typeof ac==="undefined"){for(aa in Y){if(Y.hasOwnProperty(aa)&&typeof aa==="string"&&aa&&typeof Y[aa]==="function"){this.on(aa,Y[aa])}}}}if(Z&&Z.length){for(aa=0,W=Z.length;aa<W;aa++){Y=Z[aa].replace(/^on/,"");ab[Y]=true;if(!X[Y]){X[Y]=[]}X[Y].push(ac)}if(ab.noflash&&x.disabled){d.call(this,"noflash",{})}if(ab.wrongflash&&x.outdated){d.call(this,"wrongflash",{flashVersion:x.version})}if(ab.load&&x.ready){d.call(this,"load",{flashVersion:x.version})}}return this};I.prototype.off=function(Z,ac){var ab,W,ad,aa,X,Y=G[this.id]&&G[this.id].handlers;if(arguments.length===0){aa=D(Y)}else{if(typeof Z==="string"&&Z){aa=Z.split(/\s+/)}else{if(typeof Z==="object"&&Z&&typeof ac==="undefined"){for(ab in Z){if(Z.hasOwnProperty(ab)&&typeof ab==="string"&&ab&&typeof Z[ab]==="function"){this.off(ab,Z[ab])}}}}}if(aa&&aa.length){for(ab=0,W=aa.length;ab<W;ab++){Z=aa[ab].toLowerCase().replace(/^on/,"");X=Y[Z];if(X&&X.length){if(ac){ad=o(ac,X);while(ad!==-1){X.splice(ad,1);ad=o(ac,X,ad)}}else{Y[Z].length=0}}}}return this};I.prototype.handlers=function(X){var Z,Y=null,W=G[this.id]&&G[this.id].handlers;if(W){if(typeof X==="string"&&X){return W[X]?W[X].slice(0):null}Y={};for(Z in W){if(W.hasOwnProperty(Z)&&W[Z]){Y[Z]=W[Z].slice(0)}}}return Y};var z=function(ab,W,ae,Z){var Y=G[this.id]&&G[this.id].handlers[ab];if(Y&&Y.length){var aa,ac,X,ad=W||this;for(aa=0,ac=Y.length;aa<ac;aa++){X=Y[aa];W=ad;if(typeof X==="string"&&typeof M[X]==="function"){X=M[X]}if(typeof X==="object"&&X&&typeof X.handleEvent==="function"){W=X;X=X.handleEvent}if(typeof X==="function"){E(X,W,ae,Z)}}}return this};I.prototype.clip=function(Y){Y=B(Y);for(var X=0;X<Y.length;X++){if(Y.hasOwnProperty(X)&&Y[X]&&Y[X].nodeType===1){if(!Y[X].zcClippingId){Y[X].zcClippingId="zcClippingId_"+H++;F[Y[X].zcClippingId]=[this.id];if(h.autoActivate===true){Q(Y[X],"mouseover",K)}}else{if(o(this.id,F[Y[X].zcClippingId])===-1){F[Y[X].zcClippingId].push(this.id)}}var W=G[this.id].elements;if(o(Y[X],W)===-1){W.push(Y[X])}}}return this};I.prototype.unclip=function(aa){var ab=G[this.id];if(ab){var X=ab.elements;var W;if(typeof aa==="undefined"){aa=X.slice(0)}else{aa=B(aa)}for(var Y=aa.length;Y--;){if(aa.hasOwnProperty(Y)&&aa[Y]&&aa[Y].nodeType===1){W=0;while((W=o(aa[Y],X,W))!==-1){X.splice(W,1)}var Z=F[aa[Y].zcClippingId];if(Z){W=0;while((W=o(this.id,Z,W))!==-1){Z.splice(W,1)}if(Z.length===0){if(h.autoActivate===true){a(aa[Y],"mouseover",K)}delete aa[Y].zcClippingId}}}}}return this};I.prototype.elements=function(){var W=G[this.id];return W&&W.elements?W.elements.slice(0):[]};var N=function(ab){var X,ac,aa,W,Z,Y=[];if(ab&&ab.nodeType===1&&(X=ab.zcClippingId)&&F.hasOwnProperty(X)){ac=F[X];if(ac&&ac.length){for(aa=0,W=ac.length;aa<W;aa++){Z=G[ac[aa]].instance;if(Z&&Z instanceof I){Y.push(Z)}}}}return Y};h.hoverClass="zeroclipboard-is-hover";h.activeClass="zeroclipboard-is-active";h.trustedOrigins=null;h.allowScriptAccess=null;h.useNoCache=true;h.moviePath="ZeroClipboard.swf";I.detectFlashSupport=function(){q("ZeroClipboard.detectFlashSupport",h.debug);return P()};I.dispatch=function(Z,aa){if(typeof Z==="string"&&Z){var Y=Z.toLowerCase().replace(/^on/,"");if(Y){var X=A&&h.autoActivate===true?N(A):p();for(var ab=0,W=X.length;ab<W;ab++){d.call(X[ab],Y,aa)}}}};I.prototype.setHandCursor=function(W){q("ZeroClipboard.prototype.setHandCursor",h.debug);W=typeof W==="boolean"?W:!!W;L(W);h.forceHandCursor=W;return this};I.prototype.reposition=function(){q("ZeroClipboard.prototype.reposition",h.debug);return U()};I.prototype.receiveEvent=function(X,Y){q("ZeroClipboard.prototype.receiveEvent",h.debug);if(typeof X==="string"&&X){var W=X.toLowerCase().replace(/^on/,"");if(W){d.call(this,W,Y)}}};I.prototype.setCurrent=function(W){q("ZeroClipboard.prototype.setCurrent",h.debug);I.activate(W);return this};I.prototype.resetBridge=function(){q("ZeroClipboard.prototype.resetBridge",h.debug);I.deactivate();return this};I.prototype.setTitle=function(X){q("ZeroClipboard.prototype.setTitle",h.debug);X=X||h.title||A&&A.getAttribute("title");if(X){var W=s(x.bridge);if(W){W.setAttribute("title",X)}}return this};I.setDefaults=function(W){q("ZeroClipboard.setDefaults",h.debug);I.config(W)};I.prototype.addEventListener=function(W,X){q("ZeroClipboard.prototype.addEventListener",h.debug);return this.on(W,X)};I.prototype.removeEventListener=function(W,X){q("ZeroClipboard.prototype.removeEventListener",h.debug);return this.off(W,X)};I.prototype.ready=function(){q("ZeroClipboard.prototype.ready",h.debug);return x.ready===true};var d=function(aa,ac){aa=aa.toLowerCase().replace(/^on/,"");var Y=ac&&ac.flashVersion&&v(ac.flashVersion)||null;var Z=A;var ae=true;switch(aa){case"load":if(Y){if(!J(Y)){d.call(this,"onWrongFlash",{flashVersion:Y});return}x.outdated=false;x.ready=true;x.version=Y}break;case"wrongflash":if(Y&&!J(Y)){x.outdated=true;x.ready=false;x.version=Y}break;case"mouseover":V(Z,h.hoverClass);break;case"mouseout":if(h.autoActivate===true){I.deactivate()}break;case"mousedown":V(Z,h.activeClass);break;case"mouseup":y(Z,h.activeClass);break;case"datarequested":if(Z){var af=Z.getAttribute("data-clipboard-target"),ag=!af?null:document.getElementById(af);if(ag){var ab=ag.value||ag.textContent||ag.innerText;if(ab){this.setText(ab)}}else{var ad=Z.getAttribute("data-clipboard-text");if(ad){this.setText(ad)}}}ae=false;break;case"complete":e(R);if(Z&&Z!==n()&&Z.focus){Z.focus()}break}var X=Z;var W=[this,ac];return z.call(this,aa,X,W,ae)};if(typeof define==="function"&&define.amd){define(["require","exports","module"],function(X,W,Y){t=Y&&Y.id||null;return I})}else{if(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports&&typeof M.require==="function"){f=module.id||null;module.exports=I}else{M.ZeroClipboard=I}}})(function(){return this}());!function(b){b.Parse=b.Parse||{},b.Parse.VERSION="js1.3.5"}(this),function(){var ay=this,ax=ay._,aw={},av=Array.prototype,au=Object.prototype,at=Function.prototype,ar=av.push,aq=av.slice,ap=av.concat,ao=au.toString,an=au.hasOwnProperty,am=av.forEach,al=av.map,ak=av.reduce,aj=av.reduceRight,ai=av.filter,ah=av.every,ag=av.some,af=av.indexOf,ae=av.lastIndexOf,ad=Array.isArray,ac=Object.keys,ab=at.bind,aa=function(b){return b instanceof aa?b:this instanceof aa?void (this._wrapped=b):new aa(b)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=aa),exports._=aa):ay._=aa,aa.VERSION="1.4.4";var Z=aa.each=aa.forEach=function(h,c,m){if(null!=h){if(am&&h.forEach===am){h.forEach(c,m)}else{if(h.length===+h.length){for(var l=0,k=h.length;k>l;l++){if(c.call(m,h[l],l,h)===aw){return}}}else{for(var j in h){if(aa.has(h,j)&&c.call(m,h[j],j,h)===aw){return}}}}}};aa.map=aa.collect=function(f,e,j){var h=[];return null==f?h:al&&f.map===al?f.map(e,j):(Z(f,function(b,d,c){h[h.length]=e.call(j,b,d,c)}),h)};var Y="Reduce of empty array with no initial value";aa.reduce=aa.foldl=aa.inject=function(h,f,l,k){var j=arguments.length>2;if(null==h&&(h=[]),ak&&h.reduce===ak){return k&&(f=aa.bind(f,k)),j?h.reduce(f,l):h.reduce(f)}if(Z(h,function(b,d,c){j?l=f.call(k,l,b,d,c):(l=b,j=!0)}),!j){throw new TypeError(Y)}return l},aa.reduceRight=aa.foldr=function(j,h,o,n){var m=arguments.length>2;if(null==j&&(j=[]),aj&&j.reduceRight===aj){return n&&(h=aa.bind(h,n)),m?j.reduceRight(h,o):j.reduceRight(h)}var l=j.length;if(l!==+l){var k=aa.keys(j);l=k.length}if(Z(j,function(c,b,a){b=k?k[--l]:--l,m?o=h.call(n,o,j[b],b,a):(o=j[b],m=!0)}),!m){throw new TypeError(Y)}return o},aa.find=aa.detect=function(f,e,j){var h;return X(f,function(b,d,c){return e.call(j,b,d,c)?(h=b,!0):void 0}),h},aa.filter=aa.select=function(f,e,j){var h=[];return null==f?h:ai&&f.filter===ai?f.filter(e,j):(Z(f,function(b,d,c){e.call(j,b,d,c)&&(h[h.length]=b)}),h)},aa.reject=function(e,d,f){return aa.filter(e,function(b,h,c){return !d.call(f,b,h,c)},f)},aa.every=aa.all=function(f,c,j){c||(c=aa.identity);var h=!0;return null==f?h:ah&&f.every===ah?f.every(c,j):(Z(f,function(b,e,d){return(h=h&&c.call(j,b,e,d))?void 0:aw}),!!h)};var X=aa.some=aa.any=function(f,c,j){c||(c=aa.identity);var h=!1;return null==f?h:ag&&f.some===ag?f.some(c,j):(Z(f,function(b,e,d){return h||(h=c.call(j,b,e,d))?aw:void 0}),!!h)};aa.contains=aa.include=function(d,c){return null==d?!1:af&&d.indexOf===af?-1!=d.indexOf(c):X(d,function(b){return b===c})},aa.invoke=function(f,e){var j=aq.call(arguments,2),h=aa.isFunction(e);return aa.map(f,function(b){return(h?e:b[e]).apply(b,j)})},aa.pluck=function(d,c){return aa.map(d,function(b){return b[c]})},aa.where=function(e,d,f){return aa.isEmpty(d)?f?null:[]:aa[f?"find":"filter"](e,function(b){for(var h in d){if(d[h]!==b[h]){return !1}}return !0})},aa.findWhere=function(d,c){return aa.where(d,c,!0)},aa.max=function(f,e,j){if(!e&&aa.isArray(f)&&f[0]===+f[0]&&f.length<65535){return Math.max.apply(Math,f)}if(!e&&aa.isEmpty(f)){return -1/0}var h={computed:-1/0,value:-1/0};return Z(f,function(b,k,d){var c=e?e.call(j,b,k,d):b;c>=h.computed&&(h={value:b,computed:c})}),h.value},aa.min=function(f,e,j){if(!e&&aa.isArray(f)&&f[0]===+f[0]&&f.length<65535){return Math.min.apply(Math,f)}if(!e&&aa.isEmpty(f)){return 1/0}var h={computed:1/0,value:1/0};return Z(f,function(b,k,d){var c=e?e.call(j,b,k,d):b;c<h.computed&&(h={value:b,computed:c})}),h.value},aa.shuffle=function(f){var e,j=0,h=[];return Z(f,function(b){e=aa.random(j++),h[j-1]=h[e],h[e]=b}),h};var W=function(b){return aa.isFunction(b)?b:function(a){return a[b]}};aa.sortBy=function(f,e,j){var h=W(e);return aa.pluck(aa.map(f,function(d,c,k){return{value:d,index:c,criteria:h.call(j,d,c,k)}}).sort(function(l,k){var n=l.criteria,m=k.criteria;if(n!==m){if(n>m||void 0===n){return 1}if(m>n||void 0===m){return -1}}return l.index<k.index?-1:1}),"value")};var V=function(j,h,n,m){var l={},k=W(h||aa.identity);return Z(j,function(a,d){var c=k.call(n,a,d,j);m(l,c,a)}),l};aa.groupBy=function(e,d,f){return V(e,d,f,function(j,h,k){(aa.has(j,h)?j[h]:j[h]=[]).push(k)})},aa.countBy=function(e,d,f){return V(e,d,f,function(h,c){aa.has(h,c)||(h[c]=0),h[c]++})},aa.sortedIndex=function(k,j,q,p){q=null==q?aa.identity:W(q);for(var o=q.call(p,j),n=0,m=k.length;m>n;){var l=n+m>>>1;q.call(p,k[l])<o?n=l+1:m=l}return n},aa.toArray=function(b){return b?aa.isArray(b)?aq.call(b):b.length===+b.length?aa.map(b,aa.identity):aa.values(b):[]},aa.size=function(b){return null==b?0:b.length===+b.length?b.length:aa.keys(b).length},aa.first=aa.head=aa.take=function(e,d,f){return null==e?void 0:null==d||f?e[0]:aq.call(e,0,d)},aa.initial=function(e,d,f){return aq.call(e,0,e.length-(null==d||f?1:d))},aa.last=function(e,d,f){return null==e?void 0:null==d||f?e[e.length-1]:aq.call(e,Math.max(e.length-d,0))},aa.rest=aa.tail=aa.drop=function(e,d,f){return aq.call(e,null==d||f?1:d)},aa.compact=function(b){return aa.filter(b,aa.identity)};var U=function(e,d,f){return Z(e,function(b){aa.isArray(b)?d?ar.apply(f,b):U(b,d,f):f.push(b)}),f};aa.flatten=function(d,c){return U(d,c,[])},aa.without=function(b){return aa.difference(b,aq.call(arguments,1))},aa.uniq=aa.unique=function(j,h,o,n){aa.isFunction(h)&&(n=o,o=h,h=!1);var m=o?aa.map(j,o,n):j,l=[],k=[];return Z(m,function(b,a){(h?a&&k[k.length-1]===b:aa.contains(k,b))||(k.push(b),l.push(j[a]))}),l},aa.union=function(){return aa.uniq(ap.apply(av,arguments))},aa.intersection=function(d){var c=aq.call(arguments,1);return aa.filter(aa.uniq(d),function(b){return aa.every(c,function(a){return aa.indexOf(a,b)>=0})})},aa.difference=function(d){var c=ap.apply(av,aq.call(arguments,1));return aa.filter(d,function(b){return !aa.contains(c,b)})},aa.zip=function(){for(var f=aq.call(arguments),e=aa.max(aa.pluck(f,"length")),j=new Array(e),h=0;e>h;h++){j[h]=aa.pluck(f,""+h)}return j},aa.object=function(h,f){if(null==h){return{}}for(var l={},k=0,j=h.length;j>k;k++){f?l[h[k]]=f[k]:l[h[k][0]]=h[k][1]}return l},aa.indexOf=function(h,f,l){if(null==h){return -1}var k=0,j=h.length;if(l){if("number"!=typeof l){return k=aa.sortedIndex(h,f),h[k]===f?k:-1}k=0>l?Math.max(0,j+l):l}if(af&&h.indexOf===af){return h.indexOf(f,l)}for(;j>k;k++){if(h[k]===f){return k}}return -1},aa.lastIndexOf=function(h,f,l){if(null==h){return -1}var k=null!=l;if(ae&&h.lastIndexOf===ae){return k?h.lastIndexOf(f,l):h.lastIndexOf(f)}for(var j=k?l:h.length;j--;){if(h[j]===f){return j}}return -1},aa.range=function(j,h,n){arguments.length<=1&&(h=j||0,j=0),n=arguments[2]||1;for(var m=Math.max(Math.ceil((h-j)/n),0),l=0,k=new Array(m);m>l;){k[l++]=j,j+=n}return k},aa.bind=function(e,d){if(e.bind===ab&&ab){return ab.apply(e,aq.call(arguments,1))}var f=aq.call(arguments,2);return function(){return e.apply(d,f.concat(aq.call(arguments)))}},aa.partial=function(d){var c=aq.call(arguments,1);return function(){return d.apply(this,c.concat(aq.call(arguments)))}},aa.bindAll=function(d){var c=aq.call(arguments,1);return 0===c.length&&(c=aa.functions(d)),Z(c,function(a){d[a]=aa.bind(d[a],d)}),d},aa.memoize=function(e,d){var f={};return d||(d=aa.identity),function(){var a=d.apply(this,arguments);return aa.has(f,a)?f[a]:f[a]=e.apply(this,arguments)}},aa.delay=function(e,d){var f=aq.call(arguments,2);return setTimeout(function(){return e.apply(null,f)},d)},aa.defer=function(b){return aa.delay.apply(aa,[b,1].concat(aq.call(arguments,1)))},aa.throttle=function(k,j){var q,p,o,n,m=0,l=function(){m=new Date,o=null,n=k.apply(q,p)};return function(){var b=new Date,a=j-(b-m);return q=this,p=arguments,0>=a?(clearTimeout(o),o=null,m=b,n=k.apply(q,p)):o||(o=setTimeout(l,a)),n}},aa.debounce=function(h,f,l){var k,j;return function(){var d=this,c=arguments,b=function(){k=null,l||(j=h.apply(d,c))},a=l&&!k;return clearTimeout(k),k=setTimeout(b,f),a&&(j=h.apply(d,c)),j}},aa.once=function(e){var d,f=!1;return function(){return f?d:(f=!0,d=e.apply(this,arguments),e=null,d)}},aa.wrap=function(d,c){return function(){var a=[d];return ar.apply(a,arguments),c.apply(this,a)}},aa.compose=function(){var b=arguments;return function(){for(var a=arguments,d=b.length-1;d>=0;d--){a=[b[d].apply(this,a)]}return a[0]}},aa.after=function(d,c){return 0>=d?c():function(){return --d<1?c.apply(this,arguments):void 0}},aa.keys=ac||function(e){if(e!==Object(e)){throw new TypeError("Invalid object")}var d=[];for(var f in e){aa.has(e,f)&&(d[d.length]=f)}return d},aa.values=function(e){var d=[];for(var f in e){aa.has(e,f)&&d.push(e[f])}return d},aa.pairs=function(e){var d=[];for(var f in e){aa.has(e,f)&&d.push([f,e[f]])}return d},aa.invert=function(e){var d={};for(var f in e){aa.has(e,f)&&(d[e[f]]=f)}return d},aa.functions=aa.methods=function(e){var d=[];for(var f in e){aa.isFunction(e[f])&&d.push(f)}return d.sort()},aa.extend=function(b){return Z(aq.call(arguments,1),function(a){if(a){for(var d in a){b[d]=a[d]}}}),b},aa.pick=function(e){var d={},f=ap.apply(av,aq.call(arguments,1));return Z(f,function(a){a in e&&(d[a]=e[a])}),d},aa.omit=function(f){var d={},j=ap.apply(av,aq.call(arguments,1));for(var h in f){aa.contains(j,h)||(d[h]=f[h])}return d},aa.defaults=function(b){return Z(aq.call(arguments,1),function(a){if(a){for(var d in a){null==b[d]&&(b[d]=a[d])}}}),b},aa.clone=function(b){return aa.isObject(b)?aa.isArray(b)?b.slice():aa.extend({},b):b},aa.tap=function(d,c){return c(d),d};var T=function(v,u,t,s){if(v===u){return 0!==v||1/v==1/u}if(null==v||null==u){return v===u}v instanceof aa&&(v=v._wrapped),u instanceof aa&&(u=u._wrapped);var r=ao.call(v);if(r!=ao.call(u)){return !1}switch(r){case"[object String]":return v==String(u);case"[object Number]":return v!=+v?u!=+u:0==v?1/v==1/u:v==+u;case"[object Date]":case"[object Boolean]":return +v==+u;case"[object RegExp]":return v.source==u.source&&v.global==u.global&&v.multiline==u.multiline&&v.ignoreCase==u.ignoreCase}if("object"!=typeof v||"object"!=typeof u){return !1}for(var q=t.length;q--;){if(t[q]==v){return s[q]==u}}t.push(v),s.push(u);var p=0,o=!0;if("[object Array]"==r){if(p=v.length,o=p==u.length){for(;p--&&(o=T(v[p],u[p],t,s));){}}}else{var n=v.constructor,m=u.constructor;if(n!==m&&!(aa.isFunction(n)&&n instanceof n&&aa.isFunction(m)&&m instanceof m)){return !1}for(var j in v){if(aa.has(v,j)&&(p++,!(o=aa.has(u,j)&&T(v[j],u[j],t,s)))){break}}if(o){for(j in u){if(aa.has(u,j)&&!p--){break}}o=!p}}return t.pop(),s.pop(),o};aa.isEqual=function(d,c){return T(d,c,[],[])},aa.isEmpty=function(d){if(null==d){return !0}if(aa.isArray(d)||aa.isString(d)){return 0===d.length}for(var c in d){if(aa.has(d,c)){return !1}}return !0},aa.isElement=function(b){return !(!b||1!==b.nodeType)},aa.isArray=ad||function(b){return"[object Array]"==ao.call(b)},aa.isObject=function(b){return b===Object(b)},Z(["Arguments","Function","String","Number","Date","RegExp"],function(b){aa["is"+b]=function(a){return ao.call(a)=="[object "+b+"]"}}),aa.isArguments(arguments)||(aa.isArguments=function(b){return !(!b||!aa.has(b,"callee"))}),"function"!=typeof/./&&(aa.isFunction=function(b){return"function"==typeof b}),aa.isFinite=function(b){return isFinite(b)&&!isNaN(parseFloat(b))},aa.isNaN=function(b){return aa.isNumber(b)&&b!=+b},aa.isBoolean=function(b){return b===!0||b===!1||"[object Boolean]"==ao.call(b)},aa.isNull=function(b){return null===b},aa.isUndefined=function(b){return void 0===b},aa.has=function(d,c){return an.call(d,c)},aa.noConflict=function(){return ay._=ax,this},aa.identity=function(b){return b},aa.times=function(h,f,l){for(var k=Array(h),j=0;h>j;j++){k[j]=f.call(l,j)}return k},aa.random=function(d,c){return null==c&&(c=d,d=0),d+Math.floor(Math.random()*(c-d+1))};var S={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};S.unescape=aa.invert(S.escape);var R={escape:new RegExp("["+aa.keys(S.escape).join("")+"]","g"),unescape:new RegExp("("+aa.keys(S.unescape).join("|")+")","g")};aa.each(["escape","unescape"],function(b){aa[b]=function(a){return null==a?"":(""+a).replace(R[b],function(c){return S[b][c]})}}),aa.result=function(e,d){if(null==e){return null}var f=e[d];return aa.isFunction(f)?f.call(e):f},aa.mixin=function(b){Z(aa.functions(b),function(a){var d=aa[a]=b[a];aa.prototype[a]=function(){var c=[this._wrapped];return ar.apply(c,arguments),M.call(this,d.apply(aa,c))}})};var Q=0;aa.uniqueId=function(d){var c=++Q+"";return d?d+c:c},aa.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;aa.template=function(r,q,p){var o;p=aa.defaults({},p,aa.templateSettings);var n=new RegExp([(p.escape||P).source,(p.interpolate||P).source,(p.evaluate||P).source].join("|")+"|$","g"),m=0,l="__p+='";r.replace(n,function(a,u,t,s,f){return l+=r.slice(m,f).replace(N,function(b){return"\\"+O[b]}),u&&(l+="'+\n((__t=("+u+"))==null?'':_.escape(__t))+\n'"),t&&(l+="'+\n((__t=("+t+"))==null?'':__t)+\n'"),s&&(l+="';\n"+s+"\n__p+='"),m=f+a.length,a}),l+="';\n",p.variable||(l="with(obj||{}){\n"+l+"}\n"),l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n";try{o=new Function(p.variable||"obj","_",l)}catch(k){throw k.source=l,k}if(q){return o(q,aa)}var j=function(b){return o.call(this,b,aa)};return j.source="function("+(p.variable||"obj")+"){\n"+l+"}",j},aa.chain=function(b){return aa(b).chain()};var M=function(b){return this._chain?aa(b).chain():b};aa.mixin(aa),Z(["pop","push","reverse","shift","sort","splice","unshift"],function(d){var c=av[d];aa.prototype[d]=function(){var a=this._wrapped;return c.apply(a,arguments),"shift"!=d&&"splice"!=d||0!==a.length||delete a[0],M.call(this,a)}}),Z(["concat","join","slice"],function(d){var c=av[d];aa.prototype[d]=function(){return M.call(this,c.apply(this._wrapped,arguments))}}),aa.extend(aa.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(f){f.Parse=f.Parse||{};var e=f.Parse;"undefined"!=typeof localStorage?e.localStorage=localStorage:"undefined"!=typeof require&&(e.localStorage=require("localStorage")),"undefined"!=typeof XMLHttpRequest?e.XMLHttpRequest=XMLHttpRequest:"undefined"!=typeof require&&(e.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest),"undefined"!=typeof exports&&exports._?(e._=exports._.noConflict(),exports.Parse=e):e._=_.noConflict(),"undefined"!=typeof $&&(e.$=$);var j=function(){},h=function(b,l,k){var c;return c=l&&l.hasOwnProperty("constructor")?l.constructor:function(){b.apply(this,arguments)},e._.extend(c,b),j.prototype=b.prototype,c.prototype=new j,l&&e._.extend(c.prototype,l),k&&e._.extend(c,k),c.prototype.constructor=c,c.__super__=b.prototype,c};e.serverURL="https://api.parse.com","undefined"!=typeof process&&process.versions&&process.versions.node&&(e._isNode=!0),e.initialize=function(b,l,k){if(k){throw"Parse.initialize() was passed a Master Key, which is only allowed from within Node.js."}e._initialize(b,l)},e._initialize=function(b,l,k){e.applicationId=b,e.javaScriptKey=l,e.masterKey=k,e._useMasterKey=!1},e._isNode&&(e.initialize=e._initialize,e.Cloud=e.Cloud||{},e.Cloud.useMasterKey=function(){e._useMasterKey=!0}),e._getParsePath=function(b){if(!e.applicationId){throw"You need to call Parse.initialize before using Parse."}if(b||(b=""),!e._.isString(b)){throw"Tried to get a localStorage path that wasn't a String."}return"/"===b[0]&&(b=b.substring(1)),"Parse/"+e.applicationId+"/"+b},e._installationId=null,e._getInstallationId=function(){if(e._installationId){return e._installationId}var b=e._getParsePath("installationId");if(e._installationId=e.localStorage.getItem(b),!e._installationId||""===e._installationId){var d=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};e._installationId=d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d(),e.localStorage.setItem(b,e._installationId)}return e._installationId},e._parseDate=function(t){var s=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),r=s.exec(t);if(!r){return null}var q=r[1]||0,p=(r[2]||1)-1,o=r[3]||0,n=r[4]||0,m=r[5]||0,l=r[6]||0,k=r[8]||0;return new Date(Date.UTC(q,p,o,n,m,l,k))},e._ajaxIE8=function(b,n,m){var l=new e.Promise,k=new XDomainRequest;return k.onload=function(){var d;try{d=JSON.parse(k.responseText)}catch(c){l.reject(c)}d&&l.resolve(d)},k.onerror=k.ontimeout=function(){var c={responseText:JSON.stringify({code:e.Error.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};l.reject(c)},k.onprogress=function(){},k.open(b,n),k.send(m),l},e._useXDomainRequest=function(){return"undefined"!=typeof XDomainRequest?"withCredentials" in new XMLHttpRequest?!1:!0:!1},e._ajax=function(r,q,p,o,n){var m={success:o,error:n};if(e._useXDomainRequest()){return e._ajaxIE8(r,q,p)._thenRunCallbacks(m)}var l=new e.Promise,k=0,b=function(){var c=!1,a=new e.XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState){if(c){return}if(c=!0,a.status>=200&&a.status<300){var s;try{s=JSON.parse(a.responseText)}catch(d){l.reject(d)}s&&l.resolve(s,a.status,a)}else{if(a.status>=500){if(++k<5){var t=Math.round(125*Math.random()*Math.pow(2,k));setTimeout(b,t)}else{l.reject(a)}}else{l.reject(a)}}}},a.open(r,q,!0),a.setRequestHeader("Content-Type","text/plain"),e._isNode&&a.setRequestHeader("User-Agent","Parse/"+e.VERSION+" (NodeJS "+process.versions.node+")"),a.send(p)};return b(),l._thenRunCallbacks(m)},e._extend=function(k,d){var l=h(this,k,d);return l.extend=this.extend,l},e._request=function(v){var u=v.route,t=v.className,s=v.objectId,r=v.method,q=v.useMasterKey,p=v.sessionToken,o=v.data;if(!e.applicationId){throw"You must specify your applicationId using Parse.initialize."}if(!e.javaScriptKey&&!e.masterKey){throw"You must specify a key using Parse.initialize."}if(!p){var n=e.User.current();n&&n._sessionToken&&(p=n._sessionToken)}if("batch"!==u&&"classes"!==u&&"events"!==u&&"files"!==u&&"functions"!==u&&"login"!==u&&"push"!==u&&"requestPasswordReset"!==u&&"rest_verify_analytics"!==u&&"users"!==u&&"jobs"!==u&&"config"!==u){throw"Bad route: '"+u+"'."}var m=e.serverURL;"/"!==m.charAt(m.length-1)&&(m+="/"),m+="1/"+u,t&&(m+="/"+t),s&&(m+="/"+s),o=e._.clone(o||{}),"POST"!==r&&(o._method=r,r="POST"),e._.isUndefined(q)&&(q=e._useMasterKey),o._ApplicationId=e.applicationId,q?o._MasterKey=e.masterKey:o._JavaScriptKey=e.javaScriptKey,o._ClientVersion=e.VERSION,o._InstallationId=e._getInstallationId(),p&&(o._SessionToken=p);var b=JSON.stringify(o);return e._ajax(r,m,b).then(null,function(k){var x;if(k&&k.responseText){try{var w=JSON.parse(k.responseText);x=new e.Error(w.code,w.error)}catch(l){x=new e.Error(e.Error.INVALID_JSON,"Received an error with invalid JSON from Parse: "+k.responseText)}}else{x=new e.Error(e.Error.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(k))}return e.Promise.error(x)})},e._getValue=function(b,d){return b&&b[d]?e._.isFunction(b[d])?b[d]():b[d]:null},e._encode=function(b,n,m){var l=e._;if(b instanceof e.Object){if(m){throw"Parse.Objects not allowed here"}if(!n||l.include(n,b)||!b._hasData){return b._toPointer()}if(!b.dirty()){return n=n.concat(b),e._encode(b._toFullJSON(n),n,m)}throw"Tried to save an object with a pointer to a new, unsaved object."}if(b instanceof e.ACL){return b.toJSON()}if(l.isDate(b)){return{__type:"Date",iso:b.toJSON()}}if(b instanceof e.GeoPoint){return b.toJSON()}if(l.isArray(b)){return l.map(b,function(c){return e._encode(c,n,m)})}if(l.isRegExp(b)){return b.source}if(b instanceof e.Relation){return b.toJSON()}if(b instanceof e.Op){return b.toJSON()}if(b instanceof e.File){if(!b.url()){throw"Tried to save an object containing an unsaved file."}return{__type:"File",name:b.name(),url:b.url()}}if(l.isObject(b)){var k={};return e._objectEach(b,function(c,d){k[d]=e._encode(c,n,m)}),k}return b},e._decode=function(b,q){var p=e._;if(!p.isObject(q)){return q}if(p.isArray(q)){return e._arrayEach(q,function(c,r){q[r]=e._decode(r,c)}),q}if(q instanceof e.Object){return q}if(q instanceof e.File){return q}if(q instanceof e.Op){return q}if(q.__op){return e.Op._decode(q)}if("Pointer"===q.__type&&q.className){var o=e.Object._create(q.className);return o._finishFetch({objectId:q.objectId},!1),o}if("Object"===q.__type&&q.className){var n=q.className;delete q.__type,delete q.className;var m=e.Object._create(n);return m._finishFetch(q,!0),m}if("Date"===q.__type){return e._parseDate(q.iso)}if("GeoPoint"===q.__type){return new e.GeoPoint({latitude:q.latitude,longitude:q.longitude})}if("ACL"===b){return q instanceof e.ACL?q:new e.ACL(q)}if("Relation"===q.__type){var l=new e.Relation(null,b);return l.targetClassName=q.className,l}if("File"===q.__type){var k=new e.File(q.name);return k._url=q.url,k}return e._objectEach(q,function(c,r){q[r]=e._decode(r,c)}),q},e._arrayEach=e._.each,e._traverse=function(b,l,k){if(b instanceof e.Object){if(k=k||[],e._.indexOf(k,b)>=0){return}return k.push(b),e._traverse(b.attributes,l,k),l(b)}return b instanceof e.Relation||b instanceof e.File?l(b):e._.isArray(b)?(e._.each(b,function(d,c){var a=e._traverse(d,l,k);a&&(b[c]=a)}),l(b)):e._.isObject(b)?(e._each(b,function(d,c){var a=e._traverse(d,l,k);a&&(b[c]=a)}),l(b)):l(b)},e._objectEach=e._each=function(b,l){var k=e._;k.isObject(b)?k.each(k.keys(b),function(a){l(b[a],a)}):k.each(b,l)},e._isNullOrUndefined=function(b){return e._.isNull(b)||e._.isUndefined(b)}}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Analytics=d.Analytics||{},f.extend(d.Analytics,{track:function(b,h,c){if(b=b||"",b=b.replace(/^\s*/,""),b=b.replace(/\s*$/,""),0===b.length){throw"A name for the custom event must be provided"}return f.each(h,function(k,j){if(!f.isString(j)||!f.isString(k)){throw'track() dimensions expects keys and values of type "string".'}}),c=c||{},d._request({route:"events",className:b,method:"POST",data:{dimensions:h}})._thenRunCallbacks(c)}})}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Config=function(){this.attributes={},this._escapedAttributes={}},d.Config.current=function(){if(d.Config._currentConfig){return d.Config._currentConfig}var b=d.localStorage.getItem(d._getParsePath(d.Config._CURRENT_CONFIG_KEY)),h=new d.Config;return b&&(h._finishFetch(JSON.parse(b)),d.Config._currentConfig=h),h},d.Config.get=function(b){b=b||{};var h=d._request({route:"config",method:"GET"});return h.then(function(j){if(!j||!j.params){var l=new d.Error(d.Error.INVALID_JSON,"Config JSON response invalid.");return d.Promise.error(l)}var k=new d.Config;return k._finishFetch(j),d.Config._currentConfig=k,k})._thenRunCallbacks(b)},d.Config.prototype={escape:function(b){var j=this._escapedAttributes[b];if(j){return j}var h,c=this.attributes[b];return h=d._isNullOrUndefined(c)?"":f.escape(c.toString()),this._escapedAttributes[b]=h,h},get:function(b){return this.attributes[b]},_finishFetch:function(b){this.attributes=d._decode(null,f.clone(b.params)),d.localStorage.setItem(d._getParsePath(d.Config._CURRENT_CONFIG_KEY),JSON.stringify(b))}},d.Config._currentConfig=null,d.Config._CURRENT_CONFIG_KEY="currentConfig"}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Error=function(h,c){this.code=h,this.message=c},f.extend(d.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,FILE_DELETE_ERROR:153,REQUEST_LIMIT_EXCEEDED:155,INVALID_EVENT_NAME:160,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,AGGREGATE_ERROR:600,FILE_READ_ERROR:601,X_DOMAIN_REQUEST:602})}(this),function(){var f=this,e=f.Parse||(f.Parse={}),j=/\s+/,h=Array.prototype.slice;e.Events={on:function(k,c,q){var p,o,n,m,l;if(!c){return this}for(k=k.split(j),p=this._callbacks||(this._callbacks={}),o=k.shift();o;){l=p[o],n=l?l.tail:{},n.next=m={},n.context=q,n.callback=c,p[o]={tail:m,next:l?l.next:n},o=k.shift()}return this},off:function(r,q,p){var o,n,m,l,k,c;if(n=this._callbacks){if(!(r||q||p)){return delete this._callbacks,this}for(r=r?r.split(j):_.keys(n),o=r.shift();o;){if(m=n[o],delete n[o],m&&(q||p)){for(l=m.tail,m=m.next;m!==l;){k=m.callback,c=m.context,(q&&k!==q||p&&c!==p)&&this.on(o,k,c),m=m.next}o=r.shift()}else{o=r.shift()}}return this}},trigger:function(d){var c,p,o,n,m,l,k;if(!(o=this._callbacks)){return this}for(l=o.all,d=d.split(j),k=h.call(arguments,1),c=d.shift();c;){if(p=o[c]){for(n=p.tail;(p=p.next)!==n;){p.callback.apply(p.context||this,k)}}if(p=l){for(n=p.tail,m=[c].concat(k);(p=p.next)!==n;){p.callback.apply(p.context||this,m)}}c=d.shift()}return this}},e.Events.bind=e.Events.on,e.Events.unbind=e.Events.off}.call(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.GeoPoint=function(b,h){f.isArray(b)?(d.GeoPoint._validate(b[0],b[1]),this.latitude=b[0],this.longitude=b[1]):f.isObject(b)?(d.GeoPoint._validate(b.latitude,b.longitude),this.latitude=b.latitude,this.longitude=b.longitude):f.isNumber(b)&&f.isNumber(h)?(d.GeoPoint._validate(b,h),this.latitude=b,this.longitude=h):(this.latitude=0,this.longitude=0);var c=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return c._latitude}),this.__defineGetter__("longitude",function(){return c._longitude}),this.__defineSetter__("latitude",function(j){d.GeoPoint._validate(j,c.longitude),c._latitude=j}),this.__defineSetter__("longitude",function(j){d.GeoPoint._validate(c.latitude,j),c._longitude=j}))},d.GeoPoint._validate=function(h,c){if(-90>h){throw"Parse.GeoPoint latitude "+h+" < -90.0."}if(h>90){throw"Parse.GeoPoint latitude "+h+" > 90.0."}if(-180>c){throw"Parse.GeoPoint longitude "+c+" < -180.0."}if(c>180){throw"Parse.GeoPoint longitude "+c+" > 180.0."}},d.GeoPoint.current=function(b){var h=new d.Promise;return navigator.geolocation.getCurrentPosition(function(c){h.resolve(new d.GeoPoint({latitude:c.coords.latitude,longitude:c.coords.longitude}))},function(c){h.reject(c)}),h._thenRunCallbacks(b)},d.GeoPoint.prototype={toJSON:function(){return d.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(v){var u=Math.PI/180,t=this.latitude*u,s=this.longitude*u,r=v.latitude*u,q=v.longitude*u,p=t-r,o=s-q,n=Math.sin(p/2),m=Math.sin(o/2),l=n*n+Math.cos(t)*Math.cos(r)*m*m;return l=Math.min(1,l),2*Math.asin(Math.sqrt(l))},kilometersTo:function(b){return 6371*this.radiansTo(b)},milesTo:function(b){return 3958.8*this.radiansTo(b)}}}(this),function(f){f.Parse=f.Parse||{};var e=f.Parse,j=e._,h="*";e.ACL=function(b){var c=this;if(c.permissionsById={},j.isObject(b)){if(b instanceof e.User){c.setReadAccess(b,!0),c.setWriteAccess(b,!0)}else{if(j.isFunction(b)){throw"Parse.ACL() called with a function.  Did you forget ()?"}e._objectEach(b,function(d,k){if(!j.isString(k)){throw"Tried to create an ACL with an invalid userId."}c.permissionsById[k]={},e._objectEach(d,function(m,l){if("read"!==l&&"write"!==l){throw"Tried to create an ACL with an invalid permission type."}if(!j.isBoolean(m)){throw"Tried to create an ACL with an invalid permission value."}c.permissionsById[k][l]=m})})}}},e.ACL.prototype.toJSON=function(){return j.clone(this.permissionsById)},e.ACL.prototype._setAccess=function(b,l,k){if(l instanceof e.User?l=l.id:l instanceof e.Role&&(l="role:"+l.getName()),!j.isString(l)){throw"userId must be a string."}if(!j.isBoolean(k)){throw"allowed must be either true or false."}var c=this.permissionsById[l];if(!c){if(!k){return}c={},this.permissionsById[l]=c}k?this.permissionsById[l][b]=!0:(delete c[b],j.isEmpty(c)&&delete c[l])},e.ACL.prototype._getAccess=function(b,l){l instanceof e.User?l=l.id:l instanceof e.Role&&(l="role:"+l.getName());var k=this.permissionsById[l];return k&&k[b]?!0:!1},e.ACL.prototype.setReadAccess=function(d,c){this._setAccess("read",d,c)},e.ACL.prototype.getReadAccess=function(b){return this._getAccess("read",b)},e.ACL.prototype.setWriteAccess=function(d,c){this._setAccess("write",d,c)},e.ACL.prototype.getWriteAccess=function(b){return this._getAccess("write",b)},e.ACL.prototype.setPublicReadAccess=function(b){this.setReadAccess(h,b)},e.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(h)},e.ACL.prototype.setPublicWriteAccess=function(b){this.setWriteAccess(h,b)},e.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(h)},e.ACL.prototype.getRoleReadAccess=function(b){if(b instanceof e.Role&&(b=b.getName()),j.isString(b)){return this.getReadAccess("role:"+b)}throw"role must be a Parse.Role or a String"},e.ACL.prototype.getRoleWriteAccess=function(b){if(b instanceof e.Role&&(b=b.getName()),j.isString(b)){return this.getWriteAccess("role:"+b)}throw"role must be a Parse.Role or a String"},e.ACL.prototype.setRoleReadAccess=function(b,c){if(b instanceof e.Role&&(b=b.getName()),j.isString(b)){return void this.setReadAccess("role:"+b,c)}throw"role must be a Parse.Role or a String"},e.ACL.prototype.setRoleWriteAccess=function(b,c){if(b instanceof e.Role&&(b=b.getName()),j.isString(b)){return void this.setWriteAccess("role:"+b,c)}throw"role must be a Parse.Role or a String"}}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Op=function(){this._initialize.apply(this,arguments)},d.Op.prototype={_initialize:function(){}},f.extend(d.Op,{_extend:d._extend,_opDecoderMap:{},_registerDecoder:function(b,h){d.Op._opDecoderMap[b]=h},_decode:function(b){var h=d.Op._opDecoderMap[b.__op];return h?h(b):void 0}}),d.Op._registerDecoder("Batch",function(b){var h=null;return d._arrayEach(b.ops,function(c){c=d.Op._decode(c),h=c._mergeWithPrevious(h)}),h}),d.Op.Set=d.Op._extend({_initialize:function(b){this._value=b},value:function(){return this._value},toJSON:function(){return d._encode(this.value())},_mergeWithPrevious:function(){return this},_estimate:function(){return this.value()}}),d.Op._UNSET={},d.Op.Unset=d.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(){return this},_estimate:function(){return d.Op._UNSET}}),d.Op._registerDecoder("Delete",function(){return new d.Op.Unset}),d.Op.Increment=d.Op._extend({_initialize:function(b){this._amount=b},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(b){if(b){if(b instanceof d.Op.Unset){return new d.Op.Set(this.amount())}if(b instanceof d.Op.Set){return new d.Op.Set(b.value()+this.amount())}if(b instanceof d.Op.Increment){return new d.Op.Increment(this.amount()+b.amount())}throw"Op is invalid after previous op."}return this},_estimate:function(b){return b?b+this.amount():this.amount()}}),d.Op._registerDecoder("Increment",function(b){return new d.Op.Increment(b.amount)}),d.Op.Add=d.Op._extend({_initialize:function(b){this._objects=b},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:d._encode(this.objects())}},_mergeWithPrevious:function(b){if(b){if(b instanceof d.Op.Unset){return new d.Op.Set(this.objects())}if(b instanceof d.Op.Set){return new d.Op.Set(this._estimate(b.value()))}if(b instanceof d.Op.Add){return new d.Op.Add(b.objects().concat(this.objects()))}throw"Op is invalid after previous op."}return this},_estimate:function(b){return b?b.concat(this.objects()):f.clone(this.objects())}}),d.Op._registerDecoder("Add",function(b){return new d.Op.Add(d._decode(void 0,b.objects))}),d.Op.AddUnique=d.Op._extend({_initialize:function(b){this._objects=f.uniq(b)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:d._encode(this.objects())}},_mergeWithPrevious:function(b){if(b){if(b instanceof d.Op.Unset){return new d.Op.Set(this.objects())}if(b instanceof d.Op.Set){return new d.Op.Set(this._estimate(b.value()))}if(b instanceof d.Op.AddUnique){return new d.Op.AddUnique(this._estimate(b.objects()))}throw"Op is invalid after previous op."}return this},_estimate:function(b){if(b){var c=f.clone(b);return d._arrayEach(this.objects(),function(h){if(h instanceof d.Object&&h.id){var k=f.find(c,function(a){return a instanceof d.Object&&a.id===h.id});if(k){var j=f.indexOf(c,k);c[j]=h}else{c.push(h)}}else{f.contains(c,h)||c.push(h)}}),c}return f.clone(this.objects())}}),d.Op._registerDecoder("AddUnique",function(b){return new d.Op.AddUnique(d._decode(void 0,b.objects))}),d.Op.Remove=d.Op._extend({_initialize:function(b){this._objects=f.uniq(b)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:d._encode(this.objects())}},_mergeWithPrevious:function(b){if(b){if(b instanceof d.Op.Unset){return b}if(b instanceof d.Op.Set){return new d.Op.Set(this._estimate(b.value()))}if(b instanceof d.Op.Remove){return new d.Op.Remove(f.union(b.objects(),this.objects()))}throw"Op is invalid after previous op."}return this},_estimate:function(b){if(b){var c=f.difference(b,this.objects());return d._arrayEach(this.objects(),function(h){h instanceof d.Object&&h.id&&(c=f.reject(c,function(a){return a instanceof d.Object&&a.id===h.id}))}),c}return[]}}),d.Op._registerDecoder("Remove",function(b){return new d.Op.Remove(d._decode(void 0,b.objects))}),d.Op.Relation=d.Op._extend({_initialize:function(b,j){this._targetClassName=null;var h=this,c=function(k){if(k instanceof d.Object){if(!k.id){throw"You can't add an unsaved Parse.Object to a relation."}if(h._targetClassName||(h._targetClassName=k.className),h._targetClassName!==k.className){throw"Tried to create a Parse.Relation with 2 different types: "+h._targetClassName+" and "+k.className+"."}return k.id}return k};this.relationsToAdd=f.uniq(f.map(b,c)),this.relationsToRemove=f.uniq(f.map(j,c))},added:function(){var b=this;return f.map(this.relationsToAdd,function(h){var a=d.Object._create(b._targetClassName);return a.id=h,a})},removed:function(){var b=this;return f.map(this.relationsToRemove,function(h){var a=d.Object._create(b._targetClassName);return a.id=h,a})},toJSON:function(){var h=null,c=null,l=this,k=function(b){return{__type:"Pointer",className:l._targetClassName,objectId:b}},j=null;return this.relationsToAdd.length>0&&(j=f.map(this.relationsToAdd,k),h={__op:"AddRelation",objects:j}),this.relationsToRemove.length>0&&(j=f.map(this.relationsToRemove,k),c={__op:"RemoveRelation",objects:j}),h&&c?{__op:"Batch",ops:[h,c]}:h||c||{}},_mergeWithPrevious:function(b){if(b){if(b instanceof d.Op.Unset){throw"You can't modify a relation after deleting it."}if(b instanceof d.Op.Relation){if(b._targetClassName&&b._targetClassName!==this._targetClassName){throw"Related object must be of class "+b._targetClassName+", but "+this._targetClassName+" was passed in."}var j=f.union(f.difference(b.relationsToAdd,this.relationsToRemove),this.relationsToAdd),h=f.union(f.difference(b.relationsToRemove,this.relationsToAdd),this.relationsToRemove),c=new d.Op.Relation(j,h);return c._targetClassName=this._targetClassName,c}throw"Op is invalid after previous op."}return this},_estimate:function(b,k,j){if(b){if(b instanceof d.Relation){if(this._targetClassName){if(b.targetClassName){if(b.targetClassName!==this._targetClassName){throw"Related object must be a "+b.targetClassName+", but a "+this._targetClassName+" was passed in."}}else{b.targetClassName=this._targetClassName}}return b}throw"Op is invalid after previous op."}var h=new d.Relation(k,j);h.targetClassName=this._targetClassName}}),d.Op._registerDecoder("AddRelation",function(b){return new d.Op.Relation(d._decode(void 0,b.objects),[])}),d.Op._registerDecoder("RemoveRelation",function(b){return new d.Op.Relation([],d._decode(void 0,b.objects))})}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Relation=function(h,c){this.parent=h,this.key=c,this.targetClassName=null},d.Relation.prototype={_ensureParentAndKey:function(h,c){if(this.parent=this.parent||h,this.key=this.key||c,this.parent!==h){throw"Internal Error. Relation retrieved from two different Objects."}if(this.key!==c){throw"Internal Error. Relation retrieved from two different keys."}},add:function(b){f.isArray(b)||(b=[b]);var c=new d.Op.Relation(b,[]);this.parent.set(this.key,c),this.targetClassName=c._targetClassName},remove:function(b){f.isArray(b)||(b=[b]);var c=new d.Op.Relation([],b);this.parent.set(this.key,c),this.targetClassName=c._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var b,h;return this.targetClassName?(b=d.Object._getSubclass(this.targetClassName),h=new d.Query(b)):(b=d.Object._getSubclass(this.parent.className),h=new d.Query(b),h._extraOptions.redirectClassNameForKey=this.key),h._addCondition("$relatedTo","object",this.parent._toPointer()),h._addCondition("$relatedTo","key",this.key),h}}}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Promise=function(){this._resolved=!1,this._rejected=!1,this._resolvedCallbacks=[],this._rejectedCallbacks=[]},f.extend(d.Promise,{_isPromisesAPlusCompliant:!1,is:function(b){return b&&b.then&&f.isFunction(b.then)},as:function(){var b=new d.Promise;return b.resolve.apply(b,arguments),b},error:function(){var b=new d.Promise;return b.reject.apply(b,arguments),b},when:function(b){var p;p=b&&d._isNullOrUndefined(b.length)?arguments:b;var o=p.length,n=!1,m=[],l=[];if(m.length=p.length,l.length=p.length,0===o){return d.Promise.as.apply(this,m)}var k=new d.Promise,j=function(){o-=1,0===o&&(n?k.reject(l):k.resolve.apply(k,m))};return d._arrayEach(p,function(h,q){d.Promise.is(h)?h.then(function(c){m[q]=c,j()},function(c){l[q]=c,n=!0,j()}):(m[q]=h,j())}),k},_continueWhile:function(b,h){return b()?h().then(function(){return d.Promise._continueWhile(b,h)}):d.Promise.as()}}),f.extend(d.Promise.prototype,{resolve:function(){if(this._resolved||this._rejected){throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._resolved=!0,this._result=arguments;var b=arguments;d._arrayEach(this._resolvedCallbacks,function(a){a.apply(this,b)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},reject:function(b){if(this._resolved||this._rejected){throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._rejected=!0,this._error=b,d._arrayEach(this._rejectedCallbacks,function(a){a(b)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},then:function(b,o){var n=new d.Promise,m=function(){var h=arguments;if(b){if(d.Promise._isPromisesAPlusCompliant){try{h=[b.apply(this,h)]}catch(a){h=[d.Promise.error(a)]}}else{h=[b.apply(this,h)]}}1===h.length&&d.Promise.is(h[0])?h[0].then(function(){n.resolve.apply(n,arguments)},function(c){n.reject(c)}):n.resolve.apply(n,h)},l=function(c){var p=[];if(o){if(d.Promise._isPromisesAPlusCompliant){try{p=[o(c)]}catch(h){p=[d.Promise.error(h)]}}else{p=[o(c)]}1===p.length&&d.Promise.is(p[0])?p[0].then(function(){n.resolve.apply(n,arguments)},function(q){n.reject(q)}):d.Promise._isPromisesAPlusCompliant?n.resolve.apply(n,p):n.reject(p[0])}else{n.reject(c)}},k=function(c){c.call()};d.Promise._isPromisesAPlusCompliant&&("undefined"!=typeof window&&window.setTimeout?k=function(c){window.setTimeout(c,0)}:"undefined"!=typeof process&&process.nextTick&&(k=function(c){process.nextTick(c)}));var j=this;return this._resolved?k(function(){m.apply(j,j._result)}):this._rejected?k(function(){l(j._error)}):(this._resolvedCallbacks.push(m),this._rejectedCallbacks.push(l)),n},always:function(b){return this.then(b,b)},done:function(b){return this.then(b)},fail:function(b){return this.then(null,b)},_thenRunCallbacks:function(b,j){var h;if(f.isFunction(b)){var c=b;h={success:function(k){c(k,null)},error:function(k){c(null,k)}}}else{h=f.clone(b)}return h=h||{},this.then(function(k){return h.success?h.success.apply(this,arguments):j&&j.trigger("sync",j,k,h),d.Promise.as.apply(d.Promise,arguments)},function(k){return h.error?f.isUndefined(j)?h.error(k):h.error(j,k):j&&j.trigger("error",j,k,h),d.Promise.error(k)})},_continueWith:function(b){return this.then(function(){return b(arguments,null)},function(a){return b(null,a)})}})}(this),function(j){j.Parse=j.Parse||{};var h=j.Parse,o=h._,n=function(b){if(26>b){return String.fromCharCode(65+b)}if(52>b){return String.fromCharCode(97+(b-26))}if(62>b){return String.fromCharCode(48+(b-52))}if(62===b){return"+"}if(63===b){return"/"}throw"Tried to encode large digit "+b+" in base64."},m=function(d){var c=[];return c.length=Math.ceil(d.length/3),o.times(c.length,function(s){var r=d[3*s],q=d[3*s+1]||0,p=d[3*s+2]||0,b=3*s+1<d.length,a=3*s+2<d.length;c[s]=[n(r>>2&63),n(r<<4&48|q>>4&15),b?n(q<<2&60|p>>6&3):"=",a?n(63&p):"="].join("")}),c.join("")},l={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"},k=function(b,q){var p=new h.Promise;if("undefined"==typeof FileReader){return h.Promise.error(new h.Error(h.Error.FILE_READ_ERROR,"Attempted to use a FileReader on an unsupported browser."))}var f=new FileReader;return f.onloadend=function(){if(2!==f.readyState){return void p.reject(new h.Error(h.Error.FILE_READ_ERROR,"Error reading file."))}var c=f.result,d=/^data:([^;]*);base64,(.*)$/.exec(c);return d?void p.resolve(d[2],q||d[1]):void p.reject(new h.Error(h.Error.FILE_READ_ERROR,"Unable to interpret data URL: "+c))},f.readAsDataURL(b),p};h.File=function(c,r,q){this._name=c;var p=/\.([^.]*)$/.exec(c);p&&(p=p[1].toLowerCase());var f=q||l[p]||"text/plain";if(o.isArray(r)){this._source=h.Promise.as(m(r),f)}else{if(r&&r.base64){var e=/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);(charset=[a-zA-Z0-9\-\/\s]*,)?base64,(\S+)/,b=e.exec(r.base64);this._source=b&&b.length>0?h.Promise.as(4===b.length?b[3]:b[2],b[1]):h.Promise.as(r.base64,f)}else{if("undefined"!=typeof File&&r instanceof File){this._source=k(r,q)}else{if(o.isString(r)){throw"Creating a Parse.File from a String is not yet supported."}}}}},h.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(b){b=b||{};var d=this;return d._previousSave||(d._previousSave=d._source.then(function(p,c){var a={base64:p,_ContentType:c};return h._request({route:"files",className:d._name,method:"POST",data:a,useMasterKey:b.useMasterKey})}).then(function(c){return d._name=c.name,d._url=c.url,d})),d._previousSave._thenRunCallbacks(b)}}}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Object=function(b,h){if(f.isString(b)){return d.Object._create.apply(this,arguments)}b=b||{},h&&h.parse&&(b=this.parse(b));var c=d._getValue(this,"defaults");if(c&&(b=f.extend({},c,b)),h&&h.collection&&(this.collection=h.collection),this._serverData={},this._opSetQueue=[{}],this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=f.uniqueId("c"),this.changed={},this._silent={},this._pending={},!this.set(b,{silent:!0})){throw new Error("Can't create an invalid Parse.Object")}this.changed={},this._silent={},this._pending={},this._hasData=!0,this._previousAttributes=f.clone(this.attributes),this.initialize.apply(this,arguments)},d.Object.saveAll=function(b,h){return h=h||{},d.Object._deepSaveAsync(b,{useMasterKey:h.useMasterKey})._thenRunCallbacks(h)},d.Object.destroyAll=function(b,n){n=n||{};var m=function(h){h.trigger("destroy",h,h.collection,n)},l=[],k=function(h){var o=d.Promise.as();return h.length>0&&(o=o.then(function(){return d._request({route:"batch",method:"POST",useMasterKey:n.useMasterKey,data:{requests:f.map(h,function(p){return{method:"DELETE",path:"/1/classes/"+p.className+"/"+p.id}})}})}).then(function(a){d._arrayEach(h,function(p,r){if(a[r].success&&n.wait){m(p)}else{if(a[r].error){var q=new d.Error(a[r].error.code,a[r].error.error);q.object=p,l.push(q)}}})})),o},j=d.Promise.as(),c=[];return d._arrayEach(b,function(a,o){if(a.id&&n.wait||m(a),a.id&&c.push(a),20===c.length||o+1===b.length){var h=c;c=[],j=j.then(function(){return k(h)})}}),j.then(function(){if(0===l.length){return !0}var h=new d.Error(d.Error.AGGREGATE_ERROR,"Error deleting an object in destroyAll");return h.errors=l,d.Promise.error(h)})._thenRunCallbacks(n)},d.Object.fetchAll=function(b,h){return d.Object._fetchAll(b,!0)._thenRunCallbacks(h)},d.Object.fetchAllIfNeeded=function(b,h){return d.Object._fetchAll(b,!1)._thenRunCallbacks(h)},f.extend(d.Object.prototype,d.Events,{_existed:!1,initialize:function(){},toJSON:function(){var b=this._toFullJSON();return d._arrayEach(["__type","className"],function(a){delete b[a]}),b},_toFullJSON:function(b){var c=f.clone(this.attributes);return d._objectEach(c,function(h,a){c[a]=d._encode(h,b)}),d._objectEach(this._operations,function(j,h){c[h]=j}),f.has(this,"id")&&(c.objectId=this.id),f.has(this,"createdAt")&&(c.createdAt=f.isDate(this.createdAt)?this.createdAt.toJSON():this.createdAt),f.has(this,"updatedAt")&&(c.updatedAt=f.isDate(this.updatedAt)?this.updatedAt.toJSON():this.updatedAt),c.__type="Object",c.className=this.className,c},_refreshCache:function(){var b=this;b._refreshingCache||(b._refreshingCache=!0,d._objectEach(this.attributes,function(h,c){if(h instanceof d.Object){h._refreshCache()}else{if(f.isObject(h)){var a=!1;f.isArray(h)&&f.each(h,function(j){j instanceof d.Object&&(a=!0,j._refreshCache())}),!a&&b._resetCacheForKey(c)&&b.set(c,new d.Op.Set(h),{silent:!0})}}}),delete b._refreshingCache)},dirty:function(h){this._refreshCache();var c=f.last(this._opSetQueue);return h?c[h]?!0:!1:this.id?f.keys(c).length>0?!0:!1:!0},dirtyKeys:function(){return f.keys(f.last(this._opSetQueue))},_toPointer:function(){if(!this.id){throw new Error("Can't serialize an unsaved Parse.Object")}return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(b){return this.attributes[b]},relation:function(b){var h=this.get(b);if(h){if(!(h instanceof d.Relation)){throw"Called relation() on non-relation field "+b}return h._ensureParentAndKey(this,b),h}return new d.Relation(this,b)},escape:function(b){var j=this._escapedAttributes[b];if(j){return j}var h,c=this.attributes[b];return h=d._isNullOrUndefined(c)?"":f.escape(c.toString()),this._escapedAttributes[b]=h,h},has:function(b){return !d._isNullOrUndefined(this.attributes[b])},_mergeMagicFields:function(b){var h=this,c=["id","objectId","createdAt","updatedAt"];d._arrayEach(c,function(a){b[a]&&("objectId"===a?h.id=b[a]:h[a]="createdAt"!==a&&"updatedAt"!==a||f.isDate(b[a])?b[a]:d._parseDate(b[a]),delete b[a])})},_copyServerData:function(b){var h={};d._objectEach(b,function(c,j){h[j]=d._decode(j,c)}),this._serverData=h,this._rebuildAllEstimatedData(),this._refreshCache(),this._opSetQueue=[{}],this._rebuildAllEstimatedData()},_mergeFromObject:function(b){b&&(this.id=b.id,this.createdAt=b.createdAt,this.updatedAt=b.updatedAt,this._copyServerData(b._serverData),this._hasData=!0)},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var b=f.first(this._opSetQueue);this._opSetQueue=f.rest(this._opSetQueue);var c=f.first(this._opSetQueue);d._objectEach(b,function(a,k){var j=b[k],h=c[k];j&&h?c[k]=h._mergeWithPrevious(j):j&&(c[k]=j)}),this._saving=this._saving-1},_finishSave:function(b){var j={};d._traverse(this.attributes,function(k){k instanceof d.Object&&k.id&&k._hasData&&(j[k.id]=k)});var h=f.first(this._opSetQueue);this._opSetQueue=f.rest(this._opSetQueue),this._applyOpSet(h,this._serverData),this._mergeMagicFields(b);var c=this;d._objectEach(b,function(k,m){c._serverData[m]=d._decode(m,k);var l=d._traverse(c._serverData[m],function(n){return n instanceof d.Object&&j[n.id]?j[n.id]:void 0});l&&(c._serverData[m]=l)}),this._rebuildAllEstimatedData(),this._saving=this._saving-1},_finishFetch:function(h,c){this._opSetQueue=[{}],this._mergeMagicFields(h),this._copyServerData(h),this._hasData=c},_applyOpSet:function(b,j){var h=this;d._objectEach(b,function(c,k){j[k]=c._estimate(j[k],h,k),j[k]===d.Op._UNSET&&delete j[k]})},_resetCacheForKey:function(b){var j=this.attributes[b];if(!(!f.isObject(j)||j instanceof d.Object||j instanceof d.File)){j=j.toJSON?j.toJSON():j;var h=JSON.stringify(j);if(this._hashedJSON[b]!==h){var c=!!this._hashedJSON[b];return this._hashedJSON[b]=h,c}}return !1},_rebuildEstimatedDataForKey:function(b){var h=this;delete this.attributes[b],this._serverData[b]&&(this.attributes[b]=this._serverData[b]),d._arrayEach(this._opSetQueue,function(c){var a=c[b];a&&(h.attributes[b]=a._estimate(h.attributes[b],h,b),h.attributes[b]===d.Op._UNSET?delete h.attributes[b]:h._resetCacheForKey(b))})},_rebuildAllEstimatedData:function(){var b=this,c=f.clone(this.attributes);this.attributes=f.clone(this._serverData),d._arrayEach(this._opSetQueue,function(a){b._applyOpSet(a,b.attributes),d._objectEach(a,function(h,j){b._resetCacheForKey(j)})}),d._objectEach(c,function(a,h){b.attributes[h]!==a&&b.trigger("change:"+h,b,b.attributes[h],{})}),d._objectEach(this.attributes,function(a,h){f.has(c,h)||b.trigger("change:"+h,b,a,{})})},set:function(b,n,m){var l;if(f.isObject(b)||d._isNullOrUndefined(b)?(l=b,d._objectEach(l,function(h,o){l[o]=d._decode(o,h)}),m=n):(l={},l[b]=d._decode(b,n)),m=m||{},!l){return this}l instanceof d.Object&&(l=l.attributes),m.unset&&d._objectEach(l,function(h,o){l[o]=new d.Op.Unset});var k=f.clone(l),j=this;if(d._objectEach(k,function(h,o){h instanceof d.Op&&(k[o]=h._estimate(j.attributes[o],j,o),k[o]===d.Op._UNSET&&delete k[o])}),!this._validate(l,m)){return !1}this._mergeMagicFields(l),m.changes={};var c=this._escapedAttributes;this._previousAttributes||{};return d._arrayEach(f.keys(l),function(h){var q=l[h];q instanceof d.Relation&&(q.parent=j),q instanceof d.Op||(q=new d.Op.Set(q));var p=!0;q instanceof d.Op.Set&&f.isEqual(j.attributes[h],q.value)&&(p=!1),p&&(delete c[h],m.silent?j._silent[h]=!0:m.changes[h]=!0);var o=f.last(j._opSetQueue);o[h]=q._mergeWithPrevious(o[h]),j._rebuildEstimatedDataForKey(h),p?(j.changed[h]=j.attributes[h],m.silent||(j._pending[h]=!0)):(delete j.changed[h],delete j._pending[h])}),m.silent||this.change(m),this},unset:function(h,c){return c=c||{},c.unset=!0,this.set(h,null,c)},increment:function(b,c){return(f.isUndefined(c)||f.isNull(c))&&(c=1),this.set(b,new d.Op.Increment(c))},add:function(b,h){return this.set(b,new d.Op.Add([h]))},addUnique:function(b,h){return this.set(b,new d.Op.AddUnique([h]))},remove:function(b,h){return this.set(b,new d.Op.Remove([h]))},op:function(b){return f.last(this._opSetQueue)[b]},clear:function(h){h=h||{},h.unset=!0;var c=f.extend(this.attributes,this._operations);return this.set(c,h)},_getSaveJSON:function(){var b=f.clone(f.first(this._opSetQueue));return d._objectEach(b,function(a,h){b[h]=a.toJSON()}),b},_canBeSerialized:function(){return d.Object._canBeSerializedAsValue(this.attributes)},fetch:function(b){var j=this;b=b||{};var h=d._request({method:"GET",route:"classes",className:this.className,objectId:this.id,useMasterKey:b.useMasterKey});return h.then(function(k,c,l){return j._finishFetch(j.parse(k,c,l),!0),j})._thenRunCallbacks(b,this)},save:function(z,y,x){var w,v,u;if(f.isObject(z)||d._isNullOrUndefined(z)?(w=z,u=y):(w={},w[z]=y,u=x),!u&&w){var t=f.reject(w,function(j,h){return f.include(["success","error","wait"],h)});if(0===t.length){var s=!0;if(f.has(w,"success")&&!f.isFunction(w.success)&&(s=!1),f.has(w,"error")&&!f.isFunction(w.error)&&(s=!1),s){return this.save(null,w)}}}u=f.clone(u)||{},u.wait&&(v=f.clone(this.attributes));var r=f.clone(u)||{};r.wait&&(r.silent=!0);var q;if(r.error=function(j,h){q=h},w&&!this.set(w,r)){return d.Promise.error(q)._thenRunCallbacks(u,this)}var p=this;p._refreshCache();var c=[],b=[];return d.Object._findUnsavedChildren(p.attributes,c,b),c.length+b.length>0?d.Object._deepSaveAsync(this.attributes,{useMasterKey:u.useMasterKey}).then(function(){return p.save(null,u)},function(h){return d.Promise.error(h)._thenRunCallbacks(u,p)}):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||d.Promise.as(),this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var h=p.id?"PUT":"POST",n=p._getSaveJSON(),m="classes",l=p.className;"_User"!==p.className||p.id||(m="users",l=null);var k=d._request({route:m,className:l,objectId:p.id,method:h,useMasterKey:u.useMasterKey,data:n});return k=k.then(function(o,j,B){var A=p.parse(o,j,B);return u.wait&&(A=f.extend(w||{},A)),p._finishSave(A),u.wait&&p.set(v,r),p},function(j){return p._cancelSave(),d.Promise.error(j)})._thenRunCallbacks(u,p)}),this._allPreviousSaves)},destroy:function(b){b=b||{};var k=this,j=function(){k.trigger("destroy",k,k.collection,b)};if(!this.id){return j()}b.wait||j();var h=d._request({route:"classes",className:this.className,objectId:this.id,method:"DELETE",useMasterKey:b.useMasterKey});return h.then(function(){return b.wait&&j(),k})._thenRunCallbacks(b,this)},parse:function(b,h){var c=f.clone(b);return f(["createdAt","updatedAt"]).each(function(j){c[j]&&(c[j]=d._parseDate(c[j]))}),c.updatedAt||(c.updatedAt=c.createdAt),h&&(this._existed=201!==h),c},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.id},change:function(b){b=b||{};var k=this._changing;this._changing=!0;var j=this;d._objectEach(this._silent,function(l){j._pending[l]=!0});var h=f.extend({},b.changes,this._silent);if(this._silent={},d._objectEach(h,function(a,l){j.trigger("change:"+l,j,j.get(l),b)}),k){return this}for(var c=function(m,l){j._pending[l]||j._silent[l]||delete j.changed[l]};!f.isEmpty(this._pending);){this._pending={},this.trigger("change",this,b),d._objectEach(this.changed,c),j._previousAttributes=f.clone(this.attributes)}return this._changing=!1,this},existed:function(){return this._existed},hasChanged:function(b){return arguments.length?this.changed&&f.has(this.changed,b):!f.isEmpty(this.changed)},changedAttributes:function(b){if(!b){return this.hasChanged()?f.clone(this.changed):!1}var h={},c=this._previousAttributes;return d._objectEach(b,function(k,j){f.isEqual(c[j],k)||(h[j]=k)}),h},previous:function(b){return arguments.length&&this._previousAttributes?this._previousAttributes[b]:null},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},validate:function(b){if(f.has(b,"ACL")&&!(b.ACL instanceof d.ACL)){return new d.Error(d.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.")}var c=!0;return d._objectEach(b,function(j,h){/^[A-Za-z][0-9A-Za-z_]*$/.test(h)||(c=!1)}),c?!1:new d.Error(d.Error.INVALID_KEY_NAME)},_validate:function(h,c){if(c.silent||!this.validate){return !0}h=f.extend({},this.attributes,h);var j=this.validate(h,c);return j?(c&&c.error?c.error(this,j,c):this.trigger("error",this,j,c),!1):!0},getACL:function(){return this.get("ACL")},setACL:function(h,c){return this.set("ACL",h,c)}}),d.Object._getSubclass=function(b){if(!f.isString(b)){throw"Parse.Object._getSubclass requires a string argument."}var c=d.Object._classMap[b];return c||(c=d.Object.extend(b),d.Object._classMap[b]=c),c},d.Object._create=function(b,k,j){var h=d.Object._getSubclass(b);return new h(k,j)},d.Object._toObjectIdArray=function(b,o){if(0===b.length){return d.Promise.as(b)}for(var n,m=b[0].className,l=[],k=0;k<b.length;k++){var j=b[k];if(m!==j.className){return n=new d.Error(d.Error.INVALID_CLASS_NAME,"All objects should be of the same class"),d.Promise.error(n)}if(!j.id){return n=new d.Error(d.Error.MISSING_OBJECT_ID,"All objects must have an ID"),d.Promise.error(n)}o&&j._hasData||l.push(j.id)}return d.Promise.as(l)},d.Object._updateWithFetchedResults=function(b,p,o){var n={};d._arrayEach(p,function(c){n[c.id]=c});for(var m=0;m<b.length;m++){var l=b[m],k=n[l.id];if(!k&&o){var j=new d.Error(d.Error.OBJECT_NOT_FOUND,"All objects must exist on the server");return d.Promise.error(j)}l._mergeFromObject(k)}return d.Promise.as(b)},d.Object._fetchAll=function(b,j){if(0===b.length){return d.Promise.as(b)}var h=!j;return d.Object._toObjectIdArray(b,h).then(function(l){var k=b[0].className,a=new d.Query(k);return a.containedIn("objectId",l),a.limit=l.length,a.find()}).then(function(a){return d.Object._updateWithFetchedResults(b,a,j)})},d.Object._classMap={},d.Object._extend=d._extend,d.Object.extend=function(b,k,j){if(!f.isString(b)){if(b&&f.has(b,"className")){return d.Object.extend(b.className,b,k)}throw new Error("Parse.Object.extend's first argument should be the className.")}"User"===b&&d.User._performUserRewrite&&(b="_User"),k=k||{},k.className=b;var h=null;if(f.has(d.Object._classMap,b)){var c=d.Object._classMap[b];h=c._extend(k,j)}else{h=this._extend(k,j)}return h.extend=function(l){if(f.isString(l)||l&&f.has(l,"className")){return d.Object.extend.apply(h,arguments)}var a=[b].concat(d._.toArray(arguments));return d.Object.extend.apply(h,a)},h.createWithoutData=function(m){var l=new h;return l.id=m,l},d.Object._classMap[b]=h,h},d.Object._findUnsavedChildren=function(b,j,h){d._traverse(b,function(c){return c instanceof d.Object?(c._refreshCache(),void (c.dirty()&&j.push(c))):c instanceof d.File?void (c.url()||h.push(c)):void 0})},d.Object._canBeSerializedAsValue=function(b){if(b instanceof d.Object){return !!b.id}if(b instanceof d.File){return !0}var c=!0;return f.isArray(b)?d._arrayEach(b,function(h){d.Object._canBeSerializedAsValue(h)||(c=!1)}):f.isObject(b)&&d._objectEach(b,function(h){d.Object._canBeSerializedAsValue(h)||(c=!1)}),c},d.Object._deepSaveAsync=function(b,n){var m=[],l=[];d.Object._findUnsavedChildren(b,m,l);var k=d.Promise.as();f.each(l,function(h){k=k.then(function(){return h.save(n)})});var j=f.uniq(m),c=f.uniq(j);return k.then(function(){return d.Promise._continueWhile(function(){return c.length>0},function(){var h=[],q=[];if(d._arrayEach(c,function(a){return h.length>20?void q.push(a):void (a._canBeSerialized()?h.push(a):q.push(a))}),c=q,0===h.length){return d.Promise.error(new d.Error(d.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."))}var p=d.Promise.when(f.map(h,function(r){return r._allPreviousSaves||d.Promise.as()})),o=new d.Promise;return d._arrayEach(h,function(r){r._allPreviousSaves=o}),p._continueWith(function(){return d._request({route:"batch",method:"POST",useMasterKey:n.useMasterKey,data:{requests:f.map(h,function(s){var r=s._getSaveJSON(),u="POST",t="/1/classes/"+s.className;return s.id&&(t=t+"/"+s.id,u="PUT"),s._startSave(),{method:u,path:t,body:r}})}}).then(function(t,s,r){var a;return d._arrayEach(h,function(v,u){t[u].success?v._finishSave(v.parse(t[u].success,s,r)):(a=a||t[u].error,v._cancelSave())}),a?d.Promise.error(new d.Error(a.code,a.error)):void 0}).then(function(r){return o.resolve(r),r},function(r){return o.reject(r),d.Promise.error(r)})})})}).then(function(){return b})}}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Role=d.Object.extend("_Role",{constructor:function(b,c){f.isString(b)&&c instanceof d.ACL?(d.Object.prototype.constructor.call(this,null,null),this.setName(b),this.setACL(c)):d.Object.prototype.constructor.call(this,b,c)},getName:function(){return this.get("name")},setName:function(h,c){return this.set("name",h,c)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(b,h){if("name" in b&&b.name!==this.getName()){var c=b.name;if(this.id&&this.id!==b.objectId){return new d.Error(d.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.")}if(!f.isString(c)){return new d.Error(d.Error.OTHER_CAUSE,"A role's name must be a String.")}if(!/^[0-9a-zA-Z\-_ ]+$/.test(c)){return new d.Error(d.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}}return d.Object.prototype.validate?d.Object.prototype.validate.call(this,b,h):!1}})}(this),function(f){f.Parse=f.Parse||{};var e=f.Parse,j=e._;e.Collection=function(d,c){c=c||{},c.comparator&&(this.comparator=c.comparator),c.model&&(this.model=c.model),c.query&&(this.query=c.query),this._reset(),this.initialize.apply(this,arguments),d&&this.reset(d,{silent:!0,parse:c.parse})},j.extend(e.Collection.prototype,e.Events,{model:e.Object,initialize:function(){},toJSON:function(){return this.map(function(b){return b.toJSON()})},add:function(t,s){var r,q,p,o,n,m,c={},b={};for(s=s||{},t=j.isArray(t)?t.slice():[t],r=0,p=t.length;p>r;r++){if(t[r]=this._prepareModel(t[r],s),o=t[r],!o){throw new Error("Can't add an invalid model to a collection")}if(n=o.cid,c[n]||this._byCid[n]){throw new Error("Duplicate cid: can't add the same model to a collection twice")}if(m=o.id,!e._isNullOrUndefined(m)&&(b[m]||this._byId[m])){throw new Error("Duplicate id: can't add the same model to a collection twice")}b[m]=o,c[n]=o}for(r=0;p>r;r++){(o=t[r]).on("all",this._onModelEvent,this),this._byCid[o.cid]=o,o.id&&(this._byId[o.id]=o)}if(this.length+=p,q=e._isNullOrUndefined(s.at)?this.models.length:s.at,this.models.splice.apply(this.models,[q,0].concat(t)),this.comparator&&this.sort({silent:!0}),s.silent){return this}for(r=0,p=this.models.length;p>r;r++){o=this.models[r],c[o.cid]&&(s.index=r,o.trigger("add",o,this,s))}return this},remove:function(k,c){var o,n,m,l;for(c=c||{},k=j.isArray(k)?k.slice():[k],o=0,n=k.length;n>o;o++){l=this.getByCid(k[o])||this.get(k[o]),l&&(delete this._byId[l.id],delete this._byCid[l.cid],m=this.indexOf(l),this.models.splice(m,1),this.length--,c.silent||(c.index=m,l.trigger("remove",l,this,c)),this._removeReference(l))}return this},get:function(b){return b&&this._byId[b.id||b]},getByCid:function(b){return b&&this._byCid[b.cid||b]},at:function(b){return this.models[b]},sort:function(d){if(d=d||{},!this.comparator){throw new Error("Cannot sort a set without a comparator")}var c=j.bind(this.comparator,this);return 1===this.comparator.length?this.models=this.sortBy(c):this.models.sort(c),d.silent||this.trigger("reset",this,d),this},pluck:function(b){return j.map(this.models,function(a){return a.get(b)})},reset:function(b,l){var k=this;return b=b||[],l=l||{},e._arrayEach(this.models,function(c){k._removeReference(c)}),this._reset(),this.add(b,{silent:!0,parse:l.parse}),l.silent||this.trigger("reset",this,l),this},fetch:function(b){b=j.clone(b)||{},void 0===b.parse&&(b.parse=!0);var k=this,c=this.query||new e.Query(this.model);return c.find({useMasterKey:b.useMasterKey}).then(function(a){return b.add?k.add(a,b):k.reset(a,b),k})._thenRunCallbacks(b,this)},create:function(k,c){var m=this;if(c=c?j.clone(c):{},k=this._prepareModel(k,c),!k){return !1}c.wait||m.add(k,c);var l=c.success;return c.success=function(b,a){c.wait&&m.add(b,c),l?l(b,a):b.trigger("sync",k,a,c)},k.save(null,c),k},parse:function(b){return b},chain:function(){return j(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(b,l){if(b instanceof e.Object){b.collection||(b.collection=this)}else{var k=b;l.collection=this,b=new this.model(k,l),b._validate(b.attributes,l)||(b=!1)}return b},_removeReference:function(b){this===b.collection&&delete b.collection,b.off("all",this._onModelEvent,this)},_onModelEvent:function(l,k,n,m){("add"!==l&&"remove"!==l||n===this)&&("destroy"===l&&this.remove(k,m),k&&"change:objectId"===l&&(delete this._byId[k.previous("objectId")],this._byId[k.id]=k),this.trigger.apply(this,arguments))}});var h=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];e._arrayEach(h,function(b){e.Collection.prototype[b]=function(){return j[b].apply(j,[this.models].concat(j.toArray(arguments)))}}),e.Collection.extend=e._extend}(this),function(h){h.Parse=h.Parse||{};var f=h.Parse,l=f._;f.View=function(b){this.cid=l.uniqueId("view"),this._configure(b||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};var k=/^(\S+)\s*(.*)$/,j=["model","collection","el","id","attributes","className","tagName"];l.extend(f.View.prototype,f.Events,{tagName:"div",$:function(b){return this.$el.find(b)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(b,o,n){var m=document.createElement(b);return o&&f.$(m).attr(o),n&&f.$(m).html(n),m},setElement:function(b,d){return this.$el=f.$(b),this.el=this.$el[0],d!==!1&&this.delegateEvents(),this},delegateEvents:function(b){if(b=b||f._getValue(this,"events")){this.undelegateEvents();var c=this;f._objectEach(b,function(a,n){if(l.isFunction(a)||(a=c[b[n]]),!a){throw new Error('Event "'+b[n]+'" does not exist')}var m=n.match(k),e=m[1],d=m[2];a=l.bind(a,c),e+=".delegateEvents"+c.cid,""===d?c.$el.bind(e,a):c.$el.delegate(d,e,a)})}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(d){this.options&&(d=l.extend({},this.options,d));var c=this;l.each(j,function(a){d[a]&&(c[a]=d[a])}),this.options=d},_ensureElement:function(){if(this.el){this.setElement(this.el,!1)}else{var b=f._getValue(this,"attributes")||{};this.id&&(b.id=this.id),this.className&&(b["class"]=this.className),this.setElement(this.make(this.tagName,b),!1)}}}),f.View.extend=f._extend}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.User=d.Object.extend("_User",{_isCurrentUser:!1,_mergeFromObject:function(b){b.getSessionToken()&&(this._sessionToken=b.getSessionToken()),d.User.__super__._mergeFromObject.call(this,b)},_mergeMagicFields:function(b){b.sessionToken&&(this._sessionToken=b.sessionToken,delete b.sessionToken),d.User.__super__._mergeMagicFields.call(this,b)},_cleanupAuthData:function(){if(this.isCurrent()){var b=this.get("authData");b&&d._objectEach(this.get("authData"),function(a,h){b[h]||delete b[h]})}},_synchronizeAllAuthData:function(){var b=this.get("authData");if(b){var h=this;d._objectEach(this.get("authData"),function(j,c){h._synchronizeAuthData(c)})}},_synchronizeAuthData:function(b){if(this.isCurrent()){var j;f.isString(b)?(j=b,b=d.User._authProviders[j]):j=b.getAuthType();var h=this.get("authData");if(h&&b){var c=b.restoreAuthentication(h[j]);c||this._unlinkFrom(b)}}},_handleSaveResult:function(b){b&&(this._isCurrentUser=!0),this._cleanupAuthData(),this._synchronizeAllAuthData(),delete this._serverData.password,this._rebuildEstimatedDataForKey("password"),this._refreshCache(),(b||this.isCurrent())&&d.User._saveCurrentUser(this)},_linkWith:function(b,n){var m;if(f.isString(b)?(m=b,b=d.User._authProviders[b]):m=b.getAuthType(),f.has(n,"authData")){var l=this.get("authData")||{};l[m]=n.authData,this.set("authData",l);var k=f.clone(n)||{};return k.success=function(h){h._handleSaveResult(!0),n.success&&n.success.apply(this,arguments)},this.save({authData:l},k)}var j=this,c=new d.Promise;return b.authenticate({success:function(o,h){j._linkWith(o,{authData:h,success:n.success,error:n.error}).then(function(){c.resolve(j)})},error:function(o,h){n.error&&n.error(j,h),c.reject(h)}}),c},_unlinkFrom:function(b,k){var j;f.isString(b)?(j=b,b=d.User._authProviders[b]):j=b.getAuthType();var h=f.clone(k),c=this;return h.authData=null,h.success=function(){c._synchronizeAuthData(b),k.success&&k.success.apply(this,arguments)},this._linkWith(b,h)},_isLinked:function(h){var c;c=f.isString(h)?h:h.getAuthType();var j=this.get("authData")||{};return !!j[c]},_logOutWithAll:function(){var b=this.get("authData");if(b){var h=this;d._objectEach(this.get("authData"),function(j,c){h._logOutWith(c)})}},_logOutWith:function(b){this.isCurrent()&&(f.isString(b)&&(b=d.User._authProviders[b]),b&&b.deauthenticate&&b.deauthenticate())},signUp:function(b,m){var l;m=m||{};var k=b&&b.username||this.get("username");if(!k||""===k){return l=new d.Error(d.Error.OTHER_CAUSE,"Cannot sign up user with an empty name."),m&&m.error&&m.error(this,l),d.Promise.error(l)}var j=b&&b.password||this.get("password");if(!j||""===j){return l=new d.Error(d.Error.OTHER_CAUSE,"Cannot sign up user with an empty password."),m&&m.error&&m.error(this,l),d.Promise.error(l)}var c=f.clone(m);return c.success=function(h){h._handleSaveResult(!0),m.success&&m.success.apply(this,arguments)},this.save(b,c)},logIn:function(b){var j=this;b=b||{};var h=d._request({route:"login",method:"GET",useMasterKey:b.useMasterKey,data:this.toJSON()});return h.then(function(k,c,m){var l=j.parse(k,c,m);return j._finishFetch(l),j._handleSaveResult(!0),j})._thenRunCallbacks(b,this)},save:function(b,m,l){var k,j;f.isObject(b)||f.isNull(b)||f.isUndefined(b)?(k=b,j=m):(k={},k[b]=m,j=l),j=j||{};var c=f.clone(j);return c.success=function(h){h._handleSaveResult(!1),j.success&&j.success.apply(this,arguments)},d.Object.prototype.save.call(this,k,c)},fetch:function(b){var c=b?f.clone(b):{};return c.success=function(a){a._handleSaveResult(!1),b&&b.success&&b.success.apply(this,arguments)},d.Object.prototype.fetch.call(this,c)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(h,c){return this.set("username",h,c)},setPassword:function(h,c){return this.set("password",h,c)},getEmail:function(){return this.get("email")},setEmail:function(h,c){return this.set("email",h,c)},authenticated:function(){return !!this._sessionToken&&d.User.current()&&d.User.current().id===this.id},getSessionToken:function(){return this._sessionToken}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},_performUserRewrite:!0,signUp:function(b,l,k,j){k=k||{},k.username=b,k.password=l;var h=d.Object._create("_User");return h.signUp(k,j)},logIn:function(b,k,j){var h=d.Object._create("_User");return h._finishFetch({username:b,password:k}),h.logIn(j)},become:function(b,j){j=j||{};var h=d.Object._create("_User");return d._request({route:"users",className:"me",method:"GET",useMasterKey:j.useMasterKey,sessionToken:b}).then(function(l,k,n){var m=h.parse(l,k,n);return h._finishFetch(m),h._handleSaveResult(!0),h})._thenRunCallbacks(j,h)},logOut:function(){null!==d.User._currentUser&&(d.User._currentUser._logOutWithAll(),d.User._currentUser._isCurrentUser=!1),d.User._currentUserMatchesDisk=!0,d.User._currentUser=null,d.localStorage.removeItem(d._getParsePath(d.User._CURRENT_USER_KEY))},requestPasswordReset:function(b,j){j=j||{};var h=d._request({route:"requestPasswordReset",method:"POST",useMasterKey:j.useMasterKey,data:{email:b}});return h._thenRunCallbacks(j)},current:function(){if(d.User._currentUser){return d.User._currentUser}if(d.User._currentUserMatchesDisk){return d.User._currentUser}d.User._currentUserMatchesDisk=!0;var b=d.localStorage.getItem(d._getParsePath(d.User._CURRENT_USER_KEY));if(!b){return null}d.User._currentUser=d.Object._create("_User"),d.User._currentUser._isCurrentUser=!0;var h=JSON.parse(b);return d.User._currentUser.id=h._id,delete h._id,d.User._currentUser._sessionToken=h._sessionToken,delete h._sessionToken,d.User._currentUser._finishFetch(h),d.User._currentUser._synchronizeAllAuthData(),d.User._currentUser._refreshCache(),d.User._currentUser._opSetQueue=[{}],d.User._currentUser},allowCustomUserClass:function(b){this._performUserRewrite=!b},_saveCurrentUser:function(b){d.User._currentUser!==b&&d.User.logOut(),b._isCurrentUser=!0,d.User._currentUser=b,d.User._currentUserMatchesDisk=!0;var h=b.toJSON();h._id=b.id,h._sessionToken=b._sessionToken,d.localStorage.setItem(d._getParsePath(d.User._CURRENT_USER_KEY),JSON.stringify(h))},_registerAuthenticationProvider:function(b){d.User._authProviders[b.getAuthType()]=b,d.User.current()&&d.User.current()._synchronizeAuthData(b.getAuthType())},_logInWith:function(b,j){var h=d.Object._create("_User");return h._linkWith(b,j)}})}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Query=function(b){f.isString(b)&&(b=d.Object._getSubclass(b)),this.objectClass=b,this.className=b.prototype.className,this._where={},this._include=[],this._limit=-1,this._skip=0,this._extraOptions={}},d.Query.or=function(){var b=f.toArray(arguments),h=null;d._arrayEach(b,function(j){if(f.isNull(h)&&(h=j.className),h!==j.className){throw"All queries must be for the same class"}});var c=new d.Query(h);return c._orQuery(b),c},d.Query.prototype={get:function(b,j){var h=this;h.equalTo("objectId",b);var c={};return j&&f.has(j,"useMasterKey")&&(c={useMasterKey:j.useMasterKey}),h.first(c).then(function(k){if(k){return k}var l=new d.Error(d.Error.OBJECT_NOT_FOUND,"Object not found.");return d.Promise.error(l)})._thenRunCallbacks(j,null)},toJSON:function(){var b={where:this._where};return this._include.length>0&&(b.include=this._include.join(",")),this._select&&(b.keys=this._select.join(",")),this._limit>=0&&(b.limit=this._limit),this._skip>0&&(b.skip=this._skip),void 0!==this._order&&(b.order=this._order.join(",")),d._objectEach(this._extraOptions,function(a,h){b[h]=a}),b},find:function(b){var h=this;b=b||{};var c=d._request({route:"classes",className:this.className,method:"GET",useMasterKey:b.useMasterKey,data:this.toJSON()});return c.then(function(j){return f.map(j.results,function(k){var a;return a=j.className?new d.Object(j.className):new h.objectClass,a._finishFetch(k,!0),a})})._thenRunCallbacks(b)},count:function(b){var k=this;b=b||{};var j=this.toJSON();j.limit=0,j.count=1;var h=d._request({route:"classes",className:k.className,method:"GET",useMasterKey:b.useMasterKey,data:j});return h.then(function(c){return c.count})._thenRunCallbacks(b)},first:function(b){var j=this;b=b||{};var h=this.toJSON();h.limit=1;var c=d._request({route:"classes",className:this.className,method:"GET",useMasterKey:b.useMasterKey,data:h});return c.then(function(k){return f.map(k.results,function(l){var a;return a=k.className?new d.Object(k.className):new j.objectClass,a._finishFetch(l,!0),a})[0]})._thenRunCallbacks(b)},collection:function(b,c){return c=c||{},new d.Collection(b,f.extend(c,{model:this.objectClass,query:this}))},skip:function(b){return this._skip=b,this},limit:function(b){return this._limit=b,this},equalTo:function(b,c){return f.isUndefined(c)?this.doesNotExist(b):(this._where[b]=d._encode(c),this)},_addCondition:function(b,j,h){return this._where[b]||(this._where[b]={}),this._where[b][j]=d._encode(h),this},notEqualTo:function(h,c){return this._addCondition(h,"$ne",c),this},lessThan:function(h,c){return this._addCondition(h,"$lt",c),this},greaterThan:function(h,c){return this._addCondition(h,"$gt",c),this},lessThanOrEqualTo:function(h,c){return this._addCondition(h,"$lte",c),this},greaterThanOrEqualTo:function(h,c){return this._addCondition(h,"$gte",c),this},containedIn:function(h,c){return this._addCondition(h,"$in",c),this},notContainedIn:function(h,c){return this._addCondition(h,"$nin",c),this},containsAll:function(h,c){return this._addCondition(h,"$all",c),this},exists:function(b){return this._addCondition(b,"$exists",!0),this},doesNotExist:function(b){return this._addCondition(b,"$exists",!1),this},matches:function(j,h,k){return this._addCondition(j,"$regex",h),k||(k=""),h.ignoreCase&&(k+="i"),h.multiline&&(k+="m"),k&&k.length&&this._addCondition(j,"$options",k),this},matchesQuery:function(j,h){var k=h.toJSON();return k.className=h.className,this._addCondition(j,"$inQuery",k),this},doesNotMatchQuery:function(j,h){var k=h.toJSON();return k.className=h.className,this._addCondition(j,"$notInQuery",k),this},matchesKeyInQuery:function(j,h,l){var k=l.toJSON();return k.className=l.className,this._addCondition(j,"$select",{key:h,query:k}),this},doesNotMatchKeyInQuery:function(j,h,l){var k=l.toJSON();return k.className=l.className,this._addCondition(j,"$dontSelect",{key:h,query:k}),this},_orQuery:function(h){var c=f.map(h,function(b){return b.toJSON().where});return this._where.$or=c,this},_quote:function(b){return"\\Q"+b.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(h,c){return this._addCondition(h,"$regex",this._quote(c)),this},startsWith:function(h,c){return this._addCondition(h,"$regex","^"+this._quote(c)),this},endsWith:function(h,c){return this._addCondition(h,"$regex",this._quote(c)+"$"),this},ascending:function(){return this._order=[],this.addAscending.apply(this,arguments)},addAscending:function(){var b=this;return this._order||(this._order=[]),d._arrayEach(arguments,function(a){Array.isArray(a)&&(a=a.join()),b._order=b._order.concat(a.replace(/\s/g,"").split(","))}),this},descending:function(){return this._order=[],this.addDescending.apply(this,arguments)},addDescending:function(){var b=this;return this._order||(this._order=[]),d._arrayEach(arguments,function(a){Array.isArray(a)&&(a=a.join()),b._order=b._order.concat(f.map(a.replace(/\s/g,"").split(","),function(c){return"-"+c}))}),this},near:function(b,h){return h instanceof d.GeoPoint||(h=new d.GeoPoint(h)),this._addCondition(b,"$nearSphere",h),this},withinRadians:function(j,h,k){return this.near(j,h),this._addCondition(j,"$maxDistance",k),this},withinMiles:function(j,h,k){return this.withinRadians(j,h,k/3958.8)},withinKilometers:function(j,h,k){return this.withinRadians(j,h,k/6371)},withinGeoBox:function(b,j,h){return j instanceof d.GeoPoint||(j=new d.GeoPoint(j)),h instanceof d.GeoPoint||(h=new d.GeoPoint(h)),this._addCondition(b,"$within",{$box:[j,h]}),this},include:function(){var b=this;return d._arrayEach(arguments,function(a){f.isArray(a)?b._include=b._include.concat(a):b._include.push(a)}),this},select:function(){var b=this;return this._select=this._select||[],d._arrayEach(arguments,function(a){f.isArray(a)?b._select=b._select.concat(a):b._select.push(a)}),this},each:function(b,m){if(m=m||{},this._order||this._skip||this._limit>=0){var l="Cannot iterate on a query with sort, skip, or limit.";return d.Promise.error(l)._thenRunCallbacks(m)}var k=(new d.Promise,new d.Query(this.objectClass));k._limit=m.batchSize||100,k._where=f.clone(this._where),k._include=f.clone(this._include),this._select&&(k._select=f.clone(this._select)),k.ascending("objectId");var j={};f.has(m,"useMasterKey")&&(j.useMasterKey=m.useMasterKey);var c=!1;return d.Promise._continueWhile(function(){return !c},function(){return k.find(j).then(function(h){var a=d.Promise.as();return d._.each(h,function(n){a=a.then(function(){return b(n)})}),a.then(function(){h.length>=k._limit?k.greaterThan("objectId",h[h.length-1].id):c=!0})})})._thenRunCallbacks(m)}}}(this),function(j){j.Parse=j.Parse||{};var h,o,n=j.Parse,m=n._,l=!1,k={authenticate:function(b){var d=this;FB.login(function(a){a.authResponse?b.success&&b.success(d,{id:a.authResponse.userID,access_token:a.authResponse.accessToken,expiration_date:new Date(1000*a.authResponse.expiresIn+(new Date).getTime()).toJSON()}):b.error&&b.error(d,a)},{scope:h})},restoreAuthentication:function(d){if(d){var c={userID:d.id,accessToken:d.access_token,expiresIn:(n._parseDate(d.expiration_date).getTime()-(new Date).getTime())/1000},p=m.clone(o);p.authResponse=c,p.status=!1;var e=FB.getAuthResponse();e&&e.userID!==c.userID&&FB.logout(),FB.init(p)}return !0},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}};n.FacebookUtils={init:function(d){if("undefined"==typeof FB){throw"The Facebook JavaScript SDK must be loaded before calling init."}if(o=m.clone(d)||{},o.status&&"undefined"!=typeof console){var c=console.warn||console.log||function(){};c.call(console,"The 'status' flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.")}o.status=!1,FB.init(o),n.User._registerAuthenticationProvider(k),l=!0},isLinked:function(b){return b._isLinked("facebook")},logIn:function(b,e){if(!b||m.isString(b)){if(!l){throw"You must initialize FacebookUtils before calling logIn."}return h=b,n.User._logInWith("facebook",e)}var d=m.clone(e)||{};return d.authData=b,n.User._logInWith("facebook",d)},link:function(b,p,f){if(!p||m.isString(p)){if(!l){throw"You must initialize FacebookUtils before calling link."}return h=p,b._linkWith("facebook",f)}var e=m.clone(f)||{};return e.authData=p,b._linkWith("facebook",e)},unlink:function(d,c){if(!l){throw"You must initialize FacebookUtils before calling unlink."}return d._unlinkFrom("facebook",c)}}}(this),function(h){h.Parse=h.Parse||{};var f=h.Parse,l=f._;f.History=function(){this.handlers=[],l.bindAll(this,"checkUrl")};var k=/^[#\/]/,j=/msie [\w.]+/;f.History.started=!1,l.extend(f.History.prototype,f.Events,{interval:50,getHash:function(e){var d=e?e.location:window.location,m=d.href.match(/#(.*)$/);return m?m[1]:""},getFragment:function(b,m){if(f._isNullOrUndefined(b)){if(this._hasPushState||m){b=window.location.pathname;var d=window.location.search;d&&(b+=d)}else{b=this.getHash()}}return b.indexOf(this.options.root)||(b=b.substr(this.options.root.length)),b.replace(k,"")},start:function(b){if(f.History.started){throw new Error("Parse.history has already been started")}f.History.started=!0,this.options=l.extend({},{root:"/"},this.options,b),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var n=this.getFragment(),m=document.documentMode,e=j.exec(navigator.userAgent.toLowerCase())&&(!m||7>=m);e&&(this.iframe=f.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?f.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange" in window&&!e?f.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)),this.fragment=n;var d=window.location,c=d.pathname===this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!c?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&c&&d.hash&&(this.fragment=this.getHash().replace(k,""),window.history.replaceState({},document.title,d.protocol+"//"+d.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){f.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),window.clearInterval(this._checkUrlInterval),f.History.started=!1},route:function(d,c){this.handlers.unshift({route:d,callback:c})},checkUrl:function(){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void (this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var c=this.fragment=this.getFragment(e),m=l.any(this.handlers,function(b){return b.route.test(c)?(b.callback(c),!0):void 0});return m},navigate:function(b,n){if(!f.History.started){return !1}n&&n!==!0||(n={trigger:n});var m=(b||"").replace(k,"");if(this.fragment!==m){if(this._hasPushState){0!==m.indexOf(this.options.root)&&(m=this.options.root+m),this.fragment=m;var d=n.replace?"replaceState":"pushState";window.history[d]({},document.title,m)}else{this._wantsHashChange?(this.fragment=m,this._updateHash(window.location,m,n.replace),this.iframe&&m!==this.getFragment(this.getHash(this.iframe))&&(n.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,m,n.replace))):window.location.assign(this.options.root+b)}n.trigger&&this.loadUrl(b)}},_updateHash:function(m,e,o){if(o){var n=m.toString().replace(/(javascript:|#).*$/,"");m.replace(n+"#"+e)}else{m.hash=e}}})}(this),function(j){j.Parse=j.Parse||{};var h=j.Parse,n=h._;h.Router=function(b){b=b||{},b.routes&&(this.routes=b.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var m=/:\w+/g,l=/\*\w+/g,k=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;n.extend(h.Router.prototype,h.Events,{initialize:function(){},route:function(b,f,c){return h.history=h.history||new h.History,n.isRegExp(b)||(b=this._routeToRegExp(b)),c||(c=this[f]),h.history.route(b,n.bind(function(d){var a=this._extractParameters(b,d);c&&c.apply(this,a),this.trigger.apply(this,["route:"+f].concat(a)),h.history.trigger("route",this,f,a)},this)),this},navigate:function(b,d){h.history.navigate(b,d)},_bindRoutes:function(){if(this.routes){var f=[];for(var e in this.routes){this.routes.hasOwnProperty(e)&&f.unshift([e,this.routes[e]])}for(var p=0,o=f.length;o>p;p++){this.route(f[p][0],f[p][1],this[f[p][1]])}}},_routeToRegExp:function(b){return b=b.replace(k,"\\$&").replace(m,"([^/]+)").replace(l,"(.*?)"),new RegExp("^"+b+"$")},_extractParameters:function(d,c){return d.exec(c).slice(1)}}),h.Router.extend=h._extend}(this),function(e){e.Parse=e.Parse||{};var d=e.Parse,f=d._;d.Cloud=d.Cloud||{},f.extend(d.Cloud,{run:function(b,k,j){j=j||{};var h=d._request({route:"functions",className:b,method:"POST",useMasterKey:j.useMasterKey,data:d._encode(k,null,!0)});return h.then(function(c){return d._decode(null,c).result})._thenRunCallbacks(j)}})}(this),function(d){d.Parse=d.Parse||{};var c=d.Parse;c.Installation=c.Object.extend("_Installation"),c.Push=c.Push||{},c.Push.send=function(b,f){if(f=f||{},b.where&&(b.where=b.where.toJSON().where),b.push_time&&(b.push_time=b.push_time.toJSON()),b.expiration_time&&(b.expiration_time=b.expiration_time.toJSON()),b.expiration_time&&b.expiration_interval){throw"Both expiration_time and expiration_interval can't be set"}var e=c._request({route:"push",method:"POST",data:b,useMasterKey:f.useMasterKey});return e._thenRunCallbacks(f)}}(this);App.Views.Accounts={};App.Views.Collections={};App.Views.Home={};App.Views.Home.Windows={};App.Views.Home.Iot={};App.Views.Apps={};App.Views.PushNotifications={};App.Views.Users={};App.Views.Tutorials={};App.Views.Dashboard={};App.Views.Votes={};App.Views.Questions={};App.Views.Products={};App.Views.Platforms={};App.Views.CreditCards={};App.Views.Admin={};App.Views.Customers={};App.Views.Customers.Gallery={};App.Views.Docs={};App.Views.Editors={};App.Views.PricingPlans={};App.Views.Videos={};App.Views.Support={};App.Views.Nagging={};App.Views.Migration={};App.Views.Mobile={};App.Views.Mobile.Home={};App.Views.Mobile.Products={};var track_download=function(a){a.click(function(c){var b=$(c.target).attr("href");ParseDotCom.Analytics.track("Download SDK",{type:b},function(){window.location=b});return false})};var getInternetExplorerVersion=function(){var c=-1;if(navigator.appName==="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");if(b.exec(a)!==null){c=parseFloat(RegExp.$1)}}return c};function is_ios(){var a=navigator.userAgent.toLowerCase();return a.match(/(iphone|ipod|ipad)/)}ZeroClipboard.config({moviePath:"/swf/ZeroClipboard.swf"});(function(a){a.extend(a.ui.dialog.prototype.options,{open:function(){a(".ui-widget-overlay").bind("click",function(){$dialog=a(this).prev().children(".ui-dialog-content");$dialog.dialog("close");$dialog.dialog("destroy");return false})}})})(jQuery);$.waypoints.settings.scrollThrottle=20;var isPlainObjectOld=jQuery.isPlainObject;var isPlainObjectNew=function(a){if(isPlainObjectOld(a)){if(window.File&&(a instanceof File)){return false}return true}return false};jQuery.isPlainObject=isPlainObjectNew;App.Views.Editors.String=Backbone.View.extend({tagName:"textarea",className:"text_editor",events:{keydown:"handleKeyDown",blur:"handleBlur"},defaults:{shouldCommitWhenBlur:true},initialize:function(){_.bindAll(this);this.options=_.extend({},this.defaults,this.options);this.setupEditor();this.render();this.appendToContainer()},setupEditor:function(){},render:function(){return this},appendToContainer:function(){if(this.options.container){this.$el.appendTo(this.options.container)}},loadValue:function(a){this.loadDefaultValue(a[this.options.column.field]);this.focus()},loadDefaultValue:function(a){if(_.isUndefined(a)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(a)){this.defaultValue=App.Views.Editors.String.NULL}else{this.defaultValue=a}}if(!this.options.defaultEmpty||!Parse._isNullOrUndefined(a)){this.$el.val(this.defaultValue)}else{this.$el.val("")}},focusOrCommit:function(a){this.focus()},focus:function(){this.$el.select().focus()},commit:function(){this.$el.trigger("commit")},isValueChanged:function(){return this.$el.val()!==this.defaultValue},validate:function(){var a;var b=this._validate(this.$el.val());if(!b){a={valid:true}}else{a={valid:false,msg:b}}return a},serializeValue:function(){var a=this.$el.val();if(a===App.Views.Editors.String.UNDEFINED){return}else{if(a===App.Views.Editors.String.NULL){return null}else{return a}}},applyValue:function(b,a){b[this.options.column.field]=a},destroy:function(){this.$el.remove()},handleKeyDown:function(a){if(a.keyCode!==$.ui.keyCode.ESCAPE&&a.keyCode!==$.ui.keyCode.TAB&&a.keyCode!==$.ui.keyCode.ENTER){a.stopImmediatePropagation()}},handleBlur:function(a){if(this.options.shouldCommitWhenBlur){this.$el.trigger("commit");return false}},_validate:function(a){}},{UNDEFINED:"(undefined)",NULL:"(null)"});App.Views.Editors.JSON=App.Views.Editors.String.extend({tagName:"input",loadDefaultValue:function(a){if(_.isUndefined(a)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(a)){this.defaultValue=App.Views.Editors.String.NULL}else{this.defaultValue=JSON.stringify(a)}}this.$el.val(this.defaultValue)},serializeValue:function(){var a=this.$el.val();if(a===App.Views.Editors.String.UNDEFINED){return}else{if(a===App.Views.Editors.String.NULL){return null}else{return JSON.parse(a)}}}});App.Views.Editors.ACL=App.Views.Editors.String.extend({setupEditor:function(){var d=this;var e=this.options.grid.state.getSchema().id;var j=this.options.grid.getActiveCell().row;var a=this.options.grid.getData()[j].objectId;var h="Edit Access Control List (ACL)";if(e&&a&&e.length<12){h+=' for "'+e+'" object "'+a+'"'}this.options.shouldCommitWhenBlur=false;var f=!!this.options.grid.state.get("schemas").get("_User");var c=!!this.options.grid.state.get("schemas").get("_Role");var b=(e==="_Session");this.aclEditor=new UI.PermissionsEditor({title:h,permissionsType:"ACL",onSubmit:function(k){d.submit(k);d.aclEditor.closeModal()},onCancel:function(){d.submit(d.defaultValue)},hasUsers:f,hasRoles:c,readonly:b})},loadDefaultValue:function(e){var b=this.options.grid.state.getSchema().id;var d=this.options.grid.getActiveCell().row;var a=this.options.grid.getData()[d].objectId;var c={};if(b==="_User"&&(_.isUndefined(e)||_.isNull(e))){c["*"]={read:true};c[a]={write:true};e=c;this.defaultValue=JSON.stringify(c)}else{if(b==="_Session"&&(_.isUndefined(e)||_.isNull(e))){c[this.options.grid.getData()[d].user.objectId]={read:true,write:true};e=c;this.defaultValue=JSON.stringify(c)}else{if(_.isUndefined(e)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(e)){this.defaultValue=App.Views.Editors.String.NULL}else{this.defaultValue=JSON.stringify(e)}}}}this.$el.val(this.defaultValue);this.aclEditor.setInitialValue(JSON.stringify(e))},serializeValue:function(){var a=this.$el.val();this.$el.blur();if(a===App.Views.Editors.String.UNDEFINED){return}else{if(a===App.Views.Editors.String.NULL){return null}else{return JSON.parse(a)}}},submit:function(a){this.$el.val(a);this.$el.trigger("commit")},_validate:function(){var d=this.$el.val();if(d!==App.Views.Editors.String.UNDEFINED&&d!==App.Views.Editors.String.NULL){var a;try{a=JSON.parse(d)}catch(c){return"Please enter a valid object in JavaScript notation."}if(_.isArray(a)||!_.isObject(a)){return"Please enter a valid object in JavaScript notation."}for(var b in a){singleAcl=a[b];for(var f in singleAcl){if(!(f==="read"||f==="write")){return"ACL key must be 'read' or 'write'."}if(singleAcl[f]!==true){return"ACL value must be 'true'"}}}}}});App.Views.Editors.Array=App.Views.Editors.JSON.extend({_validate:function(){var c=this.$el.val();if(c!==App.Views.Editors.String.UNDEFINED&&c!==App.Views.Editors.String.NULL){var a;try{a=JSON.parse(c)}catch(b){return"Please enter a valid array in JavaScript notation."}if(!_.isArray(a)){return"Please enter a valid array in JavaScript notation."}}}});App.Views.Editors.Boolean=App.Views.Editors.String.extend({tagName:"div",className:"boolean_editor",events:{"change select":"commit"},setupEditor:function(){this.$el.html(JST["data_browser/_boolean_editor"]())},loadDefaultValue:function(a){if(_.isUndefined(a)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(a)){this.defaultValue=App.Views.Editors.String.NULL}else{if(a===true){this.defaultValue="true"}else{this.defaultValue="false"}}}this.$("select").val(this.defaultValue)},focusOrCommit:function(){this.commit()},isValueChanged:function(){return this.$("select").val()!==this.defaultValue},serializeValue:function(){return this.$("select").val()==="true"},commit:function(){this.$el.trigger("commit")}});App.Views.Editors.ChosenArray=App.Views.Editors.Array.extend({tagName:"select",className:"chosen_editor",events:{change:"commit"},setupEditor:function(){this.$el.attr("multiple","multiple")},initializeChosen:function(){this.$el.chosen({disable_search_threshold:-1})},addOptions:function(b){var a=this;_(b).each(function(c){a.$el.append($('<option value="'+c.value+'">'+c.option+"</option>"))});this.$el.trigger("liszt:updated")},focusOrCommit:function(){this.commit()},serializeValue:function(){var a=this.$el.val();return Parse._isNullOrUndefined(a)?[]:a},_validate:function(){}});App.Views.Editors.Date=App.Views.Editors.String.extend({tagName:"div",className:"date_editor",events:{"keydown input.date":"handleKeyDown","select .hour":"selectHour","click .time":"showTimePicker","change .hour":"updateTime","change .minute":"updateTime","click .time_picker_overlay":"handleOutsideClick"},setupEditor:function(){var a=this;this.disableDate=_.isUndefined(this.options.disableDate)?false:this.options.disableDate;this.$el.html(JST["data_browser/_date_editor"]({disableDate:this.disableDate}));if(!this.disableDate){var c="date_editor";if(document.getElementsByName(c).length>0){var d=1;while(document.getElementsByName(c+d).length>0){d++}c=c+d}var b={hideOnChange:true,name:c,unstyled:true,parent:this.$(".date")[0],preventPast:!!this.options.preventPast,onChange:function(){a.$(".hour").focus();a.$el.trigger("commit")}};if(this.options.dateFormat){b.stringFormat=this.options.dateFormat}if(this.options.defaultDate){b.value=this.options.defaultDate}this.datepicker=new UI.Datepicker(b);this.$(".date > input").keydown(this.handleKeyDown)}},isValueChanged:function(){if(Parse._isNullOrUndefined(this.defaultValue)){return true}var a=moment(this.datepicker.value);a.hours(this.$(".hour").val());a.minutes(this.$(".minute").val());var b=this.defaultValue;return a.year()!==b.year()||a.month()!==b.month()||a.date()!==b.date()||a.hours()!==b.hours()||a.minutes()!==b.minutes()},serializeValue:function(){var a=moment(this.datepicker.value);var d=this.$(".hour").val();var c=this.$(".minute").val();a.hours(parseInt(d,10));a.minutes(parseInt(c,10));var b=a.format("YYYY-MM-DDTHH:mm:ss")+"Z";return{__type:"Date",iso:b}},destroy:function(){this.datepicker.remove();this.$el.remove()},selectHour:function(){this.$(".minute").focus()},loadDefaultValue:function(d){var e;if(Parse._isNullOrUndefined(d)){e=moment.utc();this.defaultValue=d}else{e=moment.utc(d.iso,"YYYY-MM-DDTHH:mm:ss Z");this.defaultValue=e}var b=this.datepicker.onChange;this.datepicker.onChange=null;this.datepicker.value=new Date(e.year(),e.month(),e.date());this.datepicker.onChange=b;var c=App.Views.Editors.Date.doubleDigits(e.hours());this.$(".hour").val(c);var a=App.Views.Editors.Date.doubleDigits(e.minutes());this.$(".minute").val(a);this.$(".time").html(c+":"+a)},focusOrCommit:function(){this.commit()},showTimePicker:function(){this.$(".time_picker").show();this.$(".time_picker_overlay").show()},hideTimePicker:function(){this.$(".time_picker").hide();this.$(".time_picker_overlay").hide()},updateTime:function(){var a=App.Views.Editors.Date.doubleDigits(this.$(".hour").val());var b=App.Views.Editors.Date.doubleDigits(this.$(".minute").val());this.$(".time").html(a+":"+b);this.$el.trigger("commit")},handleOutsideClick:function(d){var b=d.pageX;var h=d.pageY;var f=this.$el.offset();var c=this.$el.width();var a=this.$el.height();if(b<f.left||b>(f.left+c)||h<f.top||h>(f.top+a)){this.hideTimePicker()}return false}},{doubleDigits:function(a){return("0"+a).slice(-2)}});App.Views.Editors.File=App.Views.Editors.String.extend({isJSONContent:function(a){return a.indexOf("application/json")>=0||a.indexOf("text/json")>=0},validate_file:function(b){var c=this.grid.state;if(b.size>=10*1024*1024){c.setErrorMessage("File cannot be greater than 10 MB in size.");return false}if(Parse._isNullOrUndefined(b)||Parse._isNullOrUndefined(b.name)){c.setErrorMessage("Invalid file name.");return false}var a=b.name.match(/^[_a-zA-Z0-9][\-_ a-zA-Z0-9.]{1,127}$/);if(a===null){c.setErrorMessage("Invalid file name.");return false}return true},upload:function(b){var a=this;if(!this.validate_file(b)){return}var c=this.grid.state.get("app");var d={"X-Parse-Application-Id":app.escape("key"),"X-Parse-REST-API-Key":app.escape("rest_api_key")};if(this.field==="download"&&c.get("className")==="_Product"){d["X-Parse-File-AWS-Permission"]="private"}$.ajax({url:"/1/files/"+b.name,type:"POST",contentType:b.type,headers:d,dataType:"json",data:b,processData:false,error:function(h,k,f){var e="Error uploading file";var j=h.getResponseHeader("Content-Type");if(j&&a.isJSONContent(j)){response=JSON.parse(h.responseText);e+=": "+response.code+", "+response.error}a.grid.state.setErrorMessage(e)},success:function(f,h,e){a.item[a.field]={__type:"File",name:f.name,url:f.url};a.changed=true;a.commitChanges()}})},initialize:function(c){var a=this;this.changed=false;this.item=c.item;this.field=c.column.field;this.grid=c.grid;this.commitChanges=c.commitChanges;this.container=c.container;this.column=c.column;var d=this.item[this.field];if(Parse._isNullOrUndefined(d)){$(this.container).append(JST["data_browser/_file_input"]);var e=$(this.container).find("input[type='file']");if(!e[0].files){$(this.container).empty();$(this.container).text("Use Chrome to Edit.")}e.bind("change",function(f){if(this.files.length>0){a.upload(this.files[0])}})}else{$(this.container).append(JST["data_browser/_delete_file"]);$(this.container).append(this.column.formatter(null,null,d));var b=$(this.container).find("img");b.click(function(f){a.item[a.field]=null;a.changed=true;a.commitChanges()})}},destroy:function(){$(this.container).empty()},focus:function(){$(this.container).focus()},loadValue:function(a){},serializeValue:function(){return""},setValue:function(a){},applyValue:function(a,b){},isValueChanged:function(){return this.changed},validate:function(){return{valid:true}}});App.Views.Editors.GeoPoint=App.Views.Editors.String.extend({tagName:"div",className:"editor-geopoint",events:{"keydown.nav .latitude":"handleKeyDown","keydown.nav .longitude":"handleKeyDown"},setupEditor:function(){this.$el.html(JST["data_browser/_geopoint_editor"]())},loadDefaultValue:function(a){this.defaultValue=a;if(!Parse._isNullOrUndefined(a)){this.$(".latitude").val(a.latitude);this.$(".longitude").val(a.longitude)}},focus:function(){this.$(".latitude").select().focus()},isValueChanged:function(){var b=this.$(".latitude").val();var a=this.$(".longitude").val();if(Parse._isNullOrUndefined(this.defaultValue)){return b||a}else{return(b!==this.defaultValue.latitude.toString()||a!==this.defaultValue.longitude.toString())}},serializeValue:function(){return{__type:"GeoPoint",latitude:parseFloat(this.$(".latitude").val()),longitude:parseFloat(this.$(".longitude").val())}},_validate:function(){var b=_.trim(this.$(".latitude").val());var a=_.trim(this.$(".longitude").val());if(b===""||isNaN(b)){return"Please enter a valid number for latitude."}if(a===""||isNaN(a)){return"Please enter a valid number for longitude."}b=parseFloat(b);a=parseFloat(a);if(b<-90){return"GeoPoint latitude "+b+" < -90.0."}if(b>90){return"GeoPoint latitude "+b+" > 90.0."}if(a<-180){return"GeoPoint longitude "+a+" < -180.0."}if(a>180){return"GeoPoint longitude "+a+" > 180.0."}}});App.Views.Editors.Number=App.Views.Editors.String.extend({tagName:"input",isValueChanged:function(){return this.$el.val()!==""+this.defaultValue},serializeValue:function(){var a=this.$el.val();if(a===App.Views.Editors.String.UNDEFINED){return}else{if(a===App.Views.Editors.String.NULL){return null}else{return parseFloat(this.$el.val(),10)}}},_validate:function(){var a=this.$el.val();if(a!==App.Views.Editors.String.NULL&&a!==App.Views.Editors.String.UNDEFINED&&isNaN(parseFloat(a,10))){return"The number is not valid."}}});App.Views.Editors.Object=App.Views.Editors.JSON.extend({_validate:function(){var c=this.$el.val();if(c!==App.Views.Editors.String.UNDEFINED&&c!==App.Views.Editors.String.NULL){var a;try{a=JSON.parse(c)}catch(b){return"Please enter a valid object in JavaScript notation."}if(_.isArray(a)||!_.isObject(a)){return"Please enter a valid object in JavaScript notation."}}}});App.Views.Editors.Password=App.Views.Editors.String.extend({render:function(){App.Views.Editors.String.prototype.setupEditor.call(this);this.$el.attr("type","password")}});App.Views.Editors.Pointer=App.Views.Editors.String.extend({tagName:"input",loadDefaultValue:function(a){if(_.isUndefined(a)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(a)){this.defaultValue=App.Views.Editors.String.NULL}else{this.defaultValue=a.objectId}}if(!this.options.defaultEmpty||!Parse._isNullOrUndefined(a)){this.$el.val(this.defaultValue)}else{this.$el.val("")}},serializeValue:function(){var a;if(this.options.className){a=this.options.className}else{var b=this.options.grid.state.getSchema();var c=this.options.column.field;a=b.key(c).type.className}return this._serializeValue(a)},_serializeValue:function(a){var b=this.$el.val();if(b===App.Views.Editors.String.UNDEFINED||!b.length){return}else{if(b===App.Views.Editors.String.NULL){return null}else{return{__type:"Pointer",className:a,objectId:b}}}},_validate:function(){var a=this.$el.val();if(a==="(undefined)"||a==="(null)"||!a.length){return}if(!a.match(/^[a-zA-Z0-9]+$/)){return"Please enter a valid pointer."}}});App.Views.Editors.ReadonlyDate=App.Views.Editors.Object.extend({tagName:"input",loadDefaultValue:function(a){if(_.isUndefined(a)||_.isUndefined(a.iso)){this.defaultValue=App.Views.Editors.String.UNDEFINED}else{if(_.isNull(a)||_.isNull(a.iso)){this.defaultValue=App.Views.Editors.String.NULL}else{this.defaultValue=a.iso.toString()}}this.$el.val(this.defaultValue)},serializeValue:function(){var a=this.$el.val();if(a===App.Views.Editors.String.UNDEFINED){return}else{if(a===App.Views.Editors.String.NULL){return null}else{return a}}},render:function(){App.Views.Editors.Object.prototype.render.call(this);this.$el.attr("readonly","readonly")}});App.Views.Editors.ReadonlyObject=App.Views.Editors.Object.extend({tagName:"input",render:function(){App.Views.Editors.Object.prototype.render.call(this);this.$el.attr("readonly","readonly")}});App.Views.Editors.ReadonlyPointer=App.Views.Editors.Pointer.extend({tagName:"input",render:function(){App.Views.Editors.Pointer.prototype.render.call(this);this.$el.attr("readonly","readonly")}});App.Views.Editors.ReadonlyString=App.Views.Editors.String.extend({tagName:"input",render:function(){App.Views.Editors.String.prototype.render.call(this);this.$el.attr("readonly","readonly")}});App.Views.Editors.SingleLineString=App.Views.Editors.String.extend({tagName:"input"});App.Views.Constraint=Backbone.View.extend({tagName:"tr",events:{"change .field":"selectField","change .op":"selectOp","click .constraint_remove":"removeConstraint",keydown:"editorKeydownHandler"},initialize:function(){_.bindAll(this);this.schema=this.options.schema;this.channelConfig=this.options.channelConfig;this.constraints=this.options.constraints;this.constraint=this.options.constraint;this.excludedFields=this.options.excludedFields;this.defaultField=this.options.defaultField;this.setup();this.constraints.on("set",this.setModel);this.schema.on("sync change",this.render)},setup:function(){this.$el.html($(JST["data_browser/_constraint"]({})))},selectField:function(){this.renderOp();return false},selectOp:function(){this.renderEditor();return false},render:function(){var a=this._allowedFields();if(!_.isEmpty(a)){var b;if(this.defaultField&&_(a).contains(this.defaultField)){b=this.defaultField}else{b=a[0]}this.$(".constraint_column").html($(JST["data_browser/_constraint_field"]({fields:a})));this.$(".field").val(b);this.renderOp()}return this},renderOp:function(){var c=this.$(".field").val();var d=this.schema.typeForQuery(c);var b=this._opsForField(d);var a=_(b).keys()[0];this.$(".constraint_comparator").html($(JST["data_browser/_constraint_op"]({ops:b})));this.$(".op").val(a);this.renderEditor();return this},renderEditor:function(){var b=this.$(".field").val();var c=this.schema.typeForQuery(b);var a=this.$(".op").val();this._updateEditor(b,c,a);return this},removeConstraint:function(){this.constraints.remove(this.constraint);return false},setModel:function(){this.constraint.set({field:this.$(".field").val(),op:this.$(".op").val()},{silent:true});if(this.editor){var a=this.editor.validate();if(!a.valid){var b="'"+this.constraint.get("field")+"': "+a.msg;this.constraint.unset("value",{silent:true});this.constraint.set({error:b})}else{this.constraint.set({value:this.editor.serializeValue()});this.constraint.unset("error")}}else{this.constraint.unset("error");this.constraint.unset("value")}},unsetModel:function(){this.constraint.unset("field",{silent:true});this.constraint.unset("op",{silent:true});this.constraint.unset("value",{silent:true});this.constraint.unset("error",{silent:true})},editorKeydownHandler:function(a){if(a.keyCode===$.ui.keyCode.ENTER){if(this.editor){this.editor.$el.blur()}}},_updateEditor:function(d,b,e){var c=App.Collections.Constraints.Ops[b][e].editor;this.editorConstructor=c;if(c){var a=this.schema.key(d).type.className;this.editor=new c({className:a,defaultEmpty:true});this.$(".constraint_value").empty().append(this.editor.$el);this.editor.loadDefaultValue()}else{this.$(".constraint_value").empty();this.editor=null}},_allowedFields:function(){var a=this;var b=[];_(this.schema.get("keys")).each(function(f,c){if(a.excludedFields&&_(a.excludedFields).contains(c)){return}var e=f.type.name;var d=App.Collections.Constraints.Ops[e];if(!_.isEmpty(d)){b.push(c)}});return _.sortBy(b,function(c){if(c&&a.channelConfig&&c in a.channelConfig){return Number(a.channelConfig[c].order)}else{return 0}})},_opsForField:function(b){var a=_.clone(App.Collections.Constraints.Ops[b]);Parse._each(a,function(d,c){if(d.editor===App.Views.Editors.ChosenArray){delete a[c]}});return a}});var CloudCode={Models:{},Collections:{},Routers:{},Views:{},initialize:function(a){var d=new App.Models.App(a.appJson);var c=new CloudCode.Collections.ScriptSources([],{app:d});var e=new CloudCode.Models.LogContent({},{app:d});var b=new CloudCode.Models.State({app:d,releaseInfo:null,scriptSources:c,jobScheduleCollection:new CloudCode.Collections.JobScheduleCollection(a.jobScheduleJson),jobStatusCollection:new CloudCode.Collections.JobStatusCollection(a.jobStatusJson),logContent:e,schedulePagination:new Backbone.Model(a.schedulePagination),statusPagination:new Backbone.Model(a.statusPagination),webhookTriggers:[],webhookFunctions:[],webhookAuthValidators:[],webhookAuthValidatorEnabled:false,classes:a.classes,userHasHeroku:a.userHasHeroku,herokuAppLinking:a.herokuAppLinking,});new CloudCode.Views.NavView({model:b});new CloudCode.Views.ScriptsView({model:b});new CloudCode.Views.WebhooksView({model:b});new CloudCode.Views.LogsView({model:b});new CloudCode.Views.JobSchedulesView({model:b});new CloudCode.Views.JobStatusView({model:b});new CloudCode.Views.ReleaseInfo({model:b});if(a.admin){new CloudCode.Routers.AdminRouter({state:b});b.set("tabBarIndex",0);b.set("contentSelection","script")}else{new CloudCode.Routers.Router({state:b})}$.get(d.dataRequestUrl()+"cloud_code/release_info",function(f){$(function(){if(f){b.set("releaseInfo",new Backbone.Model(f))}})});$.ajax({type:"GET",url:d.dataRequestUrl()+"cloud_code/auth_validators_enabled",success:function(f){if(f){b.set("webhookAuthValidatorEnabled",f.result)}},async:true});$(function(){$(".content_spinner").spin("large","#717171")})}};var DataBrowser={Models:{},Collections:{},Views:{},Routers:{},Utils:{},initialize:function(b){if(b.serverURL){Parse.serverURL=b.serverURL}Parse._initialize(b.appId,b.javascriptKey,b.masterKey);Parse._useMasterKey=true;Parse.VERSION="browser";var h=new DataBrowser.Models.GlobalState({app:b.app,schemas:b.schemas,collections:b.collections,importProgress:b.importProgress,exportProgress:b.exportProgress,allowExports:b.allowExports,allowImports:b.allowImports});var c=new DataBrowser.Views.DataBrowser({state:h,configBlob:b.configBlob,isAdmin:b.isAdmin,});var a=new DataBrowser.Routers.Router({state:h,grid:c});var d=false;var f=-1;var e;isValidType=function(j){return j==="text/csv"||j==="application/json"};hideOverlay=function(){d=false;clearTimeout(f);f=setTimeout(function(){if(!d){UI.Animate.hide($(".file_overlay")[0])}},200)};document.addEventListener("dragenter",function(k){clearTimeout(f);if(!d&&$(".import_modal").length===0){d=true;var j=k.dataTransfer.items[0];if(isValidType(j.type)){$(".file_overlay .valid").show();$(".file_overlay .invalid").hide()}else{$(".file_overlay .invalid").show();$(".file_overlay .valid").hide()}UI.Animate.show($(".file_overlay")[0])}});document.addEventListener("dragover",function(j){j.preventDefault();d=true});document.addEventListener("dragleave",function(j){hideOverlay()});document.addEventListener("drop",function(k){k.preventDefault();var j=k.dataTransfer.files;if(j.length>0&&isValidType(j[0].type)&&!DataBrowser.Views.ImportModal.isOpen){hideOverlay();e=new DataBrowser.Views.ImportModal({model:h,file:j[0]})}else{setTimeout(hideOverlay,500)}});return h}};DataBrowser.Views.Modal=Backbone.View.extend({events:{"click .cancel":"close","submit form":"submit"},close:function(a){this.$el.dialog("destroy");this.remove();return false},submit:function(a){},open:function(b){var a=this;var c=_.extend({},b,{close:function(d){return a.close.call(a,d)}});this.$el.dialog(c)}});var PushConsole={Models:{},Collections:{},Views:{},Routers:{},};var PushABConsole={Models:{},Collections:{},Views:{},Routers:{},initialize:function(a){if(a.serverURL){Parse.serverURL=a.serverURL}Parse._initialize(a.appId,a.javascriptKey,a.masterKey);Parse._useMasterKey=true;var b=new Parse.Schema({id:"_Installation"});var c=new PushABConsole.Models.PushState({app:a.app,targetedDevices:a.availableDevices,availableDevices:a.availableDevices,schema:b,});new PushConsole.Views.QueryBuilder({el:".target_advanced",state:c,channelConfig:a.channelConfig,}).render();new PushABConsole.Views.PushConsole({el:"#push_form",state:c}).render();new PushConsole.Views.SegmentationSelector({el:"#push_segments",state:c,});new PushConsole.Views.MessageTranslator({el:"#message_translator",state:c,}).render()}};Parse.Schema=Backbone.Model.extend({initialize:function(b,a){if(!a||!a.parse){this.changedKeys=b&&b.keys?b.keys:{}}},defaults:{keys:{}},addKey:function(c,b){var a=Parse.Schema.validateNewKeyName(c);if(a){return a}var d=this.get("keys");if(_.has(d,c)){return"The key '"+c+"' already exists."}if(_.has(this.changedKeys,c)){return"The key '"+c+"' has already been changed. Please call save before changing the key again."}this.changedKeys[c]={type:b};d[c]={type:b};this.trigger("change")},deleteKey:function(b){var a=Parse.Schema.validateKeyName(b);if(a){return a}var c=this.get("keys");if(!_.has(c,b)){return"The key '"+b+"' does not exist."}if(_.has(this.changedKeys,b)){return"The key '"+b+"' has already been changed. Please call save before changing the key again."}this.changedKeys[b]=Parse.Schema._UNSET;delete c[b];this.trigger("change")},deletableKeys:function(){var b=this;var c=this.get("keys");var a=[];Parse._each(c,function(e,d){if(b.canDeleteKey(d)){a.push(d)}});return a},canAddKey:function(a){return !_(this.get("keys")).chain().keys().include(a).value()},canDeleteKey:function(a){var b=this.key(a);return !b.required},key:function(a){return this.get("keys")[a]},typeForQuery:function(a){if(a==="createdAt"||a==="updatedAt"){return"Date"}else{return this.key(a).type.name}},urlRoot:function(){return Parse.Schema.urlRoot()},validate:function(f,k){var c=f.className;if(!c){return"A schema must have a className: '"+f+"'."}if(this.has("className")&&this.get("className")!==c){return"Schema's className "+c+" cannot be changed."}var d=Parse.Schema.validateClassName(c);if(d){return d}var j=f.keys;if(j){var a=_.keys(j);for(var b=0;b<a.length;b++){var h=a[b];d=Parse.Schema.validateKeyName(h);if(d){return d}var e=j[h];if(!_.isObject(e)||!_.has(e,"type")){return"The key '"+h+"' does not have a type."}}}},toJSON:function(){var a={};Parse._each(this.attributes,function(c,b){if(b==="keys"){a[b]=Parse.Schema._keysToJSON(c)}else{a[b]=c}});return a},parse:function(b){this.changedKeys={};var a={};Parse._each(b,function(d,c){if(c==="className"){a.className=d;a.id=d}else{if(c==="keys"){a.keys=Parse.Schema._parseKeys(d)}}});return a},sync:function(h,c,b){if(!Parse.applicationId){throw"You must specify your applicationId using Parse.initialize"}if(!Parse.masterKey){throw"You must specify a master key using Parse.initialize"}var d={_ApplicationId:Parse.applicationId,_MasterKey:Parse.masterKey,_ClientVersion:"browser"};var f={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};h=f[h];if(h==="POST"||h==="PUT"){_.extend(d,c._toSaveJSON())}if(h!=="POST"){d._method=h;h="POST"}var e=JSON.stringify(d);var a=_.result(c,"url");if(!a){throw new Error('A "url" property or function must be specified.')}Parse._ajax(h,a,e,b.success,b.error)},_toSaveJSON:function(){return{className:this.get("className"),keys:Parse.Schema._keysToJSON(this.changedKeys)}}},{Type:{String:{name:"String"},Number:{name:"Number"},Boolean:{name:"Boolean"},Date:{name:"Date"},File:{name:"File"},GeoPoint:{name:"GeoPoint"},Array:{name:"Array"},Object:{name:"Object"},Bytes:{name:"Bytes"},Pointer:function(a){var b=Parse.Schema.Type.Pointer;if(!b[a]){b[a]={name:"Pointer",className:a}}return b[a]},Relation:function(a){var b=Parse.Schema.Type.Relation;if(!b[a]){b[a]={name:"Relation",className:a}}return b[a]}},urlRoot:function(){var a=Parse.serverURL;if(a[a.length-1]!=="/"){a+="/1/oldschema"}else{a+="1/oldschema"}return a},specialClasses:["_User","_Installation","_Role","_Product","_Session"],prettifyClassName:function(a){if(_.contains(Parse.Schema.specialClasses,a)){return a.replace("_","")}else{return a}},isSpecialClass:function(a){return _.contains(Parse.Schema.specialClasses,a)},validateClassName:function(b){if(_.contains(Parse.Schema.specialClasses,b)){return}var a=Parse.Schema._validateName(b);if(a){return a}if(b.length>128){return"Class name cannot be longer than 128 characters: '"+b+"'."}},reservedKeys:["objectId","createdAt","updatedAt","className","sessionToken","authData","accessControl","acl","ACL","emailVerified","roleNames"],validateNewKeyName:function(a){if(_.contains(Parse.Schema.reservedKeys,a)){return"The "+a+" key is a reserved word"}return Parse.Schema.validateKeyName(a)},validateKeyName:function(a){return Parse.Schema._validateName(a)},_validateName:function(a){if(!a.match(/^[a-zA-Z]/)){return"Name must start with a letter."}if(!a.match(/^[a-zA-Z0-9_]+$/)){return"Bad characters in name: '"+a+"'. Name must only contain alphanumeric or underscore characters, and must begin with a letter."}},_keysToJSON:function(b){var a={};Parse._each(b,function(c,d){if(c===Parse.Schema._UNSET){a[d]=c}else{a[d]={};Parse._each(c,function(f,e){if(e==="type"){a[d].type=f.name;if(f.name==="Pointer"||f.name==="Relation"){a[d].className=f.className}}else{a[d][e]=f}})}});return a},_parseKeys:function(b){var a={};Parse._each(b,function(c,e){if(!_.isObject(c)||!c.type){throw new Error("The key '"+JSON.stringify(c)+"' is not valid.")}a[e]={};var h=Parse.Schema.Type[c.type];if(c.type==="Relation"||c.type==="Pointer"){var d=c.className;if(!d){var f="The key '"+e+"' must have a className.";throw new Error(f)}a[e].type=Parse.Schema.Type[c.type](d)}else{a[e].type=Parse.Schema.Type[c.type]}delete c.type;delete c.className;Parse._each(c,function(l,j){a[e][j]=l})});return a},_UNSET:{__op:"Delete"}});var Analytics={initialize:function(b){var a=new Analytics.GraphState({app:b.app,baseUrl:b.baseUrl,customGraphs:b.customGraphs,customEvents:b.customEvents,appSchema:b.appSchema,admin:b.admin,pumaPerformance:b.pumaPerformance});var c=b.app.get("friendly_id");$("#graph_wrapper_"+c).html(JST["apps/analytics/_graph"]({appId:c}));new Analytics.GraphNavigationSidebar({model:a,el:".dashboard_nav:first"});if(!b.disableRouter){new Analytics.Router({state:a});Parse.history.start()}else{a.set("selectedNavigation","events");a.addFirstAvailableSeries()}new Analytics.GraphToolbar({model:a,el:"#graph_wrapper_"+c+" .graph_toolbar"}).render();new Analytics.GraphBreakdownSidebar({model:a,el:"#graph_wrapper_"+c+" .graph_breakdown_sidebar"}).render();new Analytics.ContentAudience({model:a,el:"#graph_wrapper_"+c+" .content_audience"}).render();new Analytics.ContentEvents({model:a,el:"#graph_wrapper_"+c+" .content_events"}).render();new Analytics.ContentRetention({model:a,el:"#graph_wrapper_"+c+" .content_retention"}).render();new Analytics.ContentPerformance({model:a,el:"#graph_wrapper_"+c+" .content_performance"}).render();new Analytics.Graph({model:a,el:"#graph_wrapper_"+c}).render();new Analytics.NoData({model:a,el:"#graph_wrapper_"+c+" .empty_wrapper"});a.updateAllDataUrl()},ViewHelpers:{humanize:function(c,a){if(c<1000){return c}var b=c/1000;if(b<1000){return b.toPrecision(a)+"K"}b=b/1000;if(b<1000){return b.toPrecision(a)+"M"}return b.toPrecision(a)},humanizeTotal:function(a){if(a<Math.pow(10,6)){var b=a.toString();return b.replace(/\B(?=(\d{3})+(?!\d))/g,",")}return Analytics.ViewHelpers.humanize(a,4)}}};var Util={timezone_acronym:function(){var a=new Date().toString();if(a.indexOf("(")!=-1){return a.replace(/^.*\(/,"").replace(")","")}else{return a.match(/[A-Z]{3}/)[0]}},in_utc:function(){return moment().zone()===0},getErrorMessage:function(c){var a;if(c.response===""){if(c.status===0){a="The request timed out. Please try it again later."}else{a="The request failed due to unknown error.Please try it again later."}}else{try{a=JSON.parse(c.response).error}catch(b){a=c.response.toString()}}return a},is_chrome:navigator.userAgent.indexOf("Chrome")>-1,is_explorer:navigator.userAgent.indexOf("MSIE")>-1,is_firefox:navigator.userAgent.indexOf("Firefox")>-1,is_safaribrowser:navigator.userAgent.indexOf("Safari")>-1,is_Opera:navigator.userAgent.indexOf("Presto")>-1,is_safari:function(){return((this.is_chrome)&&(this.is_safaribrowser))?false:true},isStringBlank:function(a){return(!a||/^\s*$/.test(a))},createCookie:function(c,d,e){var a="";if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}document.cookie=c+"="+d+a+"; path=/"},readCookie:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)===" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}},eraseCookie:function(a){createCookie(a,"",-1)}};_.extend(Parse.Schema,{availableNewTypes:function(){return _(Parse.Schema.Type).chain().keys().reject(function(a){return a==="Bytes"}).value()},beautifyClassName:function(a){if(Parse.Schema.isSpecialClass(a)){return a.substring(1)}else{return a}},lowercaseSpecialClassName:function(a){return a[0]==="_"?a.substring(1).toLowerCase():a.toLowerCase()},underscoreSpecialClassName:function(a){return"_"+_(a).capitalize()},beautifyTypeName:function(a){if(a.name==="Pointer"){return _.escape("Pointer<"+a.className+">")}if(a.name==="Relation"){return _.escape("Relation<"+a.className+">")}return a.name}});_.mixin({equalIgnoreCase:function(b,a){return b.toLowerCase()===a.toLowerCase()}});$.fn.extend({isVisible:function(){return this.css("display")!=="none"}});$.fn.extend({href:function(a){if(a.indexOf("http")===0||a.indexOf("/")===0||a.indexOf("#")===0){return this.attr("href",a)}}});_.extend(Parse.Object.prototype,{toDataBrowserJSON:function(){var a=_.clone(this.attributes);Parse._each(a,function(d,b){try{a[b]=Parse._encode(d)}catch(c){if(c.message!=="Can't serialize an unsaved Parse.Object"){throw c}}});a.objectId=this.id;if(_.isDate(this.createdAt)){a.createdAt=this.createdAt.toJSON()}else{a.createdAt=this.createdAt}if(_.isDate(this.updatedAt)){a.updatedAt=this.updatedAt.toJSON()}else{a.updatedAt=this.updatedAt}if(this.className==="_Product"){if(_.isNull(a.download)&&!a.downloadName){delete a.downloadName}else{if(a.download&&!a.downloadName){a.downloadName=a.download.name}else{if(a.downloadName&&!a.download){a.download={__type:"file",name:a.downloadName}}}}}a.id=this.id;return a}});_.extend(Parse.Collection.prototype,{toDataBrowserJSON:function(){return _(this.models).map(function(a){return a.toDataBrowserJSON()})}});_.jammit_template=function(a){var b={interpolate:/<%-([\s\S]+?)%>/g,escape:/<%=([\s\S]+?)%>/g};return _.template(a,null,b)};CloudCode.Routers.Router=Parse.Router.extend({initialize:function(a){this.state=a.state},routes:{script:"selectScript","script/:scriptSourceName":"selectScript",webhook:"selectWebhook","webhook/:webhookType":"selectWebhook",log:"selectLog","log/:logLevel":"selectLog",jobs:"selectJobs","jobs/page/:page":"selectJobs",job_status:"selectJobStatus","job_status/page/:page":"selectJobStatus","*string":"index"},selectScript:function(b){var a=decodeURIComponent(b);if(b){this.state.set({currentScriptSource:a})}this.state.set({contentSelection:"script"})},selectWebhook:function(a){this.state.set({contentSelection:"webhook"})},selectLog:function(a){if(a){this.state.get("logContent").set({logLevel:a.toUpperCase()})}else{this.state.get("logContent").set({logLevel:"INFO"})}this.state.set({contentSelection:"log"})},selectJobs:function(a){this.state.set({contentSelection:"jobs"});if(a){this.state.get("schedulePagination").set("current_page",parseInt(a,10))}},selectJobStatus:function(a){this.state.set({contentSelection:"job_status"});if(a){this.state.get("statusPagination").set("current_page",parseInt(a,10))}},index:function(){this.selectScript()}});Parse.SchemaCollection=Backbone.Collection.extend({url:Parse.Schema.urlRoot,model:Parse.Schema,sync:Parse.Schema.prototype.sync});DataBrowser.Formatters=(function(){var e=function(f){if(_.isUndefined(f)){return b("(undefined)","light")}if(_.isNull(f)){return b("(null)","light")}return};var b=function(h,f){f=f?"content_wrapper "+f:"content_wrapper";return"<div class='"+f+"'>"+h+"</div>"};var a=function(f){var h=e(f);if(h){return h}datetime=moment.utc(f,"YYYY-MM-DDTHH:mm:ss Z");return b(datetime.format("MMM DD, YYYY, HH:mm"))};var c=function(h){extraPrefix="tfss-";var f=37;if(_.startsWith(h,extraPrefix)){f+=extraPrefix.length}return h.substring(f)};var d=function(r,j,n,u){var p="Public Read and Write";var o="Master Key Only";if(n==="_User"){userID=u.id;if(userID){p="Public Read, "+userID}}else{if(n==="_Session"){userID=u.user.objectId;if(userID){p=userID}}}if(_.isUndefined(r)||_.isNull(r)){return b(p)}if(_.isEmpty(r)){return b(o)}var q={};var h=[];var l=[];_.each(r,function(x,w){var v;if(w==="*"){v="public"}else{if(w.indexOf("role:")===0){v="role";l.push(w.slice(5))}else{v="user";h.push(w)}}q[v]=++q[v]||1});var m=r["*"]&&r["*"].read;var t=r["*"]&&r["*"].write;var s;var f;if(m&&t){s="Public Read and Write"}else{var k=[];if(m){k.push("Public Read")}else{if(t){k.push("Public Write")}}f=k.concat(l).concat(h).join(", ");if(j>f.length*7){s=f}else{if(q.role>1){k.push(q.role+" Roles")}else{if(q.role===1){k.push("1 Role")}}if(q.user>1){k.push(q.user+" Users")}else{if(q.user===1){k.push("1 User")}}s=k.join(", ")}}return b(s)};return{stringFormatter:function(l,h,k,j,f){return e(k)||b(_.escape(k))},numberFormatter:function(l,h,k,j,f){return e(k)||b(k)},booleanFormatter:function(l,h,k,j,f){return e(k)||b(k)},simpleDateFormatter:function(l,h,k,j,f){return e(k)||a(k)},dateFormatter:function(l,h,k,j,f){return e(k)||a(k.iso)},fileFormatter:function(l,h,k,j,f){return e(k)||b(JST["data_browser/_link_to_file"]({url:k.url,name:c(k.name)}))},linklessFileFormatter:function(l,h,k,j,f){return e(k)||b(c(k.name))},pointerFormatter:function(n,h,m,j,f){if(!m){return e(m)}var l="#class/"+m.className+"/objectId/"+m.objectId;var k="<a href='"+l+"'>"+m.objectId+"</a>";return b(k)},geopointFormatter:function(l,h,k,j,f){return e(k)||b(k.latitude+", "+k.longitude)},arrayFormatter:function(l,h,k,j,f){return e(k)||b(_.escape(JSON.stringify(k)))},objectFormatter:function(l,h,k,j,f){return e(k)||b(_.escape(JSON.stringify(k)))},bytesFormatter:function(l,h,k,j,f){return e(k)||b(k.base64,"metadata")},passwordFormatter:function(l,h,k,j,f){return b("(hidden)","light")},aclFormatter:function(n,h,m,j,f,l){var k=l.classUrl().slice(6);return d(m,j.width,k,f)},relationFormatter:function(r,p,o,l,j,h){var n=j.id;if(!n){return e(o)}else{var m=h.get("className");var q=l.id;var f="#relation/"+m+"/"+n+"/"+q;var k="<a href='"+f+"'>View Relations</a>";return b(k)}},authDataFormatter:function(m,h,l,k,f){if(!l){return e(l)}var j=[];if(l.facebook){j.push("Facebook: "+l.facebook.id)}if(l.twitter){j.push("Twitter:"+l.twitter.screen_name)}if(l.anonymous){j.push("Anonymous")}return b(j.join(", "))}}}());DataBrowser.Models.GlobalState=Backbone.Model.extend({defaults:{activeFilters:null,app:null,className:null,collections:null,contextColumn:null,contextRow:null,counts:null,exportProgress:null,importProgress:null,fetchedRows:null,filters:null,filterState:0,fullScreen:false,message:null,numReqs:0,objectsPerPage:20,objectId:null,page:0,relationObjectId:null,relationKey:null,rows:null,schemas:null,selectedRows:null,showOverlay:false,sortCol:"createdAt",sortAsc:false,success:false},initialize:function(){_.bindAll(this);if(!this.get("schemas")){this.set("schemas",new Parse.SchemaCollection())}this.get("schemas").comparator=function(a){return a.id.toLowerCase()};if(!this.get("collections")){this.set("collections",new Backbone.Collection())}this.get("collections").comparator=function(a){return a.id.toLowerCase()};if(!this.get("fetchedRows")){this.set("fetchedRows",new Parse.Collection())}if(!this.get("rows")){this.set("rows",new Parse.Collection())}if(!this.get("counts")){this.set("counts",new Backbone.Model());this.initializeCounts()}if(!this.get("filters")){this.set("filters",new App.Collections.Constraints())}if(!this.get("activeFilters")){this.set("activeFilters",new App.Collections.Constraints())}if(!this.get("importProgress")){this.set("importProgress",new App.Collections.ProgressFetcher([],{url:App.currentApp.dataRequestUrl()+"import_progress"}))}this.on("change:className change:objectId",this.updateClassRelatedAttributes);this.on("change:objectsPerPage",this.updateRowsWhilePaging);this.on("change:className change:page change:objectId",this.updateRows);this.on("change:relationKey change:relationObjectId",this.updateRows);this.on("change:sortCol change:sortAsc",this.updateRows);this.on("refresh:rows",this.updateRows);this.get("importProgress").on("change:status",this.handleCompletedImport);this.get("activeFilters").on("add remove reset",this.updateRowsWhilePaging);this.get("filters").on("remove reset",this.closeFilter);this.get("filters").on("remove",this.updateActiveFilters);Parse.User.allowCustomUserClass(true)},getSchema:function(){var b;var a=this.get("schemas");if(!this.isRelation()){b=a.get(this.get("className"))}else{b=a.get(this.getRelationClassName())}return b},getCollection:function(){return this.get("collections").get(this.get("className"))},getRelationClassName:function(){return this.get("schemas").get(this.get("className")).key(this.get("relationKey")).type.className},isRelation:function(){return this.get("relationKey")},getCount:function(){var a=this.getCountKey();return this.get("counts").get(a)},getCountKey:function(){var b;if(!this.isRelation()){b=this.get("className")}else{var c=this.get("relationKey");var a=this.get("relationObjectId");b=a+"/"+c}return b},setSuccessMessage:function(a){if(a.message){a=a.message}this.set({message:a,success:true});this.trigger("set:message")},setErrorMessage:function(a){if(a.message){a=a.message}this.set({message:a,success:false});this.trigger("set:message")},updateRows:function(){if(!this.get("className")||!this.selectedClassIsReady()){this.get("rows").reset([])}else{if(!this.isRelation()){this.updateNonRelationRows()}else{this.updateRelationRows()}this.updateObjectCount()}},updateRowsWhilePaging:function(){this.set({page:0},{silent:true});this.updateUrl();this.updateRows()},updateActiveFilters:function(b,c,a){var d=this.get("activeFilters");if(a.index<d.length){d.remove(d.at(a.index))}},closeFilter:function(){if(this.get("filters").isEmpty()){this.set("filterState",DataBrowser.Models.GlobalState.Filter.CLOSED)}},updateClassRelatedAttributes:function(){if(!this.get("filters").isEmpty()){this.get("filters").reset([])}if(!this.get("activeFilters").isEmpty()){this.get("activeFilters").reset([])}this.set({sortAsc:false,sortCol:"createdAt",filterState:DataBrowser.Models.GlobalState.Filter.CLOSED})},toggleFilterState:function(){var c=this.get("filterState");var a=this.get("filters");if(c===DataBrowser.Models.GlobalState.Filter.CLOSED&&a.isEmpty()){a.add({})}if(c!==DataBrowser.Models.GlobalState.Filter.OPEN){this.set("filterState",DataBrowser.Models.GlobalState.Filter.OPEN)}else{var b=this.get("activeFilters");if(a.length>1&&b.length){this.set("filterState",DataBrowser.Models.GlobalState.Filter.MULTI)}else{if(a.length===1){this.set("filterState",DataBrowser.Models.GlobalState.Filter.SINGLE)}else{this.set("filterState",DataBrowser.Models.GlobalState.Filter.CLOSED)}}}return false},updateUrl:function(){if(Parse.history&&this.get("className")){var a="class/"+this.get("className");if(this.get("objectId")){a+="/objectId/"+this.get("objectId")}else{a+="/p"+this.get("page")}Parse.history.navigate(a)}},incReqs:function(a){if(!a){a=false}this.set("showOverlay",a);this.set("numReqs",this.get("numReqs")+1)},decReqs:function(){this.set("numReqs",this.get("numReqs")-1)},classUrl:function(){var a;if(!this.isRelation()){a="class/"+this.get("className")}else{a="relation/"+this.get("className")+"/"+this.get("relationObjectId")+"/"+this.get("relationKey")}return a},nextPageUrl:function(){return this.classUrl()+"/p"+(this.get("page")+1)},previousPageUrl:function(){return this.classUrl()+"/p"+(this.get("page")-1)},initializeCounts:function(){var b=this.get("collections");var a=this.get("counts");b.each(function(c){a.set(c.id,c.get("count"),{silent:true})})},addFilters:function(b){var a=this.get("activeFilters");App.Collections.Constraints.addConstraintsToQuery(a,b,this.getSchema())},addPagination:function(a){if(this.get("sortAsc")){a.ascending(this.get("sortCol"))}else{a.descending(this.get("sortCol"))}a.skip(this.get("objectsPerPage")*this.get("page")).limit(this.get("objectsPerPage")+1)},addObjectIdConstraint:function(a){if(this.get("objectId")){a.equalTo("objectId",this.get("objectId"))}},updateNonRelationRows:function(){var a=this.get("className");this.constructRowsAndFetch(new Parse.Query(a),a)},updateRelationRows:function(){var b=this;var c=new Parse.Query(this.get("className"));var a=this.get("relationObjectId");this.incReqs(true);c.get(a,{success:function(d){b.decReqs();var h=b.get("relationKey");var f=d.relation(h);var e=b.getRelationClassName();b.constructRowsAndFetch(f.query(),e)},error:function(e,d){b.decReqs();b.setErrorMessage(d)}})},updateObjectCount:function(){var a=this;var b="/apps/"+encodeURIComponent(this.get("app").id)+"/collections/count";$.get(b,function(c){var e=a.get("counts");var f=c.collection;for(var d=0;d<f.length;++d){e.set(f[d].id,f[d].count)}}).error(function(){a.setErrorMessage("Could not retrieve object count")})},constructRowsAndFetch:function(e,d){var a=this;var b=d;var c=this.get("fetchedRows");c.model=Parse.Object.extend(d);c.query=e;this.addFilters(c.query);this.addPagination(c.query);this.addObjectIdConstraint(c.query);this.incReqs(true);c.fetch({success:function(f){a.decReqs();var h=a.get("rows");h.model=f.model;if(a.isRelation()||a.get("className")===b){if(f.length===a.get("objectsPerPage")+1){h.reset(f.models.slice(0,a.get("objectsPerPage")))}else{h.reset(f.models)}}},error:function(h,f){a.decReqs();if(a.get("activeFilters").length){f="Request timed out. Try removing some filters."}else{if(a.get("sortCol")!=="createdAt"&&a.get("sortCol")!=="updatedAt"){f="Request timed out. Sort by 'createdAt' and try again."}}a.setErrorMessage(f)}})},selectedClassIsReady:function(){return !_.isUndefined(this.getCollection())},selectedClassModel:function(){return this.getCollection()},handleCompletedImport:function(a){if((a.get("status")==="success"||a.get("status")==="failed")&&a.id===this.get("className")){this.updateRows()}}},{Filter:{CLOSED:0,OPEN:1,SINGLE:2,MULTI:3}});DataBrowser.Routers.Router=Parse.Router.extend({initialize:function(a){this.state=a.state},routes:{"class/:className":"selectClass","class/:className/p:page":"selectClass","class/:className/objectId/:objectId":"selectObject","relation/:className/:objectId/:key":"selectRelation","relation/:className/:objectId/:key/p:page":"selectRelation",home:"index","":"index"},selectClass:function(a,b){this.state.set({className:a,page:parseInt(b,10)||0,relationObjectId:null,relationKey:null,objectId:null})},selectObject:function(b,a){this.state.set({className:b,page:0,relationObjectId:null,relationKey:null,objectId:a})},index:function(){var a=this.state.get("schemas");if(!a.isEmpty()){this.selectClass(a.at(0).get("className"),0)}else{this.selectClass(null,0)}},selectRelation:function(c,a,b,d){this.state.set({className:c,page:parseInt(d,10)||0,relationKey:b,relationObjectId:a,objectId:null})}});DataBrowser.Views.Classes=Backbone.View.extend({el:".dashboard_nav .class_list",events:{"click .add_class:not(.disabled)":"addClass","click .import:not(.disabled)":"importData"},initialize:function(){_.bindAll(this);var a=this;this.state=this.options.state;this.schemas=this.state.get("schemas");this.progressBars={};this.state.get("exportProgress").each(function(b){a.createProgressView(b)});this.state.get("importProgress").each(function(b){a.createProgressView(b)});this.schemas.on("add remove reset",this.render);this.state.on("change:className",this.render);this.state.get("counts").on("change",this.render);this.state.on("change:relationKey",this.render);this.state.get("exportProgress").on("add",this.createProgressView);this.state.get("exportProgress").on("remove",this.removeProgressView);this.state.get("exportProgress").on("add remove change:status",this.render);this.state.get("exportProgress").on("remove",this.renderExportSuccessNotification);this.state.get("exportProgress").on("change:status",this.renderExportFailedNotification);this.state.get("importProgress").on("add",this.createProgressView);this.state.get("importProgress").on("change:progress change:status",this.refreshSchema);this.state.get("importProgress").on("add change:status",this.render);return this},render:function(){var b=this;var c=[];this.schemas.each(function(o){var m=o.get("className");var j=b.state.get("exportProgress").get(m);var l=!_.isUndefined(j)&&(j.isActive());var h=b.state.get("importProgress").get(m);var k=!_.isUndefined(h)&&(h.isActive());var n=b.state.get("counts").get(m)||0;var p=n;if(p>=1000){p=p/1000;if(p<1000){p=p.toPrecision(3)+"K"}else{p=p/1000;p=p.toPrecision(3)+"M"}}c.push({className:m,count:n,displayedCount:p,exporting:l,importing:k})});this.state.get("importProgress").each(function(j){var h=_.find(c,function(k){return k.className===j.id});if(!h){c.push({className:j.id,importing:j.isActive()})}});c=_.sortBy(c,function(h){return h.className.toLowerCase()});var f=this.state.get("relationKey");var a=this.state.get("relationObjectId");var d;if(this.state.isRelation()){d="#relation/"+this.state.get("className")+"/"+a+"/"+f}this.$el.html(JST["data_browser/_classes"]({classes:c,selectedClassName:this.state.get("className"),relationKey:f,relationLink:d,exportColl:this.state.get("exportProgress").get("exportColl"),allowImports:this.state.get("allowImports")}));var e="Data Browser";if(this.state.get("className")){e=this.state.get("className")}document.title=e+" | Parse";this.$(".processing .right_side").spin("xsmall","#555");_(this.progressBars).each(function(h){b.$("[data-name='"+h.model.id+"']").append(h.$el);h.render()});return this},createProgressView:function(a){if(a.id!==""&&a.isActive()){this.progressBars[a.id]=new App.Views.ProgressBar({model:a,markers:10})}},removeProgressView:function(a){this.progressBars[a.id].remove();delete this.progressBars[a.id]},renderExportSuccessNotification:function(a){var b=a.id;this.state.setSuccessMessage(b+" export complete. Check your email for a download link")},renderExportFailedNotification:function(a){if(a.get("status")==="failed"){var b=a.id;this.state.setErrorMessage(b+" export failed! If this error persists, please let us know.")}},addClass:function(a){new DataBrowser.Views.AddClass({state:this.state}).render();return false},importData:function(){new DataBrowser.Views.ImportModal({model:this.state});return false},refreshSchema:function(c){var a=this;var d=this.state.get("schemas").get(c.id);if(_.isUndefined(d)&&!this.refreshingSchema){this.refreshingSchema=true;var b=App.currentApp.dataRequestUrl()+"collections/"+encodeURIComponent(c.id)+"/fetch";$.get(b).then(function(e){a.refreshingSchema=false;a.state.get("collections").add(e.collection);a.state.get("schemas").add(e.schema,{parse:true});if(a.state.get("className")===c.id){a.state.updateRows()}a.render()},function(e){a.refreshingSchema=false})}}});DataBrowser.Views.DataBrowser=Backbone.View.extend({el:"#browser",events:{"click .slick-cell a.new_tab":"openInNewTab","click .add:not(.disabled)":"addRow","click .add_class:not(.disabled)":"addClass","click .bulk_delete:not(.disabled)":"bulkDelete"},classURL:function(){return"/apps/"+encodeURIComponent(this.state.get("app").id)+"/collections/"+this.state.get("className")},configBlobURL:function(){return"/apps/"+encodeURIComponent(this.state.get("app").id)+"/collections/class_config_blob"},initialize:function(){_.bindAll(this);this.state=this.options.state;this.config=this.options.configBlob;if(this.options.isAdmin){this.config={}}this.setup()},addClass:function(a){new DataBrowser.Views.AddClass({state:this.state}).render();return false},addRow:function(a){this.state.trigger("addRow");return false},openInNewTab:function(a){window.open($(a.target).attr("href"));return false},commitCurrentEdit:function(){this.grid.getEditController().commitCurrentEdit();var a=this.grid.getCellEditor();if(a&&a.args&&a.args.commitChanges){a.args.commitChanges()}},bulkDelete:function(){var d=this;var h=this.grid.getSelectedRows();var f=this.state.get("rows");if(h.length>1&&!confirm("Are you sure you want to delete these "+h.length+" rows? There is no undo.")){return false}if(!this.state.isRelation()){var e=_.map(h,function(j){return f.at(j)});if(!_.isEmpty(e)){var a=this.state.getCountKey();this.state.incReqs();this.grid.setSelectedRows([]);Parse.Object.destroyAll(e,{success:function(){d.state.decReqs();d.state.trigger("refresh:rows");var j=d.state.get("counts");j.set(a,j.get(a)-e.length);var k="Successfully deleted "+e.length+(e.length===1?" object.":" objects.");d.state.setSuccessMessage(k)},error:function(j){d.state.decReqs();d.state.setErrorMessage("The deletion failed.")}})}}else{var c=Parse.Object.extend(this.state.get("className"));var b=new Parse.Query(c);this.state.incReqs();b.get(this.state.get("relationObjectId")).then(function(j){var k=j.relation(d.state.get("relationKey"));Parse._arrayEach(h,function(l){k.remove(f.at(l))});return j.save()}).then(function(){d.state.decReqs();var j="Successfully deleted "+h.length+(h.length===1?" object.":" objects.");d.state.setSuccessMessage(j);d.state.trigger("refresh:rows")},function(){d.state.decReqs();d.state.setErrorMessage("The deletion failed.")})}},handleContextMenu:function(c){var b=this;var a=this.grid.getCellFromEvent(c);if(this.isCellEditable(a)){c.preventDefault();c.stopImmediatePropagation();this.grid.setActiveCell(a.row,a.cell);this.state.set({contextCell:a.cell,contextRow:a.row})}},handleKeyDown:function(f){var a;if(f.keyCode===$.ui.keyCode.BACKSPACE||f.keyCode===$.ui.keyCode.DELETE){a=this.grid.getActiveCell();if(a&&this.isCellEditable(a)){f.preventDefault();var b={unset:true,row:a.row,cell:a.cell};this.updateRow(f,b)}}else{if(f.keyCode===$.ui.keyCode.TAB&&this.grid.getCellEditor()){a=this.grid.getActiveCell();var c=this.grid.getColumns().length;if(f.shiftKey){if(a.cell!==0){this.grid.navigatePrev()}else{this.grid.getEditController().commitCurrentEdit();this.grid.resetActiveCell()}}else{if(a.cell!==c-1){this.grid.navigateNext()}else{this.grid.getEditController().commitCurrentEdit();this.grid.resetActiveCell()}}this.grid.editActiveCell();f.stopImmediatePropagation()}else{if(f.keyCode===$.ui.keyCode.ENTER&&this.grid.getCellEditor()){a=this.grid.getActiveCell();var d=this.grid.getDataLength();if(f.altKey){this.grid.getCellEditor().el.value+="\n";this.grid.getCellEditor().el.scrollTop+=this.grid.getCellEditor().el.clientHeight}else{if(f.shiftKey){if(a.row!==0){this.grid.navigateUp();this.grid.editActiveCell()}else{this.grid.getEditController().commitCurrentEdit();this.grid.resetActiveCell()}}else{if(a.row!==d-1){this.grid.navigateDown();this.grid.editActiveCell()}else{this.grid.getEditController().commitCurrentEdit();this.grid.resetActiveCell()}}}f.stopImmediatePropagation()}}}},columnsReordered:function(c){var a=this.grid.getColumns();a.unshift(this.checkboxSelector.getColumnDefinition());this.grid.setColumns(a);var d=$(".slick-header-columns");var b=$(d.children()[0]);b.addClass("checkbox-selector");this.saveColumnConfig(c)},saveColumnConfig:function(d){var a=this;var c=this.state.get("app").id;var b=this.state.get("className");if(!this.config){this.config={}}if(!this.config[c]){this.config[c]={}}this.config[c][b]={};$(".slick-header-columns").children(".slick-header-column").each(function(e){var h=$(this)[0].title;var f={width:$(this)[0].scrollWidth,order:e+1};a.config[c][b][h]=f});$.post(this.configBlobURL(),{class_name:b,class_config_blob:a.config[c][b]})},dropCollectionConfig:function(c){var b=this.state.get("app").id;var a=this.state.get("className");delete this.config[b][a];$.ajax({url:this.configBlobURL(),type:"DELETE",data:{class_name:a}})},unsetField:function(b){var a={unset:true,row:this.state.get("contextRow"),cell:this.state.get("contextCell")};this.updateRow(b,a)},updateSchemaListener:function(){var a=this.state.getSchema();if(a){a.on("all",this.render)}},updateRow:function(j,k){var m=this;k.item=k.item||{};var c=k.row;var o=this.state.get("rows");var n=o.models[c];var f=n.isNew();var b=f?"created":"updated";var l=f?"creating":"updating";var d=this.grid.getColumns();var a=d[k.cell].id;var h=k.item[a];if(k.unset||h===undefined){n.unset(a)}else{n.set(a,h)}this.state.incReqs();n.save().then(function(){if(n.className==="_User"&&f&&n.getSessionToken().indexOf("r:")>-1){var s=Parse.Object.extend("_Session");var t=new Parse.Query(s);t.equalTo("user",n);t.find().then(function(u){var v=_.find(u,function(w){return w.get("sessionToken")===n.getSessionToken()});if(v!==undefined){v.destroy()}})}if(n!=o.models[c]){c=o.indexOf(n)}m.grid.getData()[c]=n.toDataBrowserJSON();m.grid.updateRow(c);if(f){var r=m.state.get("counts");var e=m.state.getCountKey();r.set(e,(r.get(e)||0)+1);if(m.state.isRelation()){e=m.state.getRelationClassName();r.set(e,(r.get(e)||0)+1)}}if(m.state.isRelation()){var q=Parse.Object.extend(m.state.get("className"));var p=new Parse.Query(q);return p.get(m.state.get("relationObjectId"))}},function(e){if(n!=o.models[c]){c=o.indexOf(n)}m.grid.getData()[c]=n.toDataBrowserJSON();m.grid.updateRow(c);return e}).then(function(e){if(m.state.isRelation()){var p=e.relation(m.state.get("relationKey"));p.add(n);return e.save()}},function(e){return e}).then(function(){m.state.decReqs();m.trigger("renderRow");m.state.setSuccessMessage("Successfully "+b+" object.")},function(e){m.state.decReqs();m.trigger("renderRow");m.state.setErrorMessage("Error: "+e.message)})},render:function(){this.renderRows();this.trigger("render");return this},renderRows:function(){var d=this.state.get("rows");var b=d.toDataBrowserJSON();var e=this.state.get("objectsPerPage");this.grid.setData(b);var a=this.makeColumns();this.grid.setColumns(a);$(".slick-header").show();this.grid.resizeCanvas();this.grid.setSelectedRows([]);var f=$(".slick-header-columns");var c=$(f.children()[0]);c.addClass("checkbox-selector");$(".slick-header-columns").sortable("option","items","> div:not(.checkbox-selector)");this.grid.setSortColumn(this.state.get("sortCol"),this.state.get("sortAsc"))},sort:function(h,a){var f=a.sortCol.field;var b=a.sortAsc;if(!this.state.get("activeFilters").length&&!this.state.isRelation()){if(f!=="createdAt"){var d=this.state.getCount();if(d>DataBrowser.Views.DataBrowser.MAX_COUNT_ALLOWED_FOR_SORT){var c="Too many items to sort. Please use filters to limit the number of items to less than 10000.";this.state.setErrorMessage(c);return}}}this.state.set({sortCol:f,sortAsc:b});this.grid.setSortColumn(f,b)},setup:function(){var a=this;new DataBrowser.Views.Message({state:this.state});new DataBrowser.Views.ImportStatus({model:this.state});new DataBrowser.Views.Classes({state:this.state});new DataBrowser.Views.PerPage({state:this.state});new DataBrowser.Views.FilterSet({state:this.state}).render();new DataBrowser.Views.SpinnerBar({state:this.state});new DataBrowser.Views.SpinnerOverlay({state:this.state});new DataBrowser.Views.PageInfo({state:this.state});new DataBrowser.Views.Pagination({state:this.state});new DataBrowser.Views.Utility({model:this.state}).render();this.setupGrid();this.grid.onCellChange.subscribe(this.updateRow);this.grid.onSelectedRowsChanged.subscribe(function(c,d){a.state.set("selectedRows",d.rows)});this.grid.onSort.subscribe(this.sort);this.grid.onKeyDown.subscribe(this.handleKeyDown);this.grid.onColumnsResized.subscribe(this.saveColumnConfig);this.grid.onColumnsReordered.subscribe(this.columnsReordered);var b=this.state.get("rows");b.on("reset",this.updateSchemaListener);b.on("reset",this.updateCollection);b.on("add remove reset",this.render);if(this.state.get("schemas").isEmpty()){this.state.get("schemas").reset();this.noDataView.render()}this.state.on("commitCurrentEdit",this.commitCurrentEdit);this.state.on("saveColumnConfig",this.saveColumnConfig);this.state.on("dropCollectionConfig",this.dropCollectionConfig)},setupGrid:function(){var b=this;var c={editable:true,enableAddRow:false,enableCellNavigation:true,asyncEditorLoading:false,autoEdit:false,autoHeight:true,leaveSpaceForNewRows:false,multiSelect:true,multiColumnSort:true};this.checkboxSelector=new Slick.CheckboxSelectColumn({cssClass:"slick-cell-checkboxsel"});var a=new Slick.RowSelectionModel({selectActiveRow:false});this.grid=new Slick.Grid(".data",[],[{id:"dummy"}],c,this.state);$(".slick-header").hide();this.grid.setSelectionModel(a);this.grid.registerPlugin(this.checkboxSelector);this.noDataView=new DataBrowser.Views.NoData({model:this.state})},makeColumns:function(){var b=this;var e=this.state.getSchema();var f=this.state.get("app").id;var d=this.state.get("className");var c=[this.checkboxSelector.getColumnDefinition()];if(e){var a=e.get("keys");Parse._each(a,function(l,m){m=_.escape(m);var h;var k;if(b.config&&b.config[f]&&b.config[f][d]&&b.config[f][d][m]){h=parseInt(b.config[f][d][m].order,10);k=parseInt(b.config[f][d][m].width,10)}var j={id:m,name:m,field:m,type:Parse.Schema.beautifyTypeName(l.type),order:h?h:100,width:k?k:140,editor:App.Views.Editors[l.type.name],formatter:DataBrowser.Formatters[l.type.name.toLowerCase()+"Formatter"],sortable:b._isTypeSortable(l.type)};_.extend(j,b.columnForSpecialField(d,m,h,k));c.push(j)});c.sort(function(j,h){var k=j.order-h.order;if(k){return k}if(!k){if(j.name>h.name){return 1}else{if(j.name<h.name){return -1}else{return 0}}}return 0})}return c},columnForSpecialField:function(d,e,a,c){var b;if(e==="objectId"){b={id:"objectId",name:"objectId",field:"objectId",width:c?c:100,order:a?a:0,formatter:DataBrowser.Formatters.stringFormatter,editor:App.Views.Editors.ReadonlyString}}else{if(e==="createdAt"){b={id:"createdAt",name:"createdAt",field:"createdAt",type:"Date",width:c?c:190,order:a?a:1000,editor:App.Views.Editors.ReadonlyString,formatter:DataBrowser.Formatters.simpleDateFormatter}}else{if(e==="updatedAt"){b={id:"updatedAt",name:"updatedAt",field:"updatedAt",type:"Date",width:c?c:190,order:a?a:1001,editor:App.Views.Editors.ReadonlyString,formatter:DataBrowser.Formatters.simpleDateFormatter}}else{if(e==="ACL"){b={id:"ACL",name:"ACL",field:"ACL",type:"ACL",width:c?c:190,order:a?a:1002,editor:App.Views.Editors.ACL,formatter:DataBrowser.Formatters.aclFormatter,sortable:false}}else{if(d==="_Installation"){if(e==="localeIdentifier"){b={id:"localeIdentifier",name:"localeIdentifier",field:"localeIdentifier",width:c?c:100,formatter:DataBrowser.Formatters.stringFormatter,editor:App.Views.Editors.ReadonlyString}}}else{if(d==="_User"){if(e==="username"){b={id:"username",name:"username",field:"username",width:c?c:150,order:a?a:10,editor:App.Views.Editors.String,formatter:DataBrowser.Formatters.stringFormatter}}else{if(e==="password"){b={id:"password",name:"password",field:"password",width:c?c:180,order:a?a:11,editor:App.Views.Editors.Password,formatter:DataBrowser.Formatters.passwordFormatter}}else{if(e==="authData"){b={id:"authData",name:"authData",field:"authData",type:"authData",width:c?c:150,order:a?a:12,formatter:DataBrowser.Formatters.authDataFormatter}}else{if(e==="emailVerified"){b={id:"emailVerified",name:"emailVerified",field:"emailVerified",width:c?c:150,order:a?a:13,formatter:DataBrowser.Formatters.booleanFormatter}}}}}}else{if(d==="_Session"){if(e==="createdWith"){b={id:"createdWith",name:"createdWith",field:"createdWith",editor:App.Views.Editors.ReadonlyObject}}else{if(e==="expiresAt"){b={id:"expiresAt",name:"expiresAt",field:"expiresAt",type:"Date",editor:App.Views.Editors.ReadonlyDate,}}else{if(e==="installationId"){b={id:"installationId",name:"installationId",field:"installationId",editor:App.Views.Editors.ReadonlyString}}else{if(e==="restricted"){b={id:"restricted",name:"restricted",field:"restricted",editor:App.Views.Editors.ReadonlyObject}}else{if(e==="sessionToken"){b={id:"sessionToken",name:"sessionToken",field:"sessionToken",editor:App.Views.Editors.ReadonlyString,formatter:DataBrowser.Formatters.passwordFormatter}}else{if(e==="user"){b={id:"user",name:"user",field:"user",editor:App.Views.Editors.ReadonlyPointer}}}}}}}}else{if(d==="_Product"){if(e==="download"){b={id:"download",name:"download",field:"download",type:"File",width:c?c:150,order:a?a:10,editor:App.Views.Editors.File,formatter:DataBrowser.Formatters.linklessFileFormatter}}else{if(e==="downloadName"){b={id:"downloadName",name:"downloadName",field:"downloadName",width:c?c:150,order:a?a:11,editor:App.Views.Editors.ReadonlyString,formatter:DataBrowser.Formatters.stringFormatter}}}}}}}}}}}return b},isCellEditable:function(a){var b=this.grid.getColumns()[a.cell].editor;return b&&b!==App.Views.Editors.ReadonlyString},_isTypeSortable:function(a){return _(["String","Number","Boolean","Date"]).indexOf(a.name)>=0}},{MAX_COUNT_ALLOWED_FOR_SORT:10000});DataBrowser.Views.FilterSet=Backbone.View.extend({el:".filtering_ui",events:{"click .filter_button":"toggleFilterState","click .title":"toggleFilterState","click .add_constraint_button":"addFilter","click .submit":"submit","click .dismiss":"dismiss","click .filters_overlay":"handleOutsideClick",commit:"submit"},initialize:function(){this.state=this.options.state;this.schema=this.state.getSchema();_.bindAll(this);this.state.get("filters").on("add",this.renderAdd);this.state.get("filters").on("remove",this.renderRemove);this.state.get("filters").on("reset",this.render);this.state.get("activeFilters").on("add remove reset",this.renderActiveState);this.state.get("filters").on("add remove reset",this.renderAddButtonState);this.state.on("change:filterState",this.renderFilterState)},render:function(){var a=this;this.$el.html(JST["data_browser/_filters"]({}));this.state.get("filters").each(function(b){a.renderAdd(b)});this.renderActiveState();this.renderFilterState();return this},renderAdd:function(b){var a=new App.Views.Constraint({constraint:b,constraints:this.state.get("filters"),state:this.state,schema:this.state.getSchema()});this.$(".filters").append(a.render().$el)},renderRemove:function(b,d,a){var c=a.index;this.$(".filters tr:nth-child("+(a.index+1)+")").remove()},renderActiveState:function(){var a=this.state.get("activeFilters");if(a.isEmpty()){this.$el.removeClass("active")}else{this.$el.addClass("active")}},renderFilterState:function(){this.$el.removeClass("open collapsed_single collapsed_multi close");var b=this.state.get("activeFilters");switch(this.state.get("filterState")){case DataBrowser.Models.GlobalState.Filter.OPEN:this.$el.addClass("open");break;case DataBrowser.Models.GlobalState.Filter.MULTI:var a=(b.length===1)?"condition":"conditions";this.$(".title").text("Currently filtering your data using "+b.length+" "+a);this.$el.show().addClass("collapsed_multi");break;case DataBrowser.Models.GlobalState.Filter.SINGLE:this.$el.show().addClass("collapsed_single");break;case DataBrowser.Models.GlobalState.Filter.CLOSED:this.$el.addClass("close");break}},renderAddButtonState:function(){this.$(".add_constraint_button").removeClass("disabled");if(this.state.get("filters").length>10){this.$(".add_constraint_button").addClass("disabled")}},toggleFilterState:function(){this.state.toggleFilterState();return false},addFilter:function(){if(this.state.get("filters").length<=10){this.state.get("filters").add({})}return false},dismiss:function(){this.state.get("activeFilters").reset([]);this.state.get("filters").reset([]);return false},submit:function(){var a=this;this.$(".errors").empty().hide();this.state.get("filters").trigger("set");var b=true;_.each(this.state.get("filters").models,function(e){var d=e.get("error");if(d){this.$(".errors").append($("<div />").text(d));b=false}});if(b){var c=this.state.get("filters").map(function(d){return d.clone()});this.state.get("activeFilters").reset(c)}else{if(this.timeout){clearTimeout(this.timeout)}this.$(".errors").show();this.timeout=setTimeout(function(){a.$(".errors").hide();a.timeout=null},7000)}return false},handleOutsideClick:function(f){var c=f.pageX;var h=f.pageY;var b=this.$el.offset();var d=this.$el.width();var a=this.$el.height();if(c<b.left||c>(b.left+d)||h<b.top||h>(b.top+a)){this.state.toggleFilterState()}}});DataBrowser.Views.ImportModal=Backbone.View.extend({events:{"change input[name='coll_type']":"handlerCollectionTypeChange","click .ui_action_button.import":"handleImportButton","click .ui_action_button.csv_import":"handleCSVImportButton","keyup .custom_info .collection_name":"renderContinueButton","click .cancel":"close","click .try_again":"handleTryAgainButton","click .got_it":"navigateToImport"},extensions:["json","csv"],initialize:function(b){var a=this;_.bindAll(this);var d=b.title||"Import Data";var c=b.file||false;DataBrowser.Views.ImportModal.isOpen=true;this.modalPromise=new UI.Modal({title:d,className:"import_modal",template:JST["components/_import_modal"](),});this.setElement($(".import_modal"));this.$(".modal_content").addClass("file_selection");this.$(".drop_file").fineUploaderDnd({classes:{dropActive:"drop_zone_active"}}).on("processingDroppedFilesComplete",function(h,f,j){a.$el.fineUploader("addFiles",f)});this.$el.fineUploaderS3({uploaderType:"basic",multiple:false,autoUpload:true,button:a.$(".browse")[0],validation:{allowedExtensions:a.extensions,sizeLimit:2147483648,},objectProperties:{key:function(j){a.newFileName=a.$el.fineUploader("getUuid",j);var h=a.$el.fineUploader("getName",j);var f=new RegExp(".("+a.extensions.join("|")+")$","i");var e=h.match(f)[0].substring(1);if(_.contains(a.extensions,e)){a.newFileName+="."+e}return App.currentApp.get("api_key")+"/"+a.newFileName}},request:{endpoint:"https://s3.amazonaws.com/"+s3BucketName,accessKey:s3PublicKey},signature:{endpoint:App.currentApp.dataRequestUrl()+"import_signature_request",customHeaders:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")}}}).on("submit",function(h,j,f){a.fileName=f;a.renderDetailsView()}).on("progress",function(k,l,h,f,j){a.updateProgress(f/j)}).on("complete",function(j,k,h,f){if(!f.error&&f.success!==false){a.updateProgress(1);a.renderContinueButton()}}).on("error",function(j,k,f,h){a.renderError(h)});if(c){this.$el.fineUploader("addFiles",c)}},updateProgress:function(a){this.progressBar.setProgress(Math.max(a,0.05))},close:function(){DataBrowser.Views.ImportModal.isOpen=false;this.modalPromise.reject()},registerNewImport:function(a){if(this.model.get("importProgress").get(a.id)){this.model.get("importProgress").remove(a.id)}this.model.get("importProgress").add(a)},handlerCollectionTypeChange:function(b){var a=b.target.id;this.renderMoreInfo(a);this.renderContinueButton()},handleOriginCollectionDDChange:function(a){if(a!==""){this.renderOriginFieldDD(this.relationKeyLists[a]);this.originFieldDD.disabled=false;this.targetCollDD.disabled=true}else{this.originFieldDD.disabled=true;this.targetCollDD.disabled=true}this.$(".icon_arrowRight").addClass("disabled");$(".origin_field input")[0].checked=true;this.renderContinueButton()},handleOriginFieldDDChange:function(d){if(d!==""){var c=this.originCollDD.value;var a=this.originFieldDD.value;var b=this.model.get("schemas").get(c).get("keys")[a].type.className;this.renderTargetCollDD([b]);this.targetCollDD.disabled=false;this.$(".icon_arrowRight").removeClass("disabled")}else{this.targetCollDD.disabled=true;this.$(".icon_arrowRight").addClass("disabled")}this.originFieldDD.disabled=false;this.renderContinueButton()},handleTargetCollectionDDChange:function(a){if(a!==""){this.targetCollDD.disabled=false;this.$(".icon_arrowRight").removeClass("disabled")}else{this.targetCollDD.disabled=true;this.$(".icon_arrowRight").addClass("disabled")}this.originFieldDD.disabled=false;this.renderContinueButton()},handleTryAgainButton:function(b){var a=this.model;setTimeout(function(){new DataBrowser.Views.ImportModal({model:a})},0);this.close()},handleImportButton:function(c){var a=this;var d={fileName:this.newFileName,fileType:this.fileType};if(this.classType==="custom"){d.className=this.$(".collection_name").val();this.className=d.className}else{if(this.classType==="relation"){d.className=this.originCollDD.value;d.relationOwner=this.originCollDD.value;d.relationField=this.originFieldDD.value;d.relationTarget=this.targetCollDD.value;this.className=d.relationOwner}else{d.className=this.classType;this.className=d.className}}this.lastParams=d;var b=this.$(".ui_action_button.import").html();this.$(".ui_action_button.import").empty().spin("small","white");this.importRequest(d).then(function(e){a.$(".ui_action_button.import").spin(false).html(b);if(e.success){if(!_.isUndefined(e.data.schema)){a.renderSchemaView(e.data.schema)}else{if(!_.isUndefined(e.data.progress)){a.registerNewImport(e.data.progress.info)}a.renderEndView(e.data.error)}}else{var f=e.error;if(f===""||_.isUndefined(f)){f=App.whatWentWrongWhoKnows}a.renderError(f)}},function(){a.$(".ui_action_button.import").spin(false).html(b);a.renderError(App.whatWentWrongWhoKnows)})},handleCSVImportButton:function(h){var b=this;var a=[];var c=[];_.each(this.$(".header_col"),function(j){var e=$(j);a.push(e.find("input").val());c.push(e.find("select").val())});var f=true;var d={};_.each(a,function(e,j){if(e===""||!e.match(/^[A-Za-z][0-9A-Za-z_]*$/)||d[e]){f=false;b.$(".header_col input")[j].focus();b.renderError("Column names should start with a letter, and only contain alphanumerical and underscore characters.")}d[e]=true});if(!f){return false}this.lastParams.schemaKeys=a;this.lastParams.schemaTypes=c;this.$(".ui_action_button.csv_import").empty().spin("small","white");this.importRequest(this.lastParams).then(function(e){b.$(".ui_action_button.import").spin(false).html("Import");if(e.success){if(!_.isUndefined(e.data.progress.info)){b.registerNewImport(e.data.progress.info)}b.renderEndView(e.data.error)}else{var j=e.error;if(j===""){j=App.whatWentWrongWhoKnows}b.renderError(j)}},function(){b.$(".ui_action_button.import").spin(false).html("Import");b.renderError(App.whatWentWrongWhoKnows)})},importRequest:function(a){return $.post(App.currentApp.dataRequestUrl()+"import",{options:a})},renderDetailsView:function(){this.$(".modal_content").removeClass("file_selection").addClass("file_details");this.$(".modal_content .drop_file").remove();this.$(".error").empty();this.progressBar=new UI.CircleBar({parent:this.$(".upload_progress")[0]});this.progressBar.setProgress(0.05);this.$(".file_name").text(this.fileName);var b=this.fileName.replace(/\.[^/.]+$/,"");var c=this.fileName.match(/\.[^/.]+$/)[0];if(c===".csv"){this.fileType="csv";this.$(".buttons .ui_action_button").html("Continue")}else{this.fileType="json"}var d;if(b==="_User"&&this.fileType==="json"){d="user"}else{if(b==="_Product"&&this.fileType==="json"){d="product"}else{if(b==="_Role"&&this.fileType==="json"){d="role"}else{if(b==="_Installation"&&this.fileType==="json"){d="installation"}else{if(b.indexOf("_Join")===0&&this.fileType==="json"){d="relation"}else{d="custom";this.$(".collection_info .custom_info .collection_name").val(b)}}}}}this.$(".collection_type #"+d).attr("checked","checked");this.renderMoreInfo(d);if(this.fileType==="csv"){this.$(".collection_type").find("#relation, #user, #installation, #product, #role").attr("disabled","disabled");this.$(".collection_type").find('for["relation"], for["user"], for["installation"], for["product"], for["role"]').addClass("disabled")}this.relationKeyLists=this.model.get("schemas").reduce(function(h,j){var e=j.get("keys");var f=_.reduce(e,function(k,m,l){if(m.type.name==="Relation"){k.push(l)}return k},[]);if(f.length>0){h[j.get("className")]=f}return h},{});var a=_.map(this.relationKeyLists,function(f,e){return e});if(this.relationKeyLists.length===0){this.$(".relation_details").hide();this.$(".relation_error").show()}else{this.originCollDD=new UI.Dropdown({optionSet:a,name:"origin_coll_dd",defaultOption:"Origin Class",style:"grey",parent:this.$(".origin_coll")[0],onChange:this.handleOriginCollectionDDChange});this.renderOriginFieldDD([]);this.renderTargetCollDD([])}this.renderContinueButton()},renderOriginFieldDD:function(a){this.$(".origin_field").empty();this.originFieldDD=new UI.Dropdown({optionSet:a,name:"origin_field_dd",defaultOption:"Origin Field",style:"grey",parent:this.$(".origin_field")[0],onChange:this.handleOriginFieldDDChange});this.originFieldDD.disabled=true},renderTargetCollDD:function(a){this.$(".target_coll").empty();this.targetCollDD=new UI.Dropdown({optionSet:a,name:"target_coll_dd",defaultOption:"Target Class",style:"grey",parent:this.$(".target_coll")[0],onChange:this.handleTargetCollectionDDChange});this.targetCollDD.disabled=true},renderContinueButton:function(){var a=false;if(this.progressBar.progress!==1){a=true}else{if(this.classType==="custom"&&this.$(".custom_info .collection_name").val()===""){a=true}else{if(this.classType==="relation"&&(this.originCollDD.value===""||this.originFieldDD.value===""||this.targetCollDD.value==="")){a=true}}}this.$(".ui_action_button.import").toggleClass("disabled",a)},renderMoreInfo:function(a){if(a==="custom"){UI.Animate.show(this.$(".custom_info")[0]);this.$(".relation_info").hide();this.classType=a}else{if(a==="relation"){UI.Animate.show(this.$(".relation_info")[0]);this.$(".custom_info").hide();this.classType=a}else{UI.Animate.hide(this.$(".custom_info")[0]);UI.Animate.hide(this.$(".relation_info")[0]);this.classType=Parse.Schema.underscoreSpecialClassName(a)}}},renderSchemaView:function(a){this.$(".modal_content").removeClass("file_details").addClass("schema_details");this.schema=a;this.$(".import_modal_content").html(JST["components/_import_modal_schema"]({fileName:this.fileName,schemaKeys:this.schema.schemaKeys,schemaTypes:this.schema.schemaTypes}));this.table=new UI.DataTable({hideHeader:true,rows:this.schema.preview,parent:this.$(".preview_browser")[0],maxLength:15});_.each(this.$("table tr:nth-child(1) td"),function(d,b){var c=$(d).outerWidth();$(this.$(".header_col")[b]).width(c)})},renderError:function(a){this.$(".error").html(a).show()},renderEndView:function(a){this.$(".modal_content").removeClass("file_details schema_details").addClass("end_view");this.$(".import_modal_content").html(JST["components/_import_modal_end"]({fileName:this.fileName}));this.progressBar=new UI.CircleBar({parent:this.$(".upload_progress")[0],progress:1});setTimeout(function(){this.$(".upload_progress, .collection_info, .summary").css({"transition-duration":"0.5s","-webkit-transform":"translateY(80px)","-moz-transform":"translateY(80px)",transform:"translateY(80px)"})},0);UI.Animate.show(this.$(".summary")[0],300);UI.Animate.show(this.$(".buttons")[0],300);this.$(".collection_info").show();if(!_.isUndefined(a)){a=a.replace(/`(.*?)`/,"<br/><code>$1</code><br/>");this.$(".summary").html(a);this.$(".import_modal_content").addClass("error_case")}else{this.$(".import_modal_content").addClass("success_case")}},navigateToImport:function(){Parse.history.navigate("class/"+this.className,{trigger:true})}},{isOpen:false});DataBrowser.Views.ImportStatus=Backbone.View.extend({el:".bottom .import_message",events:{"click .close":"dismiss","click .logs":"renderModal"},initialize:function(){_.bindAll(this);this.model.on("change:className",this.render);this.model.get("importProgress").on("add change:progress change:status",this.render)},dismiss:function(){var a=this.model.get("className");this.model.get("importProgress").remove(a);this.render();$.post(App.currentApp.dataRequestUrl()+"dismiss_import",{className:a})},render:function(){var a=this;var b=this.model.get("importProgress").get(this.model.get("className"));if(!_.isUndefined(b)){var d;this.$el.removeClass("failed success");if(b.get("status")==="failed"){this.$el.addClass("failed");d="Import failed!"}else{if(b.get("status")==="success"){this.$el.addClass("success");d="Import success!"}else{var c=b.get("progress")*100;if(c===0){d=b.get("message")}else{d="Importing... "+Math.round(c)+"% complete"}}}this.$(".message_text").text(d);if(!this.$el.isVisible()){this.$el.show("slide",{direction:"up"})}}else{if(this.$el.isVisible()){this.$el.hide("slide",{direction:"up"})}}return this},renderModal:function(){var a=this;var b=this.model.get("className");this.modalPromise=new UI.Modal({title:"Logs for "+b+" import",className:"import_logs_modal",template:"<div id='import_logs'></div><a class='ui_action_button close'>Close</a>"});$("#import_logs").spin("large","#5a6b77");$.get(App.currentApp.dataRequestUrl()+"import_log",{className:b}).then(function(c){if(!c.success){$("#import_logs").spin(false).text("Failed to load logs.")}else{$("#import_logs").spin(false);a.renderLogEntries(c.data)}},function(c){$("#import_logs").spin(false).text("Failed to load logs.")})},renderLogEntries:function(c){var b=[];_.each(c.log.logEntries,function(h){var f=[];f.push(moment(h.time).format("MMM DD hh:mm [UTC]"));var j=h.message;f.push(j);b.push(f)});new UI.DataTable({parent:document.getElementById("import_logs"),rows:b,hideHeader:true});_.each($("#import_logs tr"),function(j,f){var h=$(j).find("td");var e=c.log.logEntries[f].details;if(e){h[1].appendChild(UI.tag("pre",{},UI.tag("code",{},JSON.stringify(JSON.parse(e),null,2))))}h.wrapInner("<div></div>")});var a=$("#import_logs td").last();var d=a.html().replace(new RegExp("\n","g"),"<br/>");a.html(d)}});DataBrowser.Views.Message=Backbone.View.extend({el:".bottom .message",displayTime:7000,initialize:function(){this.state=this.options.state;_.bindAll(this);this.state.on("set:message",this.render)},render:function(){var a=this;this.$(".message_text").text(this.state.get("message"));if(this.state.get("success")){this.$el.removeClass("error").addClass("success")}else{this.$el.removeClass("success").addClass("error")}this.$el.show("slide",{direction:"up"});setTimeout(function(){a.$el.hide("slide",{direction:"up"})},this.displayTime);return this}});DataBrowser.Views.AddClass=DataBrowser.Views.Modal.extend({events:_.extend({},DataBrowser.Views.Modal.prototype.events,{"change select[name='classType']":"selectClass"}),initialize:function(){_.bindAll(this);this.state=this.options.state;this.schemas=this.state.get("schemas");this.state.on("change:addClassType change:addClassError",this.renderAll);this.state.set({addClassType:"custom",addClassError:""})},selectClass:function(c,a){var b=$(c.target).val();b=Parse.Schema.lowercaseSpecialClassName(b);if(!_.equalIgnoreCase(b,"custom")){b=Parse.Schema.underscoreSpecialClassName(b)}this.state.set("addClassType",b);return false},close:function(a){this.state.off("change:addClassType",this.renderAll);this.state.off("change:addClassError",this.renderAll);return DataBrowser.Views.Modal.prototype.close.call(this,a)},submit:function(){var a=this;var d=this.state.get("addClassType");if(!Parse.Schema.isSpecialClass(d)){d=this.$("input[name='name']").val();var b=Parse.Schema.validateClassName(d);if(b){this.state.set("addClassError",b);return false}}var c=_(this.schemas.pluck("className")).contains(d);if(c){this.state.set("addClassError","This class already exists.");return false}this.schemas.create({className:d},{wait:true,success:function(){var e=App.currentApp.dataRequestUrl()+"collections/"+encodeURIComponent(d)+"/fetch";$.get(e,function(f){a.state.get("collections").add(f.collection);a.state.get("schemas").add(f.schema,{parse:true});a.state.setSuccessMessage('Successfully added class "'+d+'".');Parse.history.navigate("class/"+d,{trigger:true})})},error:function(e,f){a.state.setErrorMessage("Error: "+f.error().responseText)}});this.close();return false},render:function(){this.renderSetup();this.renderAll();return this},renderSetup:function(){var b=_.filter(Parse.Schema.specialClasses,function(d){return d!=="_Session"});var a=_(b).map(function(c){return Parse.Schema.beautifyClassName(c)});classNames=["Custom"].concat(a);this.$el.html(JST["data_browser/_new_class"]({types:classNames}));this.open.call(this,{modal:true,width:450,title:"Add a new class"})},renderAll:function(){this.$(".custom, .special, .description, .errors, .tip").hide();var a=this.state.get("addClassError");if(a){this.$(".errors").text(a).show();this.state.set("addClassError","",{silent:true})}var c=this.state.get("addClassType");if(!Parse.Schema.isSpecialClass(c)){this.$(".custom").show();this.$(".tip").show()}else{var b=Parse.Schema.lowercaseSpecialClassName(c);this.$(".special, ."+b).show()}return this}});DataBrowser.Views.AddColumn=DataBrowser.Views.Modal.extend({events:_.extend({},DataBrowser.Views.Modal.prototype.events,{"change select[name='type']":"displayClasses"}),initialize:function(){_.bindAll(this);this.state=this.options.state;this.schema=this.state.getSchema();this.state.on("change:localError",this.renderError)},displayClasses:function(d,a){var b=$(d.target).val();var c=this.$(".classNameDropdown");if(b==="Pointer"||b==="Relation"){c.show();$(".ui-dialog").addClass("extended")}else{c.hide();$(".ui-dialog").removeClass("extended")}return false},close:function(a){this.state.unset("localError");return DataBrowser.Views.Modal.prototype.close.call(this,a)},submit:function(j){var b=this;var d=this.$("input[name='name']").val();var a=this.$("select[name='type']").val();if(a===""){this.state.set("localError","Select a type for the column.");return false}if(!this.schema.canAddKey(d)){this.state.set("localError","That column already exists.");return false}var c=Parse.Schema.validateNewKeyName(d);if(_.isBlank(a)){this.state.set("localError","You need to select a data type for this column.")}if(c){this.state.set("localError",c);return false}var h=Parse.Schema.Type[a];if(a==="Pointer"||a==="Relation"){var f=this.$("select[name='className']").val();if(!f){this.state.set("localError","Create the class of the pointer first.");return false}h=h(f)}this.schema.addKey(d,h);this.state.incReqs();this.schema.save(null,{success:function(e,k){b.state.decReqs();b.state.trigger("saveColumnConfig");b.state.setSuccessMessage('Successfully added column "'+d+'".')},error:function(k,l){b.state.decReqs();var e=l.response?JSON.parse(l.response).error:l.message?l.message:l;b.state.setErrorMessage("Error: "+e);delete b.schema.get("keys")[d];b.schema.trigger("change")}});this.close();return false},render:function(){this.renderSetup();return this},renderSetup:function(){this.$el.html(JST["data_browser/_new_column"]({types:Parse.Schema.availableNewTypes(),classes:this.state.get("schemas").pluck("className")}));this.$("input[type='radio']").first().attr("checked","checked");this.open.call(this,{modal:true,width:450,title:"Add a Column"});return this},renderError:function(){var a=this.state.get("localError");this.$(".errors").hide();if(a){this.$(".errors").text(a).show()}}});DataBrowser.Views.DropColumn=DataBrowser.Views.Modal.extend({initialize:function(){_.bindAll(this);this.state=this.options.state},submit:function(d){var a=this;var b=this.$("select[name='name']").val();if(_(b).isEmpty()){this.renderError("Please select a column.")}else{this.state.incReqs(true);var c=this.state.getSchema();c.deleteKey(b);c.save(null,{success:function(e,f){a.state.updateRows();a.state.trigger("saveColumnConfig");a.state.setSuccessMessage('Successfully deleted column "'+b+'".');a.state.decReqs()},error:function(e,f){a.state.decReqs();a.state.setErrorMessage("Error: "+f.error().responseText)}});this.close();return false}},render:function(){this.renderSetup();return this},renderSetup:function(){var a=this.state.getSchema();this.$el.html(JST["data_browser/_drop_column"]({columns:a.deletableKeys()}));this.open.call(this,{modal:true,width:350,title:"Delete a Column"})},renderError:function(a){this.$(".errors").text(a).show()}});DataBrowser.Views.Settings=DataBrowser.Views.Modal.extend({className:"lightbox",saveUrl:function(){var a=this.state.get("className");var b=this.state.get("app");return"/apps/"+encodeURIComponent(b.id)+"/collections/"+encodeURIComponent(a)+"/save_settings"},submit:function(b){var a=this;var c={};c.client_permissions=_(b).chain().values().every(_.isEmpty).value()?null:b;this.clpEditor.toggleSaveSpinner(true);$.ajax({url:this.saveUrl(),type:"put",data:c,success:function(e){a.clpEditor.toggleSaveSpinner(false);if(!e.error){var d=a.state.get("className");a.state.get("collections").get(d).set(e.collection);ParseDotCom.Analytics.track("classLevelPermissions",{action:"save new permissions",advanced:a.clpEditor.advancedCLP.toString()});a.clpEditor.closeModal();a.state.setSuccessMessage("Successfully saved settings.")}else{a.clpEditor.displayError(e.error)}},error:function(d){a.clpEditor.toggleSaveSpinner(false);a.clpEditor.displayError("Couldn't save your settings. Try again.")}});return false},renderError:function(a){this.$(".errors").text(a).show()},initialize:function(){this.state=this.options.state;_.bindAll(this);ParseDotCom.Analytics.track("classLevelPermissions",{action:"open new editor"})},render:function(){var e=this.state.get("className");var j=this.state.get("collections").get(e);var d=$.extend(true,{},j.get("client_permissions"));var h='Edit Class Level Permissions for "'+e+'"';var f=!!this.state.get("schemas").get("_User");var c=!!this.state.get("schemas").get("_Role");var b=this.state.get("schemas").get(e).get("keys");var a=_.filter(Object.keys(b),function(k){return b[k].type.name==="Pointer"&&b[k].type.className==="_User"});this.clpEditor=new UI.PermissionsEditor({title:h,permissionsType:"CLP",onSubmit:this.submit,hasUsers:f,hasRoles:c,userPointerFields:a});this.clpEditor.setInitialValue(d)}});DataBrowser.Views.NoData=Backbone.View.extend({el:".no_data",initialize:function(){_.bindAll(this);this.setup();this.model.get("rows").on("add remove reset",this.render)},setup:function(){this.$el.hide()},renderIfSelected:function(a){if(this.model.selectedClassModel()===a){this.render()}},render:function(){var b=this.model.get("rows");if(b.isEmpty()){var a=this.model.get("className");if(this.model.get("schemas").isEmpty()){this.$el.addClass("no_class")}else{this.$el.removeClass("no_class")}this.$el.html(JST["data_browser/_no_data"]({hasClasses:!this.model.get("schemas").isEmpty(),hasFilters:!this.model.get("activeFilters").isEmpty(),isSingleObject:this.model.get("objectId")}));this.$el.show()}else{this.$el.hide()}return this}});DataBrowser.Views.PageInfo=Backbone.View.extend({el:".page_info",initialize:function(){this.state=this.options.state;_.bindAll(this);this.state.get("rows").on("add remove reset",this.render);this.state.get("counts").on("change",this.render)},render:function(){var c="";var d=this.state.get("page");var e=this.state.get("objectsPerPage");var f=d*e;var a=f+this.state.get("rows").length;if(!this.state.get("activeFilters").length&&!this.state.isRelation()){var b=this.state.getCount();c=" of "+b+" rows"}if(f||a){f+=1}c=""+f+" - "+a+c;this.$el.text(c)}});DataBrowser.Views.Pagination=Backbone.View.extend({el:".pagination",initialize:function(){this.state=this.options.state;_.bindAll(this);this.state.get("rows").on("add remove reset",this.render)},render:function(){if(!this.state.selectedClassIsReady()){this.$el.hide()}else{var a=this.$("a.next");var c=this.$("a.prev");var d=this.state.get("page");var e=this.state.get("objectsPerPage");var b=this.state.get("fetchedRows").length;var f=b===e+1;if(!f){a.removeAttr("href").addClass("inactive")}else{a.attr("href","#"+this.state.nextPageUrl()).removeClass("inactive")}if(d<=0){c.removeAttr("href").addClass("inactive")}else{c.attr("href","#"+this.state.previousPageUrl()).removeClass("inactive")}this.$el.show()}}});DataBrowser.Views.PerPage=Backbone.View.extend({el:".per_page",events:{"change select":"updateModel"},initialize:function(){this.state=this.options.state;_.bindAll(this);this.state.get("rows").on("add remove reset",this.render)},updateModel:function(a){var b=$(a.target).find(":selected").val();this.state.set("objectsPerPage",parseInt(b,10))},render:function(){if(!this.state.selectedClassIsReady()){this.$el.hide()}else{this.$el.show()}}});DataBrowser.Views.SpinnerBar=Backbone.View.extend({el:".spinner_bar",initialize:function(){_.bindAll(this);this.state=this.options.state;this.state.on("change:numReqs",this.render);this.$el.hide().spin("small","#717171")},render:function(){var a=this.state.get("numReqs");if(a===0){this.$el.hide()}else{if(!this.state.get("showOverlay")){this.$el.show()}}return self}});DataBrowser.Views.SpinnerOverlay=Backbone.View.extend({el:".spinner_overlay",initialize:function(){_.bindAll(this);this.state=this.options.state;this.state.on("change:numReqs",this.render);this.$el.hide().spin("large","#FFFFFF")},render:function(){var b=this.state.get("numReqs");var a=this.$el.closest("#browser");if(b===0){this.$el.hide();a.find(".data_refreshing_overlay").fadeOut(400);a.find(".utility button").each(function(){$(this).removeClass("disabled")});a.find(".utility a").each(function(){$(this).removeClass("disabled")});a.find(".dropdown_container").each(function(){$(this).removeClass("disabled")})}else{if(this.state.get("showOverlay")){a.find(".data_refreshing_overlay").fadeIn(100);this.$el.show();a.find(".utility button").each(function(){$(this).addClass("disabled")});a.find(".utility a").each(function(){$(this).addClass("disabled")});a.find(".dropdown_container").each(function(){$(this).addClass("disabled")})}}return self}});DataBrowser.Views.Utility=Backbone.View.extend({el:".utility",events:{"click .add:not(.disabled)":"addRow","click .new_column:not(.disabled)":"addColumn","click .drop_column:not(.disabled)":"dropColumn","click .security:not(.disabled)":"openSettings","click .deleteAll:not(.disabled)":"deleteCollection","click .drop:not(.disabled)":"dropCollection","click .export_class:not(.disabled)":"exportCollection","click .filter_button:not(.disabled)":"toggleFilterState","click .full_screen_button":"toggleFullScreen","click .refresh_button":"startRefresh"},classURL:function(){return"/apps/"+encodeURIComponent(this.model.get("app").id)+"/collections/"+this.model.get("className")},initialize:function(){_.bindAll(this);this.model.get("rows").on("add remove reset",this.render);this.model.on("change:numReqs",this.maybeEndRefresh);this.model.on("change:selectedRows",this.render);this.model.on("addRow",this.addRow);this.model.get("exportProgress").on("add remove reset change:status",this.render)},render:function(){var b=function(f,e){f.toggleClass("disabled",!e)};var d=!this.model.get("schemas").isEmpty();b(this.$(".add"),d&&this.model.get("activeFilters").isEmpty()&&this.model.get("className")!=="_Session");b(this.$(".bulk_delete"),d&&!_.isEmpty(this.model.get("selectedRows")));b(this.$(".new_column"),d);b(this.$(".security"),d);b(this.$(".drop_column"),d&&this.model.getSchema()&&!_.isEmpty(this.model.getSchema().deletableKeys()));b(this.$(".deleteAll"),d);b(this.$(".drop"),d);var c=this.model.get("exportProgress").get(this.model.get("className"));var a=!_.isUndefined(c)&&c.isActive();b(this.$(".export_class"),d&&!a&&this.model.get("allowExports"));b(this.$(".filter_button"),d)},addRow:function(){this.model.trigger("commitCurrentEdit");var a=this.model.get("rows");a.add({},{at:0});return false},addColumn:function(a){this.model.trigger("commitCurrentEdit");new DataBrowser.Views.AddColumn({state:this.model}).render()},dropColumn:function(a){this.model.trigger("commitCurrentEdit");new DataBrowser.Views.DropColumn({state:this.model}).render()},openSettings:function(a){this.model.trigger("commitCurrentEdit");new DataBrowser.Views.Settings({state:this.model}).render()},deleteCollection:function(f){var c=this;var d=this.model.get("className");var b=prompt('Are you sure you want to delete all the data in the class "'+d+'"? There is no undo.\n\nType the name of the class to confirm:');if(d===b){var a=this.model.getCountKey();this.model.incReqs(true);$.ajax({url:this.classURL()+"/clear",type:"delete",success:function(h){c.model.get("counts").set(a,0);var e=c.model.get("rows");e.fetch({success:function(j,k){c.model.setSuccessMessage("All data in "+d+" have been deleted.");c.model.decReqs();c.model.get("rows").trigger("remove")},error:function(j,k){c.model.decReqs()}})},error:function(){c.model.setErrorMessage("The request failed.");c.model.decReqs()}})}return false},dropCollection:function(j){var a=this;var d=this.model.get("className");var h=prompt('Are you sure you want to drop the class "'+d+'" and lose all the data in it? There is no undo.\n\nType the name of the class to confirm:');if(d===h){var c=this.model.getCollection();c.off();this.model.get("collections").remove(c);var f=this.model.getSchema();f.off();this.model.incReqs(true);var b=this.model.get("schemas");b.remove(f);f.destroy({success:function(k,l){a.model.decReqs();a.model.setSuccessMessage("Successfully dropped "+d+".");var e=a.model.get("importProgress").get(d);if(e&&(e.get("status")==="success"||e.get("status")==="failed")){a.model.get("importProgress").remove(d);$.post(App.currentApp.dataRequestUrl()+"dismiss_import",{className:d})}b.trigger("remove");a.model.trigger("dropCollectionConfig");Parse.history.navigate("home",{trigger:true})},error:function(e,k){a.model.decReqs();a.model.setErrorMessage(Util.getErrorMessage(k))}})}return false},exportCollection:function(f){var a=this;var h=this.model.get("className");var b=this.model.get("schemas");var d=new Parse.Query(h);var c=this.model.get("activeFilters");App.Collections.Constraints.addConstraintsToQuery(c,d,b.get(h));this.$(".export_class").addClass("disabled");$.ajax({url:App.currentApp.dataRequestUrl()+"export_data",type:"PUT",contentType:"application/json",data:JSON.stringify({name:h,where:d.toJSON().where})}).then(function(e){if(e.success){a.model.get("exportProgress").upsert({job:"export",id:h,progress:0,status:"queued",message:"Starting export...",});a.render()}})},startRefresh:function(b){if(this.model.get("numReqs")!==0){return false}var a=this.$el.closest("#browser");this.$(".refresh_button").addClass("animating");this.model.updateRows()},maybeEndRefresh:function(b){if(this.model.get("numReqs")!==0){return false}var a=this.$el.closest("#browser");this.$(".refresh_button").removeClass("animating")},toggleFilterState:function(){this.model.toggleFilterState();return false},toggleFullScreen:function(a){this.model.set("fullScreen",!this.model.get("fullScreen"));$("body").toggleClass("full_screen");this.model.trigger("adjustDataHeight");return false}});var QuickStart={Models:{},Views:{},Routers:{},initialize:function(c){var a=new QuickStart.Models.Tree({apps:c.apps,additions:c.treeAdditions});var d=new QuickStart.Views.Wizard({model:a});var b=new QuickStart.Routers.Router({model:a});return a}};QuickStart.Models.Tree=Backbone.Model.extend({defaults:{currentPath:[],currentNode:null,url:null,leafContent:null,fetchOutstanding:false,currentApp:null,social:""},initialize:function(b){_.bindAll(this);var a=this;this.apps=b.apps;this.on("change:url",this.updatePath);this.on("change:currentApp",this.appChange);this.set("currentApp",this.apps.at(0));if($(".app_selector").length){$(".app_selector a").click(function(){var e=$(this).attr("href");e=e.substr(e.lastIndexOf("/")+1);var d=a.apps.get(e);if(d){a.set("currentApp",d)}return false})}var c=this.get("additions");if(c!==undefined&&_.keys(c).length>0){QuickStart.Models.Tree.Structure.children.push(c)}this.fetchData()},setCurrentApp:function(a){var b=this.apps.get(a);if(b){this.set("currentApp",b)}},appChange:function(a,b){if(b){this.initParse(b);this.changeAppList(b.get("name"))}},changeAppList:function(a){$(".current_app").text(a).removeClass("prod").removeClass("open")},initParse:function(a){Parse._initialize(a.get("key"),a.get("javascript_key"),a.get("push_key"));Parse._useMasterKey=true;Parse.VERSION="browser"},reset:function(){this.set("currentPath",[]);Parse.history.navigate("",{trigger:false});this.set("currentNode",QuickStart.Models.Tree.Structure)},updatePath:function(){var b=this.get("url").split("/");var c=QuickStart.Models.Tree.Structure;var a;this.set("currentPath",[]);while(b){a=_.findWhere(c.children,{className:b[0]});if(!a){break}c=a;this.get("currentPath").push(b.shift())}this.set("currentNode",c)},selectItem:function(a){var c=_.findWhere(this.get("currentNode").children,{className:a});if(c){var b=this.get("currentPath");b.push(a);Parse.history.navigate(b.join("/"),{trigger:false});this.set({currentNode:c},{silent:true});this.trigger("selected",c)}},replacePathNode:function(c,b){var d=this.findPathNode(c);if(d){var f=_.findWhere(d.children,{className:b});if(f){var e=this.get("currentPath");var a=e.indexOf(c);e.splice(a);e.push(b);Parse.history.navigate(e.join("/"),{trigger:false});this.set("currentNode",f)}}},getChildren:function(){return this.get("currentNode").children},getLeafContent:function(){var b=this.get("currentPath").join("/");var a=this.get("leafContent");return a&&a[b]||null},getEndLinks:function(){var e=this.get("currentNode").links||null;if(!e){var f=this.get("currentPath");var c=f[f.length-1];var a=this.findPathNode(c);e=a.links}var b="<ul>";for(var d in e){b+='<li><a class="link_to" href="'+e[d]+'">';b+=d+"</a></li>"}b+="</ul>";return(this.get("endLinks")||"").replace(/\{\{links\}\}/,b)},getTestDialog:function(){return this.get("testDialog")||""},getProduct:function(){return this.get("currentPath")[0]},getDevice:function(a){var b={ios:"ios",android:"android",windows:"winrt",windows_phone:"winphone"};if(a==="unity"){return b[this.get("currentPath")[2]]}return b[a]},findPathNode:function(a){var d=this.get("currentPath");var c=QuickStart.Models.Tree.Structure;var e;for(var b=0;b<d.length;b++){e=_.findWhere(c.children,{className:d[b]});if(!e){break}if(d[b]===a){return c}c=e}return null},fetchData:function(){$.get("/apps/quickstart_steps.json",(function(a){this.set("leafContent",a.steps);this.set("endLinks",a.end_links);this.set("testDialog",a.test_dialog);this.trigger("contentLoaded")}).bind(this))},getTestFunction:function(){var a=QuickStart.Models.Tree.Tests[this.getProduct()];return a&&a.bind(this)}},{Structure:{nextStep:"Select a product",children:[{className:"parse_data",nextStep:"Select an environment",name:"Data",children:[{className:"mobile",nextStep:"Select a platform",name:"Mobile",children:[{className:"ios",nextStep:"Select a language",name:"iOS",children:[{className:"native",nextStep:"Select a type of project",name:"Objective-C",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/ios/native/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/ios/native/existing"}},{className:"swift",nextStep:"Select a type of project",name:"Swift",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/ios/swift/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/ios/swift/existing"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/mobile/ios/xamarin/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/ios/xamarin/existing"}}]},{className:"android",nextStep:"Select a language",name:"Android",children:[{className:"native",nextStep:"Select a type of project",name:"Native (Java)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/android/native/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/android/native/existing"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/android/xamarin/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/android/xamarin/existing"}}]},{className:"windows_phone",nextStep:"Select a type of project",name:"Windows Phone 8",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/windows_phone/existing","Start recording analytics":"/apps/quickstart#analytics/events/mobile/windows_phone/existing"}}]},{className:"desktop",nextStep:"Select a platform",name:"Desktop",children:[{className:"osx",nextStep:"Select a language",name:"OS X",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/desktop/osx/existing","Start recording analytics":"/apps/quickstart#analytics/events/desktop/osx/existing"}},{className:"windows",nextStep:"Select a language",name:"Windows 8",children:[{className:"dot_net",nextStep:"Select a type of project",name:".NET (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/windows/existing","Start recording analytics":"/apps/quickstart#analytics/events/desktop/windows/dot_net/existing"}},{className:"javascript",nextStep:"Select a type of project",name:"JavaScript",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/desktop/windows/javascript/existing","Start recording analytics":"/apps/quickstart#analytics/events/desktop/windows/javascript/existing"}}]}]},{className:"web",nextStep:"Select a type of project",name:"Web",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/web/existing","Start recording analytics":"/apps/quickstart#analytics/events/web/existing"}},{className:"unity",nextStep:"Select a type of project",name:"Unity",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/unity/existing","Start recording analytics":"/apps/quickstart#analytics/events/unity/existing"}},{className:"php",name:"PHP",links:{"Read our PHP Guide":"/docs/php_guide","View on GitHub":"https://github.com/parseplatform/parse-php-sdk"}},]},{className:"parse_push",nextStep:"Select an environment",name:"Push",children:[{className:"ios",nextStep:"Select a language",name:"iOS",children:[{className:"native",nextStep:"Select a type of project",name:"Objective-C",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/iOS","Explore geo queries":"/docs/ios_guide#geo-query/iOS"}},{className:"swift",nextStep:"Select a type of project",name:"Swift",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/iOS","Explore geo queries":"/docs/ios_guide#geo-query/iOS"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Track pushes and app opens":"/docs/dotnet/guide#push-notifications-tracking-pushes-and-app-opens","Explore geo queries":"/docs/dotnet_guide#geo-query"}}]},{className:"osx",nextStep:"Select a language",name:"OS X",children:[{className:"native",nextStep:"Select a type of project",name:"Objective-C",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/iOS","Explore geo queries":"/docs/osx/guide#geopoints-geo-queries"}},{className:"swift",nextStep:"Select a type of project",name:"Swift",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Track pushes and app opens":"/docs/osx/guide#push-notifications-tracking-pushes-and-app-opens","Explore geo queries":"/docs/osx/guide#geopoints-geo-queries"}},]},{className:"android",nextStep:"Select a language",name:"Android",children:[{className:"native",nextStep:"Select a type of project",name:"Native (Java)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/Android","Explore geo queries":"/docs/android_guide#geo-query"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Track pushes and app opens":"/docs/dotnet/guide#push-notifications-tracking-pushes-and-app-opens","Start recording analytics":"/apps/quickstart#analytics/events/mobile/android/xamarin/existing"}}]},{className:"windows",nextStep:"Select a type of project",name:"Windows",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/.NET","Explore geo queries":"/docs/dotnet_guide#geo-query"}},{className:"windows_phone",nextStep:"Select a type of project",name:"Windows Phone 8",children:[{className:"new",name:"New Project"},{className:"existing",name:"Existing Project"}],links:{"Start recording analytics":"/apps/quickstart#analytics/events/mobile/windows_phone/existing","Explore geo queries":"/docs/dotnet_guide#geo-query"}},{className:"unity",nextStep:"Select a platform",name:"Unity",children:[{className:"ios",nextStep:"Select a type of project",name:"iOS",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/iOS","Explore geo queries":"/docs/unity/guide#geo-query"}},{className:"android",nextStep:"Select a type of project",name:"Android",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Track pushes and app opens":"/docs/push_guide#receiving-tracking/Android","Explore geo queries":"/docs/unity/guide#geo-query"}}]},]},{className:"analytics",nextStep:"Select an environment",name:"Analytics",children:[{className:"mobile",nextStep:"Select a platform",name:"Mobile",children:[{className:"ios",nextStep:"Select a language",name:"iOS",children:[{className:"native",nextStep:"Select a type of project",name:"Objective-C",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/ios/native/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/iOS"}},{className:"swift",nextStep:"Select a type of project",name:"Swift",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/ios/swift/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/iOS"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/mobile/ios/xamarin/existing"}}]},{className:"android",nextStep:"Select a language",name:"Android",children:[{className:"native",nextStep:"Select a type of project",name:"Native (Java)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/android/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/Android"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/mobile/android/xamarin/existing"}}]},{className:"windows_phone",nextStep:"Select a type of project",name:"Windows Phone 8",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/windows_phone/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/.NET"}}]},{className:"desktop",nextStep:"Select a platform",name:"Desktop",children:[{className:"osx",nextStep:"Select a language",name:"OS X",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/desktop/osx/existing"}},{className:"windows",nextStep:"Select a language",name:"Windows 8",children:[{className:"dot_net",nextStep:"Select a type of project",name:".NET (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Add push notifications":"/apps/quickstart#parse_push/windows_phone/existing","Track pushes and app opens":"/docs/push_guide#receiving-tracking/.NET"}},{className:"javascript",nextStep:"Select a type of project",name:"JavaScript",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/desktop/windows/javascript/existing"}}]}]},{className:"web",nextStep:"Select a type of project",name:"Web",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/web/existing"}},{className:"unity",nextStep:"Select a type of project",name:"Unity",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store user objects":"/apps/quickstart#social/unity/existing"}}]},{className:"social",nextStep:"Select an environment",name:"Social",children:[{className:"mobile",nextStep:"Select a platform",name:"Mobile",children:[{className:"ios",nextStep:"Select a language",name:"iOS",children:[{className:"native",nextStep:"Select a type of project",name:"Objective-C",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook and Twitter login":"/docs/ios_guide#fbusers/iOS","Store other types of objects":"/apps/quickstart#parse_data/mobile/ios/native/existing"}},{className:"swift",nextStep:"Select a type of project",name:"Swift",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook and Twitter login":"/docs/ios_guide#fbusers/iOS","Store other types of objects":"/apps/quickstart#parse_data/mobile/ios/swift/existing"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store other types of objects":"/apps/quickstart#parse_data/mobile/ios/xamarin/existing"}}]},{className:"android",nextStep:"Select a language",name:"Android",children:[{className:"native",nextStep:"Select a type of project",name:"Native (Java)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook and Twitter login":"/docs/android_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/mobile/android/native/existing"}},{className:"xamarin",nextStep:"Select a type of project",name:"Xamarin (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store other types of objects":"/apps/quickstart#parse_data/mobile/android/xamarin/existing"}}]},{className:"windows_phone",nextStep:"Select a type of project",name:"Windows Phone 8",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/dotnet_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/mobile/windows_phone/existing"}}]},{className:"desktop",nextStep:"Select a platform",name:"Desktop",children:[{className:"osx",nextStep:"Select a language",name:"OS X",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Store other types of objects":"/apps/quickstart#parse_data/mobile/android/native/existing"}},{className:"windows",nextStep:"Select a language",name:"Windows 8",children:[{className:"dot_net",nextStep:"Select a type of project",name:".NET (C#)",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/dotnet_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/desktop/windows/dot_net/existing"}},{className:"javascript",nextStep:"Select a type of project",name:"JavaScript",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/js_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/desktop/windows/javascript/existing"}}]}]},{className:"web",nextStep:"Select a type of project",name:"Web",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/js_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/web/existing"}},{className:"unity",nextStep:"Select a type of project",name:"Unity",children:[{className:"new",name:"New project"},{className:"existing",name:"Existing project"}],links:{"Enable Facebook login":"/docs/unity_guide#fbusers","Store other types of objects":"/apps/quickstart#parse_data/unity/existing"}}]},{className:"cloud_code",nextStep:"Select your development environment",name:"Cloud Code",children:[{className:"unix",nextStep:"Set up the command line tool",name:"Mac/Linux"},{className:"windows",nextStep:"Set up the command line tool",name:"Windows"}],links:{"Run jobs when data is saved":"/docs/cloud_code_guide#functions-onsave","Explore cloud modules":"/docs/cloud_code_guide#modules"}},{className:"hosting",nextStep:"Select your development environment",name:"Hosting",children:[{className:"unix",nextStep:"Set up the command line tool",name:"Mac/Linux"},{className:"windows",nextStep:"Set up the command line tool",name:"Windows"}],links:{"Build a dynamic web site":"/docs/hosting_guide#webapp","Explore the command line tool":"/docs/hosting_guide#clt"}}]},Tests:{parse_data:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"quickstart_tests",{product:"data"}).done(function(c){a.fetchOutstanding=false;if(c.data){a.set("social","I just saved my first object with Parse!");b.resolve({text:"Congrats! You saved your first object:",data:JSON.stringify(c.data,null,1)})}else{b.reject({text:"No data yet..."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No data yet..."})});return b},parse_push:function(){var b=new Parse.Query(Parse.Installation);b.equalTo("deviceType",this.getDevice(this.get("currentPath")[1]));var a=this;return b.count().then(function(d){if(!d){return Parse.Promise.error("Can't find any registered devices yet...")}if(d<=10){return Parse.Promise.as()}var e=$('<div class="dialog_blur" />');var c=new QuickStart.Views.Confirmation({message:"You have "+d+" device installations registered.<br/>&nbsp;<br/>Do you really want to send a push notification to all of these devices?",el:e});$("body").append(e);return c.getPromise()}).then(function(){return Parse.Push.send({where:b,data:{alert:"A test push from Parse!"}})}).then(function(c){a.set("social","I just sent my first push notification with Parse!");return Parse.Promise.as({text:"Congrats! You sent your first push notification."})},function(c){if(typeof c==="object"&&c.message){c="Sorry, there was an error sending the push"}return Parse.Promise.error({text:c})})},social:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"quickstart_tests",{product:"users"}).done(function(c){a.fetchOutstanding=false;if(c.data){a.set("social","I just stored my first user with Parse!");b.resolve({text:"Congrats! You created your first user:",data:JSON.stringify(c.data,null,1)})}else{b.reject({text:"No user data yet..."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No user data yet..."})});return b},analytics:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"quickstart_tests",{product:"events"}).done(function(c){a.fetchOutstanding=false;if(c.data&&c.data.length){a.set("social","I just recorded my first custom analytics event with Parse!");b.resolve({text:"Congrats! You recorded your first custom analytics event."})}else{b.reject({text:"No custom analytics events yet..."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No custom analytics events yet..."})});return b},cloud_code:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"cloud_code/release_info").done(function(c){a.fetchOutstanding=false;if(c.version===null){b.reject({text:"No cloud code deployments yet..."})}else{a.set("social","I just made my first Parse Cloud Code deployment!");b.resolve({text:"Congrats! You made your first deployment."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No cloud code deployments yet..."})});return b},hosting:function(){if(this.fetchOutstanding){return}this.fetchOutstanding=true;var a=this;var b=$.Deferred();$.get(this.get("currentApp").dataRequestUrl()+"cloud_code/release_info").done(function(c){a.fetchOutstanding=false;if(c.version===null){b.reject({text:"No hosting deployments yet..."})}else{a.set("social","I just made my first Parse Hosting deployment!");b.resolve({text:"Congrats! You made your first deployment."})}}).fail(function(c){a.fetchOutstanding=false;b.reject({text:"No hosting deployments yet..."})});return b},embedded:function(){var a=this;var d=new Parse.Query(Parse.Installation);d.equalTo("deviceType","embedded");var b=d.count().then(function(e){if(!e){return Parse.Promise.error("Can't find any registered devices yet...")}if(e>10){return Parse.Promise.error("Looks like you have too many installations to send a test push.")}return Parse.Push.send({where:d,data:{alert:"A test push from Parse!"}})},function(){return Parse.Promise.error("Error sending push notificaiton.")});var c=new Parse.Promise();$.get(this.get("currentApp").dataRequestUrl()+"quickstart_tests",{product:"data"}).done(function(e){if(e.data){c.resolve()}else{c.reject("No data created yet...")}}).fail(function(e){c.reject("No data created yet...")});return Parse.Promise.when(b,c).then(function(e){a.set("social","I just created my first app with Parse for IoT!");return Parse.Promise.as({text:"Congrats! You created an object and sent a push!"})},function(e){if(typeof e==="object"&&e.message){e="Sorry, there was an error."}return Parse.Promise.error({text:e[0]})})}}});QuickStart.Routers.Router=Parse.Router.extend({initialize:function(a){this.model=a.model},routes:{"*splat":"showPath"},showPath:function(a){this.model.set("url",a);$("html, body").animate({scrollTop:0},"fast")}});QuickStart.Views.Confirmation=Backbone.View.extend({events:{"click .confirmation_cancel":"cancel","click .confirmation_continue":"accept"},initialize:function(a){_.bindAll(this);this.promise=new Parse.Promise();this.$el.append(JST["apps/quickstart/_confirmation"]({message:a.message||"Are you sure?"}))},getPromise:function(){return this.promise},cancel:function(){this.promise.reject("Chose to not continue");this.remove()},accept:function(){this.promise.resolve();this.remove()},remove:function(){this.el.parentNode.removeChild(this.el)}});QuickStart.Views.Wizard=Backbone.View.extend({el:".quickstart_wizard",events:{"click .selector .item":"selectItem","click .reset":"resetTree","mouseenter .breadcrumb .item":"buildBreadcrumbDropdown","click .breadcrumb .dropdown_item":"breadcrumbReset"},initialize:function(){_.bindAll(this);this.model.on("change:currentNode",this.render);this.model.on("change:currentApp",this.appChanged);this.model.on("selected",this.showStep);this.model.on("contentLoaded",this.renderLeafNode);this.$selector=$(".selector");this.$leaf=$(".quickstart_leaf");this.breadcrumbList=$(".breadcrumb ul")[0];this.$leaf.on("click",".ajax_test .btn",this.performTest);this.$leaf.on("click",".fb_share",this.fbShareDialog);this.$leaf.on("click",".twitter_share",this.twitterShareDialog);this.darkCodeClasses=["android","windows","wphone","osx"];this.onboardMode=!!$(".onboard").length;this.appNames=[];this.appIds={};var a=this;this.model.apps.each(function(c){var b=c.get("name");a.appNames.push(b);a.appIds[b]=c.get("friendly_id")});this.appNames.sort(function(d,c){return d.toLowerCase().localeCompare(c.toLowerCase())})},render:function(){var a=this.model.getChildren();if(a&&a.length){this.renderChildren(a)}else{this.renderLeafNode();this.$leaf.show()}this.buildBreadcrumb()},renderChildren:function(b){var a=this.$selector;a.html("");this.$leaf.hide();_.each(b,function(d){a.append('<div class="item '+d.className+'"><div class="title">'+d.name+"</div></div>")})},renderLeafNode:function(){var b=this;var h=this.model.getLeafContent();if(h){var f=this.model.getEndLinks();var e=this.updateAppMetaData(h+f);this.$leaf.html(e);var c=this.model.getTestFunction();if(c&&this.model.get("currentApp")){this.$leaf.find(".with_test ul").append(this.model.getTestDialog())}var d=this.$leaf.find(".card").first();var a=this.stripClasses(d[0].className,[/card/]);if(_.contains(this.darkCodeClasses,a)){d.find(".code").removeClass("parseTheme").addClass("darkParseTheme")}var j=this.$leaf.find(".ui_dropdown");if(j.length&&this.model.get("currentApp")){j.show();new App.Views.Dropdown({el:j,model:new App.Models.Dropdown({options:this.appNames,values:this.appIds,value:this.model.get("currentApp").get("friendly_id"),name:"app_selector",id:"app_selector",changeFunction:function(k){b.model.setCurrentApp(k);b.renderLeafNode()}})})}else{j.hide()}SyntaxHighlighter.highlight()}},updateAppMetaData:function(a){var b=this.model.get("currentApp");if(!b){b={get:function(c){switch(c){case"api_key":return"API KEY";case"javascript_key":return"JAVASCRIPT KEY";case"push_key":return"MASTER KEY";case"rest_api_key":return"REST API KEY";case"windows_key":return".NET KEY";case"key":return"APPLICATION ID";case"secret":return"CLIENT KEY"}return""}}}return a.replace(/\{\{([\w_]+)\}\}/g,function(c,d){return _.escape(b.get(d))||""})},appChanged:function(){this.renderLeafNode();var a=this;$(".app_menu .pages a").each(function(){this.href=this.href.replace(/\/apps\/[\w-]+/,"/apps/"+_.escape(a.model.get("currentApp").get("friendly_id")))})},fbShareDialog:function(){window.open("https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fparse.com","facebook-share-dialog","width=626,height=436");return false},twitterShareDialog:function(){var a="https://twitter.com/share?url=http%3A%2F%2Fparse.com&text="+encodeURIComponent(this.model.get("social")||"I just started using Parse!");window.open(a,"twitter-share-dialog","width=700,height=500");return false},showStep:function(a){this.addBreadcrumb(a);if(a.children&&a.children.length){this.renderChildren(a.children)}else{this.$selector.html("");this.renderLeafNode();this.$leaf.show();var b={product:this.model.getProduct(),fullpath:this.model.get("currentPath").join("/")};ParseDotCom.Analytics.track("Quickstart Endpoint",b)}},buildBreadcrumb:function(){var d=this.model.get("currentPath");var b=this.model.get("currentNode");var e=b.nextStep||"Set up the SDK";while(this.breadcrumbList.children.length>1){this.breadcrumbList.removeChild(this.breadcrumbList.lastChild)}var c="";for(var a=0;a<d.length;a++){c+='<li class="step"><div class="item '+d[a]+'">&nbsp;</div></li>'}c+='<li class="next_step">'+e+"</li>";$(this.breadcrumbList).append(c)},addBreadcrumb:function(b){var a=b.nextStep||"Set up the SDK";$(".breadcrumb .next_step").before('<li class="step"><div class="item '+b.className+'">&nbsp;</div></li>').html(a)},buildBreadcrumbDropdown:function(f){var a=this.stripClasses(f.target.className,[/item/]);var c=$(f.target.parentNode);if(c.children(".dropdown").length){return}var d=this.model.findPathNode(a);if(d){var b='<div class="dropdown"><ul>';_.each(d.children,function(e){b+='<li class="'+(e.className===a?" selected":"")+'"><span class="dropdown_item '+e.className+'">'+e.name+"</span></li>"});b+="</ul></div>";$(f.target.parentNode).append(b)}},breadcrumbReset:function(d){var c=this.stripClasses(d.target.className,[/dropdown_item/,/selected/]);var b=d.target;while(b.parentNode&&b.className.indexOf("step")<0){b=b.parentNode}if(!b.parentNode){return}var a=this.stripClasses($(b).children(".item")[0].className,[/item/]);this.model.replacePathNode(a,c)},selectItem:function(b){var a=this.stripClasses(b.target.className,[/item/]);if(this.onboardMode){this.onboardMode=false;$(".onboard").hide();$(".breadcrumb").show()}this.model.selectItem(a)},resetTree:function(){this.model.reset()},performTest:function(){this.$leaf.find(".btn.action").empty().spin("small","white");var b=this.testResponse;var a=this.model.getTestFunction();a().then(b.bind(this,true),b.bind(this,false))},testResponse:function(d,b){this.$leaf.find(".btn.action").html("Test");var a=this.$leaf.find(".ajax_test");a.removeClass("fail").removeClass("success").addClass(d?"success":"fail");this.$leaf.find(".test_message").text(b.text||"");this.$leaf.find(".object_data").text(b.data||"");var c={product:this.model.getProduct(),fullpath:this.model.get("currentPath").join("/"),success:String(!!d)};ParseDotCom.Analytics.track("Quickstart Completion",c)},stripClasses:function(d,b){var e=d;for(var a=0;a<b.length;a++){e=e.replace(b[a],"")}return e.trim()},});(function(d){function b(m){var l=d('meta[name="csrf-token"]').attr("content");if(l){m.setRequestHeader("X-CSRF-Token",l)}}if("ajaxPrefilter" in d){d.ajaxPrefilter(function(l,n,m){if(l.global){b(m)}})}else{d(document).ajaxSend(function(l,m){b(m)})}function c(o,l,n){var m=d.Event(l);o.trigger(m,n);return m.result!==false}function k(o){var q,m,p,l=o.data("type")||(d.ajaxSettings&&d.ajaxSettings.dataType);if(c(o,"ajax:before")){if(o.is("form")){q=o.attr("method");m=o.attr("action");p=o.serializeArray();var n=o.data("ujs:submit-button");if(n){p.push(n);o.data("ujs:submit-button",null)}}else{q=o.data("method");m=o.attr("href");p=null}d.ajax({url:m,type:q||"GET",data:p,dataType:l,beforeSend:function(s,r){if(r.dataType===undefined){s.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script)}return c(o,"ajax:beforeSend",[s,r])},success:function(s,r,t){o.trigger("ajax:success",[s,r,t])},complete:function(s,r){o.trigger("ajax:complete",[s,r])},error:function(t,r,s){o.trigger("ajax:error",[t,r,s])}})}}function f(p){var m=p.attr("href"),r=p.data("method"),n=d("meta[name=csrf-token]").attr("content"),q=d("meta[name=csrf-param]").attr("content"),o=d('<form method="post" action="'+m+'"></form>'),l='<input name="_method" value="'+r+'" type="hidden" />';if(q!==undefined&&n!==undefined){l+='<input name="'+q+'" value="'+n+'" type="hidden" />'}o.hide().append(l).appendTo("body");o.submit()}function h(l){l.find("input[data-disable-with]").each(function(){var m=d(this);m.data("ujs:enable-with",m.val()).val(m.data("disable-with")).attr("disabled","disabled")})}function a(l){l.find("input[data-disable-with]").each(function(){var m=d(this);m.val(m.data("ujs:enable-with")).removeAttr("disabled")})}function j(l){var m=l.data("confirm");return !m||(c(l,"confirm")&&confirm(m))}function e(m){var l=false;m.find("input[name][required]").each(function(){if(!d(this).val()){l=true}});return l}d("a[data-confirm], a[data-method], a[data-remote]").live("click.rails",function(m){var l=d(this);if(!j(l)){return false}if(l.data("remote")!==undefined){k(l);return false}else{if(l.data("method")){f(l);return false}}});d("form").live("submit.rails",function(n){var l=d(this),m=l.data("remote")!==undefined;if(!j(l)){return false}if(e(l)){return !m}if(m){k(l);return false}else{setTimeout(function(){h(l)},13)}});d("form input[type=submit], form button[type=submit], form button:not([type])").live("click.rails",function(){var m=d(this);if(!j(m)){return false}var l=m.attr("name"),n=l?{name:l,value:m.val()}:null;m.closest("form").data("ujs:submit-button",n)});d("form").live("ajax:beforeSend.rails",function(l){if(this===l.target){h(d(this))}});d("form").live("ajax:complete.rails",function(l){if(this===l.target){a(d(this))}})}(jQuery));App.Models.App=Backbone.Model.extend({url:function(){return"/apps/"+encodeURIComponent(this.id)},initialize:function(a){this.id=a.friendly_id},dataRequestUrl:function(){return"/apps/"+encodeURIComponent(this.id)+"/"},});App.Models.Collaboration=Backbone.Model.extend({initialize:function(a){this.userName=a.userName;this.appId=a.app_id;this.id=a.id}});Analytics.Series=Backbone.Model.extend({defaults:{dimensions:{}},initialize:function(){_.bindAll(this);if(!this.get("baseUrl")){this.set("baseUrl",App.currentApp.dataRequestUrl())}if(!this.get("endpoint")){if(this.isCustomEvent()){this.set("endpoint","custom_event")}else{this.set("endpoint","api_request")}}if(!this.get("displayName")){this.set("displayName",this.generateDisplayName())}if(!this.get("tooltipName")){this.set("tooltipName","events")}if(!this.get("seriesId")&&this.id){this.set("seriesId",this.id.toString())}},capitalizeString:function(a){a.toLowerCase();return a.charAt(0).toUpperCase()+a.slice(1,a.length)},generateDisplayName:function(){if(this.isCustomEvent()){var b=this.get("eventName")+" Count ";var a=_.values(this.get("dimensions"));if(a.length>0){b+="("+a.join(", ")+")"}return b}else{if(this.isClassCountAnalytics()){return this.get("className")+" Count"}}switch(this.get("endpoint")){case"api_request":return _.compact([this.capitalizeString(this.get("refinement")||""),this.get("className")||"","API Requests"]).join(" ");case"push":return"Push Notifications";case"analytics_request":return"Analytics Requests";case"file_request":return"File Requests";case"app_opened":return"App Opens";case"app_opened_from_push":return"Push Opens";case"app_opened_from_push_id":return"Push Opens With Id"}},generateDisplayDimensions:function(){var a=_.map(this.get("dimensions"),function(c,b){return b+": "+c});return a.join("\n")},generateDataUrlParams:function(){var a={};if(this.get("endpoint")){a.endpoint=this.get("endpoint")}else{a.endpoint="api_request"}if(this.get("push")){a.push=this.get("push")}if(this.get("eventName")){a.eventName=this.get("eventName")}if(this.get("performanceType")){a.performanceType=this.get("performanceType")}if(this.get("audienceType")){a.audienceType=this.get("audienceType")}if(this.get("pushStatusID")){a.pushStatusID=this.get("pushStatusID")}if(this.get("dimensions")){a.dimensions=this.get("dimensions")}if(this.get("deviceType")){a.deviceType=this.get("deviceType")}if(this.get("className")){a.className=this.get("className")}if(this.get("refinement")){a.refinement=this.get("refinement")}return a},isCustomEvent:function(){return !!this.get("eventName")},isClassCountAnalytics:function(){return this.get("className")&&!this.get("endpoint")},trackEvent:function(a){var b={};if(this.get("deviceType")){b.deviceType=this.get("deviceType").toString()}if(this.get("className")){b.className=this.get("className").toString()}if(this.get("refinement")){b.refinement=this.get("refinement").toString()}b.isCustomEvent=this.isCustomEvent().toString();ParseDotCom.Analytics.track(a,b)},toJSON:function(){var a={};a.endpoint=this.get("endpoint");if(this.get("eventName")){a.eventName=this.get("eventName")}if(this.get("deviceType")){a.deviceType=this.get("deviceType")}if(this.get("className")){a.className=this.get("className")}if(this.get("refinement")){a.refinement=this.get("refinement")}if(this.get("dimensions")){a.dimensions=this.get("dimensions")}return{graph_data:a}},save:function(b){var a=this;$.ajax({url:this.get("baseUrl")+"custom_graphs",type:"POST",data:this.toJSON(),dataType:"json",success:function(d,c,e){a.set("seriesId",d.id);if(b&&b.success){b.success(a,c,e)}a.trackEvent("analytics_custom_graph_create")},error:function(e,c,d){if(b&&b.error){b.error(a,c,d)}}})},destroy:function(b){var a=this;$.ajax({url:this.get("baseUrl")+"custom_graphs/"+this.get("seriesId"),type:"DELETE",success:function(d,c,e){if(b&&b.success){b.success(a,c,e)}a.trackEvent("analytics_custom_graph_destroy")},error:function(e,c,d){if(b&&b.error){b.error(a,c,d)}}})}});Analytics.GraphState=Backbone.Model.extend({defaults:{stride:"day",selectedSeries:null,seriesOptions:null,selectedNavigation:null,app:null,outgoingRequests:0,fullScreen:false,customGraphs:[],customEvents:[],noData:true,previousDates:null,admin:false},initialize:function(){_.bindAll(this);if(_.isUndefined(this.get("baseUrl"))){this.set("baseUrl",this.get("app").dataRequestUrl())}if(this.get("pumaPerformance")){var b=Analytics.GraphState.PerformanceSeriesOptions[0];Analytics.GraphState.PerformanceSeriesOptions[0]=Analytics.GraphState.PerformanceSeriesOptions[3];Analytics.GraphState.PerformanceSeriesOptions[3]=b}this.set("fromDate",this.snapFromDate(moment().subtract("weeks",1)));this.set("toDate",this.snapToDate(new Date()));if(!this.get("selectedSeries")){var a=new Backbone.Collection();a.model=Analytics.Series;this.set("selectedSeries",a)}this.on("change:fromDate",this.updateAllDataUrl);this.on("change:toDate",this.updateAllDataUrl);this.on("change:stride",this.updateAllDataUrl);this.on("change:selectedNavigation",this.updateSeriesOptions);this.get("selectedSeries").on("add",this.cleanAddSeries);this.get("selectedSeries").on("swap",this.cleanSwapSeries);this.get("selectedSeries").on("add",this.assignSeriesColor);this.get("selectedSeries").on("add swap",this.updateDataUrl);_.each(this.get("customGraphs"),function(c){c.isCustom=true})},cleanAddSeries:function(a){a.unset("color",{silent:true});a.unset("displayId",{silent:true})},cleanSwapSeries:function(a){a.unset("displayId",{silent:true})},encodeDateAsParam:function(a){return Math.round(a.getTime()/1000)},updateSeriesOptions:function(){var a=this.get("selectedNavigation");var d=this.get("seriesOptions");if(!d){d=new Backbone.Collection();d.model=Analytics.Series}else{d.reset()}this.get("selectedSeries").reset();if(this.get("previousDates")){this.set("fromDate",this.get("previousDates").from);this.set("toDate",this.get("previousDates").to);this.unset("previousDates")}if(a==="events"){var h=_.union(Analytics.GraphState.EventsSeriesOptions,this.get("customGraphs"));d.add(_.compact(h))}else{if(a==="data"){d.add(_.compact(this.getClassesOptions()))}else{if(a==="audience"){d.add(_.compact(Analytics.GraphState.AudienceSeriesOptions))}else{if(a==="performance"){d.add(_.compact(Analytics.GraphState.PerformanceSeriesOptions));var c=moment().endOf("hour");var e=moment(c).subtract("hours",12);var b=moment().startOf("day");this.pushTemporaryDates(e.max(b).toDate(),c.toDate())}}}}var f=this.get("baseUrl");d.each(function(j){j.set("baseUrl",f)});this.set("seriesOptions",d);this.set({noData:true},{silent:true})},_classesOptionsCache:null,getClassesOptions:function(){if(!this._classesOptionsCache){this._classesOptionsCache=this.get("appSchema").map(function(c){var b=Parse.Schema.prettifyClassName(c.className);var a=b+" Count";var d={displayName:a,endpoint:"class_count",className:c.className,tooltipName:b+" objects",seriesId:"count_"+c.className,};return d})}return this._classesOptionsCache},snapFromDate:function(a){return moment(a).startOf("day").toDate()},snapToDate:function(a){return moment(a).endOf("day").toDate()},pushTemporaryDates:function(b,a){this.set("previousDates",{from:this.get("fromDate"),to:this.get("toDate")});this.set({fromDate:b,toDate:a})},updateDataUrl:function(b){var a=this;if(!this.get("selectedSeries").isEmpty()&&!_.isUndefined(b)&&!b.changedAttributes().dataUrl){var c={};var d=b.generateDataUrlParams();_.extend(d,{from:this.encodeDateAsParam(this.get("fromDate")),to:this.encodeDateAsParam(this.get("toDate")),time_zone_offset:-moment().zone()*60,stride:b.get("stride")||this.get("stride")});c.params=d;c.url=a.get("baseUrl")+"analytics";b.unset("dataUrl",{silent:true});b.set("dataUrl",c)}},updateAllDataUrl:function(){var a=this;this.get("selectedSeries").each(function(c,b,d){a.updateDataUrl(c)})},assignSeriesColor:function(b,e,c){var a=this;var d=_.find(this.getSeriesColors(),function(h){var f=a.get("selectedSeries").some(function(j){return h===j.get("color")});return !f});if(d){b.set("color",d)}else{b.set("color",this.getSeriesColors()[0])}},incrementOutgoingRequests:function(){this.set("outgoingRequests",this.get("outgoingRequests")+1)},decrementOutgoingRequests:function(){this.set("outgoingRequests",this.get("outgoingRequests")-1)},addSelectedSeries:function(a){if(this.selectedSeriesHasModel(a)){return false}return this.get("selectedSeries").add(a)},addFirstAvailableSeries:function(){var b=this.nextAvailableSeries();if(b){this.addSelectedSeries(b);this.set("noData",false);if(this.get("selectedNavigation")=="performance"){var a=this.nextAvailableSeries();if(a){this.addSelectedSeries(a)}}}else{this.set("noData",true)}},swapSelectedSeriesElement:function(a,b){b.set("color",a.get("color"));var c=this.get("selectedSeries").indexOf(a);this.get("selectedSeries").remove(a,{silent:true});this.get("selectedSeries").add(b,{silent:true,at:c});this.get("selectedSeries").trigger("swap",b);return b},nextAvailableSeries:function(){var a=this;var b=this.get("seriesOptions").find(function(d){var c=a.selectedSeriesHasModel(d);return c?false:d});return b?b:null},selectedSeriesHasModel:function(a){return this.get("selectedSeries").find(function(b){return a.get("seriesId")===b.get("seriesId")})},getGraphStrideOptions:function(){var b=(this.get("selectedNavigation")=="performance")?"minute":this.get("stride");var a=Analytics.GraphState.graphStrideOptions[b];return a||Analytics.GraphState.graphStrideOptions.day},getSeriesColors:function(){return Analytics.GraphState.SeriesColors},getCurrentNavigationUIOptions:function(){var a=_.findWhere(Analytics.GraphState.GraphNavigationOptions,{name:this.get("selectedNavigation")});return a?a.ui:{}},getSeriesOptionWithId:function(a){return this.get("seriesOptions").find(function(b){return a===b.get("seriesId")?b:false})}},{EventsSeriesOptions:[{displayName:"API Requests",endpoint:"api_request",tooltipName:"requests",seriesId:"api_requests"},{displayName:"Analytics Requests",endpoint:"analytics_request",tooltipName:"analytics requests",seriesId:"analytics_requests"},{displayName:"File Requests",endpoint:"file_request",tooltipName:"file requests",seriesId:"file_requests"},{displayName:"Push Notifications",endpoint:"push",tooltipName:"pushes",seriesId:"push_notifications"},{displayName:"App Opens",endpoint:"app_opened",tooltipName:"opens",seriesId:"app_opens"},{displayName:"Push Opens",endpoint:"app_opened_from_push",tooltipName:"opens",seriesId:"push_opens"}],AudienceSeriesOptions:[{displayName:"Daily Active Installations",endpoint:"audience",tooltipName:"daily active installations",seriesId:"daily_active_installations",audienceType:"daily_installations"},{displayName:"Weekly Active Installations",endpoint:"audience",tooltipName:"weekly active installations",seriesId:"weekly_active_installations",audienceType:"weekly_installations"},{displayName:"Monthly Active Installations",endpoint:"audience",tooltipName:"monthly active installations",seriesId:"monthly_active_installations",audienceType:"monthly_installations"},{displayName:"Daily Active Users",endpoint:"audience",tooltipName:"daily active users",seriesId:"daily_active_users",audienceType:"daily_users"},{displayName:"Weekly Active Users",endpoint:"audience",tooltipName:"weekly active users",seriesId:"weekly_active_users",audienceType:"weekly_users"},{displayName:"Monthly Active Users",endpoint:"audience",tooltipName:"monthly active users",seriesId:"monthly_active_users",audienceType:"monthly_users"}],PerformanceSeriesOptions:[{displayName:"Total Requests",endpoint:"performance",tooltipName:"total req/sec",seriesId:"total_requests",performanceType:"total_requests",hideMarker:true},{displayName:"Request Limit",endpoint:"performance",tooltipName:"req/sec limit",seriesId:"request_limit",performanceType:"request_limit",hideMarker:true,step:"left"},{displayName:"Dropped Requests",endpoint:"performance",tooltipName:"dropped req/sec",seriesId:"dropped_requests",performanceType:"dropped_requests",hideMarker:true},{displayName:"Served Requests",endpoint:"performance",tooltipName:"served req/sec",seriesId:"served_requests",performanceType:"served_requests",hideMarker:true}],SeriesColors:["#4da6e9","#f4ac60","#89A54E"],GraphNavigationOptions:[{displayName:"Audience",name:"audience",ui:{breakdown:false,graph:true,requireSeries:true,}},{displayName:"Events",name:"events",ui:{breakdown:true,graph:true,requireSeries:true,}},{displayName:"Data",name:"data",ui:{breakdown:false,graph:true,requireSeries:true,}},{displayName:"Retention",name:"retention",ui:{breakdown:false,graph:false,requireSeries:false,}},{displayName:"Performance",name:"performance",ui:{breakdown:false,graph:true,requireSeries:true,}}],graphStrideOptions:{minute:{dateFormat:"MM/DD HH:mm",tooltipFormat:"MMM DD, HH:mm ZZ",minTickInterval:3600*1000},hour:{dateFormat:"MM/DD HH:mm",tooltipFormat:"MMM DD, HH:mm ZZ",minTickInterval:3600*1000},day:{dateFormat:"MMM D",tooltipFormat:"MMM DD, YYYY",minTickInterval:24*3600*1000}}});App.Models.User=Backbone.Model.extend({firstName:function(){if(this.get("name")){return App.Models.User.separateName(this.get("name")).firstName}return""},lastName:function(){if(this.get("name")){return App.Models.User.separateName(this.get("name")).lastName}return""}},{separateName:function(a){matches=a.match(/(.*?)\s+(.*)/)||[];if(matches.length>=3){return{firstName:matches[1],lastName:matches[2]}}else{return{firstName:a,lastName:""}}}});var Trait=(function(){return({isIE:!!document.documentMode,isFirefox:typeof InstallTrigger!=="undefined",isSafari:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,isChrome:!!window.chrome})})();(function(){var c="http://www.w3.org/2000/svg";var a=function(d,k,e,j){var n;if(j){n=document.createElementNS(c,d)}else{n=document.createElement(d)}if(e){if(!Array.isArray(e)){e=[e]}for(var h=0;h<e.length;h++){var f=e[h];if(typeof f==="string"||typeof f==="number"){f=document.createTextNode(f)}if(f){n.appendChild(f)}}}if(k){for(var l in k){if(l==="style"){for(var m in k[l]){n.style[m]=k[l][m]}}else{if(l.indexOf("data-")===0||j){n.setAttribute(l,k[l])}else{n[l]=k[l]}}}}return n};var b=window.UI={tag:function(e,d,f){return a(e,d,f,false)},svgTag:function(e,d,f){return a(e,d,f,true)},createIcon:function(e){var d=document.createElement("i");d.className="icon_"+e;return d},createTooltip:function(f,d){var e="tooltip_wrap";switch(d.direction){case"left":e+=" to_left";break;case"top-left":e+=" to_top_left";break;case"top-right":e+=" to_top_right";break}return b.tag("span",{className:e},[b.tag("span",{className:"tip"},f)])},hasAncestor:function(e,d){var f=e.parentNode;while(f){if(f===d){return true}f=f.parentNode}return false},addClass:function(f,e){var d=new RegExp("\\b"+e+"\\b");if(!f.className.match(d)){f.className+=" "+e}},removeClass:function(f,e){var d=new RegExp("\\s*\\b"+e+"\\b","g");f.className=f.className.replace(d,"")},toggleClass:function(e,d,f){if(f===undefined){f=!b.hasClass(e,d)}if(f){b.addClass(e,d)}else{b.removeClass(e,d)}},hasClass:function(f,e){var d=new RegExp("\\b"+e+"\\b");return !!f.className.match(d)},getStyle:function(d,e){if(d.currentStyle){return d.currentStyle[styleProp]}if(window.getComputedStyle){return document.defaultView.getComputedStyle(d,null).getPropertyValue(e)}return""},documentPosition:function(d){var f={x:0,y:0};var e=d;while(e){f.x+=e.offsetLeft;f.y+=e.offsetTop;e=e.offsetParent}return f},windowPosition:function(d){var e=b.documentPosition(d);e.x-=window.scrollX;e.y-=window.scrollY;return e},delegate:function(j,h,e,d){if(j==="focus"||j==="blur"){throw"Focus and blur delegation are not yet supported"}var k=function(){return false};if(typeof e==="string"){e=e.toUpperCase();k=function(l){return l.tagName===e}}else{if(e.className){var f=new RegExp("\\b"+e.className+"\\b");k=function(l){return l.className.match(f)}}else{if(e.id){k=function(l){return l.id===e.id}}}}h.addEventListener(j,function(m){var l=m.target;while(l&&l!==document){if(k(l)){d.call(l,m)}l=l.parentNode}})},prettyNumber:function(e){var h;var d=Math.ceil(Math.log(Math.abs(e)+1)/Math.LN10);if(d>6&&d<10){h=(e/1000000);if((h|0)===h||Math.round(e%1000000/100000)===0){return(h|0)+"M"}else{return(h|0)+"."+Math.round(e%1000000/100000)+"M"}}else{if(d>5){h=(e/1000);if((h|0)===h||Math.round(e%1000/100)===0){return(h|0)+"K"}else{return(h|0)+"."+Math.round(e%1000/100)+"K"}}else{if(d>3){var f=((e%1000)|0);if(f<10){f="00"+f}else{if(f<100){f="0"+f}}return((e/1000)|0)+","+f}else{return(e|0)+""}}}},Animate:{show:function(e,d){if(d==="undefined"){d=0}e.style.display="block";e.style.opacity=0;setTimeout(function(){e.style.opacity=1},d)},hide:function(e,d){if(window.getComputedStyle(e).opacity>0){if(typeof d==="undefined"){d=500}e.style.opacity=0;setTimeout(function(){e.style.display="none"},d)}}},ComponentProto:{attach:function(d){if(this.node){d.appendChild(this.node);return this}return null},remove:function(){if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);return this}return null}}}})();(function(d,j,m){if(!d){return}var b=d.StringEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||"";this.render();this.value=((typeof n.value==="string")&&n.value)||"";if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};b.prototype={render:function(){var n=this.node=document.createElement("input");n.type="text";n.className="editor_string";n.placeholder=this._placeholder},reset:function(){this.value=""},focus:function(){this.node.focus()},};Object.defineProperty(b.prototype,"value",{get:function(){return this.node.value},set:function(n){this.node.value=n}});Object.defineProperty(b.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this.node.disabled=n},});j.extend(b.prototype,d.ComponentProto);var a=d.NumberEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||"";this.render();this.value=((typeof n.value==="number")&&n.value)||0;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};a.prototype={render:function(){var n=this.node=document.createElement("input");n.type="text";n.className="editor_number";n.placeholder=this._placeholder},reset:function(){this.value=null},focus:function(){this.node.focus()},};Object.defineProperty(a.prototype,"value",{get:function(){var n=this.node.value;if(n===""||isNaN(n)){return NaN}return +n},set:function(n){if(!isNaN(n)){this.node.value=n}}});Object.defineProperty(a.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this.node.disabled=n}});j.extend(a.prototype,d.ComponentProto);var h=d.BooleanEditor=function(n){if(!n){n={}}this.name=n.name||"boolean_editor";this.render();this.value=n.value||false;if(n.parent){this.attach(n.parent)}};h.prototype={render:function(){this.input=new d.Dropdown({optionSet:["true","false"],name:this.name,value:"false"});this.node=document.createElement("span");this.node.className="editor_boolean";this.input.attach(this.node)},reset:function(){this.value=false},focus:function(){this.node.focus()},};Object.defineProperty(h.prototype,"value",{get:function(){return this.input.value==="true"},set:function(n){this.input.value=n?"true":"false"}});j.extend(h.prototype,d.ComponentProto);var f=d.DateEditor=function(n){if(!n){n={}}this._value=new Date();if(n.value&&n.value.constructor===Date){this._value=n.value}this._disabled=!!n.disabled;this.render();if(n.parent){this.attach(n.parent)}};f.prototype={render:function(){var n=this.node=document.createElement("input");n.type="text";n.className="editor_date";n.disabled=this._disabled;n.addEventListener("focus",this.showIso.bind(this),false);n.addEventListener("change",this.parseContents.bind(this),false);n.addEventListener("blur",this.showHumanReadable.bind(this),false);this.showHumanReadable()},reset:function(){this.value=new Date()},showIso:function(){this.node.value=this._value.toISOString()},showHumanReadable:function(){this.node.value=m(this._value).format("MMM D, YYYY, H:mm")},parseContents:function(){var n=new Date(this.node.value);if(!isNaN(n)){this._value=n}}};Object.defineProperty(f.prototype,"value",{get:function(){return this._value},set:function(n){if(n&&n.constructor===Date){this._value=n}this.node.blur();this.showHumanReadable()}});j.extend(f.prototype,d.ComponentProto);var k=d.GeopointEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||{latitude:"Lat",longitude:"Lon"};this.render();this.value=n.value;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};k.prototype={render:function(){var n=this.node=document.createElement("span");n.className="editor_geopoint";this._lat=document.createElement("input");this._lat.placeholder=this._placeholder.latitude||"";this._lon=document.createElement("input");this._lon.placeholder=this._placeholder.longitude||"";n.appendChild(this._lat);n.appendChild(document.createTextNode(","));n.appendChild(this._lon)},reset:function(){this.value={latitude:null,longitude:null}},focus:function(){this._lat.focus()},};Object.defineProperty(k.prototype,"value",{get:function(){var n=parseFloat(this._lat.value);var o=parseFloat(this._lon.value);if(isNaN(n)||isNaN(o)){return null}return{latitude:n,longitude:o}},set:function(n){if(typeof n!=="object"){return}if(n.hasOwnProperty("latitude")&&n.hasOwnProperty("longitude")){if(!isNaN(n.latitude)&&!isNaN(n.longitude)){this._lat.value=n.latitude;this._lon.value=n.longitude}}}});Object.defineProperty(k.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this._lat.disabled=n;this._lon.disabled=n},});j.extend(k.prototype,d.ComponentProto);var l=d.ArrayEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||"";this.render();this.value=n.value;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};l.prototype={render:function(){var n=this.node=document.createElement("textarea");n.className="editor_array";n.placeholder=this._placeholder},reset:function(){this.value=[]},focus:function(){this.node.focus()},};Object.defineProperty(l.prototype,"value",{get:function(){var o=this.node.value.trim();try{var n=JSON.parse(o);if(Array.isArray(n)){return n}}catch(p){}return null},set:function(o){if(Array.isArray(o)){this.node.value=JSON.stringify(o)}else{if(typeof o==="string"){try{if(Array.isArray(JSON.parse(o))){this.node.value=o}}catch(n){}}}}});Object.defineProperty(l.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this.node.disabled=n},});j.extend(l.prototype,d.ComponentProto);var e=d.ObjectEditor=function(n){if(!n){n={}}this._placeholder=n.placeholder||"";this.render();this.value=n.value;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};e.prototype={render:function(){var n=this.node=document.createElement("textarea");n.className="editor_object";n.placeholder=this._placeholder},reset:function(){this.value={}},focus:function(){this.node.focus()},};Object.defineProperty(e.prototype,"value",{get:function(){var n=this.node.value;try{var p=JSON.parse(n);if(typeof p==="object"&&!Array.isArray(p)){return p}}catch(o){}return null},set:function(p){if(typeof p==="object"&&!Array.isArray(p)){this.node.value=JSON.stringify(p)}else{if(typeof p==="string"){try{var o=JSON.parse(p);if(typeof o==="object"&&!Array.isArray(o)){this.node.value=p}}catch(n){}}}}});Object.defineProperty(e.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this.node.disabled=n}});j.extend(e.prototype,d.ComponentProto);var c=d.FileEditor=function(n){if(!n){n={}}this._name=null;this.applicationId=n.applicationId||"";this.restKey=n.restKey||"";this._onchange=n.onchange||null;this.onerror=n.onerror||null;this.serverURL="https://api.parse.com";if(typeof n.serverURL==="string"){this.serverURL=n.serverURL}this.render();this.value=n.value;if(n.disabled){this.disabled=true}if(n.parent){this.attach(n.parent)}};c.getFilenameFromPath=function(p){var o=p.lastIndexOf("/");var n=p.substr(o+1).match(/[a-f0-9]{8}\-[a-f0-9]{4}\-[a-f0-9]{4}\-[a-f0-9]{4}\-[a-f0-9]{12}\-(.+)$/);if(n){return n[1]}return p.substr(o+1)};c.prototype={render:function(){var o=this.node=document.createElement("span");o.className="editor_file";var p=this._link=document.createElement("a");p.appendChild(document.createTextNode("Upload a file"));p.setAttribute("target","_blank");o.appendChild(p);var n=this._file=document.createElement("input");n.type="file";n.addEventListener("change",this._uploadFile.bind(this));o.appendChild(n);o.appendChild(d.createIcon("parseData"))},_uploadFile:function(){var n=this;var p=this._file.files[0];if(!p){return}if(p.size>=10*1024*1024){if(n.onerror){n.onerror("File is too large (max 10MB)")}return}var q=new XMLHttpRequest();var o=this.serverURL+"/1/files/"+p.name;q.open("POST",o,true);q.setRequestHeader("X-Parse-Application-ID",this.applicationId);q.setRequestHeader("X-Parse-REST-API-Key",this.restKey);q.onreadystatechange=function(){if(q.readyState===4){n.disabled=false;var s=null;if(q.status===201){var r=JSON.parse(q.responseText);n.value=r.url;s=r.url}else{if(n.onerror){n.onerror("An error occurred while uploading the file")}n.reset()}if(n._onchange){n._onchange(s)}}};this.disabled=true;this._link.innerHTML="Uploading&hellip;";q.send(p)},reset:function(){this._name=null;this._file.value=null;this._link.removeAttribute("href");this._link.innerHTML="Upload a file"}};Object.defineProperty(c.prototype,"value",{get:function(){return this._name},set:function(n){if(typeof n!=="string"||!n.length){return}this._name=n;this._link.setAttribute("href",n);this._link.innerHTML=j.escape(decodeURIComponent(c.getFilenameFromPath(n)))}});Object.defineProperty(c.prototype,"disabled",{get:function(){return !!this._disabled},set:function(o){var n=!!o;this._disabled=n;this._file.disabled=n;if(n){this.node.className+=" disabled"}else{this.node.className=this.node.className.replace(/\s+disabled/,"")}}});j.extend(c.prototype,d.ComponentProto)})(UI,_,moment);(function(f,c){if(!f){return}var b=function(k,j){return j.value-k.value};var h=function(k,j){return k+j.value};var d=function(k,j){return k+j};var e=f.BarChart=function(j){this.segments=j.segments?j.segments.slice(0):[];this.segments.sort(b);this.sum=this.segments.reduce(h,0);this.showPercent=!!j.showPercent;this.render();if(j.parent){this.attach(j.parent)}};e.prototype={render:function(){var k=[];for(var l=0,j=this.segments.length;l<j;l++){var o=this.segments[l].value;var m=o/this.segments[0].value*100;var n=f.prettyNumber(o);if(this.showPercent){n=Math.round(o/this.sum*100)+"% ("+n+")"}k.push(f.tag("tr",{},[f.tag("td",{className:"no_overflow"},this.segments[l].label),f.tag("td",{},f.tag("div",{className:"bar_width",style:{width:m+"%"}},f.tag("div",{className:"bar"},f.tag("div",{className:"bar_count"},n))))]))}this.node=f.tag("table",{className:"chart_bars"},k)}};c.extend(e.prototype,f.ComponentProto);var a=f.DonutChart=function(j){this.width=j.width||200;this.height=j.height||200;this.segments=j.segments||[];this.sum=this.segments.reduce(d,0);this.label=j.label||"";this.render();if(j.parent){this.attach(j.parent)}};a.prototype={render:function(){var s=(this.width/2)|0;var p=(this.height/2)|0;var j=Math.min(s,p)*0.9;var m=s+j;var k=p;var q=0;var v=[f.svgTag("text",{"class":"donut_value","text-anchor":"middle",x:s,y:p},f.prettyNumber(this.sum))];var x=[];for(var t=0,w=this.segments.length;t<w;t++){var l=this.segments[t]/this.sum*2*Math.PI;var o=Math.min(l,Math.PI)+q;var z=j*Math.cos(o)+s;var y=j*Math.sin(o)+p;var A=["M",s,p,"L",m,k,"A",j,j,0,0,1,z,y];if(l>Math.PI){o=l+q;z=j*Math.cos(o)+s;y=j*Math.sin(o)+p;A=A.concat(["A",j,j,0,0,1,z,y])}A.push("Z");var n=f.svgTag("path",{d:A.join(" ")});if(typeof n.style.webkitTransformOrigin==="string"){n.style.webkitTransformOrigin=s+"px "+p+"px"}else{n.style.transformOrigin=s+"px "+p+"px"}x.push(n);v.push(f.svgTag("text",{"class":"donut_value","text-anchor":"middle",x:s,y:p},f.prettyNumber(this.segments[t])));m=z;k=y;q=o}v.push(f.svgTag("text",{"class":"donut_label","text-anchor":"middle",x:s,y:p+20},this.label));var u=f.svgTag("svg",{width:this.width,height:this.height},x.concat([f.svgTag("circle",{"class":"donut_center",cx:s,cy:p,r:Math.min(s,p)*0.8})]).concat(v));this.node=f.tag("div",{className:"chart_donut",style:{width:this.width+"px",height:this.height+"px"}},u)}};c.extend(a.prototype,f.ComponentProto)})(UI,_);(function(c,b){if(!c){return}var a=c.CircleBar=function(d){this.radius=d.radius||57;this.circ=2*Math.PI*this.radius;this.strokeWidth=d.strokeWidth||8;this.render();this.setProgress(d.progress||0);if(d.parent){this.attach(d.parent)}};a.prototype={setProgress:function(e){this.progress=e;var d=this.circ-(this.progress*this.circ);this.node.querySelector(".circle_progress").setAttribute("stroke-dashoffset",d)},render:function(){var f=this.radius+this.strokeWidth;var e=c.svgTag("circle",{fill:"none",r:this.radius,cx:f,cy:f,"stroke-width":this.strokeWidth});e.setAttribute("class","circle_base");var d=c.svgTag("circle",{fill:"none","stroke-dasharray":this.circ,"stroke-dashoffset":this.circ,r:this.radius,cx:f,cy:f,"stroke-width":this.strokeWidth});d.setAttribute("class","circle_progress");d.style["transform-origin"]=f+"px "+f+"px 0px";var h=c.svgTag("svg",{width:this.radius*2+this.strokeWidth*2,height:this.radius*2+this.strokeWidth*2},[e,d,c.tag("div",{className:"content"})]);this.node=c.tag("div",{className:"ui_circle_progress_bar"},h)}};b.extend(a.prototype,c.ComponentProto)})(UI,_);(function(c,a){if(!c||!a){return}if(!a.config("forceHandCursor")){a.config({forceHandCursor:true})}var b=c.CopyBox=function(d){if(!d){d={}}this.render(d.multiline);if(d.multiline){this.node.className+=" multiline"}this.setValue(d.value||"");if(d.parent){this.attach(d.parent)}};b.prototype={render:function(){var d=this.node=document.createElement("div");d.className="copybox";var h=this._button=document.createElement("a");h.appendChild(document.createTextNode("Copy"));d.appendChild(h);var f=this._text=document.createElement("div");d.appendChild(f);var e=new a(h);e.on("complete",function(){var j=this;this.innerHTML="Copied!";setTimeout(function(){j.innerHTML="Copy"},3000)})},setValue:function(d){this._text.innerHTML=d;this._button.setAttribute("data-clipboard-text",d)}};_.extend(b.prototype,c.ComponentProto)})(UI,ZeroClipboard);(function(a){a.initMenus=function(){var b=document.getElementsByClassName("app_selector")[0].children;var c=function(f){if(b[0].className.indexOf("open")<0){b[0].className+=" open";f.stopPropagation();document.body.addEventListener("click",d)}};var d=function(h){var f=h.target;while(f){if(f===b[1]){return}f=f.parentNode}b[0].className=b[0].className.replace(/\s*open/,"");document.body.removeEventListener("click",d)};b[0].addEventListener("click",c)}})(UI);(function(c,a){if(!c){return}var b=c.DataTable=function(d){this.rows=d.rows||[];this.header=d.header||[];this.hideHeader=d.hideHeader||false;this.sortable=!!d.sortable;this.maxLength=d.maxLength||-1;this.render();if(d.parent){this.attach(d.parent)}};b.prototype={sort:function(h){var f=this;var k=h.parentNode;var e=[].indexOf.call(k.children,h);if(e===this._sortIdx){this._sortDesc=!this._sortDesc}else{this._sortDesc=false}this._sortIdx=e;var j=a.sortBy(this.rows,function(l){return l[e]});if(this._sortDesc){j.reverse()}this.rows=j;var d=this.node.parentNode;this.remove();this.render();this.attach(d)},render:function(){var n=this;if(this.maxLength>0){this.rows.map(function(j){j.map(function(p,q){if(p.length>n.maxLength){p=p.slice(0,n.maxLength-3).trim()+"..."}j[q]=p})})}var o=[];for(var f=0;f<this.rows.length;f++){var k=[];for(var e=0;e<this.rows[f].length;e++){k.push(c.tag("td",{},this.rows[f][e]))}o.push(c.tag("tr",{},k))}if(!this.hideHeader){var d=[];for(f=0;f<this.header.length;f++){var m={className:""};if(f===this._sortIdx){m.className=this._sortDesc?"sort_desc ":"sort_asc "}var l=[this.header[f]];if(typeof this.header[f]==="object"&&this.header[f].hasOwnProperty("content")){if(this.header[f].hasOwnProperty("className")){m.className+=this.header[f].className}l=[this.header[f].content]}d.push(c.tag("th",m,l))}var h=c.tag("tr",{},d);o.unshift(h);if(this.sortable){c.addClass(h,"sortable");c.delegate("click",h,"th",function(j){n.sort(j.target)})}}this.node=c.tag("div",{className:"ui_data_table"},c.tag("table",{},o))}};a.extend(b.prototype,c.ComponentProto)})(UI,_);(function(d,c){if(!d){return}var b=["Su","Mo","Tu","We","Th","Fr","Sa"];var a=d.Datepicker=function(e){this.origin=new Date();this.origin.setHours(0);this.origin.setMinutes(0);this.origin.setSeconds(0);this.origin.setMilliseconds(0);this._value=e.value||new Date();this.monthOffset=this.getMonthOffset(this._value);this.stringFormat=e.stringFormat||"YYYY-MM-DD";this.name=e.name||"date";this.onChange=e.onChange||null;this.hideOnChange=!!e.hideOnChange;this.preventFuture=!!e.preventFuture;this.preventPast=!!e.preventPast;this.timeEntry=!!e.timeEntry;this.unstyled=!!e.unstyled;this.render();if(e.parent){this.attach(e.parent)}};a.prototype={getMonthOffset:function(e){return(e.getFullYear()-this.origin.getFullYear())*12+e.getMonth()-this.origin.getMonth()},render:function(){var q=this;this.input=d.tag("input",{type:"text",className:"date_input",name:this.name,value:this.formattedValue()});this.monthHeader=d.tag("span");var f=d.tag("a",{href:"#",className:"date_prev"});var l=d.tag("a",{href:"#",className:"date_next"});f.addEventListener("click",this.decrementMonth.bind(this));l.addEventListener("click",this.incrementMonth.bind(this));var k=d.tag("div",{className:"date_header"},[f,this.monthHeader,l]);var n=[];var j=0;for(;j<7;j++){n.push(d.tag("span",{},b[j]))}n.push(d.tag("div",{className:"week_buffer"}));var p=this.name+"_day";var m=(new Date()).getDate();for(j=1;j<=31;j++){var o=p+"["+j+"]";n.push(d.tag("input",{type:"radio",name:p,id:o,value:j}));var h={htmlFor:o};if(!this.monthOffset&&j===m){h.className="today"}n.push(d.tag("label",h,j+""))}this.dateSelector=d.tag("div",{},n);this.dateButtons=this.dateSelector.getElementsByTagName("input");this.popup=d.tag("div",{className:"date_popup"},[k,this.dateSelector]);var e="date_picker";if(!this.unstyled){e+=" styled";if(this.timeEntry){e+=" time_entry"}}this.node=d.tag("div",{className:e},[this.input,this.popup]);d.delegate("change",this.dateSelector,"input",function(){q.value=new Date(q.origin.getFullYear(),q.origin.getMonth()+q.monthOffset,this.value,q.value.getHours(),q.value.getMinutes());if(q.hideOnChange){q.hide()}});this.input.addEventListener("focus",function(){q.show()});this.input.addEventListener("change",function(){var r=c(this.value,q.stringFormat);if(r.isValid()){r.second(0);if(!q.timeEntry){r.minute(0).hour(0)}r.year(q.origin.getFullYear());q.value=r.toDate()}else{q.input.value=q.formattedValue()}});this.input.addEventListener("keydown",function(r){if(r.keyCode===13){q.hide();q.input.blur()}});this._updateMonth()},incrementMonth:function(f){this.monthOffset++;this._updateMonth();f.preventDefault()},decrementMonth:function(f){this.monthOffset--;this._updateMonth();f.preventDefault()},show:function(){if(this.popup.style.display==="block"){return}this.popup.style.display="block";this.popup.style.bottom="initial";this.popup.style.top="30px";this.popup.style.right="initial";this.popup.style.left="0px";var h=d.windowPosition(this.popup);var e=window.innerHeight;var f=document.getElementsByClassName("dashboard_content")[0];if(f){e=f.scrollHeight}if(e-h.y<250){this.popup.style.top="initial";this.popup.style.bottom="30px"}if(window.innerWidth-h.x<220){this.popup.style.right="0px";this.popup.style.left="initial"}this.popup.style.visibility="visible";if(!this._hideHandler){this._hideHandler=(function(j){if(!d.hasAncestor(j.target,this.node)){this.hide()}}).bind(this)}document.body.addEventListener("mousedown",this._hideHandler)},hide:function(){this.popup.style.display="none";this.popup.style.visibility="hidden";this.popup.style.position="absolute";document.body.removeEventListener("mousedown",this._hideHandler)},_updateMonth:function(){var l=new Date(this.origin.getFullYear(),this.origin.getMonth()+this.monthOffset);var n=new Date(l.getYear(),l.getMonth()+1,0).getDate();var k="date_selector unselectable start_"+l.getDay()+" has_"+n;var m=c(l).format("MMMM YYYY");var j=-1;if(l.getFullYear()===this.value.getFullYear()&&l.getMonth()===this.value.getMonth()){j=this.value.getDate()-1}if(this.monthOffset>0){k+=" future"}else{if(this.monthOffset<0){k+=" past"}}if(this.preventFuture){k+=" prevent_future"}if(this.preventPast){k+=" prevent_past"}if(this.monthOffset){var f=this.dateSelector.getElementsByClassName("today");if(f[0]){d.removeClass(f[0],"today")}}else{d.addClass(this.dateSelector.getElementsByTagName("label")[(new Date()).getDate()-1],"today")}if(Trait.isIE){this.dateButtons=this.dateSelector.getElementsByTagName("input")}for(var h=0,e=this.dateButtons.length;h<e;h++){this.dateButtons[h].checked=(h===j)}this.monthHeader.innerHTML=m;this.dateSelector.className=k},formattedValue:function(){return c(this.value).format(this.stringFormat)}};Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(f){if(f.constructor!==Date){return}if((this.preventFuture&&f>this.origin)||(this.preventPast&&f<this.origin)){this._updateMonth();return}var e=this._value;this._value=f;this.input.value=this.formattedValue();if(f!==e){this.monthOffset=this.getMonthOffset(f);this._updateMonth();if(this.onChange){this.onChange(f)}}}});_.extend(a.prototype,d.ComponentProto)})(UI,moment);(function(b){if(!b){return}var a=b.Daterange=function(c){this.name=c.name||"daterange";this.compactOnChange=!!c.compactOnChange;this.preventFuture=!!c.preventFuture;this.expandedFormat=c.expandedFormat||"MMM D, YYYY";this.compactFormat=c.compactFormat||"MMM D";this.timeEntry=!!c.timeEntry;this.onChange=c.onChange||null;this.render(c.value);if(c.parent){this.attach(c.parent)}};a.prototype={render:function(d){var c=this;this.node=b.tag("div",{className:"date_range"},b.tag("label",{},"From:"));this.from=new b.Datepicker({parent:this.node,name:this.name+"_from_date",value:d&&d.from,stringFormat:this.compactFormat,onChange:this.fromChanged.bind(this),hideOnChange:true,preventFuture:this.preventFuture,timeEntry:this.timeEntry,unstyled:true});this.node.appendChild(b.tag("span",{},"-"));this.node.appendChild(b.tag("label",{},"To:"));this.to=new b.Datepicker({parent:this.node,name:this.name+"_to_date",value:d&&d.to,stringFormat:this.compactFormat,onChange:this.toChanged.bind(this),hideOnChange:true,preventFuture:this.preventFuture,timeEntry:this.timeEntry,unstyled:true});this.node.appendChild(b.createIcon("calendar"));this.node.addEventListener("mousedown",this.expand.bind(this))},expand:function(){if(b.hasClass(this.node,"expanded")){return}b.addClass(this.node,"expanded");this.from.stringFormat=this.expandedFormat;this.to.stringFormat=this.expandedFormat;this.from.value=this.from.value;this.to.value=this.to.value;if(!this._compactHandler){this._compactHandler=(function(c){if(!b.hasAncestor(c.target,this.node)){this.compact()}}).bind(this)}document.body.addEventListener("mousedown",this._compactHandler)},compact:function(){this.from.input.blur();this.to.input.blur();b.removeClass(this.node,"expanded");this.from.stringFormat=this.compactFormat;this.to.stringFormat=this.compactFormat;this.from.value=this.from.value;this.to.value=this.to.value;document.body.removeEventListener("mousedown",this._compactHandler)},fromChanged:function(c){if(this.compactOnChange){this.compact()}if(c>this.to.value){this.to.value=c}if(this.onChange){this.onChange(this.value)}},toChanged:function(c){if(this.compactOnChange){this.compact()}if(c<this.from.value){this.from.value=c}if(this.onChange){this.onChange(this.value)}}};Object.defineProperty(a.prototype,"value",{get:function(){return{to:this.to.value,from:this.from.value}},set:function(c){if(typeof c!=="object"||!c.hasOwnProperty("to")||!c.hasOwnProperty("from")){return}this.to.value=c.to;this.from.value=c.from}});_.extend(a.prototype,b.ComponentProto)})(UI);(function(d,e,c){if(!d){return}var b=function(f){f.preventDefault()};var a=d.Dropdown=function(f){if(!f){f={}}this.name=f.name;this.values=f.values||{};this.optionSet=f.optionSet||c.keys(this.values)||[];this.defaultOption=f.defaultOption||null;this.onChange=f.onChange||null;this.classes=f.classes||{};this.style=f.style||null;this.render();if(typeof f.value!=="undefined"){this.value=f.value}else{if(typeof f.defaultOption!=="undefined"){this.value=f.defaultOption;this.node.children[0].checked=true}}if(f.disabled){this.disabled=true}if(f.parent){this.attach(f.parent)}};a.prototype={render:function(){var j=[];if(this.defaultOption){var m=this.name+"[-1]";j.push(d.tag("input",{type:"radio",name:this.name,id:m,value:"",checked:(this.optionSet.length===0)}));j.push(d.tag("label",{htmlFor:m},this.defaultOption))}for(var n=0,o=this.optionSet.length;n<o;n++){var k=this.optionSet[n];if(this.values[k]!==undefined){k=this.values[k]}var r=false;var h=this.name+"["+n+"]";j.push(d.tag("input",{type:"radio",name:this.name,id:h,value:k,checked:n===0}));var s=this.classes[k]||"";j.push(d.tag("label",{htmlFor:h,className:s},this.optionSet[n]))}var q=this.style?"ui_dropdown "+this.style:"ui_dropdown";var f=this.node=d.tag("span",{className:q,tabIndex:-1},j);var p=this.onChange;var l=this.node;if(p){d.delegate("change",f,"input",function(){p(this.value,l)})}if(e&&e.isSafari){d.delegate("change",f,"input",function(){f.blur()})}}};Object.defineProperty(a.prototype,"value",{get:function(){var f=this.node.children;for(var h in f){if(f[h].tagName==="INPUT"&&f[h].checked){return f[h].value}}return null},set:function(f){for(var j in this.node.children){var h=this.node.children[j];h.checked=(h.tagName==="INPUT"&&h.value===f)}}});Object.defineProperty(a.prototype,"disabled",{get:function(){return !!this._disabled},set:function(f){if(f){this._disabled=true;this.node.className+=" disabled";this.node.addEventListener("mousedown",b)}else{this._disabled=false;this.node.className=this.node.className.replace(/\s+disabled/g,"");this.node.removeEventListener("mousedown",b)}}});c.extend(a.prototype,d.ComponentProto)})(UI,Trait,_);(function(c,a){if(!c){return}var b=c.LiveTOC=function(d){this.parent=d.parent;this.content=d.content;this.scrollContent=d.scrollContent||d.content;this.throttleInterval=d.throttleInterval||300;this.alignment=d.alignment||"center";this.onSelect=d.onSelect||null;this.currentItem=null;this._headerHeights={};this._sortedHeights=[];this.render();if(d.parent){this.attach(d.parent)}this.initializeEventHandlers()};b.prototype={initializeEventHandlers:function(){var d=a.throttle(this.handleScroll.bind(this),this.throttleInterval);if(this.scrollContent===document.getElementsByTagName("body")[0]){document.addEventListener("scroll",d)}else{this.scrollContent.addEventListener("scroll",d)}},render:function(){this.scrollContent.style.position="relative";var d=this.buildTOC();this.node=c.tag("ul",{className:"ui_live_toc"},d);$(document).ready(function(f){this.updateHeights()}.bind(this))},buildTOC:function(){var h=this.content.querySelectorAll("h1, h2, h3");var j=[];var f,n;for(var k=0;k<h.length;k++){var e=h[k];var m=$(e).text();var l=e.getElementsByTagName("a")[0];if(l===undefined){continue}var d=l.name;if(e.tagName==="H1"){f=c.tag("ul",{className:"ui_live_toc_major_list"});j.push(c.tag("li",{"data-name":d,className:"ui_live_toc_main"},[c.tag("a",{href:"#"+d},m),f]));n=undefined}else{if(e.tagName==="H2"&&f!==undefined){n=c.tag("ul",{className:"ui_live_toc_minor_list"});f.appendChild(c.tag("li",{"data-name":d,className:"ui_live_toc_major"},[c.tag("a",{href:"#"+d},m),n]))}else{if(e.tagName==="H3"&&f!==undefined&&n!==undefined){n.appendChild(c.tag("li",{"data-name":d,className:"ui_live_toc_minor"},[c.tag("a",{href:"#"+d},m.toLowerCase())]))}}}}return j},updateHeights:function(){var h={};var j=[];var k=this.content.querySelectorAll("h1, h2, h3");for(var f=0;f<k.length;f++){var e=k[f].getElementsByTagName("a")[0];var d=e.name;h[k[f].offsetTop]=d;j.push(k[f].offsetTop)}this._headerHeights=h;this._sortedHeights=j.sort(function(m,l){return m-l})},handleScroll:function(){var d=this.scrollContent.scrollTop;if(d===0){d=$(window).scrollTop()}var n=this.scrollContent.offsetHeight;var m;if(this.alignment==="top"){m=d}else{if(this.alignment==="bottom"){m=n+d}else{m=n/2+d}}var k=this._sortedHeights[0];for(var f=0;f<this._sortedHeights.length;f++){if(this._sortedHeights[f]>m){break}k=this._sortedHeights[f]}var l=this._headerHeights[k];if(this.currentItem===null||this.currentItem.getAttribute("data-name")!==l){var h=this.node.getElementsByTagName("li");for(var e=0;e<h.length;e++){c.removeClass(h[e],"selected")}this.currentItem=this.node.querySelector('[data-name="'+l+'"]');c.addClass(this.currentItem,"selected");if(c.hasClass(this.currentItem,"ui_live_toc_minor")){c.addClass(this.currentMajorSection(),"selected")}if(c.hasClass(this.currentItem,"ui_live_toc_major")||c.hasClass(this.currentItem,"ui_live_toc_minor")){c.addClass(this.currentMainSection(),"selected")}}},currentMainSection:function(){var d=this.currentItem;while(d&&!c.hasClass(d,"ui_live_toc_main")){d=d.parentElement}return d},currentMajorSection:function(){if(c.hasClass(this.currentItem,"ui_live_toc_main")){return false}var d=this.currentItem;while(!c.hasClass(d,"ui_live_toc_major")){d=d.parentElement}return d}};a.extend(b.prototype,c.ComponentProto)})(UI,_);(function(b){if(!b){return}var a=b.Modal=function(c){c=c||{};this.promise=new Parse.Promise();this.title=c.title||"";this.className=c.className||"";this.template=c.template||"";this.keyboardSubmit=!!c.keyboardSubmit;this.footer=c.footer||null;this.parent=c.parent||null;if(c.submit){this.submit=c.submit}if(c.cancel){this.cancel=c.cancel}this.render();if(c.init){c.init.call(this)}return this.promise};a.prototype={_submit:function(c){this.node.parentNode.removeChild(this.node);b.removeClass(document.body,"modal_open");return Parse.Promise.as(c)},_cancel:function(c){this.node.parentNode.removeChild(this.node);b.removeClass(document.body,"modal_open");return Parse.Promise.error(c)},_keydownHandler:function(c){if(c.keyCode===13){if(document.activeElement.tagName==="TEXTAREA"&&!c.shiftKey){return true}else{this.submit();c.preventDefault();return false}}else{if(c.keyCode===27){if(this.cancel){this.cancel()}else{this.promise.reject()}return false}}return true},render:function(){var c=this;b.addClass(document.body,"modal_open");var h=b.tag("div",{className:"modal_content"});h.innerHTML=this.template;var k=null;if(this.footer){k=b.tag("footer",{});k.innerHTML=this.footer}var e=this.node=b.tag("div",{className:"modal_layer trans"},[b.tag("div",{className:"modal "+this.className},[b.tag("header",{},[this.title,b.tag("a",{className:"close"})]),h,k])]);this.promise.then(this._submit.bind(this),this._cancel.bind(this));var f=this.cancel?this.cancel.bind(this):(function(){b.addClass(e,"trans");setTimeout(c.promise.reject.bind(c.promise),200)});var j=this.submit?this.submit.bind(this):(function(){b.addClass(e,"trans");setTimeout(c.promise.resolve.bind(c.promise),200)});b.delegate("click",e,{className:"close"},f);b.delegate("click",e,{className:"confirm"},j);if(this.keyboardSubmit){this._keydownHandler=this._keydownHandler.bind(this);window.addEventListener("keydown",this._keydownHandler);this.promise.always(function(){window.removeEventListener("keydown",c._keydownHandler)})}var d=this.parent||document.body;d.appendChild(e);setTimeout(function(){b.removeClass(e,"trans")})}}})(UI);(function(c,a){if(!c){return}var b="delete";var d=c.PermissionsEditor=function(e){this.title=e.title;this.onSubmit=e.onSubmit;this.onCancel=e.onCancel;this.hasUsers=e.hasUsers;this.hasRoles=e.hasRoles;this.userPointerFields=e.userPointerFields;this.readonly=e.readonly||false;this.permissionsType=e.permissionsType;this.index=0;this.simplePermissionTypes=["read","write"];this.advancedPermissionTypes=["get","find","create","update","delete","addField"];this.pointerPermissionTypes=["readPointer","writePointer"];this.allPermissionTypes=this.simplePermissionTypes.concat(this.advancedPermissionTypes)};d.prototype={setInitialValue:function(f){var e=this;if(this.permissionState){return}if(document.getElementsByClassName("modal_layer").length>0){return}this.setInitialState(f);new c.Modal({title:this.title,className:"permissions_modal",template:JST["components/permissions/_permissions_editor_modal"]({type:this.permissionsType}),init:this.initModalView.bind(this),submit:function(){e.onSubmit(e.formattedValue())},cancel:this.onCancel?function(){e.onCancel();e.closeModal()}:null})},initModalView:function(){var f=this;this.modal=document.getElementsByClassName("permissions_modal")[0];var l=this.modal.getElementsByClassName("clp_settings")[0];var j=l.getElementsByTagName("input")[0];var e=this.modal.getElementsByClassName("permissions_list")[0];var m=this.modal.getElementsByClassName("confirm")[0];if(this.permissionsType==="CLP"){var k=this.modal.getElementsByClassName("gear")[0];c.removeClass(k,"hidden");k.addEventListener("click",function(){if(c.hasClass(l,"hidden")){c.removeClass(l,"hidden");c.addClass(e,"settings_open")}else{c.addClass(l,"hidden");c.removeClass(e,"settings_open")}});j.addEventListener("change",function(){f.changeCLPMode(j.checked)});var n=new Spinner({lines:10,length:3,width:4,radius:8,color:"#FFFFFF",corners:0,}).spin();m.appendChild(n.el)}if(this.unparseableInput){this.displayError('Could not parse input "'+a.escape(this.unparseableInput)+'". If you save this '+this.permissionsType+" it will be overwritten.")}a.each(this.permissionState,function(o,p){if(p!=="*"){f.addRowView(p,o)}});this.addRowView();this.updateViewFromState();var h=this.modal.getElementsByClassName("public_row")[0];a.each(this.allPermissionTypes,function(p){var o=h.getElementsByClassName("public_"+p+"_checkbox")[0];o.addEventListener("change",f.permissionToggled.bind(f))});a.each(this.modal.getElementsByClassName("ui_text"),function(o){f.updateRoleOrUserForInput(o,false)});e.scrollTop=0;if(this.permissionsType==="CLP"&&this.advancedCLP){this.changeCLPMode(true);c.removeClass(l,"hidden");c.addClass(e,"settings_open");j.checked=true}if(this.readonly){a.each(this.modal.getElementsByTagName("input"),function(o){o.disabled=true});a.each(this.modal.getElementsByClassName("remove_row_button"),function(o){o.style.visibility="hidden"});a.each(this.modal.getElementsByClassName("ui_text"),function(o){c.addClass(o,"hidden")});a.each(this.modal.getElementsByClassName("icon_plusStroke"),function(o){c.addClass(o,"hidden")})}},addRowView:function(n,j){var h=this;var e=this.modal.getElementsByClassName("permissions_list")[0];var m=c.tag("li",{className:"permissions_row"});m.innerHTML=JST["components/permissions/_permissions_editor_row"]({index:this.index,permissionsType:this.permissionsType});this.index++;e.appendChild(m);var f=m.getElementsByClassName("ui_text")[0];var k=m.getElementsByClassName("remove_row_button")[0];f.addEventListener("focus",this.inputIsBeingEdited.bind(this));f.addEventListener("blur",this.roleOrUserChanged.bind(this));f.addEventListener("keydown",this.handleTabOrEnterComplete.bind(this));a.each(this.allPermissionTypes,function(o){var p=m.getElementsByClassName(o+"_checkbox")[0];p.addEventListener("change",h.permissionToggled.bind(h));if(j){p.checked=j[o]==="checked"}});k.addEventListener("click",this.removeRowButtonClicked.bind(this));var l=new Spinner({lines:8,length:4,width:2,radius:4,color:"#5a6b77"}).spin();c.addClass(l.el,"hidden");m.appendChild(l.el);if(n){if(n.indexOf("role:")===0){n=n.slice(5)}else{if(n.indexOf("pointer:")===0){n=n.slice(8)}}f.value=n;c.addClass(m,"show")}e.scrollTop=e.scrollHeight},updateViewFromState:function(){var e=this;if(this.permissionsType=="CLP"){a.each(this.modal.getElementsByClassName("simple_checkbox"),function(h){c.toggleClass(h,"hidden",e.advancedCLP)});a.each(this.modal.getElementsByClassName("advanced_checkbox"),function(h){c.toggleClass(h,"hidden",!e.advancedCLP)})}var f=this.modal.getElementsByClassName("public_row")[0];a.each(this.allPermissionTypes,function(j){var h=f.getElementsByClassName("public_"+j+"_checkbox")[0];c.removeClass(h.parentNode,"semichecked");switch(e.permissionState["*"][j]){case"checked":h.checked=true;break;case"unchecked":h.checked=false;break;case"semichecked":h.checked=true;c.addClass(h.parentNode,"semichecked");break}});a.each(this.modal.getElementsByClassName("permissions_row"),function(l){var j=l.getElementsByClassName("ui_text")[0];var k=j.getAttribute("data-permission");if(k){a.each(e.allPermissionTypes,function(n){var o=l.getElementsByClassName(n+"_checkbox")[0];c.removeClass(o.parentNode,"semichecked");switch(e.permissionState[k][n]){case"checked":o.checked=true;break;case"unchecked":o.checked=false;break;case"semichecked":o.checked=true;c.addClass(o.parentNode,"semichecked");break}c.toggleClass(o.parentNode.parentNode,"disabled",e.permissionState["*"][n]==="checked")});if(k.indexOf("pointer:")===0){var h=l.getElementsByClassName("readPointer_checkbox")[0];h.checked=e.permissionState[k].read==="checked";c.removeClass(h.parentNode,"semichecked");var m=l.getElementsByClassName("writePointer_checkbox")[0];m.checked=e.permissionState[k].write==="checked";c.removeClass(m.parentNode,"semichecked")}}})},setInitialState:function(j){var f=this;this.permissionState={"*":{}};if(this.permissionsType=="ACL"){try{var h=JSON.parse(j);a.each(h,function(e,l){f.permissionState[l]={};f.permissionState[l].read=e.read?"checked":"uncheked";f.permissionState[l].write=e.write?"checked":"uncheked"})}catch(k){this.unparseableInput=j;this.permissionState={"*":{read:"checked",write:"checked"}}}}else{if(this.permissionsType=="CLP"){this.advancedCLP=!(a.isEqual(j.get,j.find)&&a.isEqual(j.create,j.update)&&a.isEqual(j.update,j[b]));a.each(j,function(e,l){if(l==="readUserFields"){a.each(e,function(n){var m="pointer:"+n;f.permissionState[m]=f.permissionState[m]||{};f.permissionState[m].get="checked";f.permissionState[m].find="checked"})}else{if(l==="writeUserFields"){a.each(e,function(n){var m="pointer:"+n;f.permissionState[m]=f.permissionState[m]||{};f.permissionState[m].create="checked";f.permissionState[m].update="checked";f.permissionState[m][b]="checked";f.permissionState[m].addField="checked"})}else{a.each(e,function(n,m){if(n){f.permissionState[m]=f.permissionState[m]||{};f.permissionState[m][l]="checked"}})}}});a.each(f.permissionState,function(e,l){if(e.get==="checked"&&e.find==="checked"){f.permissionState[l].read="checked"}if(e.create==="checked"&&e.update==="checked"&&e[b]==="checked"){f.permissionState[l].write="checked"}})}else{throw new TypeError('The permissions editor was not passed a valid permissionsType of "ACL" or "CLP"')}}},updateStateFromView:function(){var e=this;this.permissionState={"*":{}};var f=this.modal.getElementsByClassName("public_row")[0];a.each(this.allPermissionTypes,function(j){var h=f.getElementsByClassName("public_"+j+"_checkbox")[0];if(c.hasClass(h.parentNode,"semichecked")){e.permissionState["*"][j]="semichecked"}else{if(h.checked){e.permissionState["*"][j]="checked"}else{e.permissionState["*"][j]="unchecked"}}});a.each(this.modal.getElementsByClassName("permissions_row"),function(l){var j=l.getElementsByClassName("ui_text")[0];var k=j.getAttribute("data-permission");if(k){e.permissionState[k]={};a.each(e.allPermissionTypes,function(n){var o=l.getElementsByClassName(n+"_checkbox")[0];if(c.hasClass(o.parentNode,"semichecked")){e.permissionState[k][n]="semichecked"}else{if(o.checked){e.permissionState[k][n]="checked"}else{e.permissionState[k][n]="unchecked"}}});if(k.indexOf("pointer:")===0&&e.advancedCLP){var h=l.getElementsByClassName("readPointer_checkbox")[0];if(h.checked){e.permissionState[k].read="checked"}else{e.permissionState[k].read="unchecked"}var m=l.getElementsByClassName("writePointer_checkbox")[0];if(m.checked){e.permissionState[k].write="checked"}else{e.permissionState[k].write="unchecked"}}}});if(this.permissionsType==="CLP"){a.each(this.permissionState,function(h,j){if(e.advancedCLP){if(h.get==="checked"&&h.find==="checked"){e.permissionState[j].read="checked"}else{if(h.get==="unchecked"&&h.find==="unchecked"){e.permissionState[j].read="unchecked"}else{e.permissionState[j].read="semichecked"}}if(h.create==="checked"&&h.update==="checked"&&h[b]==="checked"){e.permissionState[j].write="checked"}else{if(h.create==="unchecked"&&h.update==="unchecked"&&h[b]==="unchecked"){e.permissionState[j].write="unchecked"}else{e.permissionState[j].write="semichecked"}}}else{if(h.read==="checked"||h.read==="unchecked"){e.permissionState[j].get=h.read;e.permissionState[j].find=h.read}if(h.write==="checked"||h.write==="unchecked"){e.permissionState[j].create=h.write;e.permissionState[j].update=h.write;e.permissionState[j][b]=h.write}}if(j.indexOf("pointer:")===0){if(h.read==="semichecked"){h.read="unchecked"}if(h.write==="semichecked"){h.write="unchecked"}e.permissionState[j].get=h.read;e.permissionState[j].find=h.read;e.permissionState[j].create=h.write;e.permissionState[j].update=h.write;e.permissionState[j][b]=h.write;e.permissionState[j].addField=h.write}})}this.updateViewFromState()},formattedValue:function(){var e=this;var f={};if(this.permissionsType==="ACL"){a.each(this.permissionState,function(h,j){a.each(e.simplePermissionTypes,function(k){if(h[k]==="checked"){f[j]=f[j]||{};f[j][k]=true}})});return JSON.stringify(f)}else{if(this.permissionsType==="CLP"){a.each(this.permissionState,function(h,j){if(j.indexOf("pointer:")===0){pointerField=j.slice(8);if(h.read==="checked"){f.readUserFields=f.readUserFields||[];f.readUserFields.push(pointerField)}if(h.write==="checked"){f.writeUserFields=f.writeUserFields||[];f.writeUserFields.push(pointerField)}}else{a.each(e.advancedPermissionTypes,function(k){if(h[k]==="checked"){f[k]=f[k]||{};f[k][j]=true}})}});return f}}},permissionToggled:function(h){var f=h.target;c.removeClass(f.parentNode,"semichecked");this.updateStateFromView()},roleOrUserChanged:function(h){var f=h.target;this.updateRoleOrUserForInput(f,true)},changeCLPMode:function(f){this.advancedCLP=f;c.toggleClass(this.modal,"advanced",f);var e=this.modal.getElementsByClassName("permissions_list")[0];if(f){setTimeout(function(){c.addClass(e,"advanced")},700)}else{c.removeClass(e,"advanced")}a.each(this.modal.getElementsByClassName("simple_checkbox"),function(h){setTimeout(function(){c.toggleClass(h,"hidden",f)},f?200:700)});a.each(this.modal.getElementsByClassName("advanced_checkbox"),function(h){setTimeout(function(){c.toggleClass(h,"hidden",!f)},f?700:200)})},handleTabOrEnterComplete:function(f){if(f.keyCode===13||f.keyCode===9){f.target.blur()}},removeRowButtonClicked:function(h){var f=h.target.parentNode;var j=f.parentNode;this.removeRow(j);this.updateStateFromView()},updateRoleOrUserForInput:function(f,h){var e=this;var j=this.modal.getElementsByClassName("confirm")[0];c.removeClass(j,"disabled");if(f.value.length>0){this.toggleInputSpinner(f,true);this.checkIfRoleOrUserOrPointer(f,h)}},checkIfRoleOrUserOrPointer:function(h,j){var f=this;var k=h.value;if(this.userPointerFields){if(a.contains(this.userPointerFields,k)){f.setRowToPointer(h,j);return}}var l=new Parse.Promise.as();if(this.hasRoles){var e=new Parse.Query(Parse.Role);e.equalTo("name",k);l=e.first()}return l.then(function(m){if(m){f.setRowToRole(h,j)}else{l=new Parse.Promise.as();if(f.hasUsers){var o=new Parse.Query(Parse.User);o.equalTo("objectId",k);var n=new Parse.Query(Parse.User);n.equalTo("username",k);var p=Parse.Query.or(o,n);l=p.first()}return l.then(function(q){if(q){f.setRowToUser(h,q.id,q.get("username"),j)}else{c.addClass(h.parentNode,"error");if(f.permissionsType==="CLP"){f.displayRowError(h,"Role, User or pointer field not found. Enter a valid Role name, Username, User ID or User pointer field name.")}else{f.displayRowError(h,"Role or User not found. Enter a valid Role name, Username or User ID.")}h.removeAttribute("data-permission");h.removeAttribute("data-username")}},function(q){c.addClass(h.parentNode,"error");f.displayRowError(h,"User query failed with error: "+q.message);h.removeAttribute("data-permission");h.removeAttribute("data-username")})}},function(m){c.addClass(h.parentNode,"error");f.displayRowError(h,"Role query failed with error: "+m.message);h.removeAttribute("data-permission");h.removeAttribute("data-username")})},inputIsBeingEdited:function(h){var f=h.target;var j=f.getAttribute("data-username");if(j){f.value=j}c.removeClass(f.parentNode,"error");this.setInputIcon(f,"icon_plusStroke")},setInputIcon:function(f,e){this.removeInputIcons(f);var h=f.parentNode.getElementsByClassName(e)[0];c.removeClass(h,"hidden")},removeInputIcons:function(e){a.each(e.parentNode.getElementsByClassName("input_icon"),function(f){c.addClass(f,"hidden")})},setPermissionUneditable:function(f){var h=f.parentNode.getElementsByClassName("permission_label")[0];var e=h.getElementsByClassName("label_value")[0];e.textContent=f.value;c.addClass(f,"hidden");c.removeClass(h,"hidden")},toggleInputSpinner:function(e,j){this.removeInputIcons(e);var h=e.parentNode.getElementsByClassName("spinner")[0];c.toggleClass(h,"hidden",!j);e.disabled=j;var f=this.modal.getElementsByClassName("confirm")[0];c.toggleClass(f,"disabled",j)},removeRow:function(f){var e=f.parentNode;e.removeChild(f)},setRowToPointer:function(j,k){var h=this;this.toggleInputSpinner(j,false);var l="pointer:"+j.value;if(k&&this.permissionState[l]){this.displayRowError(j,"This pointer is already included.")}else{this.setInputIcon(j,"icon_minimize");a.each(j.parentNode.getElementsByClassName("pointer_checkbox"),function(n){c.removeClass(n,"pointer_hidden")});this.setPermissionUneditable(j);var e=j.parentNode.getElementsByClassName("pointer_pill")[0];c.removeClass(e,"hidden");var f=j.parentNode.getElementsByClassName("readPointer_checkbox")[0];f.addEventListener("change",function(q){var n=j.parentNode.getElementsByClassName("read_checkbox")[0];n.checked=q.target.checked;c.removeClass(n.parentNode,"semichecked");var o=j.parentNode.getElementsByClassName("get_checkbox")[0];o.checked=q.target.checked;var p=j.parentNode.getElementsByClassName("find_checkbox")[0];p.checked=q.target.checked;h.updateStateFromView()});var m=j.parentNode.getElementsByClassName("writePointer_checkbox")[0];m.addEventListener("change",function(r){var o=j.parentNode.getElementsByClassName("write_checkbox")[0];o.checked=r.target.checked;c.removeClass(o.parentNode,"semichecked");var s=j.parentNode.getElementsByClassName("create_checkbox")[0];s.checked=r.target.checked;var p=j.parentNode.getElementsByClassName("update_checkbox")[0];p.checked=r.target.checked;var q=j.parentNode.getElementsByClassName("delete_checkbox")[0];q.checked=r.target.checked;var n=j.parentNode.getElementsByClassName("addField_checkbox")[0];n.checked=r.target.checked;h.updateStateFromView()});j.setAttribute("data-permission",l);this.setRowSuccessfullySaved(k,j)}},setRowToRole:function(h,j){var f=this;this.toggleInputSpinner(h,false);var e="role:"+h.value;if(j&&this.permissionState[e]){this.displayRowError(h,"This role is already included.")}else{this.setInputIcon(h,"icon_permissions");this.setPermissionUneditable(h);h.setAttribute("data-permission",e);this.setRowSuccessfullySaved(j,h)}},setRowToUser:function(f,h,k,j){var e=this;f.value=k+" ("+h+")";this.toggleInputSpinner(f,false);if(j&&this.permissionState[h]){this.displayRowError(f,"This user is already included.")}else{this.setInputIcon(f,"icon_user");this.setPermissionUneditable(f);f.setAttribute("data-permission",h);f.setAttribute("data-username",k);this.setRowSuccessfullySaved(j,f)}},setRowSuccessfullySaved:function(h,f){var e=this;if(h){var j=f.parentNode;c.addClass(j,"show");a.each(this.allPermissionTypes,function(k){var l=j.getElementsByClassName(k+"_checkbox")[0];l.checked=e.permissionState["*"][k]==="checked"});this.addRowView()}this.updateStateFromView()},displayRowError:function(e,f){this.toggleInputSpinner(e,false);c.addClass(e.parentNode,"error");this.setInputIcon(e,"icon_warning");var h=e.parentNode.getElementsByClassName("error_bubble")[0];h.innerHTML=f;var j=this.modal.getElementsByClassName("confirm")[0];c.addClass(j,"disabled")},displayError:function(h){var f=this.modal.getElementsByClassName("modal_errors")[0];f.textContent=h;f.style.display="block";var e=this.modal.getElementsByClassName("permissions_list")[0];e.style.height=(e.offsetHeight-f.offsetHeight)+"px"},toggleSaveSpinner:function(e){var f=this.modal.getElementsByClassName("confirm")[0];c.toggleClass(f,"saving",e)},closeModal:function(){wrap=this.modal.parentNode;wrap.parentNode.removeChild(wrap);c.removeClass(document.body,"modal_open")}};a.extend(d.prototype,c.ComponentProto)})(UI,_);(function(c,b){if(!c){return}var a=c.ProgressBar=function(d){this.markers=d.markers||15;this.progress=d.progress||0;this.render();this.setProgress(this.progress);if(d.parent){this.attach(d.parent)}};a.prototype={setProgress:function(h){this.progress=h;var e=Math.max(1,Math.floor(h*this.markers));var k=0;var j=this.node.getElementsByClassName("dot");for(var f=0;f<j.length;f++){var d=j[f];if(f<e){if(!c.hasClass(d,"done")){this.delay(d,k);k++}}else{c.removeClass(d,"done")}}},render:function(){var e=[];e.push(c.tag("div",{className:"start done"}));for(var d=0;d<this.markers;d++){e.push(c.tag("div",{className:"dot"}))}e.push(c.tag("div",{className:"end"}));this.node=c.tag("div",{className:"ui_progress_bar"},e)},delay:function(d,e){setTimeout(function(f,h){c.addClass(f,"done")},e*50,d)}};b.extend(a.prototype,c.ComponentProto)})(UI,_);(function(b){if(!b){return}var a=b.StackTrace=function(c){this.title=c.title||"Stack Trace";this.stack=c.stack||[];this.render();if(c.parent){this.attach(c.parent)}};a.prototype={render:function(){var f=[];for(var c=0;c<this.stack.length;c++){var h=[b.tag("td",{},b.tag("span",{},""+c))];if(typeof this.stack[c]==="string"){h.push(b.tag("td",{},this.stack[c].trim()))}else{h.push(b.tag("td",{},b.tag("span",{},this.stack[c].location&&this.stack[c].location.trim())));h.push(b.tag("td",{},b.tag("span",{},this.stack[c].address&&this.stack[c].address.trim())))}f.push(b.tag("tr",{},h))}var e=this.node=b.tag("div",{className:"stack_trace"},[b.tag("div",{className:"stack_title"},this.title),b.tag("table",{},f)]);if(this.stack.length>20){var d=b.tag("div",{className:"stack_expand"},[b.tag("a",{},"Show full trace"),b.tag("span",{},"("+this.stack.length+" lines)")]);d.addEventListener("click",function(){b.removeClass(e,"limited")});e.appendChild(d);b.addClass(e,"limited")}}};_.extend(a.prototype,b.ComponentProto)})(UI);(function(e){App.APIConsole=function(s,n){if(!e.hasClass(document.body,"p_api_console")){return}Parse.serverURL=n;Parse._initialize(s.key,s.javascript_key,s.push_key);Parse._useMasterKey=true;Parse.VERSION="browser";var l=new App.Models.App(s);var m=["GET","POST","PUT","DELETE"];var h=new e.Dropdown({optionSet:m,name:"req_method_dropdown",style:"req_method_dropdown",value:"GET",parent:document.getElementById("req_method_wrapper"),onChange:function(x){r=x;var v="";var w='where={"name":"John"}&limit=10';if(r==="GET"||r==="DELETE"){v="Query String"}else{v="Request Body";w='{"name":"John"}'}document.getElementById("req-body-title").innerHTML="";document.getElementById("req-body-title").appendChild(document.createTextNode(v));document.getElementById("req_body").setAttribute("placeholder",w)}});var u=function(){return document.getElementById("req_endpoint").value};var p=function(){if(r==="DELETE"){return null}return document.getElementById("req_body").value};var r="GET";var k=function(){return document.getElementById("use_masterkey_true").checked};var t=d(m);if(t!==null){r=t.method||"GET";h.value=r;document.getElementById("req_endpoint").value=t.path||"";document.getElementById("use_masterkey_true").checked=t.useMasterKey||false;a()}var j=function(v){if(u().length===0){return}v.preventDefault();var x={method:r,asUser:false,withMasterkey:k()};var w={"X-Parse-Application-Id":s.key,"X-Parse-REST-API-Key":s.rest_api_key};if(k()){w["X-Parse-Master-Key"]=s.push_key}if(q!==null){w["X-Parse-Session-Token"]=q;x.asUser=true}document.getElementById("resp_raw").className="ui_loading";window.location.hash=encodeURIComponent(JSON.stringify({path:u(),method:r,useMasterKey:k()}));$.ajax({headers:w,url:n+"/1/"+u(),data:p(),type:r,cache:false,success:function(y){var z=document.getElementById("resp_raw");z.innerHTML="";try{z.appendChild(document.createTextNode(JSON.stringify(y,null,4)));FBEvent.log("pae_request_success",x)}catch(A){z.appendChild(document.createTextNode(y))}document.getElementById("resp_raw").className=""},error:function(y){var z=document.getElementById("resp_raw");z.innerHTML="";try{z.appendChild(document.createTextNode(JSON.stringify(JSON.parse(y.responseText),null,4)));FBEvent.log("pae_request_failed",x)}catch(A){z.appendChild(document.createTextNode(y.responseText))}document.getElementById("resp_raw").className=""}})};var q=null;var o=function(x){x.preventDefault();var y=document.getElementById("req_user").value;if(y.length>0){var w=new Parse.Query(Parse.User).equalTo("objectId",y);var v=new Parse.Query(Parse.User).equalTo("username",y);Parse.Query.or(w,v).first().then(function(z){if(z){q=z.getSessionToken()||null;if(q!==null){FBEvent.log("pae_searched_user",{found:true});f('All requests will now be run as "'+y+'"',"success")}else{var A=new Parse.Query("_Session").equalTo("user",z);A.first().then(function(B){if(B){q=B.get("sessionToken")||null}if(q!==null){FBEvent.log("pae_searched_user",{found:true});f('All requests will now be run as "'+y+'"',"success")}else{FBEvent.log("pae_searched_user",{found:false});f('The user "'+y+'" does not have any existing sessions.',"error");document.getElementById("req_user").value=""}})}}else{FBEvent.log("pae_searched_user",{found:false});document.getElementById("req_user").value="";f('The user "'+y+'" does not exist.',"error")}})}};document.getElementById("req_endpoint").addEventListener("keyup",function(v){a()});document.getElementById("req_send").addEventListener("click",j);document.getElementById("export_curl").addEventListener("click",function(v){v.preventDefault();var w=[];if(q!==null){w.push("X-Parse-Session-Token: "+q)}if(k()){w.push("X-Parse-Master-Key: "+s.push_key)}b(n,u(),p(),w,r);FBEvent.log("pae_curl_export")});document.getElementById("req_user").addEventListener("blur",o);document.getElementById("req_user").addEventListener("keyup",function(v){if(v.target.value.length===0){q=null;f("All requests will now be run without a sessionToken.","success")}})};function a(){var h=document.getElementById("req_endpoint").value.length>0;e.toggleClass(document.getElementById("req_send"),"disabled",!h);e.toggleClass(document.getElementById("export_curl"),"disabled",!h)}function f(k,j){var h=document.getElementById("pae_message");if(h){h.className=j;h.innerHTML="";h.appendChild(document.createTextNode(k));h.style.display="block";window.setTimeout(function(){document.getElementById("pae_message").style.display="none"},10000)}}function b(m,s,q,k,h){if(s.length===0){return}var o=[];o.push("curl -X "+h);o.push('-H "Content-Type: application/json"');o.push('-H "X-Parse-Application-Id: '+appJson.key+'"');o.push('-H "X-Parse-REST-API-Key: '+appJson.rest_api_key+'"');if(k){for(var p in k){o.push('-H "'+k[p]+'"')}}if(q!==null&&q.length>0){q=c(q);if(h==="POST"||h==="PUT"){o.push('-d "'+q+'"')}else{if(h==="GET"){var n=q.split("&");if(n.length>0){o.push("-G");_.each(n,function(t){o.push('--data-urlencode "'+t+'"')})}}}}else{if(h==="GET"){var r=s.split("?");if(r.length===2){var j=r[1];var l=j.split("&");if(l.length>0){o.push("-G");_.each(l,function(t){o.push('--data-urlencode "'+c(t)+'"')});s=r[0]}}}}o.push("https://api.parse.com/1/"+s);new e.Modal({title:"Export Request",template:"<p>"+_.escape(o.join(" \\\n"))+"</p>",className:"req_export_modal",})}function c(h){return h.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')}function d(k){var h=window.location.hash;if(h.length===0){return null}try{h=JSON.parse(decodeURIComponent(h.substr(1,h.length-1)));if(h.method){if(k.indexOf(h.method.toUpperCase())===-1){h.method="GET"}else{h.method=h.method.toUpperCase()}}if(h.useMasterKey){if(typeof h.useMasterKey!=="boolean"){h.useMasterKey=false}}FBEvent.log("pae_shared_url")}catch(j){h=null}return h}})(UI);(function(b,a){if(!b){return}var c=App.Views.AppStatus=function(d){this.render()};c.prototype={render:function(){var d=this;$.get(this.reqUrl()).then(function(e){d.renderTable(e.results)})},renderTable:function(e){if(a.isEmpty(e)){this.renderNoStatus();return}e=this.cleanTimes(e);e=this.orderByStartTime(e);var h=e.map(function(d){return[d.name,d.startTime.toUTCString(),d.endTime.toUTCString()]});var j=document.getElementById("app_status_result");var f=new b.DataTable({parent:j,rows:h,header:["Incident","Start Time","End Time"]})},renderNoStatus:function(){var d=b.tag("div",{className:"app_status_no_status"},"No status events present for your app");document.getElementById("app_status_middle").appendChild(d)},orderByStartTime:function(d){return a.sortBy(d,function(e){return d.startTime}).reverse()},cleanTimes:function(d){return a.map(d,function(e){if(a.has(e,"startTime")){e.startTime=new Date(e.startTime)}if(a.has(e,"endTime")){e.endTime=new Date(e.endTime)}return e})},reqUrl:function(){return App.currentApp.dataRequestUrl()+"app_status"}};a.extend(c.prototype,b.ComponentProto)})(UI,_);CloudCode.Collections.JobScheduleCollection=Backbone.Collection.extend({url:function(){var a=App.currentApp.dataRequestUrl()+"cloud_code/jobs";if(this.state.get("schedulePagination").get("current_page")){a+="/page/"+this.state.get("schedulePagination").get("current_page")}return a}});CloudCode.Collections.JobStatusCollection=Backbone.Collection.extend({url:function(){var a=App.currentApp.dataRequestUrl()+"cloud_code/job_status";if(this.state.get("statusPagination").get("current_page")){a+="/page/"+this.state.get("statusPagination").get("current_page")}return a}});CloudCode.Collections.ScriptSources=Backbone.Collection.extend({initialize:function(b,a){this.app=a.app},url:function(){return this.app.dataRequestUrl()+"cloud_code/script_sources"},comparator:function(b){var a=b.get("name");if(a==="main.js"){return""}else{return a}},getScriptSource:function(a){var b=this.find(function(c){return c.get("name")===a});if(b){return b.get("source")}else{return null}}});CloudCode.Models.LogContent=Backbone.Model.extend({defaults:{logLevel:"info"},initialize:function(a,b){this.app=b.app},url:function(){return this.app.dataRequestUrl()+"cloud_code/logs?level="+this.get("logLevel")}});CloudCode.Models.State=Backbone.Model.extend({defaults:{currentScriptSource:"main.js",logLevel:"info",classes:null,scriptRequests:0,webhookRequests:0,logRequests:0,scheduleRequests:0,statusRequests:0,schedulePage:1,releaseInfo:null},initialize:function(){_.bindAll(this);this.get("jobScheduleCollection").state=this;this.get("jobStatusCollection").state=this;this.on("change:contentSelection",this.fetchData);this.get("logContent").on("change:logLevel",this.fetchData);this.get("schedulePagination").on("change:current_page",this.fetchSchedulePagedData);this.get("statusPagination").on("change:current_page",this.fetchStatusPagedData);this.get("jobScheduleCollection").on("reset",this.humanizeSchedules);this.humanizeSchedules()},fetchData:function(){var a=this.get("contentSelection");if(a=="script"){this.fetchScriptSources()}else{if(a=="log"){this.fetchLogContent()}else{if(a=="job_status"){var b=this.get("statusPagination").get("current_page");this.get("statusPagination").unset("current_page",{silent:true});this.get("statusPagination").set("current_page",b)}}}},fetchScriptSources:function(){var a=this;var c=this.get("scriptSources");var b=this.get("currentScriptSource");if(!(c&&_.isString(c.getScriptSource(b)))){this.increment("scriptRequests");this.get("scriptSources").fetch({success:function(){a.decrement("scriptRequests")},error:function(){a.decrement("scriptRequests")}})}},fetchLogContent:function(){var a=this;this.increment("logRequests");this.get("logContent").fetch({success:function(){a.decrement("logRequests")},error:function(){a.decrement("logRequests")}})},fetchSchedulePagedData:function(){var a=this;this.increment("scheduleRequests");this.get("jobScheduleCollection").fetch({reset:true,success:function(){a.decrement("scheduleRequests")},error:function(){a.decrement("scheduleRequests")}})},fetchStatusPagedData:function(){var a=this;this.increment("statusRequests");this.get("jobStatusCollection").fetch({reset:true,success:function(){$.ajax({url:App.currentApp.dataRequestUrl()+"cloud_code/job_status/pagination_data",success:function(b){a.get("statusPagination").set(b);a.decrement("statusRequests")},error:function(){a.decrement("statusRequests")}})},error:function(){a.decrement("statusRequests")}})},increment:function(a){this.set(a,this.get(a)+1)},decrement:function(a){this.set(a,this.get(a)-1)},humanizeSchedules:function(){this.get("jobScheduleCollection").each(function(h){var e;var d=moment(h.get("startAfter")).utc().format("MM/DD/YY");d+=" at "+moment(h.get("startAfter")).utc().format("hh:mm A");if(_.isUndefined(h.get("repeatMinutes"))){e="On "+d}else{var f="";var c=0;_(h.get("daysOfWeek")).each(function(l,k){if(l>0){f+=moment().day(k).format("dddd");c++}});if(c===7){f="day"}else{f=f.replace(/\s/g,", ")}var b;var a=h.get("repeatMinutes");if(a%(60*24)===0){b=""}else{if(a%60===0){if(a===60){b="hour"}else{b=(a/60)+" hours"}}else{if(a===1){b="minute"}else{b=a+" minutes"}}}var j="";if(a%(60*24)===0){j="at "+moment(h.get("timeOfDay"),"HH:mm:ss.SSSZ").utc().format("hh:mm A")}else{j="after "+moment(h.get("timeOfDay"),"HH:mm:ss.SSSZ").utc().format("hh:mm A")}e="Every "+f;if(b.length>0){e+=" every "+b}e+=" "+j;e+=", starting "+d}h.set("humanizedSchedule",e)})}});CloudCode.Routers.AdminRouter=CloudCode.Routers.Router.extend({routes:{script:"selectScript","script/:scriptSourceName":"selectScript",webhook:"selectWebhook","webhook/:webhookType":"selectWebhook",log:"selectLog","log/:logLevel":"selectLog",jobs:"selectJobs","jobs/page/:page":"selectJobs",job_status:"selectJobStatus","job_status/page/:page":"selectJobStatus",}});CloudCode.Views.WebhookModal=function(a){this.classes=a.classes;this.currentWebhook=a.currentWebhook;this.webhookAuthValidatorEnabled=a.webhookAuthValidatorEnabled;this.initialize();return this.render()};CloudCode.Views.WebhookModal.functionType="Function";CloudCode.Views.WebhookModal.authValidatorType="validateAuthData";CloudCode.Views.WebhookModal.prototype={webhookOptions:[CloudCode.Views.WebhookModal.functionType,"afterSave","beforeSave","afterDelete","beforeDelete"],initialize:function(){if(this.webhookAuthValidatorEnabled&&this.webhookOptions[this.webhookOptions.length-1]!=CloudCode.Views.WebhookModal.authValidatorType){this.webhookOptions.push(CloudCode.Views.WebhookModal.authValidatorType)}},render:function(){var f="New Webhook";if(this.currentWebhook!==undefined){f="Update Webhook"}this.modalPromise=new UI.Modal({template:JST["cloud_code/_webhooks_modal"](),title:f,className:"add_webhook_modal"});this.webhookTypeDD=new UI.Dropdown({parent:document.getElementById("webhook_type"),name:"webhook_dropdown",optionSet:this.webhookOptions,onChange:this.showSecondStep.bind(this)});var b=[];_.each(this.classes,function(h){b.push(h)});this.classesDD=new UI.Dropdown({parent:document.getElementById("webhook_class"),name:"class_dropdown",optionSet:b,value:b[0]});this.classesDD.node.style.zIndex="2000";this.functionInput=new UI.StringEditor({parent:document.getElementById("webhook_function")});this.authValidatorInput=new UI.StringEditor({parent:document.getElementById("webhook_authvalidator")});this.urlInput=new UI.StringEditor({parent:document.getElementById("webhook_url"),value:"https://"});this.showSecondStep(CloudCode.Views.WebhookModal.functionType);var c=document.getElementById("save_webhook_button");c.addEventListener("click",this.saveWebhook.bind(this));var d=this.handleKeypress.bind(this);document.addEventListener("keypress",d,false);this.modalPromise.always(function(){document.removeEventListener("keypress",d,false)}.bind(this));if(this.currentWebhook!==undefined){var a=this.currentWebhook.type;if(a==="Trigger"){this.showSecondStep(this.currentWebhook.method);this.webhookTypeDD.value=this.currentWebhook.method;this.classesDD.value=this.currentWebhook.className}else{if(a==="Function"){this.functionInput.value=this.currentWebhook.method;this.webhookTypeDD.value=CloudCode.Views.WebhookModal.functionType}else{this.showSecondStep(CloudCode.Views.WebhookModal.authValidatorType);this.authValidatorInput.value=this.currentWebhook.method;this.webhookTypeDD.value=CloudCode.Views.WebhookModal.authValidatorType}}this.webhookTypeDD.disabled=true;this.classesDD.disabled=true;this.functionInput.disabled=true;this.authValidatorInput.disabled=true;this.urlInput.value=this.currentWebhook.url;var e=document.getElementById("delete_webhook_button");e.style.display="inline-block";e.addEventListener("click",this.deleteWebhook.bind(this))}return this.modalPromise},showSecondStep:function(a){if(a===CloudCode.Views.WebhookModal.functionType){document.getElementById("classes_row").style.display="none";document.getElementById("function_row").style.display="table-row";document.getElementById("authvalidator_row").style.display="none"}else{if(a==CloudCode.Views.WebhookModal.authValidatorType){document.getElementById("classes_row").style.display="none";document.getElementById("function_row").style.display="none";document.getElementById("authvalidator_row").style.display="table-row"}else{document.getElementById("classes_row").style.display="table-row";document.getElementById("function_row").style.display="none";document.getElementById("authvalidator_row").style.display="none"}}},saveWebhook:function(){var m=document.getElementById("delete_webhook_button");if(m!==undefined){UI.addClass(m,"disabled")}var j=document.getElementById("webhook_modal_error");j.style.display="none";$("#save_webhook_button").empty().spin("small","#fff");var d=this.webhookTypeDD.value;var c=this.classesDD.value;var h=this.functionInput.value;var e=this.authValidatorInput.value;var f={url:this.urlInput.value};var b,a;if(this.currentWebhook){a="PUT";if(d===CloudCode.Views.WebhookModal.functionType){b=Parse.serverURL+"/1/hooks/functions/"+h}else{if(d===CloudCode.Views.WebhookModal.authValidatorType){b=Parse.serverURL+"/1/hooks/authvalidators/"+e}else{b=Parse.serverURL+"/1/hooks/triggers/"+c+"/"+d}}}else{a="POST";if(d===CloudCode.Views.WebhookModal.functionType){b=Parse.serverURL+"/1/hooks/functions";f.functionName=h}else{if(d===CloudCode.Views.WebhookModal.authValidatorType){b=Parse.serverURL+"/1/hooks/authvalidators";f.authValidatorName=e}else{b=Parse.serverURL+"/1/hooks/triggers";f.className=c;f.triggerName=d}}}f._method=a;f._ApplicationId=app.key;f._MasterKey=app.push_key;var l=this;var k=new XMLHttpRequest();k.open("POST",b,true);k.onreadystatechange=function(){if(k.readyState===4){$("#save_webhook_button").empty().html("Save Webhook");if(k.status===200){l.modalPromise.resolve()}else{var o=App.whatWentWrongWhoKnows;try{o=JSON.parse(k.responseText).error}catch(p){}var n=document.getElementById("webhook_modal_error");n.style.display="block";n.innerHTML=o;if(m!==undefined){UI.removeClass(m,"disabled")}}}};k.send(JSON.stringify(f))},deleteWebhook:function(){var b=document.getElementById("save_webhook_button");if(b!==undefined){UI.addClass(b,"disabled")}$("#delete_webhook_button").empty().spin("small","#dd4b39");var c={name:this.currentWebhook.method};if(this.currentWebhook.type==="Trigger"){c.type="triggers";c.class_name=this.currentWebhook.className}else{if(this.currentWebhook.type==="Function"){c.type="functions"}else{c.type="authvalidators"}}var a=App.currentApp.dataRequestUrl()+"cloud_code/destroy_webhook";$.post(a,c).then(function(){this.modalPromise.resolve()}.bind(this),function(j){$("#delete_webhook_button").empty().html("Delete Webhook");var f=App.whatWentWrongWhoKnows;if(j.responseText!==null&&typeof j.responseText!=="undefined"){try{f=JSON.parse(j.responseText).error}catch(h){}}var d=document.getElementById("webhook_modal_error");d.style.display="block";d.innerHTML=f;if(b!==undefined){UI.removeClass(b,"disabled")}}.bind(this))},handleKeypress:function(b){var a=b.which||b.keyCode;if(a==13){this.saveWebhook()}}};CloudCode.Views.JobSchedulesView=Backbone.View.extend({el:"#cloud_code_browser",selectionName:"jobs",events:{"click .run_now":"runScheduledJob"},initialize:function(){_.bindAll(this);var a={};a.rootUrl="jobs";a.model=this.model.get("schedulePagination");if(this.model.get("isAdmin")){a.pushState=false}this.pagination=new App.Views.Paginate(a);this.model.on("change:contentSelection",this.render);this.model.on("change:scheduleRequests",this.renderLoading);this.model.get("jobScheduleCollection").on("reset",this.renderTable);this.model.get("jobScheduleCollection").on("reset",this.renderPagination)},runScheduledJob:function(h){var b=this;var d=$(h.currentTarget);if(d.hasClass("disabled")){return false}var c=d.closest("tr").index()-1;var a=this.model.get("jobScheduleCollection").at(c);var f={jobName:a.get("jobName"),when:0,description:"Executing from job schedule web console.",input:JSON.parse(a.get("params"))};Parse._request({route:"jobs",method:"POST",data:f}).then(function(){d.spin(false).html("Success!");setTimeout(function(){d.html("Run Now").removeClass("disabled")},3000)},function(){d.spin(false).html("Failed!");setTimeout(function(){d.html("Run Now").removeClass("disabled")},3000)});d.html("").spin("xsmall","#596674").addClass("disabled");return false},render:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".content").empty();this.$(".ui_content_footer .ui_actions_right").empty();this.renderTable();this.renderPagination();this.renderShowHeader();this.renderLoading()}else{this.renderHideHeader()}},renderTable:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".job_table").remove();this.$(".content").append(JST["cloud_code/_job_schedules"]({jobSchedules:this.model.get("jobScheduleCollection")}))}},renderLoading:function(){if(this.model.get("contentSelection")===this.selectionName){var a=this;if(this.$(".overlay").length===0){this.$(".content").append("<div class='overlay'></div>")}if(this.model.get("scheduleRequests")>0){this.$(".overlay").removeClass("hidden");this.$(".job_table").spin("large","#fff");setTimeout(function(){a.$(".overlay").addClass("shown")},0)}else{this.$(".overlay").removeClass("shown");this.$(".job_table").spin(false);setTimeout(function(){a.$(".overlay").addClass("hidden")},500)}}},renderPagination:function(){if(this.model.get("contentSelection")===this.selectionName){if(this.model.get("jobScheduleCollection").length>0||this.model.get("schedulePagination").get("current_page")>1){this.$(".ui_content_footer .ui_actions_right").html(this.pagination.render().$el)}}},renderShowHeader:function(){this.$(".schedule_job").show();this.$(".cloud_title").text("Scheduled Cloud Jobs")},renderHideHeader:function(){this.$(".schedule_job").hide()}});CloudCode.Views.JobStatusView=Backbone.View.extend({el:"#cloud_code_browser",selectionName:"job_status",initialize:function(){_.bindAll(this);var a={};a.rootUrl="job_status";a.model=this.model.get("statusPagination");if(this.model.get("isAdmin")){a.pushState=false}this.pagination=new App.Views.Paginate(a);this.model.on("change:contentSelection",this.render);this.model.get("jobStatusCollection").on("reset",this.renderTable);this.model.get("jobStatusCollection").on("reset",this.renderPagination);this.model.on("change:statusRequests",this.renderLoading)},render:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".content").empty();this.$(".ui_content_footer .ui_actions_right").empty();this.$(".cloud_title").text("Cloud Job Statuses");this.renderTable();this.renderPagination();this.renderLoading()}},renderTable:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".job_table").remove();this.$(".content").append(JST["cloud_code/_job_status"]({jobStatus:this.model.get("jobStatusCollection")}))}},renderLoading:function(){if(this.model.get("contentSelection")===this.selectionName){var a=this;if(this.$(".overlay").length===0){this.$(".content").append("<div class='overlay'></div>")}if(this.model.get("statusRequests")>0){this.$(".overlay").removeClass("hidden");this.$(".overlay").spin("large","#fff");setTimeout(function(){a.$(".overlay").addClass("shown")},0)}else{this.$(".overlay").removeClass("shown");this.$(".overlay").spin(false);setTimeout(function(){a.$(".overlay").addClass("hidden")},500)}}},renderPagination:function(){if(this.model.get("contentSelection")===this.selectionName){if(this.model.get("jobStatusCollection").length>0||this.model.get("statusPagination").get("current_page")>1){this.$(".ui_content_footer .ui_actions_right").html(this.pagination.render().$el)}}}});CloudCode.Views.LogContent=Parse.View.extend({className:"log_content",initialize:function(){_.bindAll(this);this.model.get("logContent").on("change:logs",this.render);this.model.on("change:logRequests",this.render)},render:function(){if(this.model.get("logRequests")===0){var a=this.model.get("logContent").get("logLevel");$(".cloud_title").text(a[0].toUpperCase()+a.substr(1).toLowerCase()+" log");$(".content_spinner").hide();this.$el.html(JST["cloud_code/_log_content"]({logs:this.model.get("logContent").get("logs")}));this.$el.show();this.$el.scrollTop(this.$el.prop("scrollHeight")-this.$el.height());this.$el.scrollLeft(0)}else{this.$el.hide();$(".content_spinner").show().spin("large","#717171")}return this}});CloudCode.Views.LogsView=Backbone.View.extend({el:"#cloud_code_browser",selectionName:"log",initialize:function(){_.bindAll(this);this.logContentView=new CloudCode.Views.LogContent({model:this.model});this.model.on("change:contentSelection",this.render);this.render()},render:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".content").empty().html('<div class="content_spinner"></div>').append(this.logContentView.render().el);this.$(".ui_content_footer .ui_actions_right").empty()}}});CloudCode.Views.NavView=Backbone.View.extend({el:".dashboard_nav",events:{"click .cc_nav a":"navSelection","change .script_list input[type=radio]":"fileSelection"},initialize:function(){_.bindAll(this);this.model.on("change:contentSelection",this.render);this.model.get("logContent").on("change:logLevel",this.renderLogLevel);this.model.get("scriptSources").on("reset",this.renderScripts);this.model.on("change:currentScriptSource",this.renderScriptSelection);this.renderLogLevel(null,this.model.get("logContent").get("logLevel"));this.renderScriptSelection(null,this.model.get("currentScriptSource"))},navSelection:function(c){var a=$(c.target).closest("a").attr("href");a=a.substr(a.indexOf("/cloud_code/")+12);var d=this.model.get("schedulePagination").get("current_page");var b=this.model.get("statusPagination").get("current_page");if(a==="jobs"&&d>1){a+="/page/"+d}else{if(a==="job_status"&&b>1){a+="/page/"+b}}Parse.history.navigate(a,{trigger:true});return false},fileSelection:function(b){var a="script/"+encodeURIComponent(b.target.value);Parse.history.navigate(a,{trigger:true})},render:function(a,b){this.$el.find(".cc_nav.selected").removeClass("selected");if(b==="webhooks_heroku"||b==="webhook"){this.$el.find("#nav_webhooks_heroku").toggleClass("selected",b==="webhooks_heroku");b="webhook"}if(b==="jobs"||b==="job_status"){this.$el.find("#nav_jobs .selected").removeClass("selected");this.$el.find("#nav_jobs_"+b).addClass("selected");b="jobs"}this.$el.find("#nav_"+b).addClass("selected")},renderScripts:function(b,e){var a=this.model.get("scriptSources");if(!_.isEmpty(a)){var f=a.pluck("name");var d={".":[]};_.each(f,function(j){var l=d;var k=j.split("/");while(k.length>1){var h=k.shift();if(!l[h]){l[h]={".":[]}}l=l[h]}l["."].push(k[0])});var c={};this.$el.find(".script_list").empty().append(CloudCode.Views.NavView.renderDir(d,"",c));this.renderScriptSelection(null,this.model.get("currentScriptSource"))}},renderLogLevel:function(b,c){var a=".log_"+c.toLowerCase();var d=this.$el.find("#nav_log");d.find(".selected").removeClass("selected");d.find(a).addClass("selected")},renderScriptSelection:function(a,b){this.$el.find("input[type=radio]").each(function(){if(this.value===b){this.checked=true;var c=this.parentNode;while(c&&c.className.indexOf("dir_wrapper")>-1){c.previousElementSibling.previousElementSibling.checked=true;c=c.parentNode}return}})}},{genUniqueId:function(a,b){var d="f_"+a.replace(/[^\w-]/,"_");if(b[d]){var c=1;while(b[d+c]){c++}d=d+c}return d},renderDir:function(d,m,k){var e=Object.keys(d).sort(function(p,o){var n=p.toUpperCase();var q=o.toUpperCase();return(p>o?1:(p<o?-1:0))});var b=document.createDocumentFragment();var f;var a;var j;var h;for(f=1;f<e.length;f++){a=CloudCode.Views.NavView.genUniqueId(e[f],k);k[a]=true;j=document.createElement("input");j.type="checkbox";j.id=a;b.appendChild(j);h=document.createElement("label");h.setAttribute("for",a);h.appendChild(document.createTextNode(e[f]));b.appendChild(h);var l=document.createElement("div");l.className="dir_wrapper";l.appendChild(CloudCode.Views.NavView.renderDir(d[e[f]],m+e[f]+"/",k));b.appendChild(l)}for(f=0;f<d["."].length;f++){var c=d["."][f];j=document.createElement("input");j.type="radio";j.name="hosted_files";a=CloudCode.Views.NavView.genUniqueId(c,k);k[a]=true;j.id=a;j.value=m+c;b.appendChild(j);h=document.createElement("label");h.setAttribute("for",a);h.appendChild(document.createTextNode(c));b.appendChild(h)}return b}});CloudCode.Views.ReleaseInfo=Parse.View.extend({el:".release_info",initialize:function(){_.bindAll(this,"render");this.model=this.options.model;this.model.on("change:releaseInfo",this.render)},render:function(){releaseInfo=this.model.get("releaseInfo");var a;if(releaseInfo){if(releaseInfo.get("version")){if(releaseInfo.get("timestamp")){a="Latest deploy: "+releaseInfo.get("version")+" - "+this.formatTimestamp(releaseInfo.get("timestamp"))}else{a="Latest deploy: "+releaseInfo.get("version")}if(releaseInfo.get("parseVersion")){a=a+" - Parse JavaScript SDK Version: "+releaseInfo.get("parseVersion")}}else{a="No Cloud Code deploys"}this.$el.html('<i class="icon_parseData"></i> '+_.escape(a))}return this},formatTimestamp:function(b){var a=moment(b);if(a&&a.isValid()){return a.format("dddd MMMM Do YYYY [at] h:mm:ssa (ZZ)")}else{return""}}});CloudCode.Views.ScriptSource=Parse.View.extend({className:"script_source",initialize:function(){_.bindAll(this);this.model=this.options.model;this.model.on("change:currentScriptSource",this.render);this.model.get("scriptSources").on("reset",this.render);this.model.on("change:scriptRequests",this.render)},render:function(){if(this.model.get("scriptRequests")===0){$(".content_spinner").hide();this.$el.show();var a=this.model.get("currentScriptSource");var b=this.model.get("scriptSources").getScriptSource(a);this.$el.html(JST["cloud_code/_script_source"]({scriptContents:b}));$(".cloud_title").text(a.substr(a.lastIndexOf("/")+1));SyntaxHighlighter.highlight()}else{this.$el.hide();$(".content_spinner").show().spin("large","#717171")}this.$el.css("max-width",($(window).width()-$("#cloud_code_browser .left").width())+"px");return this}});CloudCode.Views.ScriptsView=Backbone.View.extend({el:"#cloud_code_browser",selectionName:"script",initialize:function(){_.bindAll(this);this.scriptSourceView=new CloudCode.Views.ScriptSource({model:this.model});this.model.on("change:contentSelection",this.render);this.render()},render:function(){if(this.model.get("contentSelection")===this.selectionName){this.$(".content").empty().html('<div class="content_spinner"></div>').append(this.scriptSourceView.render().el);this.$(".ui_content_footer .ui_actions_right").empty();SyntaxHighlighter.highlight()}}});CloudCode.Views.WebhooksView=Backbone.View.extend({el:"#cloud_code_browser",selectionName:"webhook",events:{"click .add_webhook":"handleAddWebhook",'click #webhooks tr:not(".table_header")':"handleEditWebhook"},initialize:function(){_.bindAll(this);this.model.on("change:contentSelection",this.render);this.reloadTable()},render:function(){if(this.model.get("contentSelection")===this.selectionName){if(this.model.get("herokuAppLinking")){this.$(".ui_content_header").hide();this.$(".content").css("padding","0px")}else{this.$(".cloud_title").text("Webhooks");this.$(".ui_actions_right .add_webhook").show()}this.renderTable();webhookFunctionsData=this.model.get("webhookFunctions");webhookTriggersData=this.model.get("webhookTriggers");webhookAuthValidatorsData=this.model.get("webhookAuthValidators");if(_.all(webhookFunctionsData.concat(webhookTriggersData).concat(webhookAuthValidatorsData),function(a){return _.isUndefined(a.url)})){this.$(".content").append(JST["cloud_code/_empty_webhooks"]())}}else{if(this.model.get("herokuAppLinking")){this.$(".ui_content_header").show();this.$(".content").css("padding","47px")}this.$(".ui_actions_right .add_webhook").hide()}},renderTable:function(){if(_.isUndefined(this.model.get("webhooksFunctionsError"))&&_.isUndefined(this.model.get("webhooksTriggersError"))&&_.isUndefined(this.model.get("webhooksAuthValidatorsError"))){var k=UI.tag("div",{className:"webhooks_subtitle"},[UI.tag("img",{src:"/images/glyphs/glyph_heroku_blue.png",style:{"float":"left","margin-top":"4px"}},""),UI.tag("div",{style:{padding:"3px 0 5px 25px","margin-top":"4px"}},"Heroku Apps"),]);var b=UI.tag("table",{id:"heroku_webhooks",className:"full_table"},[UI.tag("tbody",{},[UI.tag("tr",{className:"table_header"},[UI.tag("th",{},"App Name"),UI.tag("th",{},"App ID"),UI.tag("th",{style:{width:0}},""),UI.tag("th",{style:{width:0}},""),UI.tag("th",{style:{width:"10%"}},"Status"),])])]);var a=UI.tag("div",{className:"webhooks_subtitle",style:{height:"50px"}},[UI.tag("div",{style:{"float":"left",display:"block",padding:"5px 0px"}},"Webhooks"),UI.tag("div",{style:{"float":"right",display:"block"}},UI.tag("a",{className:"ui_button add_webhook",display:"inline","float":"right"},[UI.tag("i",{className:"icon_plus"}),UI.tag("span",{},"New Webhook")]))]);var j=UI.tag("table",{id:"webhooks",className:"full_table"},[UI.tag("tbody",{},[UI.tag("tr",{className:"table_header"},[UI.tag("th",{},"Type"),UI.tag("th",{},"Class"),UI.tag("th",{},"Method"),UI.tag("th",{},"URL"),UI.tag("th",{style:{width:"10%"}},"Status"),])])]);var c=[];if(this.model.get("herokuAppLinking")){c.push(k);c.push(b);if(!this.model.get("herokuApps")||this.model.get("herokuApps").length===0){var d=document.createElement("div");d.innerHTML=JST["cloud_code/_empty_heroku_webhooks"]({userHasHeroku:this.model.get("userHasHeroku"),csrfTokenForHeroku:$('meta[name="csrf-token"]').attr("content"),});c.push(d)}c.push(a)}c.push(j);this.$(".content").html(UI.tag("div",{},c));var f="All good here!";_.each(this.model.get("herokuApps"),function(l){var e=l.name?"good":"deleted";var m=l.name?f:"This app has been deleted on Heroku";this.addTableRow(b,l.name,l.herokuAppId,"","",e,m);if(l.name){$(".row_"+l.name).click(function(){window.open("https://dashboard.heroku.com/apps/"+l.name,"_blank")})}}.bind(this));_.each(this.model.get("webhookFunctions"),function(m){if(m.url){var l=_.any(this.model.get("webhookFunctions"),function(o){return o.functionName===m.functionName&&o.url===undefined});var e=l?"duplicate":"good";var n=l?"Duplicate function detected in Cloud Code. This webhook will overwrite it.":f;this.addTableRow(j,"Function","",m.functionName,m.url,e,n)}}.bind(this));_.each(this.model.get("webhookTriggers"),function(e){if(e.url){var m=_.any(this.model.get("webhookTriggers"),function(o){return e.className===o.className&&e.triggerName===o.triggerName&&o.url===undefined});var l=m?"duplicate":"good";var n=m?"Duplicate tunction detected in Cloud Code. This webhook will overwrite it.":f;this.addTableRow(j,"Trigger",e.className,e.triggerName,e.url,l,n)}}.bind(this));_.each(this.model.get("webhookAuthValidators"),function(e){if(e.url){var m=_.any(this.model.get("webhookAuthValidators"),function(o){return o.authValidatorName===e.authValidatorName&&o.url===undefined});var l=m?"duplicate":"good";var n=m?"Duplicate auth validator detected in Cloud Code. This webhook will overwrite it.":f;this.addTableRow(j,"Auth Validator","",e.authValidatorName,e.url,l,n)}}.bind(this))}else{var h=[];if(!_.isUndefined(this.model.get("webhooksFunctionsError"))){h.push(UI.tag("p",{},"There is a problem with your Webhook Functions: "+this.model.get("webhooksFunctionsError")))}if(!_.isUndefined(this.model.get("webhooksTriggersError"))){h.push(UI.tag("p",{},"There is a problem with your Webhook Triggers: "+this.model.get("webhooksTriggersError")))}if(!_.isUndefined(this.model.get("webhooksAuthValidatorsError"))){h.push(UI.tag("p",{},"There is a problem with your Webhook Auth Providers: "+this.model.get("webhooksAuthValidatorsError")))}this.$(".content").html(UI.tag("div",{className:"ui_empty_state"},h))}},addTableRow:function(e,d,c,j,a,b,h){var f=UI.tag("tr",{className:"row_"+d},[UI.tag("td",{className:"webhook_type"},d),UI.tag("td",{className:"webhook_class"},c),UI.tag("td",{className:"webhook_method"},j),UI.tag("td",{className:"webhook_url"},a),UI.tag("td",{className:"webhook_status has_tooltip "+b},UI.createTooltip(h,{direction:"left"}))]);e.appendChild(f);return this},handleAddWebhook:function(){var a=new CloudCode.Views.WebhookModal({classes:this.model.get("classes"),webhookAuthValidatorEnabled:this.model.get("webhookAuthValidatorEnabled")});a.then(this.reloadTable.bind(this))},handleEditWebhook:function(b){var a=$(b.target).closest("tr");var c=new CloudCode.Views.WebhookModal({classes:this.model.get("classes"),webhookAuthValidatorEnabled:this.model.get("webhookAuthValidatorEnabled"),currentWebhook:{type:a.find(".webhook_type").text(),className:a.find(".webhook_class").text(),method:a.find(".webhook_method").text(),url:a.find(".webhook_url").text()}});c.then(this.reloadTable.bind(this))},reloadTable:function(){this.$el.spin("large","#5c5c5a");var e=new XMLHttpRequest();var c=new XMLHttpRequest();var d=new XMLHttpRequest();e.open("POST",Parse.serverURL+"/1/hooks/functions",true);c.open("POST",Parse.serverURL+"/1/hooks/triggers",true);d.open("POST",Parse.serverURL+"/1/hooks/authvalidators",true);var b=function(){if(e.readyState===4&&c.readyState===4&&d.readyState===4){if(e.status===200&&c.status===200&&d.status===200){var j=JSON.parse(e.responseText).results;var h=JSON.parse(c.responseText).results;var f=JSON.parse(d.responseText).results;this.model.set("webhookTriggers",h);this.model.set("webhookAuthValidators",f);this.model.set("webhookFunctions",j);this.model.unset("webhooksTriggersError");this.model.unset("webhooksFunctionsError");this.model.unset("webhooksAuthValidatorsError");this.render()}else{this.model.set("webhooksTriggersError",JSON.parse(c.responseText).error);this.model.set("webhooksFunctionsError",JSON.parse(e.responseText).error);this.model.set("webhooksAuthValidatorsError",JSON.parse(d.responseText).error)}this.$el.spin(false)}}.bind(this);e.onreadystatechange=b;c.onreadystatechange=b;d.onreadystatechange=b;params={_method:"GET",_ApplicationId:app.key,_MasterKey:app.push_key,};e.send(JSON.stringify(params));c.send(JSON.stringify(params));d.send(JSON.stringify(params));var a=this;$.get(App.currentApp.dataRequestUrl()+"cloud_code/heroku_link").then(function(f){a.model.set("herokuApps",f.herokuApps);a.reloadAppNames()}).error(function(f){a.model.set("herokuAppsErrors",f)})},reloadAppNames:function(){var a=this;_.each(this.model.get("herokuApps"),function(c){var b=new XMLHttpRequest();b.open("GET","https://api.heroku.com/apps/"+c.herokuAppId);b.onreadystatechange=function(){if(b.readyState===4){if(b.status===200){c.name=JSON.parse(b.responseText).name;c.statusColor="status_good"}else{if(b.status===404){c.statusColor="status_deleted"}}a.render()}};b.send()})}});CloudCode.Views.DDView=Backbone.View.extend({events:{"click .field_dropdown_expanded .dd_row":"rowSelected",click:"openMenu"},open:false,initialize:function(){var a=this;_.bindAll(this);this.disabled=this.options.disabled||false;this.rowViews=[];this.rowCollection=this.options.rowCollection;this.rowCollection.each(function(c){var d=CloudCode.Views[c.get("type")];if(!_.isUndefined(d)){var b=new d({model:c});a.rowViews.push(b)}});if(this.rowCollection.where({selected:true}).length===0){this.rowCollection.at(0).set("selected",true)}this.rowCollection.on("change:selected",function(b,c){if(c){a.renderSelectedRow()}});this.model.on("change:openedDropdown",function(b){if(a.model.get("openedDropdown")!==a.rowCollection){a.closeMenu()}});$("body").click(function(b){a.closeMenu(b)})},closeMenu:function(a){this.$(".field_dropdown_expanded").hide();this.open=false},openMenu:function(a){if(!this.disabled){this.$(".field_dropdown_expanded").show();this.open=true;this.model.set("openedDropdown",this.rowCollection)}a.stopPropagation()},rowSelected:function(b){var a=$(b.target).closest(".dd_row").index();this.rowCollection.each(function(c){if(c.get("selected")===true){c.set("selected",false)}});this.rowCollection.at(a).set("selected",true);this.closeMenu(b);return false},render:function(){var a=this;this.$el.append("<div class='field_dropdown_expanded'></div>");_(this.rowViews).each(function(b){a.$(".field_dropdown_expanded").append(b.render().$el)});this.renderSelectedRow();return this},renderSelectedRow:function(b){if(this.$(".selected_row").length<=0){this.$el.prepend("<div class='selected_row'></div>")}if(this.selectedRowView){this.selectedRowView.remove()}var a=b||this.currentlySelectedRow();var c=CloudCode.Views[a.get("type")];this.selectedRowView=new c({model:a});this.$(".selected_row").html(this.selectedRowView.render().$el);if(this.disabled){this.$el.addClass("disabled")}},currentlySelectedRow:function(){var a;this.rowCollection.each(function(b){if(b.get("selected")===true){a=b;return}});if(!a){return this.rowCollection.at(0).set("selected",0)}else{return a}}});CloudCode.Views.DDStringRow=Backbone.View.extend({className:"dd_string_row dd_row",initialize:function(){_.bindAll(this);this.model.on("change:selected",this.renderSelected)},render:function(){this.$el.html("<div class='icon_checkmark'></div><label>"+this.model.get("string")+"</label>");this.$el.append("<div class='dd_row_overlay'></div>");this.renderSelected();return this},renderSelected:function(){if(this.model.get("selected")){this.$el.addClass("selected")}else{this.$el.removeClass("selected")}}});CloudCode.Views.DDDateTimeRow=Backbone.View.extend({className:"dd_date_time_row dd_row",events:{"click .time, .date, .hour, .minute":"stopEventPropagation","change input[name='date_editor_day']":"setSelectedDate","change input[name='date_editor1_day']":"setSelectedDate","change select.hour, select.minute":"setSelectedDate"},dateFormat:"MMMM DD, YYYY",initialize:function(){_.bindAll(this);this.dateTimeEditor=new App.Views.Editors.Date({defaultEmpty:false,preventPast:true,dateFormat:this.dateFormat});if(!this.model.get("date")){this.model.set("date",moment.utc())}this.model.on("change:date",this.renderDate);this.model.on("change:selected",this.renderSelected)},stopEventPropagation:function(a){a.stopPropagation()},setSelectedDate:function(b){var a=moment(this.$("input[type=text]").val(),this.dateFormat).utc().hours(this.$(".time_picker_content .hour").val()).minutes(this.$(".time_picker_content .minute").val());this.model.set("date",a)},render:function(){this.$el.html("<div class='icon_checkmark'>");this.$el.append(this.dateTimeEditor.render().$el);this.$el.append("<div class='dd_row_overlay'></div>");this.renderDate();this.renderSelected();return this},renderDate:function(){var a=this.model.get("date");var b=new Date();b.setDate(a.date());b.setMonth(a.month());b.setHours(a.hours());b.setMinutes(a.minutes());this.dateTimeEditor.datepicker.value=b;this.$(".time_picker_content .hour").val(CloudCode.Models.JobSchedule.twoDigitFormat(a.hours()));this.$(".time_picker_content .minute").val(CloudCode.Models.JobSchedule.twoDigitFormat(a.minutes()));this.dateTimeEditor.updateTime()},renderSelected:function(){if(this.model.get("selected")){this.$el.addClass("selected")}else{this.$el.removeClass("selected")}}});CloudCode.Views.DDDayIntervalRow=Backbone.View.extend({className:"dd_day_interval_row dd_row",events:{"click .time":"stopEventPropagation","change select.hour, select.minute":"setSelectedTime"},dateFormat:"MM dd, yy",initialize:function(){_.bindAll(this);var b=new Date();var a=new Date();a.setDate(b.getDate()+1);this.dateTimeEditor=new App.Views.Editors.Date({defaultEmpty:false,disableDate:true,datePickerOptions:{minDate:b,defaultDate:a,dateFormat:this.dateFormat}});if(!this.model.get("timeMins")||!this.model.get("timeHours")){this.model.set("timeMins","00");this.model.set("timeHours","00")}this.model.on("change:timeHours",this.renderTime);this.model.on("change:timeMins",this.renderTime);this.model.on("change:selected",this.renderSelected)},setSelectedTime:function(){var b=this.$(".time_picker_content .hour").val();var a=this.$(".time_picker_content .minute").val();this.model.set("timeHours",b,{silent:true});this.model.set("timeMins",a)},stopEventPropagation:function(a){a.stopPropagation()},render:function(){this.$el.html("<div class='icon_checkmark'></div><label>Every day at</label>");this.$el.append(this.dateTimeEditor.render().$el);this.$el.append("<div class='dd_row_overlay'></div>");this.renderTime();this.renderSelected();return this},renderTime:function(){var b=this.model.get("timeHours");var a=this.model.get("timeMins");this.$(".time_picker_content .hour").val(b);this.$(".time_picker_content .minute").val(a);this.dateTimeEditor.updateTime()},renderSelected:function(){if(this.model.get("selected")){this.$el.addClass("selected")}else{this.$el.removeClass("selected")}}});CloudCode.Views.DDHourIntervalRow=Backbone.View.extend({className:"dd_hour_interval_row dd_row",events:{"click .time":"stopEventPropagation","change select.hour, select.minute":"setSelectedTime","change select.time_quantity":"setSelectedInterval","change select.time_unit":"setSelectedInterval"},dateFormat:"MM dd, yy",initialize:function(){_.bindAll(this);var b=new Date();var a=new Date();a.setDate(b.getDate()+1);this.dateTimeEditor=new App.Views.Editors.Date({defaultEmpty:false,disableDate:true,datePickerOptions:{minDate:b,defaultDate:a,dateFormat:this.dateFormat,}});if(_.isUndefined(this.model.get("timeMins"))||_.isUndefined(this.model.get("timeHours"))||_.isUndefined(this.model.get("interval"))||_.isUndefined(this.model.get("intervalUnit"))){this.model.set("timeMins","00");this.model.set("timeHours","00");this.model.set("interval","15");this.model.set("intervalUnit","mins")}this.model.on("change:interval",this.renderIntervalSelectorValues);this.model.on("change:intervalUnit",this.renderIntervalSelector);this.model.on("change:timeHours",this.renderTime);this.model.on("change:timeMins",this.renderTime);this.model.on("change:selected",this.renderSelected)},stopEventPropagation:function(a){a.stopPropagation()},setSelectedTime:function(){var b=this.$(".time_picker_content .hour").val();var a=this.$(".time_picker_content .minute").val();this.model.set("timeHours",b,{silent:true});this.model.set("timeMins",a)},setSelectedInterval:function(){var a=this.$(".interval_selector .time_quantity").val();var b=this.$(".interval_selector .time_unit").val();this.model.set("interval",a,{silent:true});this.model.set("intervalUnit",b)},render:function(){this.$el.html("<div class='icon_checkmark'></div><label>Every</label>");this.$el.append("<div class='interval_selector'></div>");this.renderIntervalSelector();this.$el.append("<label class='subtext'>every day after</label>");this.$el.append(this.dateTimeEditor.render().$el);this.renderTime();this.renderSelected();this.$el.append("<div class='dd_row_overlay'></div>");return this},renderTime:function(){var b=this.model.get("timeHours");var a=this.model.get("timeMins");this.$(".time_picker_content .hour").val(b);this.$(".time_picker_content .minute").val(a);this.dateTimeEditor.updateTime()},renderIntervalSelector:function(){this.$(".interval_selector").html(JST["cloud_jobs/_interval_selector"]({type:this.model.get("intervalUnit"),num:this.model.get("interval")}));this.renderIntervalSelectorValues()},renderIntervalSelectorValues:function(){this.$(".interval_selector .time_quantity").val(this.model.get("interval"));this.$(".interval_selector .time_unit").val(this.model.get("intervalUnit"))},renderSelected:function(){if(this.model.get("selected")){this.$el.addClass("selected")}else{this.$el.removeClass("selected")}}});CloudCode.Views.JobArea=Backbone.View.extend({events:{"focus textarea":"renderFocus","blur textarea":"renderBlur","click .placeholder_span":"delegateClickEvent","change textarea":"updateValue"},initialize:function(){_.bindAll(this)},delegateClickEvent:function(a){this.$("textarea").focus()},updateValue:function(a){this.model.set("params",this.$("textarea").val())},renderFocus:function(a){this.$(".placeholder_span").hide();$(this.$el.closest(".field_row")[0]).css("height","115px");this.$("textarea").css("height","100px");$(".field_param").addClass("focused")},renderBlur:function(a){if(this.$("textarea").val().trim().length===0){this.$(".placeholder_span").show()}else{this.$(".placeholder_span").hide()}$(this.$el.closest(".field_row")[0]).css("height","");this.$("textarea").css("height","");$(".field_param").removeClass("focused")},render:function(){var a=this.$("textarea").attr("placeholder");this.$("textarea").attr("placeholder","");this.$el.append("<span class='placeholder_span'>"+a+"</span>");if(this.model.get("params")){this.$("textarea").val(this.model.get("params"));this.$(".placeholder_span").hide()}return this}});CloudCode.Views.JobForm=Backbone.View.extend({events:{"click .submit_button":"submitForm","focus .job_description, .field_param textarea":"removeInvalid","click .chzn-single":"removeInvalid"},initialize:function(){if(this.options.updateForm){this.model.set("existed",true)}this.jobSelectView=new CloudCode.Views.JobSelect({el:".field_function",model:model,jobs:this.options.jobsArray,jobsInUse:this.options.jobsInUse});this.jobParamsView=new CloudCode.Views.JobArea({el:".field_param",model:model});this.model.set("startCollection",new Backbone.Collection([{type:"DDStringRow",string:"Start Immediately"},{type:"DDDateTimeRow"}]));this.startDropdownView=new CloudCode.Views.DDView({el:".start_field",model:model,rowCollection:model.get("startCollection"),disabled:this.options.updateForm});this.model.set("repeatCollection",new Backbone.Collection([{type:"DDStringRow",string:"Don't Repeat"},{type:"DDDayIntervalRow"},{type:"DDHourIntervalRow"}]));this.repeatDropdownView=new CloudCode.Views.DDView({el:".repeat_field",model:model,rowCollection:model.get("repeatCollection")})},render:function(){this.jobSelectView.render();this.jobParamsView.render();this.startDropdownView.render();this.repeatDropdownView.render()},submitForm:function(){var a=this;var c=true;if($(".job_description").val().trim().length<=0){$(".job_description").addClass("invalid");c=false}if($(".field_function select").val().trim().length<=0){$(".field_function").addClass("invalid");c=false}var f=$(".field_param textarea").val();if(f.length>0){var b;try{b=$.parseJSON(f)}catch(d){}if(!b){$(".field_param").addClass("invalid");c=false}}if(!c){return false}this.model.save({success:function(){window.location=App.currentApp.dataRequestUrl()+"cloud_code/jobs"},error:function(){a.$(".submit_button").spin(false).html("Failed!")}});this.$(".submit_button").empty().spin("xsmall","#fff")},removeInvalid:function(a){$(".invalid").removeClass("invalid")}});CloudCode.Models.JobSchedule=Backbone.Model.extend({initialize:function(){this.on("change:startCollection",this.setStartCollectionDefaults);this.on("change:repeatCollection",this.setRepeatCollectionDefaults)},save:function(b){var a,c;if(this.get("existed")){a=App.currentApp.dataRequestUrl()+"cloud_code/jobs/"+this.get("objectId");c="put"}else{a=App.currentApp.dataRequestUrl()+"cloud_code/jobs";c="post"}var d=this.toJSON();$.ajax({url:a,type:c,data:{job_schedule:this.toJSON()}}).success(function(e){if(b.success){b.success()}}).error(function(h,e,f){if(b.error){b.error()}})},toJSON:function(){var a=this.extractRepeatValues();var b="{}";if(this.get("params")&&this.get("params").length>0){b=this.get("params")}return{description:$(".job_description").val(),jobName:this.get("jobName"),params:b,startAfter:this.extractStartAfterValue(),daysOfWeek:[1,1,1,1,1,1,1],timeOfDay:a.timeOfDay,repeatMinutes:a.repeatMinutes}},extractStartAfterValue:function(){var a=this.get("startCollection").where({selected:true})[0];if(a.get("date")){return a.get("date").toISOString()}},extractRepeatValues:function(){var c=this.get("repeatCollection").where({selected:true})[0];if(_.isUndefined(c.get("timeHours"))||_.isUndefined(c.get("timeMins"))){return{}}else{var b=moment().utc().minutes(c.get("timeMins")).hours(c.get("timeHours")).toISOString();b=b.split("T")[1];var a=60*24;if(!_.isUndefined(c.get("interval"))&&!_.isUndefined(c.get("intervalUnit"))){if(c.get("intervalUnit")==="mins"){a=c.get("interval")}else{a=c.get("interval")*60}}return{timeOfDay:b,repeatMinutes:a}}},setStartCollectionDefaults:function(){if(this.get("startAfter")){var a=this.get("startCollection").at(1);a.set("date",moment(this.get("startAfter")).utc());a.set("selected",true)}},setRepeatCollectionDefaults:function(){var a=this.get("repeatMinutes");if(!_.isUndefined(a)){var b;if(a===60*24){b=this.get("repeatCollection").at(1)}else{b=this.get("repeatCollection").at(2);if(a<60){b.set("intervalUnit","mins");b.set("interval",a)}else{b.set("intervalUnit","hours");b.set("interval",a/60)}}b.set("selected",true);b.set("timeHours",CloudCode.Models.JobSchedule.twoDigitFormat(moment(this.get("timeOfDay"),"HH:mm:ss.SSSZ").utc().hours()));b.set("timeMins",CloudCode.Models.JobSchedule.twoDigitFormat(moment(this.get("timeOfDay"),"HH:mm:ss.SSSZ").utc().minutes()))}else{this.get("repeatCollection").at(0).set("selected",true)}}},{twoDigitFormat:function(a){if(a<10){return"0"+a}else{return(a).toString()}}});CloudCode.Views.JobSelect=Backbone.View.extend({events:{"focus .search-field .default":"renderFocus","blur .search-field .default":"renderBlur","change .chzn-done":"updateValue"},initialize:function(){_.bindAll(this);var a=this;this.jobs=this.options.jobs;this.jobsInUse=this.options.jobsInUse},updateValue:function(a){this.model.set("jobName",this.$("select").val())},renderFocus:function(a){if(this.$(".search-field .default").is(":visible")){$(".field_function").addClass("focused")}},renderBlur:function(a){$(".field_function").removeClass("focused")},render:function(){var a=this;_(this.jobs).each(function(c){var b="";if(a.model.get("jobName")===c){b="selected"}else{if(_(a.jobsInUse).indexOf(c)>=0){b="disabled"}}a.$("select").append("<option "+b+">"+c+"</option>")});this.$("select").chosen({no_results_text:"Oops, no jobs with that name",max_selected_options:1,disable_add_result:true,display_disabled_options:true})}});App.Collections.Apps=Backbone.Collection.extend({url:"/apps",model:App.Models.App});App.Collections.Collaborations=Backbone.Collection.extend({url:function(){return"/apps/"+encodeURIComponent(this.appId)+"/collaborations"},model:App.Models.Collaboration});App.Collections.Constraints=Backbone.Collection.extend({},{Ops:{String:{equals:{op:"equalTo",editor:App.Views.Editors.SingleLineString},"does not equal":{op:"notEqualTo",editor:App.Views.Editors.SingleLineString},"starts with":{op:"startsWith",editor:App.Views.Editors.SingleLineString},"is any of":{op:"containedIn",editor:App.Views.Editors.ChosenArray},"is not any of":{op:"notContainedIn",editor:App.Views.Editors.ChosenArray},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Number:{equals:{op:"equalTo",editor:App.Views.Editors.Number},"does not equal":{op:"notEqualTo",editor:App.Views.Editors.Number},"less than":{op:"lessThan",editor:App.Views.Editors.Number},"greater than":{op:"greaterThan",editor:App.Views.Editors.Number},"less than or equal to":{op:"lessThanOrEqualTo",editor:App.Views.Editors.Number},"greater than or equal to":{op:"greaterThanOrEqualTo",editor:App.Views.Editors.Number},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Boolean:{equals:{op:"equalTo",editor:App.Views.Editors.Boolean},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Date:{before:{op:"lessThanOrEqualTo",editor:App.Views.Editors.Date},after:{op:"greaterThanOrEqualTo",editor:App.Views.Editors.Date},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Array:{"contains any of":{op:"containedIn",editor:App.Views.Editors.ChosenArray},"does not contain any of":{op:"notContainedIn",editor:App.Views.Editors.ChosenArray},"contains all of":{op:"containsAll",editor:App.Views.Editors.ChosenArray},"contains string":{op:"equalTo",editor:App.Views.Editors.SingleLineString},"does not contain string":{op:"notEqualTo",editor:App.Views.Editors.SingleLineString},"contains number":{op:"equalTo",editor:App.Views.Editors.Number},"does not contain number":{op:"notEqualTo",editor:App.Views.Editors.Number},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},File:{},GeoPoint:{},Object:{},Bytes:{},Pointer:{equals:{op:"equalTo",editor:App.Views.Editors.Pointer},"does not equal":{op:"notEqualTo",editor:App.Views.Editors.Pointer},"is any of":{op:"containedIn",editor:App.Views.Editors.ChosenArray},"is not any of":{op:"notContainedIn",editor:App.Views.Editors.ChosenArray},exists:{op:"exists"},"does not exist":{op:"doesNotExist"}},Relation:{}},addConstraintsToQuery:function(c,b,a){_(c.models).each(function(j){var h=j.get("field");var d=a.typeForQuery(h);var f=j.get("op");var k=App.Collections.Constraints.Ops[d][f].op;var e=j.get("value");if(_.isUndefined(e)){b[k].call(b,h)}else{b[k].call(b,h,e)}})},});App.Models.Datepicker=Backbone.Model.extend({defaults:{value:new Date(),monthOffset:0,minDate:null,maxDate:null,changeHandler:function(){}},initialize:function(){this.on("change:minDate change:maxDate",this.placeWithinBounds);var a=new Date();var b=this.get("value");if(b.getMonth()!=a.getMonth()){this.set("monthOffset",(b.getFullYear()-a.getFullYear())*12+b.getMonth()-a.getMonth())}},validate:function(b,a){if(b.minDate&&b.maxDate){if(b.minDate>b.maxDate){return"min bound can't be greater than max bound"}}},placeWithinBounds:function(){if(this.get("minDate")&&this.get("value")<this.get("minDate")){this.set("value",new Date(this.get("minDate")))}if(this.get("maxDate")&&this.get("value")>this.get("maxDate")){this.set("value",new Date(this.get("maxDate")))}}});App.Views.Datepicker=Backbone.View.extend({events:{"click .ui_dateprev":"decrementMonth","click .ui_datenext":"incrementMonth","change input.ui_dateinput":"parseValue","focus input.ui_dateinput":"show","click input.ui_dateinput":"show","change .ui_dateselector input[type=radio]":"setDate"},open:false,hideOnChange:false,stringFormat:"YYYY-MM-DD",initialize:function(){_.bindAll(this);var a=this;if(!this.model){this.model=new App.Models.Datepicker({changeHandler:this.options.changeHandler||function(){},value:this.options.initialValue||new Date()})}if(this.options.stringFormat){this.stringFormat=this.options.stringFormat}this.name=this.options.name||"date";this.hideOnChange=!!this.options.hideOnChange;this.$el.addClass("ui_datepicker");this.render();this.model.on("change:monthOffset",this.render);this.model.on("change:value",this.render);$("body").mousedown(function(c){var b=$(c.target);if(b.closest(".ui_datepicker")[0]!=a.el&&a.open){a.hide()}})},render:function(){var b=new Date();var h=this.model.get("monthOffset");var e=new Date(b.getFullYear(),b.getMonth()+h);var a="start_"+e.getDay();var j=new Date(e.getYear(),e.getMonth()+1,0).getDate();var c=moment(e).format("MMMM YYYY");var f=this.model.get("value");var d=-1;if(e.getFullYear()===f.getFullYear()&&e.getMonth()===f.getMonth()){d=f.getDate()}this.$el.html(JST["components/_datepicker"]({name:this.name,open:this.open,startClass:a,days:j,headerString:c,currentDay:b.getDate(),monthOffset:h,displayValue:moment(f).format(this.stringFormat),selected:d,preventFuture:!!this.options.preventFuture,drawer:!!this.options.secondaryComponent}));if(this.options.secondaryComponent){this.options.secondaryComponent.setElement(this.$el.find(".ui_datedrawer"));this.options.secondaryComponent.render()}},show:function(){this.open=true;this.$el.find(".ui_dateinput").addClass("editing");this.$el.find(".ui_datepopup").show()},hide:function(){this.open=false;this.$el.find(".ui_dateinput").removeClass("editing");this.$el.find(".ui_datepopup").hide()},setFormat:function(a){this.stringFormat=a;this.$el.children("input[type=text]").val(moment(this.model.get("value")).format(a))},incrementMonth:function(){this.model.set("monthOffset",this.model.get("monthOffset")+1);return false},decrementMonth:function(){this.model.set("monthOffset",this.model.get("monthOffset")-1);return false},parseValue:function(d){var a=moment(d.target.value);if(a.isValid()){a.second(0).minute(0).hour(0);var c=new Date();var b=a.toDate();if(!(this.options.preventFuture&&b>c)){var f=(b.getFullYear()-c.getFullYear())*12+b.getMonth()-c.getMonth();this.model.set({value:b,monthOffset:f});this.model.get("changeHandler")(b)}}d.target.value=moment(this.model.get("value")).format(this.stringFormat)},setDate:function(c){var a=new Date();var b=new Date(a.getFullYear(),a.getMonth()+this.model.get("monthOffset"),parseInt(c.target.value,10));this.$el.children("input[type=text]").val(moment(b).format(this.stringFormat));this.model.set("value",b,{silent:true});if(this.hideOnChange){this.hide()}this.model.get("changeHandler")(b)}});App.Models.Dropdown=Backbone.Model.extend({defaults:{options:[],values:{},value:null,changeFunction:null},initialize:function(){_.bindAll(this);this.on("change:value",this.triggerChange);if(this.get("value")===null){var a=this.get("values")[this.get("options")[0]]||this.get("options")[0];this.set("value",a)}},triggerChange:function(a,b){if(this.get("changeFunction")){if(this.get("values")[b]!==undefined){this.get("changeFunction")(this.get("values")[b])}else{this.get("changeFunction")(b)}}}});App.Views.Dropdown=Backbone.View.extend({events:{"change input":"updateValue"},initialize:function(){_.bindAll(this);this.render()},render:function(){this.$el.empty();this.$el.attr("tabindex","-1");var c=this.model.get("options");var b=this.model.get("values");var f=this.model.get("value");if(this.model.get("defaultOption")){this.$el.append(JST["components/_dropdown"]({name:this.model.get("name"),id:this.model.get("id")+"[-1]",text:this.model.get("defaultOption"),value:"",checked:(c.length===0)}))}for(var e=0,a=c.length;e<a;e++){var h=(b[c[e]]===undefined?c[e]:b[c[e]]);var d=JST["components/_dropdown"]({name:this.model.get("name"),id:this.model.get("id")+"["+e+"]",value:c[e],text:c[e],checked:(f===h)});this.$el.append(d)}},updateValue:function(){var a=this.$el.find("input:checked").val()||null;this.model.set("value",a)}});var Param=Backbone.Model.extend({sync:function(c,b,a){a.url="config.json";if(c==="delete"){a.data=this._deletePayload()}return Backbone.sync("update",b,a)},toJSON:function(b){var a={};a[this.get("name")]=this.get("value");return{params:a}},type:function(){var a=this.get("value");return this._capitaliseFirstLetter(typeof a)},displayValue:function(){var a=this.get("value");if(typeof a==="string"){return _.escape(a)}return a},isNew:function(){return false},_deletePayload:function(){var a={};a[this.get("name")]={__op:"Delete"};return JSON.stringify({params:a})},_capitaliseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},});Param.createFromJSON=function(b,c){var a={name:b,value:c};return new Param(a,{appUrl:this.appUrl})};var DateParam=Param.extend({type:function(){return"Date"},toJSON:function(b){var a={};a[this.attributes.name]={__type:"Date",iso:this.get("value").toJSON()};return{params:a}},});DateParam.createFromJSON=function(b,c){var a={name:b,value:new Date(c.iso)};return new DateParam(a,{appUrl:this.appUrl})};var ObjectParam=Param.extend({displayValue:function(){return _.escape(JSON.stringify(this.get("value")))}});ObjectParam.createFromJSON=function(b,c){var a={name:b,value:c};return new ObjectParam(a,{appUrl:this.appUrl})};var ArrayParam=Param.extend({type:function(){return"Array"},displayValue:function(){return _.escape(JSON.stringify(this.get("value")))},});ArrayParam.createFromJSON=function(b,c){var a={name:b,value:c};return new ArrayParam(a,{appUrl:this.appUrl})};var GeoPointParam=Param.extend({type:function(){return"GeoPoint"},toJSON:function(b){var a={};var c=this.get("value");a[this.get("name")]={__type:"GeoPoint",latitude:c.latitude,longitude:c.longitude};return{params:a}},displayValue:function(){var a=this.get("value");return["(",a.latitude,", ",a.longitude,")"].join("")},});GeoPointParam.createFromJSON=function(b,c){var a={name:b,value:c};return new GeoPointParam(a,{appUrl:this.appUrl})};var FileParam=Param.extend({type:function(){return"File"},toJSON:function(c){var a={};var b=this.get("value").lastIndexOf("/");a[this.get("name")]={__type:"File",url:this.get("value"),name:this.get("value").substr(b+1)};return{params:a}},displayValue:function(){var b=this.get("value");var a=_.escape(decodeURIComponent(UI.FileEditor.getFilenameFromPath(b)));return'<a href="'+b+'" target="_blank">'+a+"</a>"}});FileParam.createFromJSON=function(b,c){var a={name:b,value:c.url};return new FileParam(a,{appUrl:this.appUrl})};var Config=Backbone.Collection.extend({initialize:function(b,a){this.model=Param;this.appUrl=a.appUrl;this.applicationId=a.applicationId;this.restKey=a.restKey;this.serverURL=a.serverURL},model:Param,url:function(){return this.appUrl+"config.json"},parse:function(a){var d=a.params;var f=[];var e;for(var b in d){var c=d[b];e=Config.getTypeFromJSON(c);f.push(e.createFromJSON(b,c))}return f},search:function(b){if(!b.length){return this}try{var a=new RegExp(b,"i");return _(this.filter(function(d){return a.test(d.get("name"))}))}catch(c){}return this},comparator:function(a){return a.get("name").toUpperCase()},});Config.getTypeFromJSON=function(a){if(a.__type){return Config.complexTypes[a.__type]}else{if(Array.isArray(a)){return ArrayParam}else{if(typeof a==="object"){return ObjectParam}}}return Param};Config.getType=function(a){return Config.complexTypes[a]||Param};Config.complexTypes={Array:ArrayParam,Date:DateParam,GeoPoint:GeoPointParam,Object:ObjectParam,File:FileParam,};var ParamModal=function(a){this.config=a};ParamModal.prototype.setValueEditor=function(a){if(this.currValueEditor){this.currValueEditor.remove()}this.currValueEditor=a.attach(document.getElementById("param_value_wrapper"))};ParamModal.prototype.render=function(f){var c=this;var e=!!f;var b=false;var d=function(){c.setPendingRequest(false);c.modalPromise.resolve()};var a=function(m,j,l){var k=JSON.parse(j.responseText||"{}");if(k.code===105&&k.message.match(/invalid field name/)){k.message="Name must start with a letter and contain only letters, digits and underscores."}c.showError(k.message||"unknown error");c.setPendingRequest(false)};var h=function(l){if(!l.name){return{ok:false,message:"Parameter name cannot be empty."}}var k=c.typeDropdown.value;var m=ParamModal.editors.validator(k);var j=m(l.value);if(!j.ok&&!j.message){j.message="Invalid value for "+k+" type."}return j};this.modalPromise=new UI.Modal({className:"config_modal",title:e?"Edit Parameter":"New Parameter",template:JST["config/_new_parameter_modal"]({updateParam:e}),keyboardSubmit:true,init:function(){var m=function(n){n.serverURL=c.config.serverURL;n.applicationId=c.config.applicationId;n.restKey=c.config.restKey;if(!n.onerror){n.onerror=c.showError.bind(c)}};var j=$(this.node).find(".modal_errors");c.showError=function(n){j.text(n).show();return c};c.paramNameEditor=new UI.StringEditor({parent:document.getElementById("param_name_wrapper"),placeholder:"Name",value:f?f.get("name"):"",disabled:!!f});c.paramNameEditor.focus();var k=f?f.type():"String";c.setValueEditor(ParamModal.editors.get(k));if(k==="File"){m(c.currValueEditor)}c.typeDropdown=new UI.Dropdown({optionSet:ParamModal.editors.supportedTypes(),name:"type_dropdown",value:k,disabled:!!f,parent:document.getElementById("type_dropdown_wrapper"),onChange:function(n){c.setValueEditor(ParamModal.editors.get(n));if(n==="File"){m(c.currValueEditor)}}});if(f){c.currValueEditor.value=f.get("value");if(f.type()!="Date"&&c.currValueEditor.focus){c.currValueEditor.focus()}$(this.node).find(".ui_delete_button").click(function(){if(b){return false}c.setPendingRequest(true);f.destroy({wait:true,success:d,error:a,});return false})}var l=$(this.node).find(".ui_delete_button, .confirm");c.setPendingRequest=function(n){b=n;l.toggleClass("disabled",n)}},footer:e?JST["config/_modal_footer"]():null,submit:function(){if(b){return false}c.setPendingRequest(true);var j={name:c.paramNameEditor.value,value:c.currValueEditor.value,};var l=h(j);if(!l.ok){c.showError(l.message);c.setPendingRequest(false);return false}var k={wait:true,success:d,error:a,};var n=c.config.where({name:j.name});if(n.length){if(e){n[0].save({value:j.value},k)}else{c.showError("Parameter already exists: "+j.name);c.setPendingRequest(false)}}else{var o=Config.getType(c.typeDropdown.value);var m=new o(j);c.config.create(m,k)}return false},});return false};ParamModal.editors=function(){var b=function(){return{ok:true}};var d=function(e){return{ok:e!==null}};var a=null;var c=function(){a=a||{Boolean:{editor:new UI.BooleanEditor(),},String:{editor:new UI.StringEditor({placeholder:"Value"}),},Number:{editor:new UI.NumberEditor({placeholder:"Value"}),validator:function(e){return{ok:typeof e==="number"&&!isNaN(e)&&isFinite(e)}},},Date:{editor:new UI.DateEditor({value:new Date()}),},Object:{editor:new UI.ObjectEditor({placeholder:"{}"}),validator:function(e){if(e===null){return{ok:false}}if(e.__type!==undefined){return{ok:false,message:"__type field is not allowed."}}return{ok:true}},},Array:{editor:new UI.ArrayEditor({placeholder:"[]"}),validator:d,},GeoPoint:{editor:new UI.GeopointEditor(),validator:function(e){return{ok:e!==null}},},File:{editor:new UI.FileEditor(),validator:function(e){return{ok:e!==null}}}};return a};return{supportedTypes:function(){return Object.keys(c())},get:function(f){var e=c()[f].editor;e.reset();return e},validator:function(e){return c()[e].validator||b},}}();var ParseConfigView=Backbone.View.extend({el:"#inner_wrapper",initialize:function(b,a){_.bindAll(this);this.app=new App.Models.App(b);this.config=new Config([],{appUrl:this.app.dataRequestUrl(),applicationId:b.key,restKey:b.rest_api_key,serverURL:a,});this.config.on("reset",this.renderConfig,this);this.config.on("add",this.onAdd,this);this.config.on("remove",this.renderConfig,this);this.renderSpinner();this.config.fetch()},events:{"click #new_param_button":"renderParamModal","keyup .search input":"filterRows"},renderSpinner:function(){$(".content_spinner").show().spin("large","#717171")},onAdd:function(a){this.renderTable(a)},renderConfig:function(){if(_.size(this.config)>0){this.renderTable()}else{this.$el.html(JST["config/_empty_config"]())}},renderTable:function(a){this.$el.html(JST["config/_config_table"]());this.config.each(function(b){this.renderParam(b,b===a)},this);return this},refreshRows:function(b){var a=this.config;if(b){a=a.search(b)}this.$el.find("table").find("tr:gt(0)").remove();a.each(this.renderParam)},renderParam:function(d,a){var c=new ParamView({model:d});var b=this.$el.find("table");b.append(c.render(a).$el);return this},renderParamModal:function(b){var a=new ParamModal(this.config);a.render();return false},filterRows:function(b){var a=b.target.value;this.refreshRows(a)}});var ParamView=Backbone.View.extend({tagName:"tr",events:{click:"rowClick",},initialize:function(){this.model.on("change",function(){this.render(true)},this)},render:function(a){var b=JST["config/_param_row"]({param:this.model});this.$el.html(b);if(a===true){this.$el.fadeIn(100).fadeOut(100).fadeIn(100)}return this},rowClick:function(b){if(b.target.nodeName==="A"){return true}var a=new ParamModal(this.model.collection);a.render(this.model)},});Analytics.Router=Parse.Router.extend({routes:{":navigation-:from-:to-:graphs":"show",":navigation":"navOnly","*string":"index"},tabValues:["area","bar"],initialize:function(a){_.bindAll(this);this.state=a.state;this.state.on("change:selectedNavigation",this.updateNavigation);this.state.on("change:fromDate change:toDate",this.updateDate);this.state.get("selectedSeries").on("add remove reset swap",this.updateGraphs)},navOnly:function(a){var b=_.findWhere(Analytics.GraphState.GraphNavigationOptions,{name:a});if(!b){return this.index()}return this.show(a,this.state.get("fromDate").getTime(),this.state.get("toDate").getTime(),"")},show:function(a,f,h,c){var k=this;this.navigation=a;this.from=f;this.to=h;var l=decodeURIComponent(c);this.graphs=l;this.state.set("selectedNavigation",a);this.state.set({fromDate:new Date(parseFloat(this.from)),toDate:new Date(parseFloat(this.to))});var e=this.state.getCurrentNavigationUIOptions();var d=[];if(e.requireSeries){if(l.length===0){this.state.addFirstAvailableSeries()}else{var j=l.split(",");for(var b=0;b<j.length;b++){if(!this.state.getSeriesOptionWithId(j[b])){return this.index()}}_.each(j,function(o,m,p){var n=k.state.get("seriesOptions").find(function(q){return q.get("seriesId")===o});d.push(n);k.state.addSelectedSeries(n)})}}ParseDotCom.Analytics.track("analytics_route_show",{series:d.toString()})},index:function(){this.state.set("selectedNavigation",Analytics.GraphState.GraphNavigationOptions[0].name);this.state.addFirstAvailableSeries();this.updateDate(false);this.updateGraphs(false);this.updateNavigation(true);ParseDotCom.Analytics.track("analytics_route_index")},updateNavigation:function(a){this.navigation=this.state.get("selectedNavigation");this.updateUrl(a)},updateDate:function(a){this.from=this.state.get("fromDate").valueOf();this.to=this.state.get("toDate").valueOf();this.updateUrl(a)},updateGraphs:function(b){var a=this;this.graphs="";this.state.get("selectedSeries").each(function(d,c,e){if(!d.has("seriesId")){return}a.graphs+=d.get("seriesId");if(c<e.length-1){a.graphs+=","}});this.updateUrl(b)},updateUrl:function(b){if(b){var a=(this.graphs&&this.graphs.length>0)?this.buildUrl():this.navigation;Parse.history.navigate(a,{replace:true})}},buildUrl:function(){return this.navigation+"-"+this.from+"-"+this.to+"-"+encodeURIComponent(this.graphs)}});App.Models.CrashReporting=Backbone.Model.extend({UNRESOLVED:0,RESOLVED:1,RESOLUTION_ERR:2,defaults:{crash:null,symbolicated:null,resolution:null,versions:{},platforms:[],symbolicationFilter:"",resolvedFilter:"",platformFilter:"",versionFilter:"",page:0,pageSize:10,indexRequestCount:0,},initialize:function(c){this.crashCache={};var b=c.buildVersions||{};this.set("platforms",[]);var d={};for(var a in b){var e=a.toLowerCase();this.get("platforms").push(e);d[e]=b[a]}this.set("versions",d)},fetchIndexData:function(b){var a=this;this.set("indexRequestCount",this.get("indexRequestCount")+1);var c={limit:this.get("pageSize")};if(this.get("symbolicationFilter")){c.symbolicated=this.get("symbolicationFilter")}if(this.get("resolvedFilter")){c.resolved=this.get("resolvedFilter")}if(this.get("platformFilter")){c.platform=this.get("platformFilter")}if(this.get("versionFilter")){c.version=this.get("versionFilter")}if(this.get("page")){c.skip=this.get("page")*this.get("pageSize")}return this.crashRequest("/query",c).then(function(e){for(var d=0;d<e.length;d++){a.crashCache[e[d].id]={counts:{occurrences:e[d].occurrences,installations:e[d].installations,firstSeen:e[d].firstSeen,platform:e[d].platform,version:e[d].version}}}return ParseDotCom.Promise.as(e,b)})},fetchCrashData:function(f){var l=this;var k=l.get("crash");var a=l.get("symbolicated");var b=this.crashCache[k]||{};var h=function(c,m){if(typeof l.crashCache[k]==="undefined"){l.crashCache[k]={}}l.crashCache[k][c]=m;f[c](m)};var d=function(c){};for(var j in f){if(b[j]){f[j](b[j])}else{var e=a?"symbolicated":"unsymbolicated";this.crashRequest("/"+e+"/"+k+"/"+j).then(h.bind(null,j),d.bind(this))}}},setResolution:function(a){if(a){this.set("resolution",this.RESOLVED);return}this.set("resolution",this.UNRESOLVED)},toggleCrashResolutionState:function(){var c=this;var e=c.get("crash");var d=c.get("resolution")==this.RESOLVED;var f=c.get("symbolicated");var a=this.crashCache[e].versions.versions;var b=[];for(i=0;i<a.length;i++){b.push({"parse:mid":e,"parse:appbuildversion":a[i].version,"parse:resolved":!d,})}c.crashRequest("/resolution",{mid_version_pairs:JSON.stringify(b)},"POST").then(function(){c.setResolution(c.get("resolution")===c.UNRESOLVED)},function(){c.set("resolution",c.RESOLUTION_ERR)})},crashRequest:function(d,e,b){var a="/apps/"+app.friendly_id+"/crashes"+d;var c=new ParseDotCom.Promise();$.ajax(a,{data:e,type:b||"GET",dataType:"json",success:function(f){c.resolve(f)},error:function(){c.reject()}});return c}});App.Routers.CrashReportingRouter=ParseDotCom.Router.extend({routes:{":symbolicated/:mid":"show",":symbolicated":"filter","*string":"index"},initialize:function(a){this.state=a.state;this.view=new App.Views.CrashReportingView({model:crashState,el:".dashboard_content"})},index:function(){this.state.set("crash",null);this.state.set("page",0);this.view.render()},filter:function(a){isSymbolicated=a==="symbolicated"?"true":"false";this.state.set("crash",null);this.state.set("page",0);this.view.symbolicationDropdown.value=isSymbolicated;this.state.set("symbolicationFilter",isSymbolicated)},show:function(b,a){b=b==="symbolicated";if(a.match(/^[\dA-Fa-f]+$/)){this.state.set("symbolicated",b);this.state.set("crash",a)}else{this.state.set("crash",null);this.state.set("page",0)}this.view.render()}});App.Views.CrashReportingView=Backbone.View.extend({events:{"click .crash_index_data tr":"selectCrash"},initialize:function(b){_.bindAll(this);var a=this;var d=document.getElementById("crash_filters");this.symbolicationDropdown=new UI.Dropdown({parent:d,name:"symbolication_filter",optionSet:["All Crash Types","Symbolicated","Unsymbolicated"],values:{"All Crash Types":"",Symbolicated:"true",Unsymbolicated:"false"},style:"grey",onChange:this.changeSymbolicationType.bind(this)});this.resolutionDropdown=new UI.Dropdown({parent:d,name:"resolution_filter",optionSet:["Unresolved","Resolved"],values:{Unresolved:"",Resolved:"true"},style:"grey",onChange:this.changeFilter.bind(this,"resolved")});var f=this.humanReadablePlatformTypes()||[];this.platformDropdown=new UI.Dropdown({parent:d,name:"platform_filter",defaultOption:"All Platforms",optionSet:f,value:f.length==1?f[0]:"",style:"grey",onChange:this.changeFilter.bind(this,"platform")});this.changeFilter("platform",this.platformDropdown.value);this.renderVersionFilter();document.getElementById("crash_nav").addEventListener("click",function(k){ParseDotCom.history.navigate(null,{trigger:true});k.preventDefault()});var j=document.getElementById("mark_resolved");j.addEventListener("click",function(k){if(UI.hasClass(j,"saving")||UI.hasClass(j,"waiting")){return false}UI.addClass(j,"saving");this.model.toggleCrashResolutionState();k.preventDefault()}.bind(this));this.emptyState=document.getElementById("empty_state");this.filteredEmptyState=document.getElementById("filtered_empty_state");this.model.on("change:resolution",this.updateResolutionButton);this.model.on("change:platformFilter",this.renderVersionFilter);this.model.on("change:symbolicationFilter change:resolvedFilter change:platformFilter change:versionFilter change:page",this.render);var e=document.getElementById("crash_splash_indicator");var c={crash:document.getElementById("crash_show"),index:document.getElementById("crash_index"),splash:document.getElementById("crash_splash"),};var h=function(k){_.each(c,function(l){l.style.display=(l===k)?"block":"none"})};this.divSwitcher={toCrash:function(){if(c.splash.style.display!="block"){return}h(c.crash)},toCrashLoading:function(){UI.addClass(e,"loading");h(c.splash)},toDataMissingError:function(){if(c.index.style.display=="block"){return}UI.removeClass(e,"loading");h(c.splash)},toIndex:function(){h(c.index)},};this.symbolNotification={};this.symbolNotification.ios=document.getElementById("ios_symbols_alert");this.symbolNotification.android=document.getElementById("android_symbols_alert");this.symbolNotification.ios.style.display="none";this.symbolNotification.android.style.display="none"},renderVersionFilter:function(){var a=document.getElementById("crash_filters");if(this.versionDropdown){a.removeChild(this.versionDropdown.node);this.versionDropdown=null}if(this.model.get("platformFilter")===""){return}this.versionDropdown=new UI.Dropdown({parent:a,name:"version_filter",defaultOption:"All Versions",optionSet:this.model.get("versions")[this.model.get("platformFilter")]||[],value:"",style:"grey",onChange:this.changeFilter.bind(this,"version")});this.model.set("versionFilter","")},render:function(){if(this.model.get("crash")){this.divSwitcher.toCrashLoading();this.renderCrash()}else{this.divSwitcher.toIndex();this.renderIndex()}this.el.scrollTop=0},renderIndex:function(){var a=this;var c=window.location.pathname;if(c[c.length-1]!=="/"){c+="/"}var b=document.getElementById("crash_index").getElementsByTagName("tbody")[0];while(b.children.length>1){b.removeChild(b.lastChild)}b.parentNode.style.display="table";this.emptyState.style.display="none";this.filteredEmptyState.style.display="none";UI.addClass(b.parentNode,"loading");this.model.fetchIndexData(this.model.get("indexRequestCount")).then(function(f,j){if(this.isLatestRequest(j)){var h=document.createDocumentFragment();for(var e=0;e<f.length;e++){href=c+this.crashPath(f[e].id,f[e].symbolicated);var d=moment(f[e].firstSeen);h.appendChild(UI.tag("tr",{},[UI.tag("td",{},[UI.tag("a",{href:href,isSymbolicated:f[e].symbolicated,mid:f[e].id},[f[e].id.substr(0,8)])]),UI.tag("td",{},UI.prettyNumber(f[e].occurrences)),UI.tag("td",{},f[e].location),UI.tag("td",{},[UI.tag("div",{},d.format("MMM D")),UI.tag("div",{className:"time"},d.format("h:mma"))]),UI.tag("td",{},UI.prettyNumber(f[e].installations)),UI.tag("td",{},UI.createIcon(App.Views.CrashReportingView.PlatformIcons[f[e].platform])),UI.tag("td",{},f[e].resolved?UI.createIcon("checkmark"):""),]))}UI.removeClass(b.parentNode,"loading");if(f.length===0){b.parentNode.style.display="none";if(a.model.get("resolvedFilter")||a.model.get("platformFilter")||a.model.get("versionFilter")){a.emptyState.style.display="none";a.filteredEmptyState.style.display="block"}else{a.filteredEmptyState.style.display="none";a.emptyState.style.display="block"}}b.appendChild(h)}}.bind(this))},isLatestRequest:function(a){return this.model.get("indexRequestCount")===a+1},renderCrashCounts:function(c){Object.keys(this.symbolNotification).forEach(function(d){this.symbolNotification[d].style.display=(c.platform===d&&!this.model.get("symbolicated"))?"block":"none"}.bind(this));var b=document.getElementById("segment_counts");if(!b){return}document.getElementById("count_occurrences_label").textContent=c.occurrences===1?"Occurrence":"Occurrences";document.getElementById("count_installations_label").textContent=c.installations===1?"Installation":"Installations";document.getElementById("count_occurrences").textContent=UI.prettyNumber(c.occurrences);document.getElementById("count_installations").textContent=UI.prettyNumber(c.installations);document.getElementById("count_first_seen").textContent=moment(c.firstSeen).format("MMM D");var a=document.getElementById("count_platform");a.innerHTML="";a.appendChild(UI.createIcon(App.Views.CrashReportingView.PlatformIcons[c.platform]));UI.removeClass(b,"loading");if(c.installations===0){this.divSwitcher.toDataMissingError()}else{this.divSwitcher.toCrash()}},renderStackTraces:function(c){var b=document.getElementById("segment_stack_traces");var d=document.createDocumentFragment();for(var a=0;a<c.length;a++){new UI.StackTrace({title:c[a].title,parent:d,stack:c[a].stack})}b.innerHTML="";b.appendChild(d);UI.removeClass(b,"loading")},renderVersions:function(b){var a=document.getElementById("segment_crash_versions");a.children[1].innerHTML="";new UI.BarChart({segments:_.map(b.versions,function(c){return{label:c.version,value:c.count}}),showPercent:true,parent:a.children[1]});UI.removeClass(a,"loading");if(b.versions.length>0){this.model.setResolution(b.resolved)}if(b.versions.length===0){this.divSwitcher.toDataMissingError()}else{this.divSwitcher.toCrash()}},renderPlatforms:function(b){var c=App.Views.CrashReportingView;var a=document.getElementById("segment_crash_devices").children[0];if(a.children[1]){a.removeChild(a.children[1])}new UI.BarChart({segments:_.map(b,function(d){return{label:c.HumanReadableDeviceType(d.version),value:d.count}}),showPercent:false,parent:a});UI.removeClass(a.parentNode,"loading");if(b.length===0){this.divSwitcher.toDataMissingError()}else{this.divSwitcher.toCrash()}},renderOS:function(b){var a=document.getElementById("segment_crash_devices").children[1];if(a.children[1]){a.removeChild(a.children[1])}new UI.BarChart({segments:_.map(b,function(c){return{label:c.version,value:c.count}}),showPercent:false,parent:a});UI.removeClass(a.parentNode,"loading");if(b.length===0){this.divSwitcher.toDataMissingError()}else{this.divSwitcher.toCrash()}},renderCrash:function(){this.model.set("resolution",null);document.getElementById("crash_mid").innerHTML=this.model.get("crash");UI.addClass(document.getElementById("segment_counts"),"loading");UI.addClass(document.getElementById("segment_stack_traces"),"loading");UI.addClass(document.getElementById("segment_crash_versions"),"loading");UI.addClass(document.getElementById("segment_crash_devices"),"loading");this.model.fetchCrashData({counts:this.renderCrashCounts.bind(this),traces:this.renderStackTraces.bind(this),versions:this.renderVersions.bind(this),platforms:this.renderPlatforms.bind(this),os:this.renderOS.bind(this),})},changeSymbolicationType:function(a){if(a===""){ParseDotCom.history.navigate("",{trigger:false})}else{if(a==="true"){ParseDotCom.history.navigate("symbolicated",{trigger:false})}else{ParseDotCom.history.navigate("unsymbolicated",{trigger:false})}}this.changeFilter("symbolication",a)},resolutionButtonLoading:function(){var a=document.getElementById("mark_resolved");UI.addClass(a,"waiting");UI.removeClass(a,"pos");UI.removeClass(a,"neg")},changeFilter:function(b,a){a=a.toLowerCase();var c={page:0};c[b+"Filter"]=a;this.model.set(c)},updateResolutionButton:function(){if(this.model.get("resolution")===null){this.resolutionButtonLoading();return}var a=document.getElementById("mark_resolved");UI.removeClass(a,"waiting");UI.removeClass(a,"saving");if(this.model.get("resolution")==this.model.RESOLVED){UI.removeClass(a,"neg");UI.addClass(a,"pos")}else{if(this.model.get("resolution")==this.model.UNRESOLVED){UI.removeClass(a,"pos");UI.addClass(a,"neg")}else{UI.addClass(a,"err");setTimeout(function(){UI.removeClass(a,"err");UI.removeClass(a,"saving")},250)}}},selectCrash:function(c){var a=c.currentTarget.getElementsByTagName("a")[0];if(!a){return}if(c.metaKey){window.open(a.href)}else{var b=this.crashPath(a.mid,a.isSymbolicated);ParseDotCom.history.navigate(b,{trigger:true})}return false},crashPath:function(a,b){var c=b?"symbolicated":"unsymbolicated";return c+"/"+a},humanReadablePlatformTypes:function(){var d={};d.ios="iOS";d.android="Android";var b=[];for(var c=0;c<this.model.get("platforms").length;c++){var a=this.model.get("platforms")[c];if(a in d){b.push(d[a])}else{b.push(a)}}return b},},{PlatformIcons:{ios:"apple",android:"android"},HumanReadableDeviceType:function(a){var b=[{prefix:"iPhone",supports:function(c){return _.startsWith(c,this.prefix)},convert:function(e){var d=e.substring(this.prefix.length);var c={"1,1":"iPhone 1G","1,2":"iPhone 3G","2,1":"iPhone 3GS","3,1":"iPhone 4 (GSM)","3,2":"iPhone 4 (GSM)","3,3":"iPhone 4 (CDMA)","4,1":"iPhone 4S","5,1":"iPhone 5 (GSM)","5,2":"iPhone 5 (Global)","5,3":"iPhone 5C (GSM)","5,4":"iPhone 5C (Global)","6,1":"iPhone 5S (GSM)","6,2":"iPhone 5S (Global)","7,1":"iPhone 6+","7,2":"iPhone 6",};return(c[d]||e)}},{prefix:"iPod",supports:function(c){return _.startsWith(c,this.prefix)},convert:function(e){var d=e.substring(this.prefix.length);var c={"1,1":"iPod Touch 1G","2,1":"iPod Touch 2G","3,1":"iPod Touch 3G","4,1":"iPod Touch 4G","5,1":"iPod Touch 5G",};return(c[d]||e)}},{prefix:"iPad",supports:function(c){return _.startsWith(c,this.prefix)},convert:function(e){var d=e.substring(this.prefix.length);var c={"1,1":"iPad 1G","2,1":"iPad 2 (WiFi)","2,2":"iPad 2 (GSM)","2,3":"iPad 2 (CDMA)","2,4":"iPad 2 (WiFi)","2,5":"iPad Mini (WiFi)","2,6":"iPad Mini (GSM)","2,7":"iPad Mini (Global)","3,1":"iPad 3 (WiFi)","3,2":"iPad 3 (CDMA)","3,3":"iPad 3 (GSM)","3,4":"iPad 4 (WiFi)","3,5":"iPad 4 (GSM)","3,6":"iPad 4 (Global)","4,1":"iPad Air (WiFi)","4,2":"iPad Air (Cellular)","4,3":"iPad Air (China)","4,4":"iPad Mini 2G (WiFi)","4,5":"iPad Mini 2G (Cellular)","4,6":"iPad Mini 2G (China)","4,7":"iPad Mini 3G (WiFi)","4,8":"iPad Mini 3G (Cellular)","4,9":"iPad Mini 3G (China)","5,3":"iPad Air 2 (WiFi)","5,4":"iPad Air 2 (Cellular)",};return(c[d]||e)}},{supports:function(c){return(c==="i386"||c==="x86_64")},convert:function(c){return"Simulator"}},];b.every(function(e,d,f){if(e.supports(a)){var c=e.convert(a);if(c!=a){a=c;return false}}return true});return a}});App.Views.Docs.ApiLibraries=Backbone.View.extend({initialize:function(){this.libs={};this.getLibs()},getLibs:function(){var a=this;var b=new ParseDotCom.Query("Library");b.exists("name");b.exists("url");b.find().then(function(c){_(c).each(function(e){var d=e.get("category");if(!a.libs[d]){a.libs[d]=[]}a.libs[d].push(e)});a.render()})},render:function(){this.$el.html(JST["docs/_third_party_libraries"]({libs:this.libs}))}});App.Views.Docs.Changelogs=Backbone.View.extend({events:{"click .show_more_logs":"show_logs"},initialize:function(){this.render()},render:function(){var a=5;$(".log").each(function(){var d=$(this);var c=d.children(".note").size();if(c>a){d.children(".note").each(function(){if(d.children(".note").index($(this))>a-1){$(this).hide()}});var b=d.children(".note")[a-1];$(b).after("<a href='#' class='show_more_logs'>See more >></a>")}})},show_logs:function(a){a.stopPropagation();$(a.target).parent(".log").children(".note").show();$(a.target).hide();return false}});App.Views.Docs.CloudModules=Backbone.View.extend({initialize:function(){_.bindAll(this);var a=new ParseDotCom.Query("CloudModule");a.exists("name");a.exists("url");a.equalTo("enabled",true);this.collection=a.collection();this.collection.on("reset",this.render);this.getModules()},getModules:function(){var a=this;a.collection.fetch()},render:function(){var c=this;var a=this.collection.groupBy(function(e){var f=e.get("category");return f.charAt(0).toUpperCase()+f.substr(1).toLowerCase()});var b=_(a).chain().keys().sortBy(function(e){return e}).value();var d={};_.each(b,function(f){var e=_(a[f]).chain().sortBy(function(h){return h.get("name").toLowerCase()}).value();d[f]=e});this.$el.html(JST["docs/_cloud_modules"]({categories:b,modules:d}))}});(function(c,a){if(!c){return}if(!App.Views.Docs){App.Views.Docs={}}var b=App.Views.Docs.Main=function(d){this.platform=d.platform;this.language=d.language;this.render()};b.prototype={render:function(){this.scrollContent=document.getElementsByTagName("body")[0];this.toc=new c.LiveTOC({parent:document.getElementById("toc"),scrollContent:this.scrollContent,content:document.getElementsByClassName("guide_content")[0]});this.toggleCommonLangBlocks();if(this.platform==="ios"||this.platform==="osx"){new App.Views.Docs.Toggle({parent:this.scrollContent,opt1:"objc",opt2:"swift",label1:"Objective-C",label2:"Swift",onChange:this.handleToggleChange.bind(this)})}else{if(this.platform==="rest"||this.platform==="embedded_c"||this.platform==="arduino"){new App.Views.Docs.AppsList({appsJson:appsJson});new App.Views.Docs.Toggle({parent:this.scrollContent,opt1:"bash",opt2:"python",label1:"cURL",label2:"Python",onChange:this.handleToggleChange.bind(this)})}}this.mobileToc=document.getElementById("mobile_toc").getElementsByTagName("select")[0];this.renderMobileTOC();$(".yes_button, .no_button").on("click",this.handleHelpfulClick.bind(this));$(window).on("resize",a.throttle(this.handleWindowResize.bind(this),300));this.handleWindowResize();$(window).on("load",function(){this.toc.updateHeights();document.addEventListener("scroll",this.handleScroll.bind(this))}.bind(this))},renderMobileTOC:function(){var f=this.scrollContent.getElementsByTagName("h1");for(var e=0;e<f.length;e++){var d=f[e].getElementsByTagName("a")[0];this.mobileToc.appendChild(c.tag("option",{"data-anchor":d.getAttribute("href")},[f[e].textContent]))}this.mobileToc.addEventListener("change",this.handleSelectChange.bind(this));this.mobileToc.getElementsByTagName("option")[0].setAttribute("selected",true)},toggleCommonLangBlocks:function(){$(".common-lang-block").hide();switch(this.platform){case"ios":$(".common-lang-block.objc").show();$(".common-lang-block.swift").show();break;case"osx":$(".common-lang-block.objc").show();$(".common-lang-block.swift").show();break;case"android":$(".common-lang-block.java").show();break;case"js":$(".common-lang-block.js").show();break;case"dotnet":$(".common-lang-block.csharp").show();break;case"unity":$(".common-lang-block.csharp").show();break;case"php":$(".common-lang-block.php").show();break;default:$(".common-lang-block.js").show()}},handleScroll:function(){var e=$(window).scrollTop();var f=document.getElementById("toc");var d=document.getElementById("mobile_toc");if(e>=250){if(!c.hasClass(f,"sticky")){c.addClass(f,"sticky");c.addClass(d,"sticky")}}else{if(c.hasClass(f,"sticky")){c.removeClass(f,"sticky");c.removeClass(d,"sticky")}}},handleToggleChange:function(){this.toc.updateHeights()},handleHelpfulClick:function(d){ParseDotCom.Analytics.track("docs_helpful",{section:d.target.getAttribute("data-section"),language:this.language,platform:this.platform,helpful:c.hasClass(d.target,"yes_button").toString()});$vote=$(d.target.parentElement);$vote.children().hide();$vote.find(".thanks").show();return false},handleSelectChange:function(d){location.href=this.mobileToc.selectedOptions[0].getAttribute("data-anchor")},handleWindowResize:function(d){this.toc.parent.style.left=$(".guide").css("margin-left");this.toc.updateHeights()}};a.extend(b.prototype,c.ComponentProto)})(UI,_);(function(c,a){if(!c){return}if(!App.Views.Docs){App.Views.Docs={}}var b=App.Views.Docs.AppsList=function(d){this.appsJson=d.appsJson;this.render()};b.prototype={render:function(){if(a.size(appsJson)===0){return}this.ddCounter=0;this.firstKey=this.appsJson[0].name;this.appValues={};this.appsJson.forEach(function(d){this.appValues[d.name]={applicationId:d.key,restKey:d.rest_api_key,masterKey:d.push_key,clientKey:d.secret}}.bind(this));this.appOptions=this.appsJson.map(function(d){return d.name});$("code.hljs").each(function(e,f){var d=f.innerHTML.match(/APPLICATION_ID|REST_API_KEY|MASTER_KEY|CLIENT_KEY/);if(d!==null){var h=this.appValues[this.firstKey];f.innerHTML=f.innerHTML.replace("${APPLICATION_ID}",'<span class="application_id">'+h.applicationId+"</span>").replace("${REST_API_KEY}",'<span class="rest_key">'+h.restKey+"</span>").replace("${MASTER_KEY}",'<span class="master_key">'+h.masterKey+"</span>").replace("${CLIENT_KEY}",'<span class="client_key">'+h.clientKey+"</span>");new c.Dropdown({optionSet:this.appOptions,name:"dropdown"+this.ddCounter++,parent:f.parentElement,onChange:this.handleDropdownChange.bind(this)});c.addClass(f,"has_toggles")}}.bind(this))},handleDropdownChange:function(h,d){var f=this.appValues[h];var e=d.parentElement.querySelector(".hljs");$(e).find(".application_id").html(f.applicationId);$(e).find(".rest_key").html(f.restKey);$(e).find(".master_key").html(f.masterKey);$(e).find(".client_key").html(f.clientKey)}};a.extend(b.prototype,c.ComponentProto)})(UI,_);(function(b,a){if(!b){return}if(!App.Views.Docs){App.Views.Docs={}}var c=App.Views.Docs.Toggle=function(d){this.parent=d.parent;this.opt1=d.opt1;this.opt2=d.opt2;this.label1=d.label1;this.label2=d.label2;this.onChange=d.onChange;this.render()};c.prototype={render:function(){var f=this.parent.getElementsByClassName("hljs "+this.opt1);for(var e=0;e<f.length;e++){b.addClass(f[e],"has_toggles");f[e].appendChild(this.renderToggle(true))}var d=this.parent.getElementsByClassName("hljs "+this.opt2);for(e=0;e<d.length;e++){b.addClass(d[e],"has_toggles");d[e].appendChild(this.renderToggle(false))}$("."+this.opt2+"-toggle").on("click",this.showOpt2.bind(this));$("."+this.opt1+"-toggle").on("click",this.showOpt1.bind(this));this.toggleOpt(true)},renderToggle:function(e){var d=b.tag("div",{className:"toggles"},[b.tag("div",{className:"toggle-item"},[b.tag("a",{className:this.opt1+"-toggle",href:"#"},this.label1)]),b.tag("div",{className:"toggle-item"},[b.tag("a",{className:this.opt2+"-toggle",href:"#"},this.label2)]),]);if(e===true){b.addClass(d.childNodes[0],"selected")}else{b.addClass(d.childNodes[1],"selected")}return d},showOpt1:function(h){h.preventDefault();if($(h.target).parent().hasClass("selected")){return false}var k=$(h.target).closest("pre");var j=$(window).scrollTop()-k[0].offsetTop;var d=k.prev().children("code");d.addClass("code_flash");setTimeout(function(){d.removeClass("code_flash")},2000);var f=k.prev()[0];this.toggleOpt(true);$(window).scrollTop(f.offsetTop+j)},showOpt2:function(h){h.preventDefault();if($(h.target).parent().hasClass("selected")){return false}var k=$(h.target).closest("pre");var j=$(window).scrollTop()-k[0].offsetTop;var d=k.next().children("code");d.addClass("code_flash");setTimeout(function(){d.removeClass("code_flash")},2000);var f=k.next()[0];this.toggleOpt(false);$(window).scrollTop(f.offsetTop+j)},toggleOpt:function(d){if(d===true){$(".hljs."+this.opt2).parent().hide();$(".hljs."+this.opt1).parent().show()}else{$(".hljs."+this.opt2).parent().show();$(".hljs."+this.opt1).parent().hide()}this.onChange()}};a.extend(c.prototype,b.ComponentProto)})(UI,_);(function(c,l){if(!c){return}if(!App.Views.Explorer){App.Views.Explorer={}}var d={initialize:function(m){this._clauses={};this._idx=0;this._isSubcomponent=!!m.isSubcomponent;this._minimumClauses=m.minimumClauses||0;this._hideAdd=!!m.hideAdd;this._sources=m.sources;this.onChange=m.onChange;this.render();l.each(m.clauses,function(n){this.add(n,m.requiredParent)},this);while(this.insufficientClauses()){this.add(null,m.requiredParent)}m.parent.appendChild(this.node)},insufficientClauses:function(){return l.size(this._clauses)<this._minimumClauses},toggleInactive:function(m){if(m){c.addClass(this.node,"inactive")}else{c.removeClass(this.node,"inactive")}},add:function(n){if(l.size(this._clauses)===this._minimumClauses){this.toggleInactive(false)}var o=this.newClause(n);if(!this.insufficientClauses()){var m=c.tag("a",{className:"remove_clause_button"},"");o.node.appendChild(m);m.addEventListener("click",function(p){return function(){this.remove(p,o.node)}.bind(this)}.call(this,this._idx))}this.node.appendChild(o.node);this._clauses[this._idx]=o;this._idx++;return o},remove:function(m,n){this.node.removeChild(n);delete this._clauses[m];this.onClauseChange();if(l.size(this._clauses)==this._minimumClauses){this.toggleInactive(true)}},receivedUpdate:function(n,m){if(!this.shouldUpdateClauses(n,m)){return}l.each(this._clauses,function(p,o){this.refreshClause(p,o)},this);this.onClauseChange()},columnValues:function(m,p){var o=ExplorerConstants.columns[this._sources[0]];for(var n=1;n<this._sources.length;n++){o=l.intersection(o,ExplorerConstants.columns[this._sources[n]])}return l.reduce(o,function(q,r){var s=ExplorerConstants.columnTypes[r];if(!p||p===s){var t=ExplorerConstants.columnTranslations[r];q[t]=r}return q},(m||{}))},validate:function(){var m=this;return l.all(l.map(this._clauses,function(o){var n;if(typeof(m.validateClause)==="function"){n=m.validateClause(o)}else{n=l.any(l.values(o),function(p){return p instanceof c.Dropdown&&p.value===""})}c.toggleClass(o.node,"invalid",n);return !n}))},swapDropdown:function(s,p,m){if(l.isEqual(m,s[p].values)){return}var r=l.values(m);var o=s[p];var n=o.node.parentNode;var q=o.defaultOption?"":r[0];o.remove();s[p]=new c.Dropdown({name:o.name,defaultOption:o.defaultOption,values:m,value:r.indexOf(o.value)<0?q:o.value,onChange:o.onChange,style:o.style,parent:n})},onClauseChange:function(){if(typeof(this.onChange)==="function"){this.onChange(this.buildQuery(),this.name)}},render:function(){if(!this._hideAdd){this.addButton=c.tag("a",{className:"add_clause_button"},"");this.addButton.addEventListener("click",function(){this.add()}.bind(this))}var n=c.tag("div",{className:"component_header"},[this.display,this.addButton]);var m=this._isSubcomponent?"query_subcomponent":"query_component inactive";this.node=c.tag("div",{className:m},n)}};var f=function(m){this.initialize(m)};f.prototype={name:"source",display:"Define source and range",buildQuery:function(){return l.map(this._clauses,function(m){return m.val.value})},newClause:function(n){var m=c.tag("div",{className:"query_clause query_source ui_dropdown_container"});var o=new c.Dropdown({name:"explorer_source_"+this._idx,values:l.invert(ExplorerConstants.sourceTranslation),onChange:this.onClauseChange.bind(this),style:"ui_dropdown_shift",parent:m});if(n){o.value=n}return{node:m,val:o}}};l.extend(f.prototype,d);var h=function(m){this.initialize(m)};h.prototype={name:"aggregate",display:"Aggregate",buildQuery:function(){return l.map(this._clauses,function(m){return{op:m.op.value,col:m.col.value}})},colValues:function(m){if(!m||m==="count"){return this.columnValues({"Each Row":"1"})}else{if(m==="sum"||m==="median"||m==="avg"){return this.columnValues({},"number")}}return this.columnValues()},shouldUpdateClauses:function(n,m){if(m==="source"){this._sources=n;return true}return false},refreshClause:function(n,m){this.swapDropdown(n,"col",this.colValues(n.op.value))},newClause:function(s){var n=c.tag("div",{className:"ui_dropdown_shift"});var u=c.tag("div",{className:"ui_dropdown_container"},n);var r=c.tag("div",{className:"ui_dropdown_container"});var m=c.tag("div",{className:"query_clause query_aggregate"},[u,r]);var o=this.insufficientClauses();var t=new c.Dropdown({name:"explorer_aggregate_op_"+this._idx,defaultOption:o?null:"Select Function",values:l.invert(ExplorerConstants.aggregateTranslations),onChange:this.onClauseChange.bind(this),parent:n});n.appendChild(c.tag("label",{className:"prompt"},"of"));var q=new c.Dropdown({name:"explorer_aggregate_col_"+this._idx,defaultOption:o?null:"Select Value",values:this.colValues(s&&s.op),classes:ExplorerConstants.columnTypes,onChange:this.onClauseChange.bind(this),style:"ui_dropdown_shift",parent:r});if(s){t.value=s.op;q.value=s.col}var p={node:m,op:t,col:q};c.delegate("change",t.node,"input",function(){this.swapDropdown(p,"col",this.colValues(t.value))}.bind(this));return p}};h.getDisplayString=function(n){if(n.op===""||n.col===""){return""}var m=ExplorerConstants.aggregateTranslations[n.op];var o;if(n.col==="1"){o="Each Row"}else{o=ExplorerConstants.columnTranslations[n.col]||""}return m+" "+o};l.extend(h.prototype,d);var k=function(m){this._isTimeRequired=!!m.isTimeRequired;this.initialize(m)};k.prototype={name:"group",display:"Group By",buildQuery:function(){return l.map(this._clauses,function(m){return m.val.value})},colValues:function(n){if(this._isTimeRequired){if(n){return l.invert(ExplorerConstants.groupByTimeTranslations)}return this.columnValues()}var m=this.columnValues();l.extend(m,l.invert(ExplorerConstants.groupByTimeTranslations));return m},shouldUpdateClauses:function(n,m){if(m==="source"){this._sources=n;return true}return false},refreshClause:function(n,m){this.swapDropdown(n,"val",this.colValues(m==="0"))},newClause:function(o){var m=c.tag("div",{className:"query_clause query_group ui_dropdown_container"});var n=this.insufficientClauses();var p=new c.Dropdown({name:"explorer_group_by_"+this._idx,defaultOption:n?null:"Select Grouping",values:this.colValues(n),classes:ExplorerConstants.columnTypes,onChange:this.onClauseChange.bind(this),style:"ui_dropdown_shift",parent:m});if(o){p.value=o}return{node:m,val:p}},};k.getDisplayString=function(n){var m=ExplorerConstants.groupByTimeTranslations[n];if(m){return m}return ExplorerConstants.columnTranslations[n]||""};l.extend(k.prototype,d);var j=function(m){this.initialize(m)};j.prototype={name:"filter",display:"Filter Input Rows",buildQuery:function(){return l.map(this._clauses,function(m){return{col:m.col.value,op:m.op.value,val:m.val.value,}})},colValues:function(){return this.columnValues()},shouldUpdateClauses:function(n,m){if(m==="source"){this._sources=n;return true}return false},refreshClause:function(n,m){this.swapDropdown(n,"col",this.colValues())},valuePlaceholder:function(m){if(m==="$in"){return"Option 1, Option 2"}return"Value"},newClause:function(r){var p=c.tag("div",{className:"ui_dropdown_container"});var s=c.tag("div",{className:"ui_dropdown_shift"});var n=c.tag("div",{className:"ui_dropdown_container"},s);var m=c.tag("div",{className:"query_clause query_filter"},[p,n]);var q=new c.Dropdown({name:"explorer_filter_col_"+this._idx,defaultOption:"Select Column",values:this.colValues(),classes:ExplorerConstants.columnTypes,style:"ui_dropdown_shift",parent:p});var t=new c.Dropdown({name:"explorer_filter_op_"+this._idx,values:l.invert(ExplorerConstants.filterTranslations),style:"query_filter_op",parent:s});var o=new c.StringEditor({placeholder:"Value",parent:s});c.delegate("change",t.node,"input",function(){var u=this.valuePlaceholder(t.value);if(u===o.node.placeholder){return}o.node.placeholder=u}.bind(this));if(r){q.value=r.col;t.value=r.op;o.value=r.val}return{node:m,col:q,op:t,val:o}}};l.extend(j.prototype,d);var a=function(m){this._orderByGroups=m.group||[];this._orderByAggregates=m.aggregate||[];this.initialize(m)};a.prototype={name:"order",display:"Sort Results",buildQuery:function(){return l.map(this._clauses,function(m){return{col:m.col.value,asc:m.asc.value}})},recalculateColValues:function(){var m={};l.each(this._orderByAggregates,function(o,n){var p=h.getDisplayString(o);if(p){m[p]=["aggregate",n].join("|")}});l.each(this._orderByGroups,function(p,n){var o=k.getDisplayString(p);if(o){m[o]=["group",n].join("|")}});this._colValues=m},colValues:function(){if(!this._colValues){this.recalculateColValues()}return this._colValues},shouldUpdateClauses:function(n,m){if(m==="aggregate"){this._orderByAggregates=n;this.recalculateColValues()}else{if(m==="group"){this._orderByGroups=n;this.recalculateColValues()}else{return false}}return true},refreshClause:function(n,m){this.swapDropdown(n,"col",this.colValues())},newClause:function(r){var p=c.tag("div",{className:"ui_dropdown_container"});var o=c.tag("div",{className:"ui_dropdown_container"});var m=c.tag("div",{className:"query_clause query_order"},[p,o]);var q=new c.Dropdown({name:"explorer_order_col_"+this._idx,defaultOption:"Select Ordering",values:this.colValues(),classes:ExplorerConstants.columnTypes,style:"ui_dropdown_shift",parent:p});var n=new c.Dropdown({name:"explorer_order_asc_"+this._idx,values:ExplorerConstants.orderDisplay,style:"ui_dropdown_shift",parent:o});if(r){q.value=r.col;n.value=r.asc}return{node:m,col:q,asc:n}}};l.extend(a.prototype,d);var b=function(m){m.minimumClauses=1;m.hideAdd=true;this.initialize(m)};b.prototype={name:"limit",display:"Maximum number of results",buildQuery:function(){return this._clauses[0].editor.value},validateClause:function(m){var n=m.editor.value;return isNaN(n)||n<=0},newClause:function(o){var m=c.tag("div",{className:"query_clause query_limit"});var n=new c.NumberEditor({value:o||100,placeholder:"Limit",parent:m});return{node:m,editor:n}}};l.extend(b.prototype,d);var e=App.Views.Explorer.Builder=function(m){this.node=m.node||document.getElementById("explorer_sandbox");this.debug=m.debug;this.landing=m.landing;this._initQuery=m.query||{};this._type=this._initQuery.type;this._subscriptions={};var n=l.pick(this._initQuery,e.componentNames);this.render(n);if(!l.isEmpty(n)){this.execute(this._initQuery.name)}window.onpopstate=this.displayLanding.bind(this);return this};e.componentNames=["from","sources","aggregates","groups","filters","orders","limit"];e.prototype={queryChanged:function(n,m){l.each(this._subscriptions[m],function(o){o.receivedUpdate(n,m)})},title:function(){switch(this._type){case"table":return"Table View";case"time_series":return"Time Series View";case"raw":return"Raw Event View"}},dataSources:function(){return this.source.buildQuery()},dataSourceChanged:function(){this.queryChanged(this.dataSources(),"source")},displayLanding:function(){c.Animate.hide(this.node);if(!this.landing){this.landing=new App.Views.Explorer.Landing({debug:this.debug})}c.Animate.show(this.landing.node);while(this.node.firstChild){this.node.removeChild(this.node.firstChild)}},buildQuery:function(){var m={type:this._type,sources:this.source.buildQuery(),from:this.fromSelect.value.getTime(),to:this.toSelect.value.getTime()};if(this.debug){m.appID=this.appSelect&&this.appSelect.value}if(this.aggregate){m.aggregates=this.aggregate.buildQuery()}if(this.group){m.groups=this.group.buildQuery()}if(this.filter){m.filters=this.filter.buildQuery()}if(this.order){m.orders=this.order.buildQuery()}if(this.limit){m.limit=this.limit.buildQuery()}return m},execute:function(o){var p=[];if(this.aggregate){p.push(this.aggregate.validate())}if(this.group){p.push(this.group.validate())}if(this.filter){p.push(this.filter.validate())}if(this.order){p.push(this.order.validate())}if(this.limit){p.push(this.limit.validate())}if(l.all(p)){c.addClass(this._button,"running");this._button.innerHTML="Running your query...";this._errDiv.innerHTML="";var q=this.buildQuery();var n=this._initQuery;var m=l.all(e.componentNames,function(r){if(q.type==="time_series"&&r==="limit"){return true}return l.isEqual(q[r]||[],n[r]||[])});if(this.debug){n.appID=q.appID}if(o){q.name=o}this._results.runQuery(m?n:q)}return false},render:function(x){x=x||{};var C=c.tag("a",{className:"back_button"},"");c.delegate("click",C,"a",function(D){D.preventDefault();this.displayLanding();window.history.pushState({},"",App.currentApp.dataRequestUrl()+"explorer/")}.bind(this));var y=c.tag("div",{className:"query_type"},this.title());var u=c.tag("div",{className:"query_component_container"});if(this.debug){var n={style:{display:"block","background-color":"#fe9532",padding:"10px","border-radius":"5px",margin:"0 10px 10px"}};var B=c.tag("div",n,c.tag("div",{className:"component_header",style:{color:"white",}},"(Debug)"));this.appSelect=new c.Dropdown({name:"explorer_app_id",values:{Anypic:16155,Stickered:529279,Rooms:258453,Stacks:393300,Deerhunter:188242},parent:B});u.appendChild(B)}var o=c.tag("div",{className:"query_component query_required"});u.appendChild(o);this.source=new f({parent:o,isSubcomponent:true,minimumClauses:1,hideAdd:(this._type!=="raw"),onChange:this.dataSourceChanged.bind(this),clauses:x.sources});this._subscriptions.source=[];var p=c.tag("div",{className:"query_dates"});var A=x.from?new Date(x.from):moment().subtract(1,"weeks").startOf("day").toDate();var z=x.to?new Date(x.to):moment().endOf("day").toDate();this.fromSelect=new c.Datepicker({name:"explorer_from",value:A,preventFuture:true,timeEntry:true,hideOnChange:true,stringFormat:"HH:mm M/D",parent:p});this.toSelect=new c.Datepicker({name:"query_tool_to",value:z,preventFuture:true,timeEntry:true,hideOnChange:true,stringFormat:"HH:mm M/D",style:"date_to",parent:p});var r=function(D){return function(E){var F=c.windowPosition(D);D.style.position="fixed";D.style.left=F.x+"px";D.style.top=F.y+"px"}};this.fromSelect.input.addEventListener("focus",r(this.fromSelect.popup));this.toSelect.input.addEventListener("focus",r(this.toSelect.popup));o.appendChild(p);if(this._type==="table"||this._type==="raw"){this.limit=new b({parent:o,minimumClauses:1,isSubcomponent:true,clauses:[x.limit]})}if(this._type==="table"||this._type==="time_series"){this.aggregate=new h({parent:u,requiredParent:o,minimumClauses:(this._type==="time_series")?1:0,onChange:this.queryChanged.bind(this),sources:this.dataSources(),clauses:x.aggregates});this._subscriptions.aggregate=[];this._subscriptions.source.push(this.aggregate);this.group=new k({parent:u,requiredParent:o,minimumClauses:(this._type==="time_series")?1:0,isTimeRequired:this._type==="time_series",onChange:this.queryChanged.bind(this),sources:this.dataSources(),clauses:x.groups});this._subscriptions.group=[];this._subscriptions.source.push(this.group);if(this._type==="time_series"){var w=this.aggregate.node.getElementsByClassName("query_clause")[0];var v=c.tag("div",{className:"query_subcomponent"},[c.tag("div",{className:"component_header"},"Define an aggregate"),w]);o.appendChild(v);w=this.group.node.getElementsByClassName("query_clause")[0];var q=c.tag("div",{className:"query_subcomponent"},[c.tag("div",{className:"component_header"},"Choose your grouping"),w]);o.appendChild(q)}}this.filter=new j({parent:u,sources:this.dataSources(),clauses:x.filters});this._subscriptions.source.push(this.filter);if(this._type==="table"){this.order=new a({parent:u,clauses:x.orders,aggregate:x.aggregates,group:x.groups,sources:this.dataSources(),});this._subscriptions.aggregate.push(this.order);this._subscriptions.group.push(this.order)}var m="Run Query";var t=c.tag("a",{className:"run_button"},m);t.addEventListener("click",function(){this.execute()}.bind(this));this._button=t;var s=c.tag("div",{className:"query_error"});this._errDiv=s;this._builder=c.tag("div",{className:"query_builder"},[C,y,u,c.tag("div",{className:"query_run"},[c.tag("span",{className:"arrow_tip"}),this._button,this._errDiv])]);this.node.appendChild(this._builder);this._results=new App.Views.Explorer.ResultsView({type:this._type,onSuccess:function(){c.removeClass(t,"running");t.innerHTML=m},onError:function(D){if(typeof(D)!=="string"){D=App.whatWentWrongWhoKnows}s.innerHTML=D;c.removeClass(t,"running");c.addClass(t,"error");t.innerHTML="Error";setTimeout(function(){c.removeClass(t,"error");t.innerHTML=m},1000)},parent:this.node})}};l.extend(e.prototype,c.ComponentProto)})(UI,_);(function(c,a){if(!c){return}if(!App.Views.Explorer){App.Views.Explorer={}}var b=App.Views.Explorer.FAQView=function(d){this._faqs=[];var e=new ParseDotCom.Query("ExplorerFAQ");e.exists("sortIndex");e.ascending("sortIndex");e.find().then(function(f){this._faqs=f;if(this.node){this.spin(true);this.node.appendChild(this.modalContent())}}.bind(this));this.render();this.spin()};b.prototype={modalContent:function(){if(this._faqs.length===0){return false}var d=c.tag("div",{});a.each(this._faqs,function(e){d.appendChild(c.tag("p",{className:"question"},e.get("question")));d.appendChild(c.tag("p",{className:"answer"},e.get("answer")))});return d},spin:function(d){if(!this._spinner){this._spinner=new Spinner({top:20,length:20,width:8,radius:30,color:"#f6aa76"})}this._spinner.spin(d?false:this.node)},render:function(){var d=this.modalContent();new c.Modal({title:"Explorer FAQ: Deciphering Your Data",className:"faq",template:d?d.innerHTML:"",keyboardSubmit:true});this.node=document.getElementsByClassName("modal_content")[0]}}})(UI,_);(function(d,b){if(!d){return}if(!App.Views.Explorer){App.Views.Explorer={}}var c=5;var a=App.Views.Explorer.Landing=function(e){this.node=e.node||document.getElementById("explorer_landing");this.debug=!!e.debug;this.allDefaultSaved=!!e.allDefaultSaved;this.queryList=e.queryList||window.queryList;this.render();return this};a.prototype={displayBuilder:function(f){window.history.pushState({},"",this.buildQueryUrl(f));d.Animate.hide(this.node,0);var e=new App.Views.Explorer.Builder({landing:this,debug:this.debug,query:f});d.Animate.show(e.node)},buildQueryUrl:function(e){var f=e.objectId||"";return App.currentApp.dataRequestUrl()+"explorer/"+f},buildSavedOption:function(e){return d.tag("a",{href:this.buildQueryUrl(e),className:"query"},e.name)},buildRecentOption:function(f){var h=moment(f.createdAt).format("MM-DD-YYYY [at] HH:mm");var e=d.tag("span",{className:"created_at"},["run on ",h]);return d.tag("a",{href:this.buildQueryUrl(f),className:"query"},[f.name,e])},attachMoreButton:function(h,j){var e=this;var f=d.tag("a",{className:"more ui_button","data-type":h},"Show more");f.addEventListener("click",function(l){var k=App.currentApp.dataRequestUrl()+"explorer/more?type="+h+"&skip="+queryList[h].length;$.get(k).then(function(n){if(n.length===0){l.target.parentNode.removeChild(l.target);return}for(var m=0;m<n.length;m++){e.queryList[h].push(n[m]);var o;if(h==="saved"){o=e.buildSavedOption(n[m])}else{o=e.buildRecentOption(n[m])}j.insertBefore(o,f)}},function(m){l.target.parentNode.removeChild(l.target)});l.preventDefault()});j.appendChild(f)},render:function(){var e=this;d.delegate("click",this.node,{className:"query_type"},function(){e.displayBuilder({type:this.getAttribute("data-type")})});var n=this.node.getElementsByClassName("launch_routes")[0];var m=n.getElementsByClassName("query_list");var l=m[0];var k=m[1];for(var h=0;h<this.queryList.saved.length;h++){l.appendChild(this.buildSavedOption(this.queryList.saved[h]))}if(!this.allDefaultSaved){l.removeChild(l.getElementsByTagName("p")[0]);if(this.queryList.saved.length===c){this.attachMoreButton("saved",l)}}if(this.queryList.recent.length===0){k.appendChild(d.tag("img",{className:"placeholder_happy",src:"/images/analytics/bg_cloud_happy.svg"}))}else{k.removeChild(k.getElementsByTagName("p")[0]);for(var f=0;f<this.queryList.recent.length;f++){k.appendChild(this.buildRecentOption(this.queryList.recent[f]))}if(this.queryList.recent.length===c){this.attachMoreButton("recent",k)}}d.delegate("click",k,{className:"query"},function(o){var j=[].indexOf.call(k.getElementsByTagName("a"),this);e.displayBuilder(e.queryList.recent[j]);o.preventDefault()});d.delegate("click",l,{className:"query"},function(o){var j=[].indexOf.call(l.getElementsByTagName("a"),this);e.displayBuilder(e.queryList.saved[j]);o.preventDefault()})}};b.extend(a.prototype,d.ComponentProto)})(UI,_);(function(c,b){if(!c){return}if(!App.Views.Explorer){App.Views.Explorer={}}var a=App.Views.Explorer.ResultsToolbarView=function(d){this._metadata=d.metadata;this._objectId=d.query.objectId;this._isSaved=d.query.isSaved;this._name=d.query.name;this.render();this.attach(d.parent)};a.prototype={defaultName:"Results",prepend:function(d){this.node.insertBefore(d,this.node.firstChild)},executeSave:function(d,e){var f={};if(this._isSaved!==e){this._isSaved=e;f.isSaved=e}if(d){this._name=d;f.name=d}$.ajax({url:App.currentApp.dataRequestUrl()+"explorer/"+this._objectId,type:"PUT",contentType:"application/json",data:JSON.stringify(f)})},render:function(){var s=this;var n=c.tag("div",{className:"query_toolbar"});var v={className:"query_name","data-placeholder":"Name Your Query","data-hide-placeholder":"true"};var q=function(){if(this.textContent&&this.textContent!==""){this.setAttribute("data-hide-placeholder","true")}else{this.removeAttribute("data-hide-placeholder")}};var r=c.tag("div",v,this._name||this.defaultName);var o=["(got ",this._metadata.numRows," rows in ",(+new Date()-this._metadata.startTime)/1000,"s)"].join("");var u=c.tag("div",{className:"query_metadata"},o);n.appendChild(c.tag("div",{className:"query_header"},[r,u]));var w=c.tag("a",{},"Save this query");n.appendChild(w);var k=c.tag("a",{},"Cancel");var e=c.tag("a",{},"Save (or press enter)");var m=c.tag("span",{className:"editState"},[k,e]);n.appendChild(m);var p=c.tag("a",{},"Rename Query");var j=c.tag("a",{},"Delete Query");var f=c.tag("span",{className:"savedState"},[p,j]);n.appendChild(f);var d=function(x){var y=[w,m,f];b.each(y,function(z){z.style.display="none"});x.style.display="inline-block"};if(this._isSaved){d(f)}var h=function(){r.textContent=s._name;r.contentEditable=false;q.bind(r)();d(s._isSaved?f:w);document.body.removeEventListener("mousedown",s._hideHandler)};var l=function(){r.contentEditable=false;s.executeSave(r.textContent,true);d(f);document.body.removeEventListener("mousedown",s._hideHandler)};var t=function(x){r.textContent="";r.contentEditable=true;r.focus();d(m);s._hideHandler=function(y){if(!c.hasAncestor(y.target,s.node)){if(r.textContent===""){h()}else{l()}}};document.body.addEventListener("mousedown",s._hideHandler)};r.addEventListener("change",q);r.addEventListener("keypress",q);r.addEventListener("input",q);r.addEventListener("focus",q);r.addEventListener("keydown",function(x){if(x.keyCode===13){l()}else{if(x.keyCode===27){h()}}});w.addEventListener("click",t);k.addEventListener("click",h);e.addEventListener("click",l);p.addEventListener("click",t);j.addEventListener("click",function(){d(w);s.executeSave(null,false)});this.node=n}};b.extend(a.prototype,c.ComponentProto)})(UI,_);(function(c,b){if(!c){return}if(!App.Views.Explorer){App.Views.Explorer={}}var a=App.Views.Explorer.ResultsView=function(d){this._onSuccess=d.onSuccess;this._onError=d.onError;this._type=d.type;this.render();this.attach(d.parent)};a.prototype={defaultName:"Results",runQuery:function(h){var d=this;this._query=h;this.spin(true);var f=+new Date();var j={data:[],parent:this.node};var e=App.currentApp.dataRequestUrl()+"explorer/";$.post(e,h).then(function(o){if(o.error){d._onError(o.error);return}d._onSuccess();if(!h.objectId){d._query.objectId=o.id;window.history.pushState({},"",e+o.id)}while(d.node.firstChild){d.node.removeChild(d.node.firstChild)}b.each(h.sources,function(p){j.data=j.data.concat(o[p])});var n=j.data.length;if(h.type==="table"){n--}else{if(h.type==="time_series"){n=b.size(j.data[0])}}if(n===0){d.node.appendChild(d.buildNoData());return}var l=new App.Views.Explorer.ResultsToolbarView({query:h,metadata:{startTime:f,numRows:n},parent:d.node});var k=c.tag("a",{className:"context_button"},c.createIcon("questionMark"));k.addEventListener("click",d.faqHandler.bind(d));l.prepend(k);var m=c.tag("a",{className:"context_button"},c.createIcon("exportData"));m.addEventListener("click",d.exportHandler.bind(d));l.prepend(m);if(h.type==="table"){d._output=new App.Views.Explorer.Table(j)}else{if(h.type==="time_series"){d._output=new App.Views.Explorer.TimeSeries(j)}else{if(h.type==="raw"){d._output=new App.Views.Explorer.Raw(j)}}}},this._onError).always(function(){d.spin(false)})},exportHandler:function(){var d="data:text/csv;charset=utf-8,";var e=b.map(this._output.toRowsForCSV(),function(f){return b.map(f,function(h){if(typeof h==="string"){return'"'+h.replace(/"/g,'""')+'"'}else{return h}}).join()});window.open(encodeURI(d+e.join("\n")))},faqHandler:function(){if(this._faq){this._faq.render()}else{this._faq=new App.Views.Explorer.FAQView({})}},spin:function(d){if(!this._spinner){this._spinner=c.tag("div",{className:"explorer_spin_layer trans"},c.tag("div",{className:"explorer_spinner"}))}if(d){document.body.appendChild(this._spinner);c.removeClass(this._spinner,"trans")}else{if(this._spinner.parentNode){c.addClass(this._spinner,"trans");setTimeout(function(){document.body.removeChild(this._spinner)}.bind(this),200)}}},buildNoData:function(){return c.tag("div",{className:"ui_empty_state"},[c.tag("img",{className:"placeholder_happy",src:"/images/analytics/bg_cloud_meh.svg"}),c.tag("div",{className:"ui_empty_caption"},"Oops, that query returned no data."),c.tag("p",{},"Make sure your app has been active within the specified dates and that your filters aren't too restrictive.")])},render:function(){var d=c.tag("div",{className:"query_results"});d.appendChild(c.tag("p",{className:"hint_header"},"HELPFUL HINTS"));d.appendChild(c.tag("p",{className:"hint"},"This blue box holds the minimum information necessary to fetch some data."));d.appendChild(c.tag("p",{className:"hint"},"Each additional box is a set of optional modifiers to help you find interesting trends."));if(this._type==="table"||this._type==="time_series"){d.appendChild(c.tag("p",{className:"hint"},"Choose an aggregate to process your data. Select from a standard set of aggregate functions  and a rich set of column data to extract trends from your Parse activity."));d.appendChild(c.tag("p",{className:"hint"},"Groups let you capture aggregates in distinct buckets. A couple of time-based groupings are available as well, for easy bucketing by hour or day."))}d.appendChild(c.tag("p",{className:"hint"},"Sometimes not all data should be considered in the aggregates. Specify filters to only include particular rows (e.g. activity from a particular Parse User or one particular build of your app) in the results."));if(this._type==="table"){d.appendChild(c.tag("p",{className:"hint"},"Sorting happens over the result rows before data's even returned to you — so you can order the output results, then only display the top 10 results."))}var e=this._type!=="time_series"?" and maximum results":"";d.appendChild(c.tag("p",{className:"hint"},"Use the date range"+e+" controls to prevent being flooded with data. If your queries seem to be timing out, use these to limit the range of data you're trying to scan."));d.appendChild(c.tag("p",{className:"hint"},"Give it a whirl to see how these various pieces interact and to find the patterns hidden in your app's activity. Happy exploring!"));this.node=d}};b.extend(a.prototype,c.ComponentProto)})(UI,_);(function(c,a){if(!c){return}if(!App.Views.Explorer){App.Views.Explorer={}}var b=App.Views.Explorer.Raw=function(d){this._data=d.data;this.render();this.attach(d.parent)};b.prototype={toRowsForCSV:function(){return a.map(this._data,function(d){return[JSON.stringify(d)]})},render:function(){var d=a.sortBy(this._data,"event_time");var e=a.map(d,function(h,f){return c.tag("p",{},JSON.stringify(h))});this.node=c.tag("div",{className:"query_results_raw query_results_output"},e)}};a.extend(b.prototype,c.ComponentProto)})(UI,_);(function(c,b){if(!c){return}if(!App.Views.Explorer){App.Views.Explorer={}}var a=App.Views.Explorer.Table=function(d){this._header=d.data.shift();this._data=d.data;this.render();this.attach(d.parent)};a.prototype={toRowsForCSV:function(){return[this._header].concat(this._data)},render:function(){var d=c.tag("div",{className:"ui_data_table_container"});new c.DataTable({rows:this._data,header:this._header,sortable:true,parent:d});this.node=c.tag("div",{className:"query_results_output"},[d])}};b.extend(a.prototype,c.ComponentProto)})(UI,_);(function(b,a){if(!b){return}if(!App.Views.Explorer){App.Views.Explorer={}}var c=App.Views.Explorer.TimeSeries=function(d){this._data=d.data[0];this.render();this.attach(d.parent);this.chartify()};c.prototype={highchartsSeries:function(){return a.map(this._data,function(e,d){return{name:d,data:e}})},toRowsForCSV:function(){var j=this._data;var h=a.keys(j);var d=[];a.each(h,function(l){var m=a.map(j[l],function(n){return n[0]});d=a.union(d,m)});d.sort(function(m,l){return m-l});var f=[];var k;var e=a.map(d,function(l){var m=[l];a.each(h,function(o,n){if(f[n]===undefined){f[n]=0}k=f[n];datapoint=j[o][k];if(datapoint&&datapoint[0]===l){m.push(datapoint[1]);f[n]++}else{m.push("")}});return m});e.unshift(["time"].concat(h));return e},chartify:function(){this.graph=new Highcharts.Chart({chart:{renderTo:this.node,type:"line",shadow:false},credits:{enabled:false},plotOptions:{series:{shadow:false,states:{hover:{enabled:false}},marker:{lineWidth:1}}},title:{text:null},series:this.highchartsSeries(),tooltip:{borderWidth:1,formatter:function(){return[moment.unix(this.x/1000).format("MM/DD HH:mm"),this.y].join(" -- ")},shadow:false},xAxis:{labels:{formatter:function(){return moment.unix(this.value/1000).format("MMM D")}},tickPosition:"inside",type:"datetime",tickColor:"#e0e4e9",lineColor:"#e0e4e9"},yAxis:{gridLineColor:this.chartBorderColor||"#e0e4e9",gridLineDashStyle:"LongDash",min:0,plotLines:[{value:0,width:1,color:this.chartBorderColor||"#e0e4e9"}],showFirstLabel:false,showLastLabel:false,tickPixelInterval:"140",tickPosition:"inside",title:{text:null},}})},render:function(){this.node=b.tag("div",{className:"query_results_time_series query_results_output"})}};a.extend(c.prototype,b.ComponentProto)})(UI,_);(function(a){var b="https://graph.facebook.com";function c(d){return Object.keys(d).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(d[e])}).join("&")}a.FBEvent={log:function(e,h){if(typeof e!=="string"||e.length<1){throw new TypeError("Invalid event name")}h=h||{};h._eventName=e;var f={method:"post",event:"CUSTOM_APP_EVENTS",advertiser_tracking_enabled:false,application_tracking_enabled:false,custom_events:JSON.stringify([h])};var d=document.createElement("script");d.src=b+"/506576959379594/activities?"+c(f);document.body.appendChild(d)}}})(this);(function(b){var a=window.Gridflow=function(d,c){this.queue=[];this.lastTime=null;this.parent=d;this.className=c;this.transformKey="transform";if("webkitTransform" in document.body.style){this.transformKey="webkitTransform"}this.calculateSizes();this.floatBlocks()};a.prototype={calculateSizes:function(){var d=this.parent.getElementsByClassName(this.className);var c;if(d.length===0){c=b.tag("div",{className:this.className,style:{position:"absolute",opacity:0}})}else{c=d[0]}this.blockWidth=c.offsetWith;this.blockOffsetLeft=parseInt(b.getStyle(c,"margin-left"),10);this.fullBlockWidth=c.offsetWidth+this.blockOffsetLeft+parseInt(b.getStyle(c,"margin-right"),10);this.blockHeight=c.offsetHeight;this.blockOffsetTop=parseInt(b.getStyle(c,"margin-top"),10);this.fullBlockHeight=c.offsetHeight+this.blockOffsetTop+parseInt(b.getStyle(c,"margin-bottom"),10);this.parentWidth=this.parent.offsetWidth},floatBlocks:function(){this.parent.style.height=this.parent.offsetHeight+"px";if(b.getStyle(this.parent,"position")==="static"){this.parent.style.position="relative"}var d=this.parent.getElementsByClassName(this.className);this.blocks=[];var c;for(c=0;c<d.length;c++){d[c].style.top=d[c].offsetTop+"px";d[c].style.left=d[c].offsetLeft+"px";this.blocks.push(d[c])}for(c=0;c<d.length;c++){d[c].style.margin="0";d[c].style.position="absolute"}},getDest:function(f,d){var h=Math.max(this.parentWidth/this.fullBlockWidth,1)|0;var k=(f/h)|0;var c=f%h+d;while(c>=h){c-=h;k++}while(c<0){c+=h;k--}var j=h;if(k>=(((this.blocks.length+d)/h)|0)){j=(this.blocks.length+d)%h}var e=(this.parentWidth-this.fullBlockWidth*j)/2;e+=this.fullBlockWidth*c;return({x:Math.round(e)+this.blockOffsetLeft,y:k*this.fullBlockHeight+this.blockOffsetTop})},shiftBlocks:function(h,c,e){for(var f=h;f<this.blocks.length;f++){var k={x:this.blocks[f].offsetLeft,y:this.blocks[f].offsetTop};var j=this.getDest(f,c);var m=Math.abs(j.x-k.x)/e;var l=Math.abs(j.y-k.y)/e;if((c>0&&j.y>k.y)||(c<0&&j.y<k.y)){this.blocks[f].style.zIndex=1}var d={el:this.blocks[f],dx:m,dy:l,dest:j,start:k,cb:this.complete.bind(this,j.y,j.x)};this.queue.push(d)}this.animate()},complete:function(e,d,c){c.style.cssText="position:absolute;margin:0;top:"+e+"px;left:"+d+"px;"},animate:function(){if(this.queue.length<1){this.lastTime=null;return}if(!this.lastTime){this.lastTime=new Date();requestAnimationFrame(this.animate.bind(this));return}var e=new Date()-this.lastTime;this.lastTime=new Date();for(var h=0;h<this.queue.length;h++){var f=this.queue[h].el;var j=this.queue[h].dest;var d=this.queue[h].start;if(!this.queue[h].delta){this.queue[h].delta={x:0,y:0}}var k=this.queue[h].delta;var m=this.queue[h].dx*e;var l=this.queue[h].dy*e;if(j.x<d.x+k.x){k.x-=m}else{k.x+=m}if(j.y<d.y+k.y){k.y-=l}else{k.y+=l}var c=true;if(Math.abs(d.x+k.x-j.x)<=m){k.x=j.x-d.x}else{c=false}if(Math.abs(d.y+k.y-j.y)<=l){k.y=j.y-d.y}else{c=false}f.style[this.transformKey]="translate3d("+k.x+"px,"+k.y+"px,0)";if(c){if(this.queue[h].cb){this.queue[h].cb(f)}this.queue.splice(h--,1)}}requestAnimationFrame(this.animate.bind(this))},resizeParent:function(){var c=Math.max(this.parentWidth/this.fullBlockWidth,1)|0;this.parent.style.height=this.fullBlockHeight*(((this.blocks.length-1)/c+1)|0)+"px"},insert:function(d){if(!b.hasClass(d,this.className)){return}var c=this.getDest(-1,1);this.shiftBlocks(0,1,300);this.parent.insertBefore(d,this.blocks[0]);d.style.top=c.y+"px";d.style.left=c.x+"px";d.style.margin=0;d.style.position="absolute";this.blocks.splice(0,0,d);this.resizeParent()},remove:function(d){var c=Math.max(this.parentWidth/this.fullBlockWidth,1)|0;this.parent.removeChild(this.blocks[d]);this.blocks.splice(d,1);this.shiftBlocks(0,0,300);this.resizeParent()}}})(UI);var Marketo={_devEnvironment:true,libraryLoaded:false,clientKey:"713-YFQ-084",associateLead:function(a){if(this._devEnvironment){return}this.load(function(){a=a||{};var c;if(App.currentUser){c={Email:a.Email||App.currentUser.get("email"),FirstName:a.FirstName||App.currentUser.firstName(),LastName:a.LastName||App.currentUser.lastName(),Company:a.Company||App.currentUser.get("company_name"),Company_Type__c:a.Company_Type__c||App.currentUser.get("company_type"),Title:a.Title||App.currentUser.get("title"),Sign_Up_Date__c:a.Sign_Up_Date__c||(new Date(App.currentUser.get("created_at"))).toJSON()}}else{if(_.keys(a).length>0){c=a}}if(typeof(c)!=="undefined"){if(a.Name){var d=App.Models.User.separateName(a.Name);a.FirstName=d.firstName||"";a.LastName=d.lastName||"";delete a.Name}if(a.Question){c.Sales_Form_Question__c=a.Question}var b;if(a.MarketoHash){b=a.MarketoHash;delete a.MarketoHash}else{b=App.currentUser.get("marketo_hash")}mktoMunchkin(this.clientKey);mktoMunchkinFunction("associateLead",c,b)}})},triggerEvent:function(a){if(this._devEnvironment){return}this.load(function(){mktoMunchkin(this.clientKey);mktoMunchkinFunction("clickLink",{href:"/MarketoEvents/"+a})})},load:function(a){if(!this.libraryLoaded){var b=this;this.libraryLoaded=true;$.ajax({url:document.location.protocol+"//munchkin.marketo.net/munchkin.js",dataType:"script",cache:true,success:function(){Munchkin.init(b.clientKey);a.apply(b)}})}else{a()}}};var Parallax=(function(){var c=false;var a=false;var f=0;var e=[];var b=function(){f=document.body.scrollTop;if(!a){requestAnimationFrame(d)}a=true};var d=function(){for(var j=0,h=e.length;j<h;j++){e[j].el.style.backgroundPositionY=e[j].multiplier*f+"px"}a=false};return(function(h,j){e.push({el:h,multiplier:j});if(!c){window.addEventListener("scroll",b);c=true}})})();var PushDetailsAnalytics={initialize:function(a){var b=new Analytics.GraphState({app:a.app});new App.Views.Apps.PushDetailsAnalyticsView({model:b,pushId:a.pushId,analyticsStatus:a.analyticsStatus,fromDate:a.fromDate,toDate:a.toDate,pushState:a.pushState,experimentInfo:a.experimentInfo}).render()}};PushABConsole.Models.PushState=Backbone.Model.extend({defaults:{query:null,currentCountRequest:null,target:0,targetedDevices:[],schema:null,constraints:null,recipientConstraintJson:"",recipientCount:null,isApproximate:false,experiment:false,audiencePercent:30,audienceSize:null,audienceSizeSuggestion:null,message:"",message2:"",format:"text",format2:"text",time:new Date(),time2:new Date(),experimentType:"message",useTranslation:false,translationEnabled:true,translations:[],translationCounts:{},localeOptions:null,doLocalPush:false,delivery:"now",expires:false,expireType:"time",},initialize:function(){var a=this;_.bindAll(this);this.set({query:new Parse.Query("_Installation"),constraints:new App.Collections.Constraints()});this.on("change:audienceId",this.rebuildParseQuery);this.get("constraints").on("change remove",this.rebuildParseQuery);this.on("change:targetedDevices",this.rebuildParseQuery);this.on("change:target",this.rebuildParseQuery);this.on("change:recipientCount",this.updateAudienceSize);this.on("change:audiencePercent",this.updateAudienceSize);this.on("change:experiment",this.updateAudienceSizeSuggestion);this.updateRecipientsAndCount();this.checkTranslationEnabled()},rebuildParseQuery:function(){var a=new Parse.Query("_Installation");constraints=this.get("constraints");schema=this.get("schema");targetedDevices=this.get("targetedDevices");App.Collections.Constraints.addConstraintsToQuery(constraints,a,schema);a.containedIn("deviceType",targetedDevices);if(this.get("doLocalPush")){a.exists("timeZone")}this.set("query",a);this.updateRecipientsAndCount()},updateRecipientsAndCount:function(){this.updateRecipients();this.updateRecipientCount();this.updateTranslationCounts()},updateRecipients:function(){var a=this.get("query").toJSON().where;if(_.isUndefined(a.deviceType)){this.set("recipientConstraintJson","")}else{this.set("recipientConstraintJson",JSON.stringify(a))}},updateRecipientCount:function(){var a=this;var b="/apps/"+encodeURIComponent(this.get("app").id)+"/push_subscriber_count";if(this.get("currentCountRequest")){this.get("currentCountRequest").abort()}var c=$.get(b,{where:JSON.stringify(this.get("query").toJSON().where),audienceId:this.get("audienceId"),},function(d){a.set({recipientCount:d.count,isApproximate:d.approximate})}).error(function(){a.unset("recipientCount");a.unset("isApproximate")}).always(function(){a.set("currentCountRequest",null)});this.set("currentCountRequest",c);this.set("recipientCount",null);this.set("isApproximate",false)},updateTranslationCounts:function(){var b=this;var a=this.get("translations");var f=this.get("translationCounts");var d=this.get("query");var e=this.get("audienceId");var c="/apps/"+encodeURIComponent(this.get("app").id)+"/push_subscriber_translation_count";if(d.toJSON().where.localeIdentifier){return}$.get(c,{where:JSON.stringify(d.toJSON().where),audienceId:e,locales:JSON.stringify(_.map(a,function(h){return h.locale})),},function(h){b.set("translationCounts",_.extend(f,h));b.trigger("change:translationCounts")})},updateAudienceSize:function(){if(this.get("recipientCount")===undefined){this.unset("audienceSize");return}if(this.get("recipientCount")===null){this.set("audienceSize",null);return}var a=(this.get("recipientCount")*this.get("audiencePercent")/100)|0;this.set("audienceSize",a)},updateAudienceSizeSuggestion:function(){if(!this.get("experiment")){return}var b="/apps/"+encodeURIComponent(this.get("app").id)+"/push_notifications/audience_size_suggestion";var a=this;$.get(b,{},function(c){a.set("audienceSizeSuggestion",c.audience_size)}).error(function(){a.unset("audienceSizeSuggestion")})},loadLocaleOptions:function(){var a=this.get("localeOptions");if(a!==null){return}var b=this.get("app").id;var c="/apps/"+encodeURIComponent(b)+"/installation_column_options";$.get(c,{column:"localeIdentifier"},function(d){this.set("localeOptions",d.options)}.bind(this))},checkTranslationEnabled:function(){var a=App.currentApp.dataRequestUrl()+"is_localization_available";$.get(a,{},function(b){this.set("translationEnabled",b.available);if(!b.available){this.set("useTranslation",false)}}.bind(this))},getErrors:function(){return _(this.get("constraints").models).chain().map(function(a){return a.get("error")}).filter(function(a){return a}).value()},hasError:function(){if(this.get("message")===""){return true}if(this.get("recipientCount")===0){return true}return !_.isEmpty(this.getErrors())}});App.Views.Apps.PushDetailsAnalyticsView=Backbone.View.extend({el:".push_analytics",initialize:function(){_.bindAll(this);this.model.set("analyticsStatus",this.options.analyticsStatus);this.model.set("pushState",this.options.pushState);this.model.set("fromDate",new moment.unix(this.options.fromDate).toDate());this.model.set("toDate",new moment.unix(this.options.toDate).toDate());this.model.set("stride","hour");if(this.model.get("analyticsStatus")!=="scheduled"&&this.model.get("pushState")!=="scheduled"){this.graphView=new Analytics.Graph({model:this.model});document.getElementsByClassName("graph_wrapper")[0].style.display="block"}var a;if(this.model.get("analyticsStatus")==="show"){if(experimentInfo&&experimentInfo.is_launch){a=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:experimentInfo.group_launch.mongo_push_status_id});a.on("change:loading",this.renderLoading);this.model.addSelectedSeries(a)}else{a=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:this.options.pushId});a.on("change:loading",this.renderLoading);this.model.addSelectedSeries(a)}}},render:function(){var c=this.el.getElementsByClassName("human_date");for(var a=0;a<c.length;a++){var b=moment(c[a].innerHTML);c[a].innerHTML=b.format("MMMM Do, YYYY \\at h:mm A")}}});PushConsole.Views.Constraint=App.Views.Constraint.extend({events:_.extend({},App.Views.Constraint.prototype.events,{commit:"setModel"}),selectField:function(){this.renderOp();return false},_updateEditor:function(d,b,e){this.unsetModel();var c=App.Collections.Constraints.Ops[b][e].editor;this.editorConstructor=c;if(c){var a=this.schema.key(d).type.className;this.editor=new c({className:a,defaultEmpty:true,shouldCommitWhenBlur:true});this.$(".constraint_value").empty().append(this.editor.$el);this.editor.loadDefaultValue()}else{this.$(".constraint_value").empty();this.editor=null}if(this.editor){this.editor.focusOrCommit()}else{this.setModel()}if(this.editorConstructor===App.Views.Editors.ChosenArray){this.editor.initializeChosen();this.addOptions(this.options.appId,d,this.editor)}},_opsForField:function(b){var a=_.clone(App.Collections.Constraints.Ops[b]);if(b==="Array"){Parse._each(a,function(d,c){if(d.editor===App.Views.Editors.SingleLineString){delete a[c]}})}return a},addOptions:function(c,b,a){var d="/apps/"+encodeURIComponent(c)+"/installation_column_options";$.get(d,{column:b},function(f){var e=[];f.options=f.options.slice(0,1000);_(f.options).each(function(h){if(_.isString(h)){var j=_.escape(h);var k=(h===""&&b==="channels")?"Broadcast":j;e.push({value:j,option:k})}});a.addOptions(e)})}});PushABConsole.Views.PushConsole=Backbone.View.extend({events:{"change #push_enable_testing":"updateExperiment","change #device_selection":"updateDevices","change #audience_table":"selectAudience","change #test_selection":"updateExperimentType","change #push_time":"updateDeliveryTime","change #expiration_selection":"updateExpires","change #expiration_type":"updateExpires","change #local_delivery":"updateLocalDelivery","change .push_preview":"renderPreviewDevice","input #push_message textarea":"updateMessages","change #update_format input":"updateFormat","change .use_translation_switch input":"useTranslation","input #experiment_name":"validate","change #save_push_audience":"updateSavePushAudience","click #send_push":"submit","click .audience_cancel_button":"setAudienceEveryone",},initialize:function(){_.bindAll(this);this.state=this.options.state;this.state.set("savePushAudience",false);this.targetQuery=document.getElementById("target_query");this.preview=document.getElementsByClassName("push_preview")[0];this.experimentSettings=document.getElementById("experiment_settings");this.experimentRows=this.experimentSettings.getElementsByClassName("ab_test_selection");this.messageElements=document.getElementsByClassName("ab_test_message");this.timeElements=document.getElementsByClassName("ab_test_time");this.standardMessageElements=document.getElementsByClassName("ab_test_standard_message");this.standardTimeElements=document.getElementsByClassName("ab_test_standard_time");this.translationToggle=document.getElementById("translation_toggle");this.translationTwoWaySwitch=document.getElementById("translation_two_way_switch");this.translationToggleYes=document.getElementById("translation_enable_yes");this.translationToggleNo=document.getElementById("translation_enable_no");this.translationSection=document.getElementById("translation_section");this.translationUnavailable=document.getElementById("translation_unavailable_section");this.scheduleElements=document.getElementsByClassName("scheduled_delivery");this.experimentName=document.getElementById("experiment_name");this.audienceSizeSelection=document.getElementById("audience_size_section");this.audienceSizeSuggestion=document.getElementById("test_audience_size_suggestion");this.audienceCountMessage=document.getElementById("audience_count_message");this.audienceCountUnavailable=document.getElementById("audience_count_unavailable");this.audienceCountInProgress=document.getElementById("audience_count_in_progress");this.sendToRestMessage=document.getElementById("send_to_rest_message");this.submitButton=document.getElementById("send_push");this.pushErrors=document.getElementById("push_errors");this.testRecipientsCount=document.getElementById("test_recipients_count");this.experimentDevices=document.getElementsByClassName("experiment_devices");this.experimentDeviceCounts=document.getElementsByClassName("experiment_device_count");this.experimentPercents=document.getElementsByClassName("experiment_percent");this.state.on("change:target",this.renderAudience);this.state.on("change:experiment",this.renderExperiment);this.state.on("change:experimentType",this.renderExperiment);this.state.on("change:targetedDevices",this.renderPreviews);this.state.on("change:delivery",this.renderScheduling);this.state.on("change:doLocalPush",this.renderScheduling);this.state.on("change:expires change:expireType change:doLocalPush",this.renderExpiration);this.state.on("change:message change:message2 change:format change:format2",this.renderMessagePreview);this.state.on("change:time change:time2",this.renderTimePreview);this.state.on("change:audiencePercent",this.renderSendToRestMessage);this.state.on("change:audienceSize",this.renderExperimentCounts);this.state.on("change:recipientConstraintJson",this.renderRecipientConstraintInput);this.state.on("change:recipientCount",this.renderExperimentCounts);this.state.on("change:audienceCounts",this.renderAudienceCounts);this.state.on("change:audienceSize",this.renderAudienceSizeSuggestionText);this.state.on("change:audienceSizeSuggestion",this.renderAudienceSizeSuggestionText);this.state.on("change:useTranslation change:translationEnabled",this.renderTranslation);this.state.on("change:recipientCount change:audiencePercent change:experiment change:experimentType change:message change:message2 change:format change:format2 change:time change:time2 change:useTranslation change:translations",this.validate);this.setupSlider();this.renderSavePushAudience();this.renderDates();this.renderPreviews();this.renderExperimentCounts();this.selectAudience();var a=this;_.each(document.getElementsByClassName("audience_size_column"),function(b){if(b.attributes.audience_id){$.get(App.currentApp.dataRequestUrl()+"push_subscriber_count",{audienceId:b.getAttribute("audience_id")}).then(function(d){var c=a.state.get("audienceCounts")||{};c[b.getAttribute("audience_id")]=d;a.state.set("audienceCounts",c);a.renderAudienceCounts()})}})},validate:function(){var d="";var c=true;var b=this.state.get("experiment");var a=this.state.get("useTranslation");if(b&&a){c=false;d=d||"Localized experiments are currently not supported"}if(this.state.get("message").length===0){c=false;d=d||"Your message cannot be empty"}if(this.state.get("format")==="json"){try{JSON.parse(this.state.get("message"))}catch(f){c=false;d=d||"Your message is not valid JSON"}}if(a){_.each(this.state.get("translations"),function(h){if(h.data.length===0){c=false;d=d||"All messages must be non-empty"}if(h.type==="json"){try{JSON.parse(h.data)}catch(j){c=false;d=d||"Your message is not valid JSON"}}})}if(moment().add(2,"weeks").isBefore(this.state.get("time"))){c=false;d=d||"You must send your message within the next 2 weeks"}if(this.state.get("experiment")){if(moment().add(2,"weeks").isBefore(this.state.get("time2"))){c=false;d=d||"You must send your message within the next 2 weeks"}if(this.state.get("recipientCount")*this.state.get("audiencePercent")/200<1&&this.state.get("isApproximate")===false){c=false;d=d||"You have no recipients for this campaign"}if(this.experimentName.value.length===0){c=false;d=d||"You must name this experiment"}if(this.state.get("experimentType")==="message"){if(this.state.get("message2").length===0){c=false;d=d||"Your message cannot be empty"}if(this.state.get("format2")==="json"){try{JSON.parse(this.state.get("message2"))}catch(f){c=false;d=d||"Your message is not valid JSON"}}}}else{if(this.state.get("recipientCount")===0&&this.state.get("isApproximate")===false){c=false;d=d||"You have no recipients for this campaign"}}if(_.has(this.state.get("query").toJSON().where,"localeIdentifier")&&this.state.get("audienceId")==="new_segment"){c=false;d=d||"Localized push with localeIdentifier query is currently not supported."}this.pushErrors.textContent=d;this.pushErrors.style.display=c?"none":"block";UI.toggleClass(this.submitButton,"disabled",!c)},submit:function(){if(UI.hasClass(this.submitButton,"disabled")){return}document.getElementById("push_form").submit()},updateAudiencePercent:function(){var a=document.getElementById("audience_size");this.state.set("audiencePercent",parseInt(a.value,10))},setupSlider:function(){var c=document.getElementById("audience_size");var b=document.getElementById("audience_percent");var a=function(){b.innerHTML=c.value+"%";c.style.backgroundImage="linear-gradient(90deg, #5298fc, #5298fc "+c.value+"%, transparent "+c.value+"%)"};c.addEventListener("input",a);c.addEventListener("change",this.updateAudiencePercent);if(Trait.isIE){c.addEventListener("change",a)}a()},renderDates:function(){var j=document.getElementById("delivery_time");var l=new Date();l.setMinutes(l.getMinutes()+10);new UI.Datepicker({name:"push_date",parent:j,hideOnChange:true,preventPast:true,onChange:this.updateSingleTime.bind(this,false,"push"),value:l});this.generateTimeSelectors(j,"push",{hour:l.getHours()%12,minute:l.getMinutes(),ampm:l.getHours()>12?"PM":"AM"});UI.delegate("change",j,"select",this.updateSingleTime.bind(this,false));var a=document.getElementById("push_delivery").getElementsByClassName("parameter_block");var b=new Date();b.setDate(b.getDate()+1);new UI.Datepicker({name:"exp_group_A_date",parent:a[0].children[1],hideOnChange:true,preventPast:true,onChange:this.updateSingleTime.bind(this,false,"exp_group_A"),value:b});this.generateTimeSelectors(a[0].children[2],"exp_group_A",{hour:b.getHours()%12,ampm:b.getHours()>12?"PM":"AM"});UI.delegate("change",a[0].children[2],"select",this.updateSingleTime.bind(this,false));new UI.Datepicker({name:"exp_group_B_date",parent:a[1].children[1],hideOnChange:true,preventPast:true,onChange:this.updateSingleTime.bind(this,true,"exp_group_B"),value:b});this.generateTimeSelectors(a[1].children[2],"exp_group_B",{hour:b.getHours()%12,ampm:b.getHours()>12?"PM":"AM"});UI.delegate("change",a[1].children[2],"select",this.updateSingleTime.bind(this,true));var k=Util.timezone_acronym();var d=new Date().getTimezoneOffset();var f=Math.abs(d)%60;var m=(d>0?"-":"+")+(Math.abs(d)<600?"0":"")+(Math.abs(d/60)|0)+":"+(f<10?"0":"")+f;document.getElementById("push_time_zone_user").value=m;document.getElementById("push_time_zone_user").nextElementSibling.setAttribute("data-text",k);var c=document.getElementById("expiration_time");new UI.Datepicker({name:"expiration_date",parent:c,hideOnChange:true,preventPast:true,value:b});this.generateTimeSelectors(c,"expiration",{hour:b.getHours()%12,ampm:b.getHours()>12?"PM":"AM"});var h=[];for(var e=1;e<=30;e++){h.push(UI.tag("option",{value:e},e))}var n=document.getElementById("expiration_interval");n.appendChild(UI.tag("select",{name:"expiration_interval_num",value:24},h));n.appendChild(UI.tag("select",{name:"expiration_interval_unit"},[UI.tag("option",{value:"hours"},"Hours"),UI.tag("option",{value:"days"},"Days")]))},generateTimeSelectors:function(h,a,b){b=b||{};var d;var f=[];for(d=1;d<=12;d++){f.push(UI.tag("option",{value:d%12},d))}var e=UI.tag("select",{name:a+"_hour"},f);if(typeof b.hour!=="undefined"){e.value=b.hour}var c=[];for(d=0;d<=59;d++){c.push(UI.tag("option",{value:d},":"+(d<10?"0":"")+d))}var j=UI.tag("select",{name:a+"_minute"},c);if(typeof b.minute!=="undefined"){j.value=b.minute}var l=UI.tag("select",{name:a+"_ampm"},[UI.tag("option",{value:"AM"},"AM"),UI.tag("option",{value:"PM",selected:true},"PM")]);if(typeof b.ampm!=="undefined"){l.value=b.ampm}var k=document.createDocumentFragment();k.appendChild(e);k.appendChild(j);k.appendChild(l);h.appendChild(k)},fetchDate:function(d){var e=document.getElementsByName(d+"_date")[0];var j=document.getElementsByName(d+"_hour")[0];var h=document.getElementsByName(d+"_minute")[0];var f=document.getElementsByName(d+"_ampm")[0];var c=document.getElementById("push_time_zone_user");var b=j.value;if(f.value==="PM"){b=parseInt(b,10)+12}else{if(b.length<2){b="0"+b}}var a=moment(e.value+" "+b+":"+(h.value.length<2?"0":"")+h.value+c.value);return a.toDate()},updateExperiment:function(a){this.state.set("experiment",a.target.value==="true")},updateDevices:function(b){var a=document.getElementById("device_selection").getElementsByTagName("input");this.state.set("targetedDevices",_.foldl(a,function(d,c){if(!c.disabled&&c.checked){return d.concat([c.value])}return d},[]))},renderRecipientConstraintInput:function(){this.targetQuery.value=this.state.get("recipientConstraintJson")},updateExperimentType:function(c){var a=document.getElementById("test_selection").getElementsByTagName("input");for(var b=0;b<a.length;b++){if(a[b].checked){if(a[b].value){this.state.set("experimentType",a[b].value)}}}if(this.state.get("experimentType")==="message"){if(this.state.get("delivery")==="time"){this.state.set("time",this.fetchDate("push"))}else{this.state.set("time",new Date())}}else{this.state.set("time",this.fetchDate("exp_group_A"));this.state.set("time2",this.fetchDate("exp_group_B"))}},updateDeliveryTime:function(a){this.state.set("delivery",a.target.value);if(a.target.value==="time"){this.state.set("time",this.fetchDate("push"))}else{this.state.set("time",new Date())}},updateSingleTime:function(b,c){var a=c;if(typeof a!=="string"){a=c.target.name.substr(0,c.target.name.lastIndexOf("_"))}var d=this.fetchDate(a);this.state.set("time"+(b?"2":""),d)},updateExpires:function(a){this.state.set("expires",document.getElementById("push_expires_true").checked);this.state.set("expireType",document.getElementById("push_expire_specific").checked?"time":"interval")},updateLocalDelivery:function(a){this.state.set("doLocalPush",a.target.value==="local")},updateMessages:function(a){if(a.target.id==="message_all"||a.target.id==="message_a"){this.state.set("message",a.target.value);if(a.target.id==="message_all"){document.getElementById("message_a").value=a.target.value}else{document.getElementById("message_all").value=a.target.value}}else{if(a.target.id==="message_b"){this.state.set("message2",a.target.value)}}},updateFormat:function(a){if(a.target.name==="increment_badge"){return}if(a.target.name==="data_type"||a.target.name==="data_type_1"){this.state.set("format",a.target.value);if(a.target.name==="data_type"){document.getElementById("push_type_a_"+a.target.value).checked=true}else{document.getElementById("push_type_"+a.target.value).checked=true}}else{if(a.target.name==="data_type_2"){this.state.set("format2",a.target.value)}}},useTranslation:function(b){if(b.target.name!=="translation_enable"||this.translationSection===null){return}var a=b.target.value==="true";this.state.set("useTranslation",a)},renderTranslation:function(){if(this.state.get("useTranslation")){this.translationSection.style.display="block";UI.removeClass(this.translationToggle,"last");this.translationToggleNo.checked=false;this.translationToggleYes.checked=true}else{this.translationSection.style.display="none";UI.addClass(this.translationToggle,"last");this.translationToggleNo.checked=true;this.translationToggleYes.checked=false}if(this.state.get("translationEnabled")){this.translationToggleNo.disabled=false;this.translationToggleYes.disabled=false;UI.removeClass(this.translationTwoWaySwitch,"disabled");this.translationUnavailable.style.display="none"}else{this.translationToggleNo.disabled=true;this.translationToggleYes.disabled=true;UI.addClass(this.translationTwoWaySwitch,"disabled");this.translationUnavailable.style.display="block";UI.removeClass(this.translationToggle,"last")}},setAudienceEveryone:function(){document.getElementById("audience_radio_everyone").checked=true;this.selectAudience()},renderAudienceCounts:function(){_.each(this.state.get("audienceCounts"),function(a,b){el=document.querySelector('.audience_size_column[audience_id="'+b+'"]');if(a.approximate&&a.count===0){el.innerHTML="Very Small"}else{if(a.approximate){units=Math.floor(Math.log(a.count)/Math.log(1000));el.innerHTML=(a.count/Math.pow(1000,units)).toPrecision(3)+["","k","m","b"][units]}else{el.innerHTML=a.count}}})},renderExperiment:function(){var a;if(this.state.get("experiment")){UI.removeClass(this.experimentSettings.getElementsByClassName("last")[0],"last");for(a=0;a<this.experimentRows.length;a++){this.experimentRows[a].style.display="block";if(a===this.experimentRows.length-1){UI.addClass(this.experimentRows[a],"last")}}if(this.translationToggle){this.translationToggle.style.display="none"}if(this.translationSection){this.translationSection.style.display="none"}if(this.translationUnavailable){this.translationUnavailable.style.display="none"}if(this.state.get("experimentType")==="time"){this.state.set("audiencePercent",100);this.audienceSizeSelection.style.display="none";for(a=0;a<this.timeElements.length;a++){this.timeElements[a].style.display="block"}for(a=0;a<this.standardTimeElements.length;a++){this.standardTimeElements[a].style.display="none"}for(a=0;a<this.messageElements.length;a++){this.messageElements[a].style.display="none"}for(a=0;a<this.standardMessageElements.length;a++){this.standardMessageElements[a].style.display="block"}this.submitButton.firstElementChild.textContent="Submit"}else{this.updateAudiencePercent();this.audienceSizeSelection.style.display="block";for(a=0;a<this.timeElements.length;a++){this.timeElements[a].style.display="none"}for(a=0;a<this.standardTimeElements.length;a++){this.standardTimeElements[a].style.display="block"}for(a=0;a<this.messageElements.length;a++){this.messageElements[a].style.display="block"}for(a=0;a<this.standardMessageElements.length;a++){this.standardMessageElements[a].style.display="none"}this.renderScheduling()}this.renderAudienceSizeSuggestionText();this.renderSendToRestMessage()}else{this.$(".ab_test_selection").hide().first().prev().addClass("last");if(this.translationToggle){this.translationToggle.style.display="block"}if(this.translationSection&&this.state.get("useTranslation")){this.translationSection.style.display="block"}if(this.translationUnavailable&&!this.state.get("translationEnabled")){this.translationUnavailable.style.display="block"}for(a=0;a<this.timeElements.length;a++){this.timeElements[a].style.display="none"}for(a=0;a<this.standardTimeElements.length;a++){this.standardTimeElements[a].style.display="block"}for(a=0;a<this.messageElements.length;a++){this.messageElements[a].style.display="none"}for(a=0;a<this.standardMessageElements.length;a++){this.standardMessageElements[a].style.display="block"}this.renderScheduling()}this.renderPreviewDevice()},renderPreviews:function(){var c=this.state.get("targetedDevices");this.preview.style.display=(c.length?"block":"none");this.preview.children[0].style.display=(c.length>1?"block":"none");var b={ios:c.indexOf("ios")>-1,android:c.indexOf("android")>-1,winphone:c.indexOf("winphone")>-1||c.indexOf("winrt")>-1};var a=this.preview.children[0].children[0];a.innerHTML="";var e=document.createDocumentFragment();for(var d in b){if(b[d]){e.appendChild(UI.tag("input",{type:"radio",name:"preview_switch",id:"preview_"+d,value:d}));e.appendChild(UI.tag("label",{htmlFor:"preview_"+d},UI.createIcon(PushABConsole.Views.PushConsole.Icons[d])))}}a.appendChild(e);if(a.firstChild){a.firstChild.checked=true}this.renderPreviewDevice()},renderPreviewDevice:function(){var b=this.preview.getElementsByClassName("preview_device");var c;for(c=0;c<b.length;c++){b[c].style.display="none"}var a=this.preview.children[0].children[0];for(c=0;c<a.children.length;c++){if(a.children[c].checked){document.getElementById("preview_device_"+a.children[c].value).style.display="inline-block";if(this.state.get("experiment")){document.getElementById("preview_device_"+a.children[c].value+"_b").style.display="inline-block"}this.renderMessagePreview();this.renderTimePreview();return}}},renderMessagePreview:function(){var m=this.preview.getElementsByClassName("preview_device");for(var f=0;f<m.length;f++){var l=m[f].id.match(/_b$/)&&this.state.get("experimentType")==="message"?"2":"";if(this.state.get("format"+l)==="json"){UI.addClass(m[f],"blurred");continue}else{UI.removeClass(m[f],"blurred")}var d=this.state.get("message"+l)||"Your message here";m[f].getElementsByClassName("message")[0].textContent=d}var k=document.getElementById("message_all");var j=document.getElementById("message_a");var e=this.state.get("format")==="json";UI.toggleClass(k,"json",e);UI.toggleClass(j,"json",e);k.placeholder=j.placeholder=e?"{\n  ...\n}":"Your message here";var h=document.getElementById("message_b");var c=this.state.get("format2")==="json";UI.toggleClass(h,"json",c);h.placeholder=c?"{\n  ...\n}":"Your message here"},renderTimePreview:function(){var a=this.preview.getElementsByClassName("preview_device");for(var c=0;c<a.length;c++){var e=a[c].id.match(/_b$/)&&this.state.get("experimentType")==="time"?"2":"";var d=moment(this.state.get("time"+e));a[c].getElementsByClassName("time")[0].textContent=d.format("h:mm");var b=a[c].getElementsByClassName("date");if(b.length){b[0].textContent=d.format("dddd, MMMM D")}}},renderScheduling:function(){this.scheduleElements[0].style.display=((this.state.get("experiment")&&this.state.get("experimentType")==="time")||this.state.get("delivery")==="now")?"none":"block";var a=(this.state.get("delivery")==="time"||(this.state.get("experiment")&&this.state.get("experimentType")==="time"));this.scheduleElements[1].style.display=a?"block":"none";document.getElementById("push_delivery").getElementsByClassName("warning")[0].style.display=a&&this.state.get("doLocalPush")?"block":"none";this.submitButton.firstElementChild.textContent=this.state.get("delivery")==="now"?"Send now":"Submit"},renderExpiration:function(){var a=document.getElementById("expiration_selection");if(this.state.get("expires")){UI.removeClass(a,"last");a.nextElementSibling.style.display="block";if(this.state.get("expireType")==="time"){document.getElementById("expiration_time").parentNode.style.display="block";document.getElementById("expiration_interval").parentNode.style.display="none";if(this.state.get("doLocalPush")){document.getElementById("expiration_time_label").innerHTML="Expiration Time (UTC)"}else{document.getElementById("expiration_time_label").innerHTML="Expiration Time"}}else{document.getElementById("expiration_time").parentNode.style.display="none";document.getElementById("expiration_interval").parentNode.style.display="block";if(this.state.get("doLocalPush")){document.getElementById("expiration_interval_label").innerHTML="Expire After (from UTC send time)"}else{document.getElementById("expiration_interval_label").innerHTML="Expire After"}}}else{UI.addClass(a,"last");a=a.nextElementSibling;while(a){a.style.display="none";a=a.nextElementSibling}}},renderSendToRestMessage:function(){this.sendToRestMessage.style.display=this.state.get("audiencePercent")<100?"block":"none"},renderExperimentCounts:function(){var a=this;var b=this.state.get("audienceSize");if(b===undefined){this.audienceCountMessage.style.display="none";this.audienceCountUnavailable.style.display="block";this.audienceCountInProgress.style.display="none";_.each(this.experimentDevices,function(c){c.style.visibility="hidden"})}else{if(b===null){this.audienceCountMessage.style.display="none";this.audienceCountUnavailable.style.display="none";this.audienceCountInProgress.style.display="block";_.each(this.experimentDeviceCounts,function(c){c.textContent="Calculating"});_.each(this.experimentDevices,function(c){c.style.visibility="visible"})}else{this.audienceCountMessage.style.display="block";this.audienceCountUnavailable.style.display="none";this.audienceCountInProgress.style.display="none";this.testRecipientsCount.textContent=b;_.each(this.experimentDeviceCounts,function(e,c){var d=Math.floor(b/2);if(b%2===1&&c%2===0){d++}e.textContent=d});_.each(this.experimentDevices,function(c){c.style.visibility="visible"})}}_.each(this.experimentPercents,function(c){c.textContent=a.state.get("audiencePercent")/2})},selectAudience:function(){var b=document.getElementById("audience_table").getElementsByClassName("audience_radio");var a=_.find(b,function(c){return c.checked});this.state.set("audienceId",a.getAttribute("audience_id"));document.getElementById("audience_id").value=this.state.get("audienceId");this.renderSavePushAudience()},renderAudienceSizeSuggestionText:function(){var c=null;if(this.state.get("experiment")&&this.state.get("experimentType")==="message"){var a="Based on your campaign size, we recommend that you include all devices in the test audience for better results.";var b=this.state.get("audienceSizeSuggestion");if(b!==null&&b!==undefined&&this.state.get("recipientCount")!==null&&this.state.get("recipientCount")!==undefined){if(b>0){if(this.state.get("recipientCount")>b){if(this.state.get("audienceSize")<b){c="To achieve statistically significant results, we recommend that you include at least "+b+" devices in the test audience."}}else{if(this.state.get("audiencePercent")<100){c=a}}}else{if(this.state.get("recipientCount")<5000&&this.state.get("audiencePercent")<100){c=a}}}}if(c===null){this.audienceSizeSuggestion.style.display="none"}else{this.audienceSizeSuggestion.getElementsByTagName("p")[0].textContent=c;this.audienceSizeSuggestion.style.display="block"}},updateSavePushAudience:function(a){this.state.set("savePushAudience",a.target.value==="true");this.renderSavePushAudience()},renderSavePushAudience:function(){var a=this.state.get("audienceId")==="new_segment";$("#audience_selector").toggle(!a);$(".segment_builder,#save_push_audience").toggle(a);var b=this.state.get("savePushAudience")&&a;$("#push_audience_name_section").toggle(b);UI.toggleClass(document.getElementById("save_push_audience"),"last",!this.state.get("savePushAudience"))},},{Icons:{ios:"apple",android:"android",winphone:"windows"}});PushABConsole.Views.PushDetails=Backbone.View.extend({events:{"change #push_time":"updateDeliveryTime","change #expiration_selection":"updateExpires","change #expiration_type":"updateExpires","change #local_delivery":"updateLocalDelivery","change #group_selection":"enableSend","click #send_push":"submit",},initialize:function(c){_.bindAll(this);this.humanize();var d=new moment.unix(this.options.fromDate).toDate();var b=new moment.unix(this.options.toDate).toDate();if(d<moment()&&!Trait.isIE){var f=new Analytics.GraphState({app:c.app,analyticsStatus:c.analyticsStatus,stride:"hour"});new Analytics.Graph({model:f});f.set("fromDate",d);f.set("toDate",b);var e=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:experimentInfo.group_A.mongo_push_status_id});f.addSelectedSeries(e);e.set("color","#fca252");var a=new Analytics.Series({displayName:"Push Opens",endpoint:"app_opened_from_push_with_id",stride:"hour",pushStatusID:experimentInfo.group_B.mongo_push_status_id,});a.set("seriesId","second_series");f.addSelectedSeries(a);a.set("color","#fc527b")}else{document.getElementsByClassName("graph_wrapper")[0].style.display="none"}if(!document.getElementById("launch_form")){return}this.model.on("change:delivery",this.renderScheduling);this.model.on("change:doLocalPush",this.renderScheduling);this.model.on("change:expires change:expireType change:doLocalPush",this.renderExpiration);this.scheduleElements=document.getElementsByClassName("scheduled_delivery");this.submitButton=document.getElementById("send_push");this.renderDates()},humanize:function(){var c=document.getElementsByClassName("time");for(var b=0;b<c.length;b++){var a=moment(c[b].innerHTML);var d=document.createDocumentFragment();if(UI.hasClass(c[b],"breakdown_variable")){d.appendChild(document.createTextNode(a.format("MMMM Do")));d.appendChild(document.createElement("br"));d.appendChild(document.createTextNode(a.format("h:mmA")))}else{d.appendChild(document.createTextNode(a.format("MMMM Do \\at h:mmA")))}c[b].innerHTML="";c[b].appendChild(d)}},renderDates:function(){var j=document.getElementById("delivery_time");var l=new Date();l.setMinutes(l.getMinutes()+10);new UI.Datepicker({name:"push_date",parent:j,hideOnChange:true,preventPast:true,value:l});this.generateTimeSelectors(j,"push",{hour:l.getHours()%12,minute:l.getMinutes(),ampm:l.getHours()>12?"PM":"AM"});var a=document.getElementById("push_delivery").getElementsByClassName("parameter_block");var k=Util.timezone_acronym();var d=new Date().getTimezoneOffset();var f=Math.abs(d)%60;var m=(d>0?"-":"+")+(Math.abs(d)<600?"0":"")+(Math.abs(d/60)|0)+":"+(f<10?"0":"")+f;document.getElementById("push_time_zone_user").value=m;document.getElementById("push_time_zone_user").nextElementSibling.setAttribute("data-text",k);var b=new Date();b.setDate(b.getDate()+1);var c=document.getElementById("expiration_time");new UI.Datepicker({name:"expiration_date",parent:c,hideOnChange:true,preventPast:true,value:b});this.generateTimeSelectors(c,"expiration",{hour:b.getHours()%12,ampm:b.getHours()>12?"PM":"AM"});var h=[];for(var e=1;e<=30;e++){h.push(UI.tag("option",{value:e},e))}var n=document.getElementById("expiration_interval");n.appendChild(UI.tag("select",{name:"expiration_interval_num",value:24},h));n.appendChild(UI.tag("select",{name:"expiration_interval_unit"},[UI.tag("option",{value:"hours"},"Hours"),UI.tag("option",{value:"days"},"Days")]))},generateTimeSelectors:function(h,a,b){b=b||{};var d;var f=[];for(d=1;d<=12;d++){f.push(UI.tag("option",{value:d},d))}var e=UI.tag("select",{name:a+"_hour"},f);if(typeof b.hour!=="undefined"){e.value=b.hour}var c=[];for(d=0;d<=59;d++){c.push(UI.tag("option",{value:d},":"+(d<10?"0":"")+d))}var j=UI.tag("select",{name:a+"_minute"},c);if(typeof b.minute!=="undefined"){j.value=b.minute}var l=UI.tag("select",{name:a+"_ampm"},[UI.tag("option",{value:"AM"},"AM"),UI.tag("option",{value:"PM",selected:true},"PM")]);if(typeof b.ampm!=="undefined"){l.value=b.ampm}var k=document.createDocumentFragment();k.appendChild(e);k.appendChild(j);k.appendChild(l);h.appendChild(k)},updateDeliveryTime:function(a){this.model.set("delivery",a.target.value)},updateExpires:function(a){this.model.set("expires",document.getElementById("push_expires_true").checked);this.model.set("expireType",document.getElementById("push_expire_specific").checked?"time":"interval")},updateLocalDelivery:function(a){this.model.set("doLocalPush",a.target.value==="local")},renderScheduling:function(){for(var a=0;a<this.scheduleElements.length;a++){this.scheduleElements[a].style.display=this.model.get("delivery")==="now"?"none":"block";document.getElementsByClassName("warning")[0].style.display="none"}if(this.model.get("delivery")==="time"){document.getElementsByClassName("warning")[0].style.display=this.model.get("doLocalPush")?"block":"none"}this.submitButton.firstElementChild.textContent=this.model.get("delivery")==="now"?"Send now":"Submit"},renderExpiration:function(){var a=document.getElementById("expiration_selection");if(this.model.get("expires")){UI.removeClass(a,"last");a.nextElementSibling.style.display="block";if(this.model.get("expireType")==="time"){document.getElementById("expiration_time").parentNode.style.display="block";document.getElementById("expiration_interval").parentNode.style.display="none";if(this.model.get("doLocalPush")){document.getElementById("expiration_time_label").innerHTML="Expiration Time (UTC)"}else{document.getElementById("expiration_time_label").innerHTML="Expiration Time"}}else{document.getElementById("expiration_time").parentNode.style.display="none";document.getElementById("expiration_interval").parentNode.style.display="block";if(this.model.get("doLocalPush")){document.getElementById("expiration_interval_label").innerHTML="Expire After (from UTC send time)"}else{document.getElementById("expiration_interval_label").innerHTML="Expire After"}}}else{UI.addClass(a,"last");a=a.nextElementSibling;while(a){a.style.display="none";a=a.nextElementSibling}}},enableSend:function(){UI.removeClass(this.submitButton,"disabled")},submit:function(){if(UI.hasClass(this.submitButton,"disabled")){return}document.getElementById("launch_form").submit()}});PushConsole.Views.MessageTranslator=Backbone.View.extend({events:{"click .add_language_button":"addLanguage","click .remove_language":"removeLanguage","input .translated_push_message textarea":"updateMessage","change .translated_push_locale select":"updateLocale",},initialize:function(){_.bindAll(this);this.state=this.options.state;this.state.on("change:localeOptions change:translationCounts",this.render);this.state.loadLocaleOptions()},updateMessage:function(c){var b=parseInt(c.target.id);var a=this.state.get("translations");if(0<=b&&b<a.length){a[b].data=c.target.value;this.state.set("translations",a);this.state.trigger("change:translations")}},updateLocale:function(f){var d=parseInt(f.target.id);var b=parseInt(f.target.value);var a=this.state.get("translations");var c=this.state.get("localeOptions");var h=a[d].locale;a[d].locale=c[b];c[b]=h;this.state.set("translations",a);this.state.set("localeOptions",c);this.render();this.state.updateTranslationCounts()},addLanguage:function(d){d.preventDefault();var c=this.state.get("localeOptions");if(c===null||c.length===0){return}var a=c[0];c.splice(0,1);this.state.set("localeOptions",c);var b=this.state.get("translations");b.push({locale:a,data:"",});this.state.set("translations",b);this.state.trigger("change:translations");this.state.updateTranslationCounts();this.render()},removeLanguage:function(d){d.preventDefault();var b=parseInt(d.target.id);var a=this.state.get("translations");if(!(0<=b&&b<a.length)){return}var c=this.state.get("localeOptions");c.push(a[b].locale);this.state.set("localeOptions",c);a.splice(b,1);this.state.set("translations",a);this.state.trigger("change:translations");this.render()},render:function(){this.$el.html(JST["push_notifications/_message_translator"]({translations:this.state.get("translations"),translationCounts:this.state.get("translationCounts"),options:this.state.get("localeOptions"),}));return this},});PushConsole.Views.SegmentationSelector=Backbone.View.extend({initialize:function(){_.bindAll(this);this.state=this.options.state;this.state.on("change:recipientCount",this.renderCounts);this.renderCounts()},renderCounts:function(){var a=document.getElementById("recipients_counter");if(this.state.get("recipientCount")===undefined){a.innerHTML="Could not count recipients (but you can still push!)"}else{if(this.state.get("recipientCount")===null){a.innerHTML="Calculating recipients"}else{if(this.state.get("isApproximate")){if(this.state.get("recipientCount")===0){a.innerHTML="This will be sent to <strong>less than 1000 devices</strong>"}else{a.innerHTML="This will be sent to approximately <strong>"+this.state.get("recipientCount")+" devices</strong>"}}else{a.innerHTML="This will be sent to <strong>"+this.state.get("recipientCount")+" devices</strong>"}}}},});PushConsole.Views.QueryBuilder=Backbone.View.extend({events:{"click .add_constraint_button":"createConstraint",},initialize:function(){_.bindAll(this);this.state=this.options.state;this.channelConfig=this.options.channelConfig;this.constraints=this.state.get("constraints");this.constraints.on("add",this.addConstraint);this.constraints.on("remove",this.removeConstraint);this.constraints.on("add remove change:error",this.renderErrors);if(this.state.get("schema")){this.state.get("schema").fetch()}},render:function(){var b=this.state.get("targetedDevices").length>0;this.$el.html(JST["layouts/query_builder/_query_builder"]({display:b,}));this.table=this.$("table.query_builder");var a=this;this.constraints.each(function(c){a.addConstraint(c)});return this},createConstraint:function(a){this.constraints.add({});return this},addConstraint:function(c){var b=this;var a=new PushConsole.Views.Constraint({appId:this.state.get("app").id,schema:this.state.get("schema"),constraint:c,constraints:this.constraints,excludedFields:["objectId","deviceToken","deviceType","installationId"],defaultField:"channels",channelConfig:this.channelConfig});this.table.append(a.el);a.render();return this},removeConstraint:function(b,d,a){var c=a.index+1;this.$("tr:nth-child("+c+")").remove()},renderErrors:function(){var a=this.state.getErrors();if(!_.isEmpty(a)){this.$(".errors").empty().show();_.each(a,function(b){this.$(".errors").append($("<div>").text(b))})}else{this.$(".errors").hide()}}});(function(c,b){if(!c){return}var a=App.Views.SlowQueries=function(d){this.platform=d.platform;this.language=d.language;this.classes=d.classes;this.appVersions=d.appVersions;this.render();this.handleStateChange()};a.prototype={tooltipHeader:function(f,e){var d=c.createTooltip(e,{direction:"left"});return{className:"has_tooltip",content:c.tag("div",{},[d,f,c.createIcon("questionMark")]),}},renderTable:function(e){for(var d=0;d<e.length;d++){if(parseFloat(e[d][3])>=25){e[d][1]=this.renderNormQuery(e[d][1],"slow_query_high_percentage");e[d]=this.renderHighPercentage(e[d])}else{e[d][1]=this.renderNormQuery(e[d][1],"slow_query_clause_key")}}$("#slow_query_main").empty();var f=["Class",this.tooltipHeader("Normalized Query ","A common representation of the queries with the values removed"),"Count",this.tooltipHeader("Slow% ","The percentage of queries that took longer than 1 second. Row will be colored in red if Slow% is higher than 25%"),"Timeouts",this.tooltipHeader("Scanned (Avg)","Number of documents scanned to complete this query. Larger numbers require more time and resources to complete."),"Median (ms)",this.tooltipHeader("P90 (ms) ","90% of queries returned before this time"),];new c.DataTable({parent:document.getElementById("slow_query_main"),rows:e,header:f,sortable:true,})},renderHighPercentage:function(e){for(var d=0;d<e.length;d++){if(d==1){continue}e[d]=c.tag("div",{className:"slow_query_high_percentage"},e[d])}return e},addStyling:function(n){if(!b.isString(n)){return n}var o=[];var f=0;var l=false;var m={};var e={className:"slow_query_norm_plain"};var d={className:"slow_query_norm_expr"};var k;for(var h=0,j=n.length;h<j;h++){if(n[h]==="$"){l=true;k=n.substring(f,h).replace(/\?/g,"...");m=c.tag("div",e,k);o.push(m);f=h}else{if(l&&n[h]===":"){l=false;k=n.substring(f,h).replace(/\?/g,"...");m=c.tag("div",d,k);o.push(m);f=h}}}if(f<n.length){k=n.substring(f,h).replace(/\?/g,"...");m=c.tag("div",e,k);o.push(m)}return o},queryValStringify:function(d){if(b.isString(d)){return d.replace(/"/g,"").replace(/\?/g,"...")}if(b.isObject(d)){return this.addStyling(JSON.stringify(d,null,2).replace(/"/g,""))}return d},renderNormQuery:function(k,j){var l=JSON.parse(k);var e=l.where;l.where=JSON.parse(e);keys=b.keys(l);keys.sort();keys.reverse();var d=[];for(var h in keys){var f=keys[h];d.push(c.tag("div",{className:j},f));d.push(c.tag("div",{className:"slow_query_clause_colon"},":"));d.push(c.tag("div",{className:"slow_query_clause_value"},this.queryValStringify(l[f])))}return c.tag("div",{className:"slow_query_clause_parent"},d)},render:function(){var d=new Date();d.setHours(0);d.setMinutes(0);d.setSeconds(0);this.dateRange=new c.Daterange({compactOnChange:true,parent:document.getElementById("slow_query_date_picker"),onChange:this.handleStateChange.bind(this),value:{from:d,to:d,},preventFuture:true,});var f={};for(var e=0;e<this.classes.length;e++){f[this.classes[e]]=this.classes[e]}this.classesDropDown=new c.Dropdown({values:f,name:"dropdown_class",defaultOption:"Class",parent:document.getElementById("slow_query_class_picker"),onChange:this.handleStateChange.bind(this),});var h=b.keys(this.appVersions);var j=b.object(h,h);this.osDropDown=new c.Dropdown({values:j,name:"dropdown_os",defaultOption:"OS",parent:document.getElementById("slow_query_os_picker"),onChange:this.handleOSChange.bind(this),});this.renderVersionDropDown([])},renderVersionDropDown:function(d){var e=document.getElementById("slow_query_app_ver_picker");while(e.firstChild){e.removeChild(e.firstChild)}$("#slow_query_app_ver_picker").empty();this.versionDropDown=new c.Dropdown({values:d,name:"dropdown_version",defaultOption:"Version",parent:e,onChange:this.handleStateChange.bind(this),})},handleOSChange:function(d){this.handleStateChange("triggered-by-os")},reqUrl:function(){return App.currentApp.dataRequestUrl()+"slow_queries"},handleStateChange:function(o){var q=this;var m=new Date(this.dateRange.value.from.getTime());var n=new Date(this.dateRange.value.to.getTime());n.setHours(23);n.setMinutes(59);n.setSeconds(0);var l=m.getTime()/1000;var j=n.getTime()/1000;var f=this.classesDropDown.value;var d=this.osDropDown.value;if(o==="triggered-by-os"){var e=this.appVersions[d];var k=b.object(e,e);this.renderVersionDropDown(k)}var h=this.versionDropDown.value;var p={className:f,os:d,version:h,from:l,to:j,};$.get(this.reqUrl(),p).then(function(r){q.renderTable(r.result)})},};b.extend(a.prototype,c.ComponentProto)})(UI,_);App.Views.About=Backbone.View.extend({initialize:function(){this.imageState={};this.$wrap=$(".wrap");this.$cards=$([]);this.render();if(!Util.is_chrome){$(".artwork").addClass("no_animation");$(".intro").addClass("no_gradient")}$(window).bind("load",function(){$(".artwork").addClass("launch").show()});var a=_.throttle(this.updateCards.bind(this),100);this.$wrap.scroll(a);$(window).resize(a)},imageLoaded:function(b,a){if(b[a]){b[a]--}if(!b[a]){this.className+=" loaded"}},updateCards:function(){var c=this.$wrap.outerWidth();var b=c/2;var a=this.$wrap.scrollLeft()+b;this.$cards.each(function(d){var j=this.offsetLeft+$(this).outerWidth()/2;var h=Math.abs(j-a);var e=Math.max(1-(Math.max(h-400,0)/b),0);var f=1-(1-e)/8;if(h-300>b){$(this).css("visibility","hidden")}else{$(this).css({visibility:"visible",opacity:e,transform:"scale("+f+")"})}})},render:function(){var a=this;var c=new ParseDotCom.Query("TeamMember");var d={};c.find().then(function(f){var e=_.shuffle(f);var j=$(".team_icons")[0];var h=document.createDocumentFragment();_(e).each(function(o){var k=o.get("name");var n=document.createElement("img");n.setAttribute("src",o.get("photo_full").url().replace(/http:\/\//,"https://s3.amazonaws.com/"));var m=document.createElement("img");m.setAttribute("src",o.get("photo_alt").url().replace(/http:\/\//,"https://s3.amazonaws.com/"));var l=document.createElement("div");l.className="team_member";l.setAttribute("data-name",k);a.imageState[k]=2;n.onload=a.imageLoaded.bind(l,a.imageState,k);m.onload=a.imageLoaded.bind(l,a.imageState,k);d[k]={img:o.get("photo_full").url().replace(/http:\/\//,"https://s3.amazonaws.com/"),handle:o.get("twitter_handle"),bio:(o.get("bio")||"").replace(/\n/g,"<br /><br />")};l.appendChild(n);l.appendChild(m);h.appendChild(l)});j.appendChild(h);$(j).on("click",".team_member",function(){var l=this.getAttribute("data-name");var m=d[l];var k=$(".team_info");k.find("img").attr("src",m.img);k.find("h3").text(l);if(m.handle){k.find(".card_left a").attr("href","https://twitter.com/"+m.handle).text("@"+m.handle)}else{k.find(".card_left a").attr("href","").text("")}k.find(".card_right").html(m.bio);k.addClass("expanded");return false});$(".team").click(function(l){var k=$(l.target);if(!k.closest(".card_left").length&&!k.closest(".card_right").length){$(".team_info").removeClass("expanded")}})},function(){$(".team").hide()});var b=new ParseDotCom.Query("Career");b.ascending("order").find().then(function(f){var e=document.createDocumentFragment();_(f).each(function(n){var h=document.createElement("div");h.className="card";var j=document.createElement("img");if(n.get("icon")){j.setAttribute("src",n.get("icon").url().replace(/http:\/\//,"https://s3.amazonaws.com/"))}else{j.setAttribute("style","visibility: hidden;")}var m=document.createElement("h3");m.appendChild(document.createTextNode(n.get("title")));var l=document.createElement("p");l.appendChild(document.createTextNode(n.get("text")));var k=document.createElement("a");k.appendChild(document.createTextNode("Apply for this position"));k.href=n.get("link");k.className="apply_button";h.appendChild(j);h.appendChild(m);h.appendChild(l);h.appendChild(k);e.appendChild(h)});$(".careers .wrap")[0].appendChild(e);a.$cards=$(".wrap .card");a.updateCards()},function(){$(".careers").hide()})}});App.Views.AccountInfoForm=Backbone.View.extend({events:{"change select":"toggleFields","change input":"checkIfFixed","submit form":"updateUser"},initialize:function(){this.render()},render:function(){var a=this;setTimeout(function(){a.$(".mini_window").show().addClass("animation")},500);setTimeout(function(){a.$(".mini_window").removeClass("animation")},2000)},getFormData:function(){var a={user:{}};if($("#user_name").length){a.user.name=this.$("#user_name").val()}a.user.company_type=this.$("#company_type").val();a.user.company_name=this.$("#user_company_name").val();a.user.title=this.$("#user_title").val();if($("#parse_app_name").length){a.parse_app={};a.parse_app.name=this.$("#parse_app_name").val()}return a},validateFields:function(){var b=this.getFormData();var a=true;if(b.user.name!==undefined){a=a&&b.user.name.length}if(b.parse_app){a=a&&b.parse_app.name.length}if(b.user.company_type!=="individual"){a=a&&b.user.company_name&&b.user.title&&b.user.company_name.length&&b.user.title.length}return !!(a)},toggleFields:function(){var a=this.$("#company_type").val();if(a.length){this.$("#company_type").removeClass("invalid")}this.$("#user_company_name").toggle(a!=="individual");this.$("#user_title").toggle(a!=="individual")},checkIfFixed:function(a){if(a.target.value.length){$(a.target).removeClass("invalid")}},updateUser:function(){var a=this;if(!this.validateFields()){$("input, select").each(function(){if(this.value.length){$(this).removeClass("invalid")}else{$(this).addClass("invalid")}});this.$(".errors").text("Please respond to all fields").show();this.$("button").removeAttr("disabled").removeClass("disabled");return false}this.$("button").html('<div class="spinner"></div>');this.$(".spinner").spin("large","#717171").show();$.ajax("/account",{dataType:"json",type:"PUT",data:this.getFormData()}).done(function(){window.location="/apps/quickstart?onboard="}).fail(function(){a.$(".spinner").hide();a.$("button").removeAttr("disabled").removeClass("disabled").text("Start using Parse")});return false}});App.Views.Accounts.Notifications=Backbone.View.extend({events:{"click .switch":"submitSwitch"},initialize:function(){_.bindAll(this);this.rpc=new App.Views.RPC()},submitSwitch:function(j){var a=$(j.target);var b=a.parent().children("input[type=hidden]");a.toggleClass("off");a.toggleClass("on");var h=!a.hasClass("off");b.attr("value",h);var d=a.parents("form:first");var c=d.length>0?d.attr("action"):App.currentApp.dataRequestUrl();var k=b.attr("name");var f={};f[k]=b.val();this.rpc.call({view:a.closest(".line"),url:c,method:"post",params:f,success:function(){if(f.gk){location.reload()}}})}});App.Views.Accounts.Statement=Backbone.View.extend({events:{"click .app_item > .expandable":"toggleApp",},toggleApp:function(a){$(a.currentTarget).parent().find("ul.invoice_items").toggle()}});App.Views.Admin.HomeCMS=Backbone.View.extend({events:{"change .card_selectors select":"updateCard","change #card_type":"updateEditorType","change #card_selector":"setFormContent","click #card_submit":"saveForm"},initialize:function(){_.bindAll(this);this.datepicker=new App.Views.Datepicker({el:document.getElementById("card_date"),name:"card_date",hideOnChange:true});var b=ParseDotCom.Object.extend("ContentCard");var a=new ParseDotCom.Query(b);var c=this;a.find().then(function(k){c.cards={};var h=[];var e=[];_.each(k,function(q,n){c.cards[q.id]=q;for(var m=0;m<3;m++){if(q.get("location")==="home_"+m){e[m]=n}}var p='<option value="'+q.id+'">'+q.get("title")+"</option>";h.push(p)});var d=h.join("");var l=[];for(var f=0;f<3;f++){$("#home_"+f).append(d).find("option").eq(e[f]).attr("selected","");l[f]=k[e[f]]}$("#card_selector").append(d);$(".content_cards").append(App.Views.Home.Main.CardMarkup[l[0].get("type")](l[0])).append(App.Views.Home.Main.CardMarkup[l[1].get("type")](l[1])).append(App.Views.Home.Main.CardMarkup[l[2].get("type")](l[2])).show()});this.updateEditorType({target:{value:0}})},updateCard:function(f){var m=this.cards[f.target.value];if(!m){return}var b=f.target.id.match(/\d+/);var a;if(!m.get("location")){for(a in this.cards){if(this.cards[a].get("location")===f.target.id){this.cards[a].set("location","");this.cards[a].save()}}m.set("location",f.target.id);m.save();$(".content_cards a").eq(parseInt(b[0],10)).replaceWith(App.Views.Home.Main.CardMarkup[m.get("type")](m));return}var d=$("#"+m.get("location"));if(d.length){var l=m.get("location");for(a in this.cards){if(this.cards[a].get("location")===f.target.id){m.set("location",f.target.id);this.cards[a].set("location",l);$("#"+l).val(a);this.cards[a].save();m.save();$(".content_cards a").eq(parseInt(b[0],10)).replaceWith(App.Views.Home.Main.CardMarkup[m.get("type")](m));var j=l.match(/\d+/);if(j){$(".content_cards a").eq(parseInt(j[0],10)).replaceWith(App.Views.Home.Main.CardMarkup[this.cards[a].get("type")](this.cards[a]))}return}}}},updateEditorType:function(a){$(".type0, .type1").hide();$(".type"+a.target.value).show()},setFormContent:function(b){var c=b.target.value;var a=this.cards[c];if(!(c&&a)){$("#card_id").val("");$("#card_title").val("");$("#card_link").val("");$("#card_image").val("");return}$("#card_id").val(c);$("#card_title").val(a.get("title"));$("#card_link").val(a.get("link"));$("#card_type").val(a.get("type"));$("#card_image").val("");$("#card_title").val(a.get("title"));switch(a.get("type")){case 0:if(a.get("image")){$("#card_image_link").href(a.get("image").url()).text(a.get("image").url())}break;case 1:this.datepicker.model.set("value",a.get("date"));break}this.updateEditorType({target:{value:a.get("type")}})},saveForm:function(){var c;if($("#card_id").val()){c=this.cards[$("#card_id").val()]}if(!c){var a=ParseDotCom.Object.extend("ContentCard");c=new a()}c.set("title",$("#card_title").val());c.set("link",$("#card_link").val());var e=parseInt($("#card_type").val(),10);c.set("type",e);switch(e){case 0:var d=document.getElementById("card_image").files[0];if(d){c.set("image",new ParseDotCom.File(d.name,d))}break;case 1:c.set("date",this.datepicker.model.get("value"));break}var b=this;c.save().then(function(h){$(".row.error").hide();if(b.cards[h.id]){$(".card_selectors select option[value="+h.id+"]").text(h.get("title"));$("#card_selector option[value="+h.id+"]").text(h.get("title"));if(h.get("location")){var f=h.get("location").match(/\d+/);if(f){$(".content_cards a").eq(parseInt(f[0],10)).replaceWith(App.Views.Home.Main.CardMarkup[h.get("type")](h))}}}else{b.cards[h.id]=h;var j='<option value="'+h.id+'">'+h.get("title")+"</option>";$(".card_selectors select").append(j);$("#card_selector").append(j);$("#card_selector").val(h.id)}},function(f){$(".row.error").show()});return false}});App.Views.Admin.SupportOperationsCenterChart=Backbone.View.extend({initialize:function(){var a=this;this.el=this.options.el;_.bindAll(this,"updateTimestamp","reload");this.counter=300;this.chart=new Highcharts.Chart(this.options.highchartOptions);setTimeout(this.updateTimestamp,1000);setTimeout(this.reload,this.counter*1000)},updateTimestamp:function(){var a="second";if(this.counter!=1){a="seconds"}$("#timestamp").text("Refresh in "+this.counter+" "+a+".");this.counter--;setTimeout(this.updateTimestamp,1000)},reload:function(){window.location.reload(true)}});App.Views.Admin.VerticalHistogram=Backbone.View.extend({initialize:function(){this.el=this.options.el;this.width=this.options.width;this.height=this.options.height;this.labels=this.options.labels;this.values=this.options.values;this.max_value=this.options.max_value;this.render()},render:function(){var c=this;var d=150;var f=d3.scale.ordinal().domain(c.labels).rangeBands([0,c.height]);var e=d3.scale.linear().domain([0,c.max_value]).range([0,c.width-d]);var b=d3.select(c.el[0]).append("svg").attr("width",c.width).attr("height",c.height).style("padding-top","50px").style("padding-bottom","50px").style("padding-left","50px").style("padding-right","50px");var a=b.append("g").attr("transform","translate("+d+",0)");var h=b.append("g").attr("transform","translate(0,0)");h.selectAll("text#labels").data(c.labels).enter().append("text").attr("id","labels").attr("transform",function(k,j){return"translate("+(d-10)+","+(f(j)+f.rangeBand()/2)+")"}).attr("text-anchor","end").text(String);a.selectAll("line#rule").data(e.ticks(10)).enter().append("line").attr("id","rule").attr("x1",e).attr("x2",e).attr("y1",0).attr("y2",c.height).style("stroke","#ccc");a.selectAll("text#rule_text").data(e.ticks(10)).enter().append("text").attr("id","rule_text").attr("transform",function(j){return"translate("+e(j)+", 0)"}).attr("text-anchor","middle").text(String);a.selectAll("rect#bars").data(c.values).enter().append("rect").attr("id","bars").attr("fill","steelblue").attr("stroke","white").attr("x",0).attr("y",function(k,j){return f(j)+f.rangeBand()/4}).attr("height",f.rangeBand()/2).attr("width",e)}});Analytics.ContentView=Backbone.View.extend({ignore:function(){return this.model.get("selectedNavigation")!==this.type},cleanup:function(){},update:function(){if(this.ignore()){this.$el.hide();return}this.fetchData()},render:function(){if(this.ignore()){this.$el.hide();this.cleanup();return this}var a=false;if(this.renderOverride){a=this.renderOverride()}if(a){return this}this.$el.empty();this.$el.html(JST["apps/analytics/_content_"+this.type](this.content));this.$el.show();return this}});Analytics.ContentAudience=Analytics.ContentView.extend({initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.update);this.model.on("change:toDate",this.update);this.type="audience";this.resetContent();this.xhrs={};if(!this.ignore()){this.fetchData()}},resetContent:function(){var b=this;var a=this.model.get("toDate");this.content={date:a,stats:{}};_.each(Analytics.ContentAudience.Types,function(c){b.content.stats["total_"+c]=0});_.extend(this.content,Analytics.ContentAudience.ViewHelpers);_.extend(this.content,Analytics.ViewHelpers)},cleanup:function(){var a=this;_.each(this.xhrs,function(d,b,c){a.xhrs[b].abort();delete a.xhrs[b]});this.resetContent()},buildAudienceStatBox:function(b,d){var c=(d[0]-d[1])/d[1];var a=(d[1]-d[2])/d[2];return{current:{stat:d[0],date:b,delta:c},previous:{stat:d[1],date:moment(b).subtract("weeks",1),delta:a},last:{stat:d[2],date:moment(b).subtract("weeks",2)}}},fetchData:function(){var a=this;this.cleanup();this.$el.empty();this.content.date=this.model.get("toDate");var c=Math.round(this.content.date.getTime()/1000);var b=this.model.get("baseUrl")+"analytics_content_audience";_.each(Analytics.ContentAudience.Types,function(e){var f="total_"+e.toLowerCase();var d=$.get(b,{at:c,audienceType:f},function(h){delete a.xhrs[f];if(!h.total){return}a.content.date=h.date;a.content.stats["total_"+e]=h.total;a.render();_.each(Analytics.ContentAudience.Frequencies,function(k){var j=k.toLowerCase()+"_"+e.toLowerCase();var l=$.get(b,{at:c,audienceType:j},function(m){delete a.xhrs[j];if(!m.content){return}a.content.stats[k+"_"+e]=a.buildAudienceStatBox(m.date,m.content);a.render()});a.xhrs[j]=l})});a.xhrs[f]=d})},},{Types:["Users","Installations"],Frequencies:["Daily","Weekly","Monthly"],ViewHelpers:{formatDate:function(a){return moment(a).format("MMMM D, YYYY")},deltaStr:function(a){if(a===Infinity){return"∞ %"}else{if(a===-Infinity){return"-∞ %"}else{if(isNaN(a)){return"0%"}else{if(a>=10000000){return(a/10000000).toPrecision(3)+"B%"}else{if(a>=10000){return(a/10000).toPrecision(3)+"M%"}else{if(a>=10){return(a/10).toPrecision(3)+"K%"}}}}}}return(a*100).toFixed(2)+"%"},deltaClass:function(a){if(a<0){return"decline"}else{if(a>0){return"growth"}}return""}}});Analytics.ContentEvents=Analytics.ContentView.extend({initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.update);this.model.get("selectedSeries").on("change:data reset remove",this.update);this.type="events";this.resetContent()},resetContent:function(){this.content={dataBySeries:[]}},fetchData:function(){var a=0;var b=[];this.model.get("selectedSeries").each(function(e,c,f){if(e.has("data")){var d=_.reduce(e.get("data"),function(h,j){return h+j[1]},0);a+=d;b.push({model:e,aggr:d})}});if(b.length===0){this.$el.hide();return}this.content.dataBySeries=b;this.render()}});Analytics.ContentPerformance=Analytics.ContentView.extend({initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.update);this.type="performance";this.resetContent();if(!this.ignore()){this.fetchData()}},resetContent:function(){var a=this;this.content={stats:{}};_.extend(this.content,Analytics.ContentPerformance.ViewHelpers);_.extend(this.content,Analytics.ViewHelpers)},fetchData:function(){var a=this;_.each(Analytics.ContentPerformance.Types,function(c){var b=a.model.get("baseUrl")+"billing_"+c;$.get(b,{},function(d){a.content.stats[c]=d;a.render()})})},render:function(){Analytics.ContentView.prototype.render.apply(this);var a=this;_.each(a.content.stats,function(d,c){var b=$("#billing_graph_"+c+" .donut");var e=d.total/d.limit*360;a.initDonut(b,e)})},initDonut:function(a,b){if(b>360){b=360}if(b>180){a.addClass("over_180").find(".donut_mask").css("transform","rotateZ(180deg)");a.find(".donut_mask_second").css("transform","rotateZ("+(b-180)+"deg)")}else{a.find(".donut_mask").css("transform","rotateZ("+b+"deg)")}},},{Types:["file_storage","database_storage","data_transfer"],ViewHelpers:{formatPercent:function(b,a){return Analytics.ContentPerformance.ViewHelpers.humanizeFloat(b/a*100)+"%"},humanizeFloat:function(b,a){if(b<10){b=Math.round(b*100)/100}else{if(b<100){b=Math.round(b*10)/10}else{b=Math.round(b)}}return Analytics.ViewHelpers.humanize(b,3)},formatType:function(a){switch(a){case"file_storage":return"File Storage";case"database_storage":return"Database Storage";case"data_transfer":return"Data Transfer";default:return""}},formatTotal:function(b,c,a){switch(b){case"file_storage":return Analytics.ContentPerformance.ViewHelpers.humanizeFloat(c)+"/"+Analytics.ContentPerformance.ViewHelpers.humanizeFloat(a)+"GB";case"database_storage":return Analytics.ContentPerformance.ViewHelpers.humanizeFloat(c)+"/"+Analytics.ContentPerformance.ViewHelpers.humanizeFloat(a)+"GB";case"data_transfer":return Analytics.ContentPerformance.ViewHelpers.humanizeFloat(c)+"/"+Analytics.ContentPerformance.ViewHelpers.humanizeFloat(a)+"TB";default:return""}}},});Analytics.ContentRetention=Analytics.ContentView.extend({initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.update);this.type="retention";this.fetching=false;this.datePicker=new UI.Datepicker({name:"retention_date_picker",onChange:this.dateChanged,hideOnChange:true,preventFuture:this.preventFuture});if(!this.ignore()){this.fetchData()}},fetchData:function(b){this.render();var a=this.$el.find("#retention_date_picker")[0];if(a){this.datePicker.attach(a)}this.fetching=true;$.get(this.model.get("baseUrl")+"analytics_retention",{at:moment(this.datePicker.value).endOf("day").toDate().getTime()/1000},function(j){if(this.ignore()){return}this.content=j.content;if(!this.content){this.renderOverride();return}_.extend(this.content,Analytics.ContentRetention.ViewHelpers);var c=new Date(this.content.days_old_1.time);var f=new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),0,0,0,0);this.datePicker.value=f;this.fetching=false;var e=$(JST["apps/analytics/_content_retention"](this.content));if(b){var h=this.$el.find("table");var d=e.find("table");d.hide();h.after(d);d.fadeIn(400,function(){h.fadeOut(h.remove.bind(h))})}else{this.$el.empty();this.datePicker.attach(e.find("#retention_date_picker")[0]);e.hide();this.$el.html(e);e.fadeIn(400)}return this}.bind(this))},dateChanged:function(){if(!this.fetching){this.fetchData(true)}},renderOverride:function(){if(typeof this.content==="undefined"){this.$el.show();var a=new Spinner({lines:16,length:20,width:8,radius:30,color:"#dee0e4"}).spin(this.$el[0]);return true}else{if(!this.content){this.$el.empty();this.$el.html(JST["apps/analytics/_content_retention_no_data"]);this.$el.show();return true}}return false}},{ViewHelpers:{formatDate:function(a){return moment.utc(a).format("MMMM D")},formatActivityDate:function(a,b){return moment.utc(a).add("days",b).format("MMMM D")},ratio:function(a){if(typeof(a)!=="object"||a.active===undefined||!a.total){return -1}return a.active/a.total},insignificant:function(d){var c=this.ratio(d);var b=Math.round(c*100)/100;var a=this.RetentionSignificance[b];if(a){return d.total<a}},percentify:function(b){var a=this.ratio(b);if(a<0){return""}return(a*100).toFixed(1)+"%"},style:function(f){var l=this.ratio(f);if(l<0){return""}var d;if(l<0.1){d="b8d4fc"}else{if(l<0.2){d="a7cafc"}else{if(l<0.3){d="96c0fc"}else{if(l<0.4){d="85b6fc"}else{if(l<0.5){d="74acfc"}else{if(l<0.6){d="63a2fc"}else{if(l<0.7){d="5298fc"}else{if(l<0.8){d="5190e9"}else{if(l<0.9){d="4b88de"}else{d="4882d6"}}}}}}}}}if(this.insignificant(f)){var j=parseInt(d,16);var a=(j>>16)&255;var h=(j>>8)&255;var k=j&255;var c="rgba("+a+", "+h+", "+k+", 0.9)";var e="rgba("+a+", "+h+", "+k+", 0.95)";return"background: repeating-linear-gradient(135deg, #"+d+", #"+d+" 5px, "+c+" 5px, "+e+" 8px)"}return"background-color: #"+d},RetentionSignificance:{0:25,0.01:30,0.02:36,0.03:43,0.04:51,0.05:59,0.06:67,0.07:75,0.08:83,0.09:92,0.1:100,0.11:108,0.12:116,0.13:123,0.14:131,0.15:138,0.16:146,0.17:153,0.18:159,0.19:166,0.2:172,0.21:179,0.22:185,0.23:191,0.24:196,0.25:202,0.26:207,0.27:212,0.28:217,0.29:221,0.3:226,0.31:230,0.32:234,0.33:237,0.34:241,0.35:244,0.36:247,0.37:250,0.38:253,0.39:255,0.4:258,0.41:260,0.42:261,0.43:263,0.44:264,0.45:266,0.46:267,0.47:267,0.48:268,0.49:268,0.5:268,0.51:268,0.52:268,0.53:267,0.54:267,0.55:266,0.56:264,0.57:263,0.58:261,0.59:260,0.6:258,0.61:255,0.62:253,0.63:250,0.64:247,0.65:244,0.66:241,0.67:237,0.68:234,0.69:230,0.7:226,0.71:221,0.72:217,0.73:212,0.74:207,0.75:202,0.76:196,0.77:191,0.78:185,0.79:179,0.8:172,0.81:166,0.82:159,0.83:153,0.84:146,0.85:138,0.86:131,0.87:123,0.88:116,0.89:108,0.9:100,0.91:92,0.92:83,0.93:75,0.94:67,0.95:59,0.96:51,0.97:43,0.98:36,0.99:30,1:25}},DaysAgo:[1,2,3,4,5,6,7,8,14,21,28],});Analytics.GraphBreakdownSidebar=Backbone.View.extend({events:{"click .graph_breakdown_sidebar_close":"cancelSidebar","change .toggle input":"toggleDimension","click .add_series_button":"createSeries",},initialize:function(){_.bindAll(this);this.uiDropdowns={};this.model.on("change:sidebarDropdown",this.renderSeries)},getSelectedEventInfo:function(){var a=this.eventDropdown.value;var b={};if(_.findWhere(Analytics.GraphState.EventsSeriesOptions,{endpoint:a})){b={endpoint:a}}else{b={endpoint:"custom_event",eventName:a}}return b},buildSeries:function(){var b=this.getSelectedEventInfo();var a=this;var e={};var d;var c;var f;_.each(this.$("li"),function(j,h,k){var m=$(j).children("input[type=hidden]");if(m.val()==="false"){return}var l=a.uiDropdowns[m.data("dimension")];if(_.isUndefined(l)){return}if(l.name==="device_type"){d=l.value}else{if(l.name==="class_name"){c=l.value}else{if(l.name==="refinement"){f=l.value}else{e[l.name]=l.value}}}});_.extend(b,{baseUrl:this.model.get("baseUrl"),dimensions:e,deviceType:d,className:c,refinement:f,isCustom:true});return new Analytics.Series(b)},addNewSeriesToUI:function(a){this.model.get("seriesOptions").add(a);this.dropdown.swapSeries(a);$(".add_series_button").spin(false);this.hideSidebar()},createSeries:function(){var a=this;$(".add_series_button").html("").spin("small","#777");var b=this.buildSeries();if(this.model.get("admin")){return this.addNewSeriesToUI(b)}b.save({success:this.addNewSeriesToUI,error:function(){$(".add_series_button").spin(false)}})},changeEvent:function(j){var h=this.$("ul");var c=this.getSelectedEventInfo().eventName;var b=this;var a=h.children("li.missing").remove();h.empty();h.spin();this.updateDisplayedSeries();var f=function(e){h.empty();b.renderDefaultOptions();_.each(e&&e.dimensions,function(m,n,o){var k=n.replace(/\s/g,"_");var l={dimensionName:n,sanitizedDimensionName:k};h.append(JST["apps/analytics/_graph_breakdown_sidebar_option"](l));b.uiDropdowns[n]=new UI.Dropdown({optionSet:m,name:n,value:m[0],onChange:b.updateDisplayedSeries,parent:document.getElementById(k+"_select")})});h.append(a);h.spin(false)};if(!c){f()}else{var d=this.seriesModel.get("baseUrl")+"custom_event_dimensions";$.get(d,{event:c},f)}},updateDisplayedSeries:function(b){var a=this.buildSeries();this.dropdown.swapSeries(a,true);this.displayedSeries=a},toggleDimension:function(f){var b=f.target;var h=b.parentNode.parentNode;var c=h.nextElementSibling;var d=b.checked;c.value=d;var a=c.nextElementSibling;if(d){a.style.display="block"}else{a.style.display="none"}this.updateDisplayedSeries()},showSidebar:function(){this.$el.animate({right:0,opacity:0.93})},hideSidebar:function(a){this.model.unset("sidebarDropdown",true);this.$el.animate({right:-300,opacity:0});if(a){a.stopPropagation()}},cancelSidebar:function(a){if(this.displayedSeries!=this.seriesModel){this.dropdown.swapSeries(this.seriesModel,true)}this.hideSidebar()},renderDefaultOptions:function(){var b={isAPIRequest:this.displayedSeries.get("endpoint")==="api_request",};var d=JST["apps/analytics/_graph_breakdown_sidebar_default_options"](b);this.$("ul").prepend(d);if(document.getElementById("device_type_select")){var h={iOS:"ios",Android:"android",JavaScript:"js",".NET":"windows",Unity:"unity",Xamarin:"xamarin",REST:"rest"};this.uiDropdowns.deviceType=new UI.Dropdown({optionSet:_.keys(h),name:"device_type",values:h,value:"ios",onChange:this.updateDisplayedSeries,parent:document.getElementById("device_type_select")})}if(document.getElementById("class_name_select")){var e=_.map(this.model.get("appSchema"),function(j){return j.className});if(_.isEmpty(e)){var f=document.createElement("span");f.style["margin-left"]="10px";f.style["font-size"]="0.8em";f.innerHTML="No classes defined for "+this.model.get("app").get("name");var c=document.getElementById("class_name_select");c.appendChild(f)}else{this.uiDropdowns.className=new UI.Dropdown({optionSet:e,name:"class_name",value:e[0],onChange:this.updateDisplayedSeries,parent:document.getElementById("class_name_select")})}}if(document.getElementById("refinement_select")){var a={"Create requests":"create","Get requests":"get","Find requests":"find","Update requests":"update","Delete requests":"delete"};this.uiDropdowns.refinement=new UI.Dropdown({optionSet:_.keys(a),name:"refinement",values:a,value:"create",onChange:this.updateDisplayedSeries,parent:document.getElementById("refinement_select")})}},renderSeries:function(d,e,c){this.dropdown=d.get("sidebarDropdown");if(!this.dropdown){this.hideSidebar();return}this.seriesModel=this.dropdown.seriesModel;this.displayedSeries=this.dropdown.seriesModel;var a={legendColor:this.seriesModel.get("color"),displayedSeries:this.displayedSeries};this.$el.html(JST["apps/analytics/_graph_breakdown_sidebar"](a));var b=_.reduce(Analytics.GraphState.EventsSeriesOptions,function(f,h){f[h.displayName]=h.endpoint;return f},{});_.each(this.model.get("customEvents"),function(f){b[f]=f});this.eventDropdown=new UI.Dropdown({optionSet:_.keys(b),name:"event",values:b,value:b[this.displayedSeries.get("displayName")],onChange:this.changeEvent,parent:document.getElementById("event_select")});this.renderDefaultOptions();this.showSidebar()},render:function(){return this}});Analytics.GraphDropdown=Backbone.View.extend({className:"graph_refinement",events:{"click .dropdown_button":"toggleMenu","click .refinement_dropdown li.series_option:not(.unavailable)":"optionSelected","click .dropdown_remove":"renderRemoveDropdown","click .new_series_button":"showCreateSeries","click .remove_series_button":"removeSeries"},initialize:function(){var a=this;_.bindAll(this);this.seriesModel=this.options.seriesModel;this.model.get("selectedSeries").on("add remove",this.renderRemoveButton);this.model.get("seriesOptions").on("remove",this.renderRemoveSeriesOptions);this.registerSeriesModelEvents()},registerSeriesModelEvents:function(){this.seriesModel.on("change:loading",this.renderLoading);this.seriesModel.on("change:loading",this.renderRemoveButton)},unregisterSeriesModelEvents:function(){this.seriesModel.off("change:loading",this.renderLoading);this.seriesModel.off("change:loading",this.renderRemoveButton)},toggleMenu:function(b,a){if(b&&$(b.target).hasClass("dropdown_remove")){return}if(this.$(".refinement_dropdown")[0]){if(this.open){this.open=false;this.$(".refinement_dropdown").hide().removeClass("visible")}else{this.open=true;this.$(".refinement_dropdown").show();if(a){this.$(".refinement_dropdown").addClass("visible")}else{setTimeout(function(){this.$(".refinement_dropdown").addClass("animation visible")},10);setTimeout(function(){this.$(".refinement_dropdown").removeClass("animation")},200)}}}},closeMenu:function(b,a){if(this.open){this.toggleMenu(b,a)}},openMenu:function(b,a){if(!this.open){this.toggleMenu(b,a)}},optionSelected:function(b){var a=this.model.get("seriesOptions").at($(b.target).closest("li").index());this.swapSeries(a)},swapSeries:function(a,c){this.unregisterSeriesModelEvents();var b=this.seriesModel;this.seriesModel=this.model.swapSelectedSeriesElement(this.seriesModel,a);this.registerSeriesModelEvents();this.render();ParseDotCom.Analytics.track("analytics_swap_series",{from_model:b.get("displayName"),to_model:a.get("displayName")});if(!c){this.toggleMenu()}return false},removeSeries:function(b){var a;if(b instanceof $.Event){a=this.model.get("seriesOptions").at($(b.target).closest("li").index())}else{a=b}this.model.get("seriesOptions").remove(a);if(!this.model.get("admin")){a.destroy()}b.stopImmediatePropagation();return false},showCreateSeries:function(){this.model.set("sidebarDropdown",this);this.closeMenu()},render:function(){var b=this.open;var c=this.model.getCurrentNavigationUIOptions();var a={seriesOptions:this.model.get("seriesOptions"),seriesModel:this.seriesModel,state:this.model,shouldShowBreakdown:c&&c.breakdown};this.$el.html(JST["apps/analytics/_graph_dropdown"](a));this.renderAllSeriesOptions();this.renderRemoveButton(null,this.model.get("selectedSeries"),null);this.renderLoading(this.seriesModel);if(b){this.open=false;this.openMenu(null,true)}return this},renderAllSeriesOptions:function(){var a=this;this.$(".dropdown_options li.series_option").remove();this.model.get("seriesOptions").each(function(b,c){var d=c===a.model.get("seriesOptions").length-1;a.renderSingleSeriesOption(b,d)});return this},renderSingleSeriesOption:function(a,c){var b={seriesOption:a};b.isSelected=a.get("seriesId")===this.seriesModel.get("seriesId");b.isSelectedElsewhere=this.model.get("selectedSeries").some(function(e,d,f){return e.get("seriesId")===a.get("seriesId")&&!b.isSelected});b.isLast=c;if(this.$(".dropdown_options li.series_option").length===0){this.$(".dropdown_options").prepend(JST["apps/analytics/_graph_dropdown_option"](b))}else{this.$(".dropdown_options li.series_option").last().after(JST["apps/analytics/_graph_dropdown_option"](b))}},renderRemoveButton:function(a,c,b){if(this.model.get("selectedSeries").length>1&&this.seriesModel&&!this.seriesModel.get("loading")){this.$(".dropdown_remove").show()}else{this.$(".dropdown_remove").hide()}},renderLoading:function(a){if(a.get("loading")){this.$(".graph_loading").spin("xsmall","#717171").css("display","inline-block");this.$(".legend").hide()}else{this.$(".graph_loading").hide();this.$(".legend").css("display","inline-block")}},renderRemoveDropdown:function(a){this.model.get("selectedSeries").remove(this.seriesModel);ParseDotCom.Analytics.track("analytics_remove_series",{model:this.seriesModel.get("displayName")});return false},renderRemoveSeriesOptions:function(a){this.$(".series_option[data-series-id="+a.get("seriesId")+"]").remove();if(this.seriesModel.get("seriesId")===a.get("seriesId")){this.swapSeries(this.model.nextAvailableSeries(),true)}}});Analytics.GraphNavigationSidebar=Backbone.View.extend({events:{"click a":"navigateTo"},initialize:function(){_.bindAll(this);this.model.on("change:selectedNavigation",this.changeSelectedNavigation)},navigateTo:function(c){var b=c.currentTarget;if(b.id.indexOf("nav_")!==0){return true}var a=b.id.substr(4);if(a!==this.model.get("selectedNavigation")){this.model.set("selectedNavigation",a);this.model.addFirstAvailableSeries();ParseDotCom.Analytics.track("analytics_swap_navigation",{navigation:a})}return false},changeSelectedNavigation:function(){var a=this.model.get("selectedNavigation");this.$el.find(".selected").removeClass("selected");this.$el.find("#nav_"+a).parent().addClass("selected")}});Analytics.GraphToolbar=Backbone.View.extend({events:{"click .graph_add":"addButtonEventHandler","click .full_screen_button":"toggleFullScreen","click .export_button":"exportGraph","click .refresh_button":"startRefreshGraph"},initialize:function(){this.dropdownViews=[];var a=this;_.bindAll(this);this.model.on("change:fromDate change:toDate",this.checkExportability);this.model.get("selectedSeries").on("add",this.renderAddDropdown);this.model.get("selectedSeries").on("remove",this.renderRemoveDropdown);this.model.get("selectedSeries").on("add remove reset",this.renderAddButton);this.model.get("selectedSeries").on("reset",this.renderRemoveAllDropdowns);this.model.get("selectedSeries").on("change:loading",this.maybeStopRefresh);this.model.get("selectedSeries").on("add remove swap",this.renderDropdowns);$(document).delegate("body, .chart_container","click",function(b){_.each(a.dropdownViews,function(c){c.closeMenu(b);b.stopPropagation()})});$(document).delegate(".graph_refinement","click",function(b){_.each(a.dropdownViews,function(c){if($(b.target).closest(".graph_refinement")[0]!==c.$el[0]){c.closeMenu(b)}});b.stopPropagation()});$(".highcharts-container").click(this.hideToolbarElements)},toggleFullScreen:function(a){$(".p_apps_show").toggleClass("full_screen");this.model.set("fullScreen",$(".p_apps_show").hasClass("full_screen"));ParseDotCom.Analytics.track("analytics_toggle_fullscreen",{enabled:this.model.get("fullScreen").toString()});$(".highcharts-container").click(this.hideToolbarElements)},isExportOutOfRange:function(c){var b=this.model.get("toDate")-this.model.get("fromDate");var a=b/1000/60/60/24;return a>184},checkExportability:function(a){this.$(".export_button").toggleClass("export_disabled",this.isExportOutOfRange())},exportGraph:function(c){if(this.isExportOutOfRange()){return false}var b=this.model.get("selectedSeries");var a=b.reduce(function(e,d){e.endpoints.push(d.generateDataUrlParams());return e},{from:this.model.encodeDateAsParam(this.model.get("fromDate")),to:this.model.encodeDateAsParam(this.model.get("toDate")),stride:this.model.get("stride"),endpoints:[]});window.location=this.model.get("baseUrl")+"analytics_batch?"+$.param(a);return false},startRefreshGraph:function(a){this.$(".refresh_button").addClass("animating");this.model.get("selectedSeries").each(function(c,b,d){c.trigger("change:dataUrl",c)});return false},maybeStopRefresh:function(a,c,b){if(!c){this.$(".refresh_button").removeClass("animating")}},addButtonEventHandler:function(a){this.$(".graph_add").removeClass("graph_add").addClass("graph_refinement graph_refinement_placeholder");this.$(".graph_dropdowns").append(JST["apps/analytics/_graph_add_button"]());this.model.addSelectedSeries(this.model.nextAvailableSeries());ParseDotCom.Analytics.track("analytics_add_series")},hideToolbarElements:function(a){_.each(this.dropdownViews,function(b){b.closeMenu(a)})},render:function(){var a=this;this.$el.append(JST["apps/analytics/_graph_toolbar"]());if(this.model.get("selectedSeries").length>0){this.model.get("selectedSeries").each(function(c,b,d){a.renderAddDropdown(c,d,{index:b})})}this.renderAddButton(null,this.model.get("selectedSeries"),null)},renderAddDropdown:function(a,d,b){$(".last").removeClass("last");var c=$(".graph_refinement_placeholder").removeClass("graph_refinement_placeholder").addClass("last");var e;if(c.length>0){e=new Analytics.GraphDropdown({model:this.model,seriesModel:a,index:b.index,el:c});e.render()}else{e=new Analytics.GraphDropdown({model:this.model,seriesModel:a,index:b.index});this.$(".graph_dropdowns .graph_add").before(e.render().$el)}this.dropdownViews.push(e)},renderRemoveDropdown:function(b,d,c){var a=this.dropdownViews.splice(c.index,1)[0];a.undelegateEvents();a.remove();if(a===this.model.get("sidebarDropdown")){this.model.unset("sidebarDropdown")}},renderRemoveAllDropdowns:function(b,a){while(this.dropdownViews.length>0){this.renderRemoveDropdown(null,null,{index:0})}},renderAddButton:function(b,d,c){var a=this.model.get("seriesOptions").length;if(d.length<3&&d.length<a&&a>0){this.$(".graph_add").css("display","inline-block")}else{this.$(".graph_add").hide()}},renderDropdowns:function(){_.each(this.dropdownViews,function(a){a.renderAllSeriesOptions()})}});Analytics.Graph=Backbone.View.extend({minChartHeight:550,initialize:function(){_.bindAll(this);var a=this;this.chartContainer="chart_container_"+this.model.get("app").id;this.model.get("selectedSeries").on("change:dataUrl",this.updateSeriesData);this.model.get("selectedSeries").on("change:data",this.renderAddSeries);this.model.get("selectedSeries").on("remove",this.renderRemoveSeries);this.model.get("selectedSeries").on("reset",this.renderResetSeries);this.model.on("change:fromDate",this.updateDateFrom);this.model.on("change:toDate",this.updateDateTo);this.model.on("change:fullScreen",this.updateChartHeight);this.dateRange=new UI.Daterange({value:{from:this.model.get("fromDate"),to:this.model.get("toDate")},preventFuture:true,compactOnChange:true,onChange:function(b){a.model.set({fromDate:a.model.snapFromDate(b.from),toDate:a.model.snapToDate(b.to)});ParseDotCom.Analytics.track("analytics_change_date")},parent:this.$(".graph_dates")[0]});$(window).resize(_.debounce(function(){if(a.model.get("fullScreen")){a.updateChartHeight()}},500));this.chartHeight=this.minChartHeight;this.chartType="line";if(this.options.chartBackgroundColor){this.chartBackgroundColor=this.options.chartBackgroundColor}else{if(getInternetExplorerVersion()>0){this.chartBackgroundColor="#FFF"}else{this.chartBackgroundColor="transparent"}}if($("body").hasClass("dark_dashboard")){this.chartBorderColor="#5a6065"}Highcharts.setOptions({global:{useUTC:false}})},updateSeriesData:function(b){var a=this;if(this.model.get("pumaPerformance")&&b.get("endpoint")==="performance"&&b.get("performanceType")!=="request_limit"){this.updatePerMinutePerformanceData(b);return}b.set("loading",true);this.model.incrementOutgoingRequests();var c=b.get("dataUrl");$.get(c.url,c.params).success(function(e){var d=a.decodeData(e.requested_data);b.unset("data",{silent:true});b.set("data",d);a.model.decrementOutgoingRequests();b.set("loading",false)}).error(function(){a.model.decrementOutgoingRequests();b.set("loading",false)})},updatePerMinutePerformanceData:function(f){var j=this;f.set("loading",true);var a=f.get("dataUrl").url;var d=f.get("dataUrl").params;var e={};var h=0;var c=f.get("displayId");if(!c){c=Analytics.Graph.generateId();f.set("displayId",c)}var k=function(m,l){var n=m.get(c);if(n){n.setData(l);m.redraw()}};this.model.incrementOutgoingRequests();var b=false;$.get(a,d).pipe(function(m){_.each(m.requested_data.cached,function(p,o){e[o]=j.decodeData(p)});var l=j.flattenPerformanceData(e);b=_.isEmpty(l);f.set("data",l);var n=_.map(m.requested_data.missing,function(q,o){j.model.incrementOutgoingRequests();var r=_.clone(d);r.from=q.from;r.to=q.to;var s=$.get(a,r);return s.pipe(function(p){j.model.decrementOutgoingRequests();e[q.from]=j.decodeData(p.requested_data);k(j.graph,j.flattenPerformanceData(e))},function(p){j.model.decrementOutgoingRequests()})});return $.when.apply($,n)}).pipe(function(){k(j.graph,j.flattenPerformanceData(e));j.model.decrementOutgoingRequests();if(b){f.set("data",j.flattenPerformanceData(e))}f.set("loading",false)})},decodeData:function(b){var a=this;if(!b||b.length===0){return[]}return _(b).map(function(d){var c=Parse._decode("date",{date:d[0]}).date;if(a.model.getGraphStrideOptions().minTickInterval===24*3600*1000){c=moment(d[0].iso.slice(0,10)).toDate()}return[parseInt($.datepicker.formatDate("@",c),10),d[1]]})},flattenPerformanceData:function(c){var a=[];var b=_.keys(c).sort();_.each(b,function(d){a=a.concat(c[d])});return a},updateDateFrom:function(){if(this.dateRange){this.dateRange.from.value=this.model.get("fromDate")}},updateDateTo:function(){if(this.dateRange){this.dateRange.to.value=this.model.get("toDate")}},updateChartHeight:function(){if(this.model.get("fullScreen")){var a=$(".app_menu").outerHeight()+$(".graph_toolbar").outerHeight()+$(".aggr_container").outerHeight()+3;this.chartHeight=$(".container").height()-a}else{this.chartHeight=this.minChartHeight}this.chartRendered=false;this.render()},render:function(){var a=this;var c=this.$el.find(".graph_container");var b=this.model.getCurrentNavigationUIOptions();if(!b.graph){c.hide();return}if(!this.chartRendered){c.show();this.renderChart();this.chartRendered=true}while(this.graph.series.length>0){a.graph.series[0].remove(false)}this.model.get("selectedSeries").each(function(e,d,f){a.renderAddSeries(e,false)});if(this.graph.yAxis[0].getExtremes().dataMax>0.9*this.graph.yAxis[0].getExtremes().max){this.graph.yAxis[0].setExtremes(0,this.graph.yAxis[0].getExtremes().max*1.1)}this.graph.redraw();c.show()},renderAddSeries:function(a,c){if(!this.chartRendered){this.renderChart();this.chartRendered=true}a.set("displayId",Analytics.Graph.generateId());var b=a.get("tooltipName");this.graph.addSeries({color:a.get("color"),data:a.get("data"),id:a.get("displayId"),marker:{symbol:"circle",enabled:!a.get("hideMarker")},step:a.get("step"),showInLegend:false,tooltipName:b},false);this.renderSyncSeries();if(typeof(c)==="undefined"||c){this.graph.redraw()}},renderRemoveSeries:function(a,f,b){var d=this.graph.get(a.get("displayId"));var e=d.data;for(var c=0;c<e.length;c++){e[c].update(0,false)}this.graph.redraw();setTimeout(function(){d.remove()},500)},renderResetSeries:function(){this.chartRendered=false;this.render()},renderSyncSeries:function(){var a=this;_.each(this.graph.series,function(c){var d=c.options.id;var b=a.model.get("selectedSeries").some(function(f,e,h){return f.get("displayId")===d});if(!b){a.graph.get(d).remove()}})},renderDemoData:function(a){this.chartWidth=958;this.renderChart();this.graph.addSeries({color:this.model.getSeriesColors()[0],data:a,id:"demo",marker:{symbol:"circle"},showInLegend:false,tooltipName:"opens"})},renderChart:function(){var a=this.model.getGraphStrideOptions();this.graph=new Highcharts.Chart({chart:{backgroundColor:this.chartBackgroundColor||"#FFF",height:this.chartHeight,plotBackgroundColor:this.chartBackgroundColor||"#FFF",plotBorderColor:this.chartBorderColor||"#c0bfbf",plotBorderWidth:1,renderTo:this.chartContainer,shadow:false,spacingRight:-1,spacingTop:0,type:this.chartType,width:this.chartWidth||null,marginRight:30},credits:{enabled:false},loading:{labelStyle:{display:"none"},style:{position:"absolute",marginLeft:"1px",marginRight:"1px",marginTop:"1px",marginBottom:"1px"}},plotOptions:{series:{fillOpacity:0.1,marker:{fillColor:"#FFFFFF",lineColor:null,lineWidth:2},shadow:false,states:{hover:{enabled:false}}}},title:{text:null},tooltip:{backgroundColor:"rgba(242,242,242,0.8)",borderWidth:1,formatter:function(){return'<span class="tooltip_date">'+moment.unix(this.x/1000).format(a.tooltipFormat)+'</span><br/><span class="tooltip_value">'+this.y+" "+this.series.options.tooltipName+"</span>"},style:{"padding-top":10},shadow:false,useHTML:true},xAxis:{labels:{formatter:function(){return moment.unix(this.value/1000).format(a.dateFormat)},style:{color:"#949fa3",fontSize:"13",fontWeight:"500",fontFamily:"Helvetica Neue",lineHeight:" 20px"},y:20},minTickInterval:a.minTickInterval,tickLength:10,tickPosition:"inside",tickPixelInterval:"140",type:"datetime",tickColor:this.chartBorderColor||"#e0e4e9",lineColor:this.chartBorderColor||"#e0e4e9"},yAxis:{allowDecimals:false,gridLineColor:this.chartBorderColor||"#e0e4e9",gridLineDashStyle:"LongDash",labels:{style:{color:"#798082",fontSize:"13",fontWeight:"500",fontFamily:"Helvetica Neue",lineHeight:"20px"},y:5},min:0,plotLines:[{value:0,width:1,color:this.chartBorderColor||"#e0e4e9"}],showFirstLabel:false,showLastLabel:false,tickPixelInterval:"140",tickPosition:"inside",title:{text:null},tickColor:this.chartBorderColor||"#e0e4e9",lineColor:this.chartBorderColor||"#e0e4e9"}})}},{generateId:function(){var a=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return a()+a()+"-"+a()+a()+"-"+a()+a()}});Analytics.NoData=Backbone.View.extend({el:".empty_wrapper",states:{},initialize:function(){_.bindAll(this);this.setup();this.model.get("selectedSeries").on("add remove swap change",this.render);this.model.on("change:noData",this.render);this.model.on("change:outgoingRequests",this.render);if(this.model.get("noData")){this.render()}},getErrorMessages:function(a){return{api_request:{text:"First time here?",action:"/apps/quickstart",actionText:"Get started with Parse",title:"You haven't made any API requests for this period"},analytics_request:{text:"First time here?",action:"/apps/quickstart#analytics",actionText:"Get started with Analytics",title:"You haven't sent any analytics events for this period"},file_request:{text:"First time here?",action:"/docs/rest#files",actionText:"Get started with Files",title:"You haven't stored any file accesses in this period"},push:{text:"First time here?",action:"/apps/quickstart_push",actionText:"Get started with Push",title:"You haven't sent any push notifications for this period"},app_opened:{text:"First time here?",action:"/apps/quickstart",actionText:"Get started with Analytics",title:"You haven't sent any App Opens for this period"},app_opened_from_push:{text:"First time here?",action:"/docs/push_guide#receiving-tracking/iOS",actionText:"Get started with Push Analytics",title:"You haven't sent any Push Opens for this period"},custom_event:{text:"Try a different date range, or choose a different event.",action:"/docs/rest#analytics-custom",actionText:"Get started with Custom Events",title:"This event doesn't have any data for this period"},class_count:{text:"First time here?",action:"/apps/quickstart",actionText:"Get started with Parse",title:"You didn't have any data in this class for this period"},audience:{text:"First time here?",action:"/apps/quickstart",actionText:"Get started with Parse Users",title:"You don't have any engagement data for this period"},performance:{text:"First time here?",action:"/apps/quickstart",actionText:"Get started with Parse",title:"You don't have any performance data for this period"},multiple:{text:"First time here?",action:"/apps/quickstart",actionText:"Get started with Parse",title:"You don't have any data for this period"},navigation_performance:{text:"First time here?",action:"/apps/quickstart",actionText:"Get started with Parse",title:"You don't have any performance data for this period"},navigation_data:{text:"First time here?",action:a.dataRequestUrl()+"collections/",actionText:"Add a Parse Class",title:"You don't have any Classes defined on Parse"},navigation_audience:{text:"First time here?",action:"/apps/quickstart",actionText:"Get started with Parse",title:"You don't have any engagement data for this period"}}},setup:function(){this.$el.hide();var a=this;this.states=this.getErrorMessages(this.model.get("app"))},render:function(){var c=this.model.getCurrentNavigationUIOptions();if(!c.graph){this.$el.hide();return}var a=this;var b=this.model.get("selectedSeries");var e=null;if(b.size()>1){e=this.states.multiple}else{if(b.size()===1){e=this.states[b.first().get("endpoint")]}else{e=this.states["navigation_"+this.model.get("selectedNavigation")]}}var d=b.some(function(h,f,k){var j=h.get("data");if(a.model.get("outgoingRequests")>0){return true}return !!j&&j.length>0&&j.some(function(l){return l[1]>0})});this.$el.html(JST["apps/analytics/_no_data"]({text:e.text,action:e.action,actionText:e.actionText,title:e.title}));if(d){this.$el.hide()}else{this.$el.fadeIn()}return this}});App.Views.Index={};App.Views.Index.initialize=function(){var a="/apps/cloning_progress";var n=new App.Collections.ProgressFetcher(cloningJson,{url:a});n.resetFetchLoop();var h=function(o){var p=new App.Views.ProgressBar({model:o,markers:15});$(".cloning[data-api-key="+o.id+"] .cloning_content").append(p.$el);p.render()};n.each(function(o){h(o)});var b=new Gridflow($(".app_list")[0],"app_card");var k=function(){return UI.tag("div",{className:"create_header"},[UI.tag("div",{className:"title"},"What's the name of your new app?"),UI.tag("input",{className:"new_name",type:"text",placeholder:"New App"})])};var d=function(o){return UI.tag("div",{className:"clone_header"},[UI.tag("div",{className:"title"},"What's the name of your new app?"),UI.tag("input",{className:"new_name",type:"text",placeholder:"New App"}),UI.tag("span",{className:"clone_warning"},["This will clone everything but data and background jobs schedules. You can do custom clones from the ",UI.tag("a",{href:"/apps/"+o+"/edit"},"settings page"),"."])])};var m=function(q,r){var p=q+"_content";var o=q+"_button";return UI.tag("div",{className:p},[UI.tag("a",{className:"ui_action_button "+o},r),UI.tag("a",{className:"cancel"},[UI.tag("i",{className:"icon_crossCircle"}),UI.tag("span",{},"cancel")])])};var j=function(){return UI.tag("a",{className:"ui_action_button dismiss_button",href:"#"},["Ok, got it"])};var f=function(o){if(o){$(".new_app_button a").removeClass("hidden")}else{$(".new_app_button a").addClass("hidden")}};var c=function(p){var o=$(".light_overlay");if(p){o.show();setTimeout(function(){o.css("opacity",1)},0)}else{o.css("opacity",0);setTimeout(function(){o.hide()},500)}};var e=function(o,p){if(o){p.removeClass("hidden")}else{p.addClass("hidden")}};var l=function(o,r,t,u){var q="/apps/"+r;u.find(".gear, .badge").attr("href",q+"/edit");u.find(".app_icon").attr("href",q);u.find(".app_name").parent().attr("href",q);var p=u.find(".buttons a");p=_.reduce(p,function(w,v){w[v.innerHTML]=v;return w},{});$(p.Core).attr("href",q+"/collections");$(p.Analytics).attr("href",q);$(p.Push).attr("href",q+"/push_notifications");$(p.Quickstart).attr("href","/apps/quickstart?app_id="+r);var s=u.find(".popover_menu a");s=_.reduce(s,function(w,v){w[v.innerHTML]=v;return w},{});$(s.Settings).attr("href",q+"/edit");$(s.Export).attr("href",q+"/edit#export");$(s.Keys).attr("href",q+"/edit#keys");u.attr("data-friendly-id",r);u.attr("data-api-key",t);u.find(".app_name").html(o)};$(".new_app_button a").on("click",function(o){if($(this).hasClass("hidden")){return false}f(false);$(".dashboard_content").animate({scrollTop:0},300);setTimeout(function(){$card=$($("#new_app_template").html());$card.addClass("new_app");$card.find(".header").append(k());$card.find(".content").append(m("create","Create"));b.insert($card[0]);$card.find(".new_name").focus();c(true)},300);return false});$("body").delegate(".new_app .cancel","click",function(o){b.remove($(".new_app").index());c(false);setTimeout(function(){f(true)},600);return false});$("body").delegate(".create_button","click",function(p){var q=$(".new_app");$(".create_button").html("").spin("small","#fff");var o=$(".new_name").val();$.post("/apps",{parse_app:{name:o}}).then(function(t){$(".create_button").spin(false).html("Create");if(t.success){q.removeClass("new_app").addClass("new_app_transition");c(false);q.find(".animated_name").show().css("opacity",1).css("top","50px").html(o);q.find(".app_name").css("opacity",0);var u=(typeof t.app==="string")?JSON.parse(t.app):t.app;var r=u.dashboardURL;r=r.substr(r.lastIndexOf("/")+1);l(o,r,u.api_key,q);q.find(".analytics_content").html('Your app is ready to go! Check out the <br><a href="/apps/quickstart?app_id='+r+'">quickstart guide</a>, or grab your <a href="/apps/'+r+'/edit#keys">keys</a>.');setTimeout(function(){f(true);q.removeClass("new_app");q.find(".animated_name").hide();q.find(".app_name").css("opacity",1);q.find(".create_header").remove();q.find(".create_content").remove()},500)}else{var s=t.error.message;if(t.error.code===159){s="You've created too many apps in the last hour. Please try again later."}q.find(".title").html(s).addClass("error")}});return false});$("body").delegate(".clone_menu","click",function(o){var p=$(this).closest(".app_card");p.find(".header").append(d(p.attr("data-friendly-id")));p.find(".content").append(m("clone","Next"));e(false,p.find(".buttons"));f(false);c(true);setTimeout(function(){p.addClass("clone_app");var q=p.find(".app_info .app_name").html();p.find(".new_name").val(q+"-Clone").focus()},0);return false});$("body").delegate(".clone_app .cancel","click",function(o){var p=$(this).closest(".app_card");p.removeClass("clone_app");p.find(".clone_header").remove();p.find(".clone_content").remove();c(false);f(true);setTimeout(function(){e(true,p.find(".buttons"))},300)});$("body").delegate(".clone_app .clone_button","click",function(o){var q=$(this).closest(".app_card");$(this).addClass("warned").html("Clone");q.find(".clone_header .title").css("opacity",0);var p="-45px";q.find(".new_name").css({"-webkit-transform":"translateY("+p+")","-moz-transform":"translateY("+p+")",transform:"translateY("+p+")"});setTimeout(function(){q.find(".clone_warning").css("opacity",1)},350)});$("body").delegate(".clone_app .clone_button.warned","click",function(r){var s=$(this).closest(".app_card");$(this).html("").spin("small","#fff");var o=$(".new_name").val();var q="/apps/"+s.attr("data-friendly-id")+"/clone_app";var p={cloud_code:true,background_jobs:false,config:true,schema:true,app_settings:true};$.post(q,{app_name:o,options:p}).then(function(t){$(".clone_button").spin(false).html("Clone");if(t.success){$cloneCard=$($("#new_app_template").html());$cloneCard.addClass("cloning");$cloneCard.addClass("keep_on_top");$cloneCard.find(".subtext").text("Cloning app...");$cloneCard.find(".content").append(UI.tag("div",{className:"cloning_content"}));l(o,t.app.friendly_id,t.app.api_key,$cloneCard);s.removeClass("clone_app");s.find(".clone_header").remove();s.find(".clone_content").remove();$(".dashboard_content").animate({scrollTop:0},300);b.insert($cloneCard[0]);n.upsert({job:"cloning",id:t.app.api_key,progress:0,status:"queued"});setTimeout(function(){c(false);f(true);e(true,s.find(".buttons"));setTimeout(function(){$cloneCard.removeClass("keep_on_top")},500)},800)}else{s.find(".clone_warning").html(t.error[0]).addClass("error")}})});$("body").delegate(".clone_error .dismiss_button","click",function(p){var q=$(this).closest(".app_card");$(".dismiss_button").html("").spin("small","#fff");var o="/apps/"+q.attr("data-friendly-id")+"/dismiss_clone";$.get(o,{}).then(function(r){if(r.success){b.remove(q.index())}})});n.on("remove change:status",function(o){$card=$('.app_card[data-api-key="'+o.id+'"]');if(o.get("status")=="failed"){$card.removeClass("cloning").addClass("clone_error");$card.find(".subtext").html("Something went wrong with your clone!");$card.find(".content").append(j())}else{if(o.changedAttributes()===false){o.set("progress",1);setTimeout(function(){$card.removeClass("cloning");$card.find(".subtext").html("Created <strong>just now</strong>")},1500)}}});n.on("add",function(o){h(o)})};App.Views.Collaborations=Backbone.View.extend({events:{"click #collab_invite":"create","click .indexCollection a":"deleteCollaboration"},initialize:function(){var a=this;this.isOwner=this.options.isOwner;this.listView=this.$(".indexCollection");this.errorBox=this.$(".error_box");if(this.isOwner){this.$("#collab_email").keyup(function(c){var b=a.$("#collab_invite").hasClass("disabled");if(c.keyCode===13&&!b){a.create(c)}else{a.validateEmail(c)}})}this.render()},render:function(){this.listView.empty();this.collection.each(this.insertIntoView,this)},insertIntoView:function(a){var b=$(JST["apps/_collaborator_list"]({userName:a.get("userName"),userEmail:a.get("userEmail"),isOwner:this.isOwner,url:a.url()}));b.hide();this.listView.append(b);b.slideDown(1000)},showError:function(a){if(a){this.errorBox.text(a).slideDown(400)}else{this.errorBox.empty().hide()}},create:function(c){var b=this.$("#collab_email");if(!b.val().length){return false}var a=this;$.post(a.collection.url(),{collaboration:{email:b.val()}}).then(function(e){if(e.success){b.val("");a.showError(false);var d=new App.Models.Collaboration(e.data);a.collection.add(d);a.insertIntoView(d)}else{var f=e.error||(e.errors?e.errors.join("\n"):"");a.showError(f)}},function(){a.showError("An error occurred while trying to add a collaborator")});return false},deleteCollaboration:function(c){var b=c.target.getAttribute("href");c.target.setAttribute("href","#");c.target.className+=" disabled";var a=this;$.ajax({url:b,type:"post",dataType:"json",data:{_method:"delete"}}).then(function(d){$(c.target).removeClass("disabled");if(d.success){var e=parseInt(b.substr(b.lastIndexOf("/")+1),10);if(!isNaN(e)){a.collection.remove(e)}$(c.target.parentNode).slideUp(400)}else{c.target.setAttribute("href",b)}},function(){$(c.target).removeClass("disabled").attr("href",b)});return false},validateEmail:function(f){var b=this.$("#collab_email").val();var h=this.$("#collab_spinner");var d=this.$("#collab_valid");var c=this.$("#collab_invite");var a=this;d.hide();c.addClass("disabled");h.removeClass("icon_callback_saved");if(this.ajax){this.ajax.abort()}if(b.indexOf("@")>0&&b.lastIndexOf(".")>b.indexOf("@")){h.spin("small","#b0b8bf");this.ajax=$.get(a.collection.url()+"/validate",{email:b}).then(function(e){h.spin(false);if(e.success){d.show();c.removeClass("disabled");a.showError(null)}else{var j=e.error||(e.errors?e.errors.join("\n"):"");a.showError(j)}},function(e){h.spin(false);d.hide();if(e.status!==0){a.showError("An error occurred while trying to validate email")}})}}});App.Views.Apps.Edit=Backbone.View.extend({events:{"change input[type=checkbox]:not(.prod_switch):not(.noImplicitAjax)":"submitSwitch","change #parse_app_parse_app_metadata_production":"submitProdSwitch","click #export_button:not(.disabled)":"exportApp","click #cleanupButton":"cleanupFilesOnApp","click #transferAppButton":"transferApp","click #deleteButton":"deleteApp","click #cloneButton":"cloneApp","keydown #clone_name_":"cloneApp","click #resetMasterKeyButton":"resetMasterKeyForApp","click .dashboard_nav a":"changeSection","change input[type=text]:not(.noImplicitAjax)":"fieldBlurred","change textarea:not(.noImplicitAjax)":"fieldBlurred","change input[type=file]":"uploadFile","change .keyRows input":"updateKeyList","click .addKeyRow":"addKeyRow","click .deleteRow":"deleteKeyRow"},initialize:function(){_.bindAll(this,"renderExport","createExportView","removeExportView");this.app_keys=this.options.app_keys||[];this.exportProgress=this.options.exportProgress;if(window.location.hash){var b=window.location.hash.substr(1);this.showSection(_.escape(b))}else{this.showSection("general")}$("input").keyup(function(c){if(c.keyCode==13){$(this).blur()}});if(this.exportProgress.models.length>0){this.createExportView(this.exportProgress.models[0])}this.exportProgress.on("change:status",this.renderExport);this.exportProgress.on("add",this.createExportView);this.exportProgress.on("remove",this.removeExportView);this.exportProgress.on("remove",this.renderExportNotification);var a=this;$(".hasKeyRows").each(function(){a.renderKeyRows($(this))});this.delegateEvents();this.rpc=this.options.rpc||new App.Views.RPC();this.rpc.delegateEvents();this.renderExport()},renderKeyRows:function(k){var a="parse_app[auth_options_attributes]";var h=k.find("input.app_id_list");var c=h.attr("name").replace(a,"");var b=k.find("input.app_secret_list");var d=b.attr("name").replace(a,"");var j=(h.val()||"").split(/\s*,\s*/);var f=(b.val()||"").split(/\s*,\s*/);var e=Math.max(j.length,f.length);k.find(".keyRows").html(JST["apps/_key_rows"]({row_count:e,id_list_name:c,secret_list_name:d,id_list:j,secret_list:f}))},showSection:function(d){var a=this;$(".dashboard_nav .selected").removeClass("selected");window.location.hash=d;$(".section").hide();$("#link_"+d).parent().addClass("selected");$("#section_"+d).css("opacity","0").show().animate({opacity:1});$(".dashboard_content")[0].scrollTop=0;if(d==="keys"){for(var c=0;c<a.app_keys.length;c++){var b=a.app_keys[c]}$("embed").show()}else{$("embed").hide()}},changeSection:function(c){$(".ui_flash").hide();var a=$(c.target).closest("a");if(!a.parent().hasClass("selected")){var b=a.attr("id").replace("link_","");this.showSection(b)}return false},submitSwitch:function(f){var a=$(f.target);var c=a.parents("form:first");var b=c.length>0?c.attr("action"):App.currentApp.dataRequestUrl();var h=a.attr("name");var d={};d[h]=!!f.target.checked;options={view:a.closest(".row"),url:b,method:"PUT",params:d};this.rpc.call(options)},submitProdSwitch:function(a){if(a.target.checked){$(".production_metadata").show()}else{$(".production_metadata").hide()}},fieldBlurred:function(f){var l=$(f.target);if(!l.hasClass("noSaveValue")){var b=l.parents("form:first");var a=b.length>0?b.attr("action"):App.currentApp.dataRequestUrl();var d={};var c=_.filter(l[0].classList,function(e){return e.indexOf("saveGroup")===0});var j;if(c.length===0){d[l.attr("name")]=l.val();j=l.closest(".row")}else{var k=_.map(c,function(e){return"."+e});var h=false;$(k.join(",")).each(function(e,m){if(!m.value||!m.value.length){h=true}else{d[m.getAttribute("name")]=m.value}});if(h){return}j={el:l,dx:26,dy:l.height()/2-18}}this.rpc.call({view:j,url:a,method:"PUT",params:d})}},updateKeyList:function(j){var h=$(j.target);var b="";if(h.attr("name").indexOf("app_ids")>-1){b="app_id"}else{if(h.attr("name").indexOf("app_secrets")>-1){b="app_secret"}else{return}}var a=[];var f=h.closest(".hasKeyRows");f.find("input[type=text]").each(function(){if(this.name&&this.name.indexOf(b)>-1){a.push(this.value)}});var c=f.find("."+b+"_list");var d={};var k=a.join(",");d[c.attr("name")]=k;c.val(k);this.rpc.call({view:{el:c.parent()},url:App.currentApp.dataRequestUrl(),method:"PUT",params:d})},addKeyRow:function(d){var a=$(d.target).closest(".hasKeyRows");var c=a.find("input.app_id_list");var b=a.find("input.app_secret_list");c.val(c.val()+",");b.val(b.val()+",");this.renderKeyRows(a);return false},deleteKeyRow:function(j){var d=$(j.target).closest("li");var b=d.closest(".hasKeyRows");d.remove();var h=[];var c=[];b.find("input[type=text]").each(function(e){if(this.name.indexOf("app_id")>-1){h.push(this.value)}else{if(this.name.indexOf("app_secret")>-1){c.push(this.value)}}this.name=this.name.replace(/\[\d+\]/,"["+((e/2)|0)+"]")});var k=b.find("input.app_id_list");var a=b.find("input.app_secret_list");var f={};f[k.attr("name")]=h.join(",");k.val(h.join(","));f[a.attr("name")]=c.join(",");a.val(c.join(","));this.rpc.call({view:{el:b},url:App.currentApp.dataRequestUrl(),method:"PUT",params:f});return false},uploadFile:function(a){$(a.target).parents("form:first").submit()},cleanupFilesOnApp:function(b){var a=$(b.target);this.rpc.call({view:{el:a,dx:-230,dy:-10},spinnerView:a.closest(".row"),url:a.parents("form:first").attr("action"),method:"PUT",params:{cleanup:true},successMessage:function(c){return c.notice}});return false},exportApp:function(c){var a=this;var b=$(c.target);this.rpc.call({view:{el:b.closest(".row")},url:b.parents("form:first").attr("action"),method:"PUT",params:{"export":true},customSuccess:true,success:function(){a.exportProgress.upsert({id:"",progress:0,status:"queued",message:"Starting export..."});$("#export_button").removeClass("disabled")}});$("#export_button").addClass("disabled");return false},validateAndConfirm:function(b,a,d){var c=document.getElementById(b);if(c&&c.value.length<1){c.style.borderColor="#dd4b39";return false}if(!confirm(a)){return false}d.submit();return true},transferApp:function(c){var a=this.$("#new_owner_email");if(!a.val().length){return false}var b=this.validateAndConfirm("#password_confirm_transfer","Are you sure you want to transfer ownership of this app? There is no undo.",document.getElementById("transfer_app_form"));if(b){ParseDotCom.Analytics.track("website_app_transfer",{app:App.currentApp.id,user:App.currentUser.id.toString()});$(c.target).closest("form").submit()}return false},deleteApp:function(b){var a=this.validateAndConfirm("#password_confirm_delete","Are you sure you want to delete this app? All the data will be deleted, and there is no undo.",document.getElementById("delete_app_form"));if(a){ParseDotCom.Analytics.track("website_app_delete",{app:App.currentApp.id,user:App.currentUser.id.toString()});$(b.target).closest("form").submit()}return false},cloneApp:function(c){var b=c.keyCode||c.which;if(c.type=="keydown"&&b!==13){return true}var a=$("#cloneButton");this.rpc.call({view:{el:a,dx:20,dy:-13},spinnerView:a.closest(".row"),url:a.parents("form:first").attr("action"),method:"POST",params:{app_name:$("#clone_name_").val(),options:{cloud_code:$(".clone_app input#cloud_code")[0].checked,background_jobs:$(".clone_app input#background_jobs")[0].checked,config:$(".clone_app input#config")[0].checked,schema:$(".clone_app input#schema")[0].checked,app_settings:$(".clone_app input#app_settings")[0].checked,data:$(".clone_app input#data")[0].checked,connection_string:$(".clone_app input#connection_string").val()}},success:function(){$(".edit_parse_app").hide();$(".clone_success").show()}});return false},resetMasterKeyForApp:function(a){this.validateAndConfirm("#password_confirm_reset_master_key","Are you sure you want to reset your master key? There is no undo.",document.getElementById("reset_master_key"));return false},createExportView:function(a){this.exportView=new App.Views.ProgressBar({model:a,showMessage:true});$(".export_status").html(this.exportView.$el);this.renderExport(a)},removeExportView:function(){if(this.exportView){this.exportView.remove();this.exportView=undefined}this.renderExport()},renderExport:function(b){var a=this.exportProgress.get("");if(!_.isUndefined(a)){if(a.isActive()){this.exportView.render();$("#export_button, .export_success, .export_error").hide();$(".export_status").show()}else{if(a.isFailed()){$(".export_success, .export_status").hide();$("#export_button, .export_error").show()}}}else{$(".export_success, .export_error, .export_status").hide();$("#export_button").show()}},renderExportNotification:function(a){$(".export_success").show()}});App.Views.Apps.New=Backbone.View.extend({events:{"submit form":"createApp"},initialize:function(){this.render()},render:function(){var a=this;setTimeout(function(){a.$(".mini_window").show().addClass("animation")},500);setTimeout(function(){a.$(".mini_window").removeClass("animation")},2000)},createApp:function(){var a=this;var c={};c.parse_app={name:$("#parse_app_name").val(),connectionString:$("#parse_app_connection_string").val()};var b=$("#tango");if(b.length&&b[0].checked){c.tango=true}a.$("button").html("<div class='spinner'></div>").attr("disabled",true);a.$(".spinner").spin("large","#717171").show();$.post("/apps/",c,function(d){if(d.success){a.step2(d)}else{var e=d.error.message;if(d.error.code===159){e="You've created too many apps in the last hour. Please try again later."}$(".errors").text(e).show();a.$("button").html("Create app").attr("disabled",false).removeClass("disabled")}});return false},step2:function(a){var b=this;b.$(".mini_window").css("min-height","650px");b.$(".mini_window").css("margin-top","-325px");b.$(".container").css("min-height","750px");setTimeout(function(){var d=(typeof a.app==="string")?JSON.parse(a.app):a.app;var c=d.dashboardURL;c=c.substr(c.lastIndexOf("/")+1);b.$(".mini_window").html($(JST["apps/_new_app_step2"]({result:a,app:d,slug:c})));b.$(".copy_container input").click(function(f){$(f.target).select();return false})},500)}});App.Views.ProductionMetadata=Backbone.View.extend({events:{"change input[type=checkbox]":"render"},initialize:function(){_.bindAll(this);var a=this;_.each(this.options.prod_metadata,function(b){a.$("#prod_metadata_"+b.platform)[0].checked=true;$("."+b.platform+"_link").val(b.url).show()})},render:function(c){if(!c){return}var a=c.target.id;var b="."+a.substr(a.lastIndexOf("_")+1)+"_link";$(b).toggle(c.target.checked)}});App.Models.Progress=Backbone.Model.extend({isActive:function(){return this.get("status")==="queued"||this.get("status")==="processing"},isFailed:function(){return this.get("status")==="failed"},isSuccess:function(){return this.get("status")==="success"}});App.Collections.ProgressFetcher=Backbone.Collection.extend({fetchLoop:undefined,url:undefined,model:App.Models.Progress,initialize:function(b,a){this.url=a.url;this.on("add remove reset change:status",this.resetFetchLoop);this.resetFetchLoop()},resetFetchLoop:function(){var a=this;if(this.activeModelsCount()===0&&!_.isUndefined(this.fetchLoop)){clearInterval(this.fetchLoop);this.fetchLoop=undefined}if(this.activeModelsCount()>0&&_.isUndefined(this.fetchLoop)){this.fetchLoop=setInterval(function(){a.fetch()},5000);this.fetch()}},fetch:function(){var a=this;$.get(this.url).then(function(b){_(b).each(function(c){a.upsert(c)});a.each(function(d){var c=_(b).where({id:d.id})[0];if(_.isUndefined(c)){a.remove(d)}})})},upsert:function(b){var a=this.get(b.id);if(!_.isUndefined(a)){return a.set(b)}return this.add(b)},activeModelsCount:function(){return this.select(function(a){return a.isActive()}).length}});App.Views.ProgressBar=Backbone.View.extend({className:"progress_status",initialize:function(){_.bindAll(this);this.showMessage=this.options.showMessage;this.model.on("change:progress change:message change:status",this.render);this.markers=this.options.markers||15;this.createView()},render:function(){var a=this;if(this.model.isActive()){this.$el.show();if(this.showMessage){this.$(".progress_message").html(this.model.get("message"))}this.progressBar.setProgress(this.model.get("progress"))}else{this.$el.hide()}return this},createView:function(){this.$el.html("<div class='progress_bar'></div><div class='progress_message'></div>");this.progressBar=new UI.ProgressBar({parent:this.$(".progress_bar")[0],markers:this.markers})}});App.Views.CopyButton=Backbone.View.extend({initialize:function(){this.text=this.options.text;this.extendedHeight=this.options.extendedHeight;this.elem_id=this.options.id},render:function(){var a=this;var c=$("#"+this.elem_id);c.attr("data-clipboard-text",this.text);var b=new ZeroClipboard(c);ZeroClipboard.config({forceHandCursor:true});b.on("complete",function(d,h){var e=$(this);var f=e.html();e.html("Copied!");setTimeout(function(){e.html(f)},3000)})}});App.Views.CreditCards.Type=Backbone.View.extend({events:{"blur .card-number":"switchType","keyup .card-number":"switchType"},getCreditCardType:function(b){var a="unknown";if(/^5[1-5]/.test(b)){a="mastercard"}else{if(/^4/.test(b)){a="visa"}else{if(/^3[47]/.test(b)){a="amex"}}}return a},switchType:function(b){var c=$(".card-number").val();type=this.getCreditCardType(c);var a=$(".card-number").attr("data-type");switch(type){case"mastercard":if(a!=="mastercard"){$(".card_icon").fadeOut(300);setTimeout(function(){$(".card_icon").attr("src","/images/accounts/mastercard.png").fadeIn(300)},500)}break;case"visa":if(a!=="visa"){$(".card_icon").fadeOut(300);setTimeout(function(){$(".card_icon").attr("src","/images/accounts/visa.png").fadeIn(300)},500)}break;case"amex":if(a!=="amex"){$(".card_icon").fadeOut(300);setTimeout(function(){$(".card_icon").attr("src","/images/accounts/american_express.png").fadeIn(300)},500)}break;default:if(a!=="unknown"&&a!==null){$(".card_icon").fadeOut(300);setTimeout(function(){$(".card_icon").attr("src","/images/accounts/credit_cards_icon.png").fadeIn(300)},500)}}$(".card-number").attr("data-type",type)},render:function(c){if(this.timer){clearTimeout(this.timer)}var a=this;var b=this.$(".inner");b.html("").html(c);$(this.el).css("visibility","visible");$(this.el).css("display","block");this.timer=setTimeout(function(){a.dismiss()},7000)}});CustomersPage=(function(){var d=function(e){return e.replace("http://","https://s3.amazonaws.com/")};var b=function(f,e){var j=[];for(var h=0;h<f.length;h++){var k=e+"_"+h;j.push(UI.tag("input",{type:"radio",name:e,id:k,checked:h===0,value:f[h]}));j.push(UI.tag("label",{htmlFor:k},f[h]))}return UI.tag("div",{className:"dropdown_filter",tabIndex:"-1"},j)};var a=function(k){var j=[];var f=k.get("logo")||k.get("appIcon");if(!f){return null}var l=k.get("blogpost")?"View Customer Story":"View Web Site";var h=k.get("blogpost")||k.get("website");if(h&&h.indexOf("http")!==0){h="http://"+h}var e=UI.tag("a",{className:"customer_square"},[UI.tag("img",{src:d(f.url())}),UI.tag("div",{},l)]);if(h){e.href=h;e.target="_blank"}return e};var c=function(){var l=document.getElementById("hero_loop");var h=document.getElementById("customer_video");var f=document.getElementById("play_video");var n=document.getElementsByClassName("close_video")[0];l.addEventListener("loadeddata",function(r){r.target.style.display="block"});h.addEventListener("loadeddata",function(r){f.style.display="inline-block"});h.addEventListener("click",function(r){if(h.paused){h.play()}else{h.pause()}});f.addEventListener("click",function(r){l.pause();UI.addClass(h.parentNode,"playing");UI.addClass(document.getElementsByClassName("marketing_header")[0],"hidden");n.style.display="block";h.style.display="block";h.play();r.preventDefault()});var q=function(r){h.pause();h.style.display="none";UI.removeClass(h.parentNode,"playing");l.play();UI.removeClass(document.getElementsByClassName("marketing_header")[0],"hidden");n.style.display="none";r.preventDefault()};n.addEventListener("click",q);h.addEventListener("ended",q);var e=document.getElementById("customers_grid");var k=e.parentNode;var m=null;var o=document.getElementById("horiz_scroll");o.addEventListener("mousedown",function(u){var s=u.clientX;if(m===null){m=parseInt(e.style.width,10)}var t=parseInt(o.style.left||"0",10);var r=function(w){t+=w.clientX-s;s=w.clientX;t=Math.min(Math.max(t,0),280);o.style.left=t+"px";var x=t/280;var v=m-k.clientWidth;if(v<0){v=0}e.style.marginLeft=-(v*x)+"px"};window.addEventListener("mousemove",r);window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",r)})});var j=new Parse.Query("Customer");j.limit(250).find().then(this.loadCustomers.bind(this));var p=new Parse.Query("Customer");p.equalTo("isFeatured",true);p.limit(3);p.find().then(this.loadFeatured)};c.prototype={loadCustomers:function(p){var t=Math.ceil(p.length/3);var s=document.createDocumentFragment();this.categories={};this.regions={};p=_.shuffle(p);this.squares=[];this.productSquares={core:[],push:[],analytics:[]};for(var n=0;n<p.length;n++){if(p[n].get("category")){var q=p[n].get("category");if(!this.categories[q]){this.categories[q]=[n]}else{this.categories[q].push(n)}}if(p[n].get("region")){var f=p[n].get("region");if(!this.regions[f]){this.regions[f]=[n]}else{this.regions[f].push(n)}}var h=p[n].get("products");if(h){for(var m=0;m<h.length;m++){if(h[m]&&this.productSquares[h[m].toLowerCase()]){this.productSquares[h[m].toLowerCase()].push(n)}}}var r=a(p[n]);this.squares[n]=r;if(r){s.appendChild(r)}}var e=document.getElementById("customers_grid");e.style.width=t*156+80+"px";e.appendChild(s);var l=Object.keys(this.categories);l.sort();var o=b(["All"].concat(l),"app_category");o.style.width="210px";document.getElementById("category_filter").appendChild(o);document.getElementById("product_filter").addEventListener("change",this.updateFilters.bind(this));document.getElementById("category_filter").addEventListener("change",this.updateFilters.bind(this));var k=document.getElementById("region_filter");k.addEventListener("change",this.updateFilters.bind(this));if(Trait&&Trait.isSafari){UI.delegate("change",o,"input",function(){o.blur()});UI.delegate("change",k,"input",function(){k.lastElementChild.blur()})}document.getElementsByClassName("customers")[0].style.display="block"},loadFeatured:function(f){var j=document.getElementsByClassName("customer_highlights")[0].getElementsByTagName("a");for(var e=0;e<f.length;e++){j[e].getElementsByClassName("name")[0].appendChild(document.createTextNode(f[e].get("name")));var h=f[e].get("featuredIcon")||f[e].get("logo");if(h){j[e].getElementsByClassName("icon")[0].style.backgroundImage="url("+d(h.url())+")"}if(f[e].get("featuredPhoto")){j[e].style.backgroundImage="url("+d(f[e].get("featuredPhoto").url())+")"}j[e].href=f[e].get("blogpost");j[e].style.display="block"}},getFilters:function(){var h={products:[]};var j=document.getElementById("product_filter").getElementsByTagName("input");var f;for(f=0;f<j.length;f++){if(j[f].checked){h.products.push(j[f].value)}}var k=document.getElementById("category_filter").getElementsByTagName("input");for(f=0;f<k.length;f++){if(k[f].checked){h.category=k[f].value;break}}var e=document.getElementById("region_filter").getElementsByTagName("input");for(f=0;f<e.length;f++){if(e[f].checked){h.region=e[f].value;break}}return h},updateFilters:function(){var k=this.getFilters();for(var f=0;f<this.squares.length;f++){if(!this.squares[f]){continue}var h=true;if(k.products.length===3){h=false}else{for(var e=0;e<k.products.length;e++){if(this.productSquares[k.products[e]].indexOf(f)>-1){h=false;break}}}if(!h&&k.category!=="All"){if(this.categories[k.category].indexOf(f)<0){h=true}}if(!h&&k.region!=="All"){if(this.regions[k.region].indexOf(f)<0){h=true}}UI.toggleClass(this.squares[f],"disabled",h)}}};return c})();App.Views.EditAccountForm=Backbone.View.extend({url:"/account",type:"PUT",redirect:"account/edit",events:{"submit .edit_user":"submitForm"},initialize:function(){this.$(".spinner").hide().spin("large","#717171");this.$(".errors").hide();this.$(".success_box").hide()},submitForm:function(c){var a=this;this.$(".spinner").show();var b={user:{name:this.$("#user_name").val(),title:this.$("#user_title").val(),company_name:this.$("#user_company_name").val(),email:this.$("#user_email").val(),password:this.$("#user_password").val(),},confirm_password:this.$("#confirm_password").val(),};a.$(".spinner").show();$.ajax("/account",{dataType:"json",type:"PUT",data:b,success:function(d){if(d.success){a.succeed()}else{a.fail(d.errors)}},error:function(d){var e=JSON.parse(d.responseText).errors;a.fail(e)}});return false},succeed:function(){var a=this;this.$(".success_box").show();$(window).click(function(){if(a.$(".success_box").is(":visible")){a.$(".success_box").hide()}});this.$("#submit_info").removeAttr("disabled").removeClass("disabled");this.$(".spinner").hide()},fail:function(b){var a=this;this.$(".modal_errors").html("").show();_(b).each(function(c){var d=$("<p></p>");d.text(c);a.$(".modal_errors").append(d)});$(window).click(function(){if(a.$(".modal_errors").is(":visible")){a.$(".modal_errors").hide()}});this.$("#submit_info").removeAttr("disabled").removeClass("disabled");this.$(".spinner").hide();this.$("#confirm_password").val("").blur()},removeInvalidClass:function(a){$(a.target).removeClass("invalid")},render:function(){var a=this},});var EntryPoint=(function(){var s=["aol.com","att.net","bellsouth.net","btinternet.com","comcast.net","cox.net","earthlink.net","gmail.com","gmx.com","gmx.de","hotmail.com","hotmail.co.uk","hotmail.de","hotmail.fr","live.com","live.co.uk","live.fr","mail.ru","naver.com","o2.co.uk","orange.net","orange.fr","sbcglobal.net","sina.com","sky.com","verizon.net","virgin.net","virginmedia.com","yahoo.com","yahoo.co.id","yahoo.co.in","yahoo.co.jp","yahoo.co.kr","yahoo.co.ph","yahoo.co.sp","yahoo.co.uk","yahoo.fr","yandex.ru",];var l={};for(var h=s.length;h--;){var r=s[h].split(".");var m=r.shift();var e=r.join(".");var a=l[m];if(!a){l[m]=[e]}else{a.push(e)}}window.domainMap=l;function b(D,B,v,u){var z=D.length;var x=B.length;var C=0;var A=0;var y=0;var t=0;while(C<z&&A<x){if(D.charAt(C)===B.charAt(A)){t++}else{y+=t;t=0;if(C!==A){C=A=Math.max(C,A)}for(var w=0;w<v;w++){if(C+w<z&&D.charAt(C+w)===B.charAt(A)){C+=w;t++;break}if(A+w<x&&D.charAt(C)===B.charAt(A+w)){A+=w;t++;break}}}C++;A++}y+=t;return Math.round(Math.max(z,x)-y)}var q=/^([^@<>\s]+)@([^@<>\s]{2,}\.[^@<>\s]{2,})$/;function f(B,G){var x=B.match(q);if(!x){return false}var y=x[2].toLowerCase();var D=y.split(".").shift();var H=Infinity;var t="";var z=Object.keys(l);var w;var C;for(w=z.length;w--;){C=b(D,z[w],4);if(C<H&&C<z[w].length-1){H=C;t=z[w]}if(C===0){break}}if(H>3||(!G&&H===0)){return true}var u=t;var E=H;H=Infinity;var v=l[t];for(w=v.length;w--;){var F=[u,v[w]].join(".");C=b(y,F,3);if(C<H){H=C;t=F}}var A=E+H;if(A===0||A>3){return true}return[x[1],t].join("@")}var o={az:26,AZ:26,num:10,sym:33};function n(w){if(w.length<8){return 0}var u={az:false,AZ:false,num:false,sym:false};for(var x=w.length;x--;){var z=w.charCodeAt(x);if(z>47&&z<58){u.num=true}else{if(z>64&&z<91){u.AZ=true}else{if(z>96&&z<123){u.az=true}}}}var t=0;for(var y in u){if(u[y]){t+=o[y]}}var v=Math.log(t)/Math.log(2)*w.length;return(v>60?2:1)}function j(u,w){var t=u.parentNode;var v=t.getElementsByClassName("error_message")[0];v.innerHTML=w;UI.addClass(v,"visible")}function k(v,w){var y=false;for(var x in w){var u=document.getElementById(x);var t=w[x](u.value);if(typeof t==="string"){if(!y){j(v,t);y=true}UI.addClass(u.parentNode,"error")}else{UI.removeClass(u.parentNode,"error")}}return !y}var d=["poor","okay","great"];var c=[];function p(){while(c.length){var t=c.shift();t.el.removeEventListener(t.event,t.fn)}}return({watchEmail:function(w){var v=w.getElementsByTagName("input")[0];var u=w.nextElementSibling.getElementsByTagName("a")[0];var t=function(y){var x=f(this.value,y);if(typeof x==="string"){u.innerHTML=x;UI.addClass(w,"suggest")}else{UI.removeClass(w,"suggest")}};v.addEventListener("input",t.bind(v,false));v.addEventListener("change",t.bind(v,true));u.addEventListener("click",function(){v.value=u.innerHTML;UI.removeClass(w,"suggest")})},watchPassword:function(u){var t=u.getElementsByTagName("input")[0];var v=u.getElementsByClassName("strength")[0];t.addEventListener("input",function(){var w=n(this.value);v.className="strength "+d[w]})},validate:function(x,A){p();var w=x.parentNode;var y=w.getElementsByClassName("submit")[0];var t=function(B){if(B){B.preventDefault()}if(k(x,A)){x.submit()}};var v=function(B){if(B.keyCode===13){t(B)}};x.addEventListener("keydown",v);c.push({el:x,event:"keydown",fn:v});y.addEventListener("click",t);c.push({el:y,event:"click",fn:t});var u=document.getElementsByClassName("error_message")[0];var z=function(){u.className="error_message"};x.addEventListener("input",z);c.push({el:x,event:"input",fn:z})},clearListeners:p})})();App.Views.Home.CodeBlock=Backbone.View.extend({platforms:["ios","android","curl","javascript","windows"],initialize:function(){var a=this;this.selector=this.$el.next(".selector");this.selector.find("li").click(function(f){var d=$(f.target);var c=d.attr("href");if(!c){c=$(d).parent().attr("href")}var b=c.substr(1,c.length);if(_(a.platforms).indexOf(b)!==-1){a.selector.find("li").removeClass("selected");d.closest("li").addClass("selected");a.$(".platform").hide();a.$("."+b).show()}return false})}});App.Views.Home.Iot.CodeBlock=Backbone.View.extend({platforms:["arduino","c"],initialize:function(){var a=this;this.selector=this.$el.next(".selector");this.selector.find("li").click(function(f){var d=$(f.target);var c=d.attr("href");var b=c.substr(1,c.length);if(_(a.platforms).indexOf(b)!==-1){a.selector.find("li").removeClass("selected");d.closest("li").addClass("selected");a.$(".platform").hide();a.$("."+b).show()}return false});this.render()},render:function(){}});App.Views.Home.Main=Backbone.View.extend({initialize:function(){var a=this;$(document).ready(function(){a.renderCards(["home_0","home_1","home_2"])})},renderCards:function(d){var b=this;var a=ParseDotCom.Object.extend("ContentCard");var c=new ParseDotCom.Query(a);c.containedIn("location",d);c.ascending("location");c.find().then(function(e){if(e.length){var f=$(".content_cards").first();_.each(e,b.renderCard.bind(b,f));f.show()}})},renderCard:function(c,b){var a=App.Views.Home.Main.CardMarkup[b.get("type")];if(a){c.append(a(b))}}},{CardMarkup:[function(b){var c=b.get("image")?b.get("image").url().replace(/http:\/\//,"https://s3.amazonaws.com/"):"";var a=b.get("subhead")||false;if(a){a="<span>"+b.get("subhead")+"</span>"}else{a=""}return'<a href="'+b.get("link")+'" class="content_card"><div class="card_image"><img src="'+c+'"/></div><h2>'+b.get("title")+"</h2>"+a+"</a>"},function(a){var b=moment(a.get("date"));return'<a href="'+a.get("link")+'" class="content_card cc_calendar"><h2>'+a.get("title")+'</h2><div class="card_image"><div class="calendar"><div class="month">'+b.format("MMMM")+'</div><div class="day">'+b.format("D")+"</div></div></div></a>"}]});App.Views.Home.SignupForm=Backbone.View.extend({url:"/users",type:"POST",redirect:"/apps/onboard",events:{"submit .firststep .new_user":"submitStep1","submit .secondstep .new_user":"submitStep2","click .close":"closeEvent","focus .signup_field":"removeInvalidClass","blur #user_email":"tryLoadingGravatar","change #company_type":"renderCompanyInfoFields"},initialize:function(){this.errors1=this.$(".errors1");this.errors2=this.$(".errors2");if(this.options.redirect_url){this.redirect=this.options.redirect_url}this.$(".spinner").hide().spin("large","#717171");this.options.signup_flow.on("change:stage",this.signupFlowChanged,this);this.content_class=this.options.content_class},submitStep1:function(f){var b=this;var d=true;_.each(this.$(".firststep .new_user:first").find(".signup_field"),function(e){if(Util.isStringBlank($(e).val())){d=false;$(e).addClass("invalid")}});if(!d){this.$(".submit").removeAttr("disabled").removeClass("disabled");return false}var c={user:{name:this.$("#user_name").val(),email:this.$("#user_email").val(),password:this.$("#user_password").val(),signup_type:this.$("#user_signup_type").val()}};var a=this.$("#box_user_language").val();var h=this.$("#box_user_api_key").val();if(a&&h){c.box_user={language:a,api_key:h}}this.$(".submit").attr("disabled","disabled").addClass("disabled");this.$(".firststep .spinner").show();$.ajax(this.url,{dataType:"json",type:"POST",data:c,success:function(e){if(e.errors){b.errors1.html("").show();_(e.errors).each(function(j){var k=$("<p></p>");b.errors1.append(k);k.text(j)});$("body").click(function(){if(b.errors1.is(":visible")){b.errors1.hide()}});b.$(".submit").removeAttr("disabled").removeClass("disabled");b.$(".firststep .spinner").hide()}else{b.showSignupSecondStep();b.addFBConversionPixel(e.user_id);b.addTwitterConversionPixel();ParseDotCom.Analytics.track("Signed Up 2");ParseDotCom.Analytics.track("$born");_gaq.push(["_trackEvent","user","signup"]);Marketo.associateLead({Email:c.user.email,Name:c.user.name,Sign_Up_Date__c:(new Date()).toJSON(),MarketoHash:e.marketo_hash});Marketo.triggerEvent("SignUp");b.marketoHash=e.marketo_hash;b.marketoEmail=c.user.email}}});return false},submitStep2:function(h){var b=this;var f=true;var j=this.$("#company_type").val()==="individual";_.each(this.$(".secondstep .new_user:first").find(".signup_field"),function(e){var k=$(e).attr("id")==="user_company_name"||$(e).attr("id")==="user_title";if(Util.isStringBlank($(e).val())&&!(j&&k)){f=false;$(e).addClass("invalid")}});if(!f){this.$(".getStarted").removeAttr("disabled").removeClass("disabled");return false}var a=this.$("#parse_app_name").val();var c=this.$("#company_type").val();var d={user:{company_type:c}};if(!j){d.user.company_name=this.$("#user_company_name").val();d.user.title=this.$("#user_title").val()}d.parse_app={name:a};this.$(".getStarted").attr("disabled","disabled").addClass("disabled");this.$(".secondstep .spinner").show();Marketo.associateLead({Email:b.marketoEmail,Company:d.user.company_name,Company_Type__c:d.user.company_type,Title:d.user.title,MarketoHash:b.marketoHash});$.ajax("/account",{dataType:"json",type:"PUT",data:d,success:function(e){if(e.errors){b.errors2.html("").show();_(e.errors).each(function(l){var m=$("<p></p>");b.errors2.append(m);m.text(l)});$("body").click(function(){if(b.errors2.is(":visible")){b.errors2.hide()}});b.$(".getStarted").removeAttr("disabled").removeClass("disabled");b.$(".secondstep .spinner").hide()}else{b.$(".secondstep .spinner").hide();ParseDotCom.Analytics.track("Signed Up 2 - Filled Information");FBEvent.log("signup_complete");if(b.options.next_url){window.location=b.options.next_url}else{if(e.app){var k=b.redirect;if(b.redirect.indexOf("?")==-1){k+="?"}else{k+="&"}window.location=k+"app_id="+e.app.friendly_id}else{window.location=b.redirect}}}}});return false},closeEvent:function(a){if(Parse.history){Parse.history.navigate("",{replace:true})}this.options.signup_flow.set("stage",0);$(".show_signup").removeClass("disabled");this.$el.hide("drop",{direction:"up",duration:200});$("#slides, .call_to_action_section .call_to_action_content, #header .inner").removeClass("blurry_effect");$(this.content_class).show();return false},signupFlowChanged:function(){var a=this.options.signup_flow.get("stage");if(a===1){FBEvent.log("signup_start");this.showSignup();$(".show_signup").addClass("disabled")}else{if(a===2){this.showSignup();this.showSignupSecondStep()}}},showSignup:function(){$(this.content_class).hide();this.$el.show("drop",{direction:"up",duration:200});$("#slides, .call_to_action_section .call_to_action_content, .p_home #header .inner").addClass("blurry_effect");var a=new Image();a.src="https://ad.atdmt.com/m/img;m=11002201328825;cache=?page_name=parse_signup_start"},showSignupSecondStep:function(){this.$(".firststep").hide();this.$(".secondstep").show();this.$(".conditions").show();this.options.signup_flow.set("stage",2);FBEvent.log("signup_step_2")},addFBConversionPixel:function(c){var a=document.createElement("script");a.type="text/javascript";a.text=JST["fb_conversion/sign_up"]({});document.body.appendChild(a);var e=document.createElement("noscript");e.innerHTML='<img height="1" width="1" alt="" style="display:none" src="https://www.facebook.com/offsite_event.php?id=6010887695824&amp;value=0&amp;currency=USD" />';document.body.appendChild(e);var b=new Image();b.src="http://em.facebookmail.com/pub/cct?_ri_=X0Gzc2X%3DWQpglLjHJlYQGN2ApNlgkzczefONXkGRlhGJR&_ei_=EuUn5NEBhTqI7amliSQF4PM";if(!_.isUndefined(c)){var d=new Image();d.src="https://ad.atdmt.com/m/img;m=11002201328825;cache=?page_name=parse_signup_conf&parse_uid="+c}_gaq.push(["_trackEvent","Registration","Signup","RegisterParse"])},addTwitterConversionPixel:function(){twttr.conversion.trackPid("l4ka4");var a=document.createElement("noscript");a.innerHTML='<img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=l4ka4&p_id=Twitter" /><img height="1" width="1" style="display:none;" alt="" src="//t.co/i/adsct?txn_id=l4ka4&p_id=Twitter" />';document.body.appendChild(a)},removeInvalidClass:function(a){$(a.target).removeClass("invalid")},tryLoadingGravatar:function(b){var a=$("#user_email").val();if(a!==""){$(".gravatar").css("background-image","url(https://secure.gravatar.com/avatar/"+md5(a)+"?default=https://www.parse.com/images/home/no_avatar.png)").show()}else{$(".gravatar").css("background-image","none").hide()}},fillFormFields:function(a){if(a.get("name")){this.$("#user_name").val(a.get("name"))}if(a.get("email")){this.$("#user_email").val(a.get("email"))}if(a.get("company_name")){this.$("#user_company_name").val(a.get("company_name"))}if(a.get("title")){this.$("#user_title").val(a.get("title"))}},renderCompanyInfoFields:function(a){if(this.$("#company_type").val()==="individual"){this.$("#user_company_name").hide();this.$("#user_title").hide()}else{this.$("#user_company_name").show();this.$("#user_title").show()}}});App.Views.Home.Windows.CodeBlock=Backbone.View.extend({platforms:["csharp","vb","javascript"],initialize:function(){var a=this;this.selector=this.$el.next(".selector");this.selector.find("li").click(function(f){var d=$(f.target);var c=d.attr("href");var b=c.substr(1,c.length);if(_(a.platforms).indexOf(b)!==-1){a.selector.find("li").removeClass("selected");d.closest("li").addClass("selected");a.$(".platform").hide();a.$("."+b).show()}return false});this.render()},render:function(){}});App.Views.Migration.UrbanAirshipMigrator=Backbone.View.extend({events:{"click .migrate_button":"openSignInModal",},initialize:function(){this.appNames=this.options.appNames;this.appSlugs=this.options.appSlugs;this.windowSize();var a=_.throttle(this.windowSize,100);$(window).resize(a)},windowSize:function(){var a=$(window).height();if(a<700){a=700}$(".top_section").css("height",a)},openSignInModal:function(){new UI.Modal({title:"Migrate to Parse",className:"migration_modal",template:JST["migration/_sign_in"]({email:App.currentUser?App.currentUser.get("email"):""})});modal=document.getElementsByClassName("migration_modal")[0];this.modalContent=modal.getElementsByClassName("modal_content")[0];var e=this.modalContent.getElementsByClassName("signup")[0];var c=this.modalContent.getElementsByClassName("login")[0];var a=this.modalContent.getElementsByClassName("continue")[0];var b=this.modalContent.getElementsByClassName("login_text")[0];var d=this.modalContent.getElementsByClassName("continue_text")[0];if(App.currentUser){UI.addClass(e,"hidden");UI.addClass(c,"hidden");UI.addClass(b,"hidden");a.addEventListener("click",this.openUAKeysModal.bind(this))}else{UI.addClass(a,"hidden");UI.addClass(d,"hidden");e.addEventListener("click",this.openSignupView.bind(this));c.addEventListener("click",this.openLoginView.bind(this))}return false},openUAKeysModal:function(){this.modalContent.innerHTML=JST["migration/_ua_keys"]();var b=this.modalContent.getElementsByClassName("verify")[0];var d=this.modalContent.getElementsByClassName("close")[0];b.addEventListener("click",this.verifyUAKeys.bind(this));d.addEventListener("click",this.closeModal);var c=new Spinner({lines:30,length:4,width:6,radius:44,color:"#5298fc",corners:0,}).spin();var a=this.modalContent.getElementsByClassName("spinner_container")[0];a.appendChild(c.el)},verifyUAKeys:function(){var d=this;var f=this.modalContent.getElementsByClassName("errors_box")[0];f.textContent="";var b=this.modalContent.getElementsByTagName("input");var a=b[0];var h=a.value;a.addEventListener("focus",function(){UI.removeClass(a.parentNode,"error")});var e=b[1];var c=e.value;e.addEventListener("focus",function(){UI.removeClass(e.parentNode,"error")});if(h&&c){this.showSpinnerSlide();$.get("/migrate/urban_airship_device_types",{appKey:h,masterKey:c}).then(function(j){d.hideSpinnerSlide();if(j.success){d.appKey=h;d.masterKey=c;d.ios=j.ios;d.android=j.android;if(!j.ios&&!j.android){f.textContent="We found an Urban Airship app with those keys, but it did not have any installations to import. Please check your keys.";UI.addClass(a.parentNode,"error");UI.addClass(e.parentNode,"error")}else{if(j.android){d.openAndroidKeysModal()}else{d.openAppSelection()}}}else{if(j.error==="Unauthorized"){f.textContent="There was a problem with your keys. Please check them and try again.";UI.addClass(a.parentNode,"error");UI.addClass(e.parentNode,"error")}else{f.textContent=j.error}}})}else{if(c){f.textContent="Please enter your App Key.";UI.addClass(a.parentNode,"error")}else{if(h){f.textContent="Please enter your App Master Secret.";UI.addClass(e.parentNode,"error")}else{f.textContent="Please enter your Urban Airship Keys.";UI.addClass(a.parentNode,"error");UI.addClass(e.parentNode,"error")}}}},openAndroidKeysModal:function(){var b=this;this.modalContent.innerHTML=JST["migration/_android_keys"]();var c=this.modalContent.getElementsByClassName("verify")[0];var e=this.modalContent.getElementsByClassName("close")[0];c.addEventListener("click",this.verifyAndroidKeys.bind(this));e.addEventListener("click",this.closeModal);var d=new Spinner({lines:30,length:4,width:6,radius:44,color:"#5298fc",corners:0,}).spin();var a=this.modalContent.getElementsByClassName("spinner_container")[0];a.appendChild(d.el)},verifyAndroidKeys:function(){var e=this;var f=this.modalContent.getElementsByClassName("errors_box")[0];f.textContent="";var d=this.modalContent.getElementsByTagName("input");var c=d[0];var b=c.value;c.addEventListener("focus",function(){UI.removeClass(c.parentNode,"error")});var a=d[1];var h=a.value;a.addEventListener("focus",function(){UI.removeClass(a.parentNode,"error")});if(b&&h){this.showSpinnerSlide();$.get("/migrate/urban_airship_verify_android_keys",{gcmKey:b,senderID:h}).then(function(j){e.hideSpinnerSlide();if(j.success){e.gcmKey=b;e.senderID=h;e.openAppSelection()}else{if(j.gcm_key_is_invalid&&j.sender_id_is_invalid){f.textContent="There was a problem with your keys. Please check them and try again.";UI.addClass(c.parentNode,"error");UI.addClass(a.parentNode,"error")}else{if(j.gcm_key_is_invalid){f.textContent="There was a problem with your Google API Key. Please check it and try again.";UI.addClass(c.parentNode,"error")}else{if(j.sender_id_is_invalid){f.textContent="There was a problem with your Google API Project Number. Please check it and try again.";UI.addClass(a.parentNode,"error")}}}}})}else{if(h){f.textContent="Please enter your Google API Key.";UI.addClass(c.parentNode,"error")}else{if(b){f.textContent="Please enter your Google API Project Number.";UI.addClass(a.parentNode,"error")}else{f.textContent="Please enter both of your Google Keys.";UI.addClass(c.parentNode,"error");UI.addClass(a.parentNode,"error")}}}},openAppSelection:function(){var p=this;this.modalContent.innerHTML=JST["migration/_app_selection"]({deviceCount:this.ios_device_count,appNames:this.appNames,appSlugs:this.appSlugs});var e=this.modalContent.getElementsByClassName("import")[0];var c=this.modalContent.getElementsByClassName("close")[0];var m=this.modalContent.getElementsByClassName("bottom_buttons")[0];var f=this.modalContent.getElementsByClassName("errors_box")[0];var a=this.modalContent.getElementsByClassName("ua_box")[0];if(!p.ios){UI.addClass(a,"no_ios")}if(!p.android){UI.addClass(a,"no_android")}var l=this.modalContent.getElementsByClassName("apps")[0];var j=this.modalContent.getElementsByClassName("create_app")[0];var o=this.modalContent.getElementsByClassName("create_dialog")[0];var b=new Spinner({lines:15,length:2,width:4,radius:18,color:"#5298fc",corners:0,}).spin();m.appendChild(b.el);UI.addClass(b.el,"hidden");e.addEventListener("click",function(){f.textContent="";var s=l.querySelector('input[name="app"]:checked');if(!s){f.textContent="Please choose an app.";return}UI.removeClass(b.el,"hidden");var r=s.id.slice(4);$.post("/apps/"+r+"/import_ua",{ua_username:p.appKey,ua_password:p.masterKey,gcm_sender_id:p.senderID}).then(function(t){UI.addClass(b.el,"hidden");if(t.success){p.showImportConfirmation(r);$.post("/migrate/add_gcm_creds",{slug:r,gcmKey:p.gcmKey,senderID:p.senderID})}else{f.textContent=t.error}})});c.addEventListener("click",this.closeModal);j.addEventListener("click",function(){UI.removeClass(o,"hidden")});if(this.appNames.length===0){UI.removeClass(o,"hidden")}var n=new Spinner({lines:15,length:2,width:4,radius:18,color:"#5298fc",corners:0,}).spin();o.appendChild(n.el);UI.addClass(n.el,"hidden");var d=o.getElementsByClassName("create_cancel")[0];var q=o.getElementsByClassName("create_submit")[0];var k=o.getElementsByTagName("input")[0];var h=o.getElementsByClassName("create_error")[0];d.addEventListener("click",function(){k.value="";h.textContent="";UI.addClass(o,"hidden")});q.addEventListener("click",function(){var r=k.value;if(r){h.textContent="";UI.removeClass(n.el,"hidden");$.post("/apps",{parse_app:{name:r}}).then(function(v){UI.addClass(n.el,"hidden");if(v.success){var s=v.app.friendly_id;var u=UI.tag("input",{type:"radio",name:"app",id:"app_"+s,checked:true});var t=UI.tag("label",{htmlFor:"app_"+s},[r,UI.tag("div",{className:"radio_button"})]);l.insertBefore(t,l.firstChild);l.insertBefore(u,l.firstChild);l.scrollTop=0;k.value="";UI.addClass(o,"hidden")}else{h.textContent=v.errors[0]}})}else{h.textContent="app name required"}})},showImportConfirmation:function(a){this.modalContent.innerHTML=JST["migration/_import_confirmation"]({slug:a})},openLoginView:function(b){var a=this;new UI.Modal({title:"Log in to Parse",className:"login_modal",template:JST["home/_login_modal_pure"](),init:function(){var d=$(this.node);var e=this.node;var c=e.getElementsByClassName("modal_content")[0];var f=UI.tag("div",{className:"errors_box"});c.appendChild(f);var h=new Spinner({lines:10,length:3,width:4,radius:8,color:"#FFFFFF",corners:0,}).spin();c.appendChild(h.el);UI.addClass(h.el,"hidden");a.populateCSRFMeta(d);d.find("a.submit_button").click(function(k){var j=k.target;UI.removeClass(h.el,"hidden");UI.addClass(j,"has_spinner");f.innerHTML="";$.post("/user_session",d.find("form").serialize()).then(function(l){UI.addClass(h.el,"hidden");UI.removeClass(j,"has_spinner");if(l.success){a.appNames=l.app_names;a.appSlugs=l.app_slugs;e.parentNode.removeChild(e);a.openUAKeysModal()}else{_.each(l.errors,function(m){f.appendChild(UI.tag("div",{className:"error"},m))})}})})}})},openSignupView:function(b){var a=this;new UI.Modal({title:"Sign up for Parse",className:"signup_modal",template:JST["home/_signup_modal_pure"](),init:function(){var d=$(this.node);var e=this.node;var c=e.getElementsByClassName("modal_content")[0];var f=UI.tag("div",{className:"errors_box"});c.appendChild(f);var h=new Spinner({lines:10,length:3,width:4,radius:8,color:"#FFFFFF",corners:0,}).spin();c.appendChild(h.el);UI.addClass(h.el,"hidden");a.populateCSRFMeta(d);d.find("a.submit_button").click(function(k){var j=k.target;UI.removeClass(h.el,"hidden");UI.addClass(j,"has_spinner");f.innerHTML="";$.post("/users",d.find("form").serialize()).then(function(l){UI.addClass(h.el,"hidden");UI.removeClass(j,"has_spinner");if(l.success){e.parentNode.removeChild(e);a.openUAKeysModal()}else{_.each(l.errors,function(m){f.appendChild(UI.tag("div",{className:"error"},m))})}})})}})},populateCSRFMeta:function(b){var a=$('meta[name="csrf-token"]').attr("content");b.find('input[name="authenticity_token"]').val(a)},showSpinnerSlide:function(){var a=this.modalContent.getElementsByClassName("spinner_container")[0];UI.removeClass(a,"hidden")},hideSpinnerSlide:function(){var a=this.modalContent.getElementsByClassName("spinner_container")[0];UI.addClass(a,"hidden")},closeModal:function(){UI.removeClass(document.body,"modal_open");var a=document.getElementsByClassName("modal_layer")[0];a.parentNode.removeChild(a)}});App.Views.Mobile.Products=Backbone.View.extend({events:{},initialize:function(){this.render()},render:function(){$(document).ready(function(){if($(".mobile").is(":visible")){$(".products_menu .button").click(function(){if(!$(this).hasClass("opened")){$(this).parent().animate({bottom:"-140px"},200);$(this).addClass("opened")}else{$(this).parent().animate({bottom:"-206px"},200);$(this).removeClass("opened")}})}if($(".local_datastore")){$(".card.local_datastore .icon").addClass("on");$(".card.local_datastore .icon").click(function(a){$(this).toggleClass("on")})}})}});App.Views.Mobile.Home.Retina=Backbone.View.extend({events:{},initialize:function(){this.render()},render:function(){$(document).ready(function(){if($(".mobile").is(":visible")){var a=!!window.devicePixelRatio?window.devicePixelRatio:1;if(a>1){$(".section .image, .slide2 .image, .top_section .artwork, .products_menu .button").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace(".jpg","@2x.jpg").replace(".png","@2x.png"));$(this).css("background-size","100%")});$(".big_button .image").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace("128","256"));$(this).css("background-size","85%")});$(".retina").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace(".jpg","@2x.jpg").replace(".png","@2x.png"))});$(".slide2 .box").each(function(b){$(this).css("background-size","90%")});$(".slide2 .build, .slide2 .cloud").each(function(b){$(this).css("background-size","70%")});$("#nav_bar .back").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace(".jpg","@2x.jpg").replace(".png","@2x.png"));$(this).css("background-size","85%")});$(".tappable").each(function(c){var b=$(this).css("background-image");$(this).css("background-image",b.replace(".jpg","@2x.jpg").replace(".png","@2x.png"));$(this).css("background-size","7px")});$(".slide1 img").each(function(b){$(this).attr("src",$(this).attr("src").replace(".jpg","@2x.jpg").replace(".png","@2x.png"))})}}})}});App.Views.Mobile.Home.SignupForm=Backbone.View.extend({url:"/users",type:"POST",redirect:"/home/thanks",events:{"submit .new_user":"submitForm","focus .signup_field":"removeInvalidClass"},initialize:function(){this.errors=$(".errors");if(this.options.redirect_url){this.redirect=this.options.redirect_url}},submitForm:function(j){var m=this;m.errors.html("").hide();var a=true;_.each(this.$(".new_user:first").find(".signup_field"),function(e){if($(e).val().length===0){a=false;$(e).addClass("invalid")}});if(!a){this.$(".submit").removeAttr("disabled").removeClass("disabled");return false}this.$(".submit").attr("disabled","disabled").addClass("disabled");var k=$("#user_name").val();var c=$("#user_email").val();var n=$("#user_password").val();var l=$("#parse_app_name").val();var b=$("#company_type").val();var h=$("#user_company_name").val();var d=$("#user_title").val();if(b===""){b="unknown"}var f={user:{name:k,email:c,password:n,signup_type:$("#user_signup_type").val(),company_type:b,company_name:h,title:d}};f.parse_app={name:l};$(".spinner").show();$.ajax(this.url,{dataType:"json",type:"POST",data:f,success:function(e){if(e.errors){m.errors.html("").show();_(e.errors).each(function(o){var q=$("<p></p>");m.errors.append(q);q.text(o)});$("body").click(function(){if(m.errors.is(":visible")){m.errors.hide()}});$(".submit").removeAttr("disabled").removeClass("disabled");$(".spinner").hide()}else{ParseDotCom.Analytics.track("Signed Up 2",{mobile:"true"});ParseDotCom.Analytics.track("$born");_gaq.push(["_trackEvent","user","signup"]);Marketo.associateLead({Email:c,Name:k,Company:h,Company_Type__c:b,Title:d,Sign_Up_Date__c:(new Date()).toJSON(),MarketoHash:e.marketo_hash});m.marketoHash=e.marketo_hash;m.marketoEmail=c;window.location=m.redirect}},error:function(o,e){m.errors.html("<p>Unfortunately, an error has occurred. Please try again later.</p>").show();$(".submit").removeAttr("disabled").removeClass("disabled");$(".spinner").hide()}});return false},removeInvalidClass:function(a){$(a.target).removeClass("invalid")},render:function(){}});App.Views.Modal=Backbone.View.extend({className:"lightbox",events:{"click .close":"close"},initialize:function(){_.bindAll(this);this.headerTitle=this.options.title;this.template=this.options.template;this.templateOptions=this.templateOptions||{};this.klass=this.options.klass;this.isStatic=this.options.isStatic||false;this.modalOptions=this.options.modalOptions||{}},close:function(a){this.$el.dialog("close");if(typeof this.dispose=="function"){this.dispose()}return false},render:function(){if(this.isStatic){var b=JST[this.template](this.templateOptions);this.$el=JST._static_modal({title:this.headerTitle,content:b,klasses:this.klass,closeButton:false})}else{if(this.template){this.$el.html(JST[this.template]())}var a={modal:true,height:"auto",width:350,title:this.headerTitle,draggable:false,dialogClass:this.klass,resizable:false,show:{effect:"drop",direction:"down"},open:this.afterModalRender,beforeClose:this.beforeModalClose};_.extend(a,this.modalOptions);this.$el.dialog(a)}return this},afterModalRender:function(){},beforeModalClose:function(){}});App.Views.Nagging.Banner=Backbone.View.extend({el:".banner_nag",render:function(){var a=this;$.get("/nagging/banner",function(d){if(d&&!_.isEmpty(d)){var b=0;_.each(d,function(h,f){var e=UI.tag("li",{className:"nag"});if(JST["nagging/_"+f]){e.innerHTML=JST["nagging/_"+f](h);a.el.appendChild(e);ParseDotCom.Analytics.track("nagging_banner",{name:f});b++}});if(b>0){ParseDotCom.Analytics.track("nagging_banner_count",{count:b.toString()});if(a.el.offsetHeight>0){var c=parseInt(window.getComputedStyle(document.body,null).getPropertyValue("padding-top"),10);document.body.style.paddingTop=c+a.el.offsetHeight+"px"}}}})}});var MarketoNewsletterSignup=function(b){var a={};var d={};var c={};d.script="https://marketo-triggers.parseapp.com/newsletter";a.init=function(e){c.$input=e;c.$form=e.closest("form");c.$submit=c.$form.find(".input-button");d.addClickEvent()};d.addClickEvent=function(){c.$form.on({submit:function(h){var f=c.$input.val();var j=d.testEmail(f);if(j===true){d.submitForm(f)}else{d.formInvalid()}return false}})};d.submitForm=function(f){d.udpateButtonText("Sending");var e={email:f};b.ajax({type:"POST",url:d.script,data:e,dataType:"json",error:function(h){d.udpateButtonText("Error");setTimeout(function(){d.udpateButtonText("Sign Up")},1000)},success:function(h){if(h.length>0){var j=h[0].status;if(j==="created"){d.udpateButtonText("Added!")}else{if(j==="skipped"){d.udpateButtonText("Added!")}}}else{d.udpateButtonText("Error");setTimeout(function(){d.udpateButtonText("Sign Up")},1500)}}})};d.formInvalid=function(){d.udpateButtonText("Oops");setTimeout(function(){d.udpateButtonText("Sign Up")},1000)};d.udpateButtonText=function(e){c.$submit.attr("value",e)};d.testEmail=function(f){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(f)};return a};App.Views.Paginate=Backbone.View.extend({className:"pagination",initialize:function(){_.bindAll(this);this.rootUrl=this.options.rootUrl;this.pushState=this.options.pushState||true;this.model.on("change",this.render)},render:function(){this.$el.html(JST._paginate({totalRows:this.model.get("total_rows"),perPage:this.model.get("per_page"),totalPages:Math.ceil(this.model.get("total_rows")/this.model.get("per_page")),currentPage:this.model.get("current_page"),rootUrl:this.rootUrl,pushState:this.pushState}));return this}});App.Views.Platforms.OSX=Backbone.View.extend({initialize:function(){this.render()},render:function(){var a=this.options.el;$(document).ready(function(){if((getInternetExplorerVersion()>5)&&(getInternetExplorerVersion()<10)){$(a).find(".logo div").hide();$(a).find(".logo").html("<img src='/images/icons/osx_512.png' />");$(a).find(".logo").css("border","none")}})}});App.Views.Platforms.WindowsPhone=Backbone.View.extend({windowsPhoneAnimation:function(){var a=this;$(".tiles div").show();$(".tiles div").css("-webkit-transform","rotateX(0deg)");$(".tiles").show();a.$(".logo_screen").css("-webkit-transform","rotateY(90deg)").css("opacity",0);setTimeout(function(){var b=0;$(".tiles div").each(function(c){var d=$(this);b=c*70;setTimeout(function(){$(d).css("-webkit-transform","rotateX(180deg)");setTimeout(function(){$(d).hide()},500)},70*c)});setTimeout(function(){a.$(".tiles").fadeOut();a.$(".logo_screen").css("-webkit-transform","rotateY(0deg)").css("opacity",1)},b+500)},1500)},initialize:function(){this.render()},render:function(){var a=this;$(document).ready(function(){if(((getInternetExplorerVersion()>5)&&(getInternetExplorerVersion()<10))||(is_ios())){a.$(".screen").hide();a.$(".logo_screen").show()}else{setTimeout(function(){a.windowsPhoneAnimation()},500)}})}});(function(b){function a(f){var e=f.toString(10);var c=[];while(e.length){var d=Math.max(e.length-3,0);c.unshift(e.substring(d));e=e.substring(0,d)}return c.join(",")}App.Pricing=function(){if(!b.hasClass(document.body,"p_pricing_plans")){return}var j=document.getElementById("req_slider");var m=document.getElementById("rps");var k=document.getElementById("bgj");var d=document.getElementById("core_cost");var f=function(o){if(o.target.value<30){o.target.value=30}var n=o.target.value/o.target.max*100+"%";o.target.style.backgroundImage="linear-gradient(90deg, #5298fc "+n+", #b0b8bf "+n+")";m.innerHTML=o.target.value+(o.target.value===o.target.max?"+":"");k.innerHTML=~~((o.target.value-30)/20)+1;var p=(o.target.value-30)*10;d.innerHTML=(p<=0?"Free":"$"+a(p))+(o.target.value===o.target.max?"+":"")};j.addEventListener("input",f);j.addEventListener("change",f);var e=document.getElementById("push_recipients");var c=document.getElementById("push_cost");var l=function(o){if(o.target.value<10){o.target.value=10}var n=o.target.value/o.target.max*100+"%";o.target.style.backgroundImage="linear-gradient(90deg, #5298fc "+n+", #b0b8bf "+n+")";e.innerHTML=a(100000*o.target.value)+(o.target.value===o.target.max?"+":"");var p=(o.target.value-10)*5;c.innerHTML=(p<=0?"Free":"$"+a(p))+(o.target.value===o.target.max?"+":"")};var h=document.getElementById("push_slider");h.addEventListener("input",l);h.addEventListener("change",l)}})(UI);App.Views.PricingPlans.PricingPlanSelector=Backbone.View.extend({events:{"drag .control":"renderSlider","dragstop .control":"renderSlider",},initialize:function(){this.baseReqs=this.options.baseLimit||30;this.maxReqs=600;this.control=this.$(".control")[0];this.controlRadius=10;this.sliderFills=this.$(".fill > li");this.sliderLiWidth=$(this.sliderFills[1]).width();this.sliderTicks=this.$(".ticks > li");this.limitLabel=$(this.$("#request_limit")[0]);this.priceLabel=$(this.$("#request_limit_price")[0]);this.bgJobs=this.$(".bgjobs > .amount");this.bgJobsText=this.$(".bgjobs > .charge");this.bgJobsTextShort=this.$(".bgjobs > .jobtext");this.confirmButton=$(this.$(".confirm_button")[0]);this.contactButton=$(this.$(".contact_button")[0]);this.successBox=$(this.$(".success_box")[0]);this.errorBox=$(this.$(".modal_errors")[0]);this.spinner=$(this.$(".spinner")[0]);this.confirmURL=this.confirmButton.attr("href");this.basePrice=this.options.basePrice||0;this.$(".control").draggable({containment:this.$(".containment"),axis:"x",grid:[7]});this.spinner.hide().spin("small","#717171");this.setInitialVars();this.setupUpdateAjax();this.render()},setInitialVars:function(){this.startLimit=this.limitLabel.text();this.limit=this.startLimit},render:function(){var a=this;$(document).ready(function(){a.setSliderPosition();a.renderSlider()})},renderSlider:function(){var a=this.control.offsetLeft+this.controlRadius;_.each(this.sliderFills,function(b){if(b.offsetLeft<a){$(b).addClass("full")}else{$(b).removeClass("full")}});_.each(this.sliderTicks,function(b){if(b.offsetLeft<a){$(b).addClass("full")}else{$(b).removeClass("full")}});this.limit=(a/this.sliderLiWidth)*10;this.setLabels()},setSliderPosition:function(){var a=this.limit>this.maxReqs?this.maxReqs:this.limit;var b=(a/10)*this.sliderLiWidth-this.controlRadius;$(this.control).css({left:b});this.setLabels()},setLabels:function(){labelLimit=(this.limit==this.maxReqs&&this.startLimit>=this.maxReqs)?this.startLimit:this.limit;this.limitLabel.text(labelLimit);var b=Math.max((labelLimit-this.baseReqs)*10,0);var d=this.basePrice+b;var c=d>0?"$"+d+"/month":"Free";this.priceLabel.text(c);this.bgJobs.text(Math.floor(this.limit/20));var a=this.limit<40?"job":"jobs";this.bgJobsText.text("Concurrent "+a);this.bgJobsTextShort.text(a);if(labelLimit==this.startLimit){this.confirmButton.hide();if(labelLimit>this.maxReqs){this.$(".control").draggable({disabled:true});this.contactButton.text("Contact us to change")}if(labelLimit>=this.maxReqs){this.contactButton.show()}else{this.contactButton.hide()}}else{this.confirmButton.show();this.contactButton.hide()}this.successBox.hide();this.errorBox.hide()},setupUpdateAjax:function(){var a=this;this.confirmButton.click(function(){a.errorBox.hide();a.spinner.show();$.ajax({url:a.confirmURL+"?new_limit="+a.limit,type:"PUT"}).then(function(c){a.spinner.hide();if(c.success){a.setInitialVars();a.render();a.successBox.show()}else{var b=c.error;var d=$("<p></p>");d.text(b);a.errorBox.html("").show();a.errorBox.append(d);$(window).click(function(){if(a.errorBox.is(":visible")){a.errorBox.hide()}})}});return false})}});App.Views.Products.Core=Backbone.View.extend({events:{},initialize:function(){var a=this;this.render()},render:function(){$(document).ready(function(){$(".card.local_datastore .icon").removeClass("on");$(".card.local_datastore").waypoint(function(a){$(".card.local_datastore .icon").addClass("on")},{offset:"25%"});$(".card.local_datastore .icon").click(function(a){$(this).toggleClass("on")})})}});App.Views.Products.Index=Backbone.View.extend({initialize:function(){this.bg=$(".top_section");$(window).scroll(_.throttle(this.updateBackground.bind(this),100))},updateBackground:function(){var a=$(window).scrollTop()*-0.1;a=Math.min(Math.max(a,-270),0);this.bg.css("background-position","top "+a+"px right")}});(function(a){App.PigeonCTA=function(){if(!a.hasClass(document.body,"p_products_pigeon")){return}document.getElementById("cta_button").addEventListener("click",function(b){console.log("a");new a.Modal({className:"pigeon_modal",title:"It's that time of year.",template:JST["products/_pigeon_modal"]({}),init:function(){}});b.preventDefault()})}})(UI);App.Views.Products.Tabs=Backbone.View.extend({events:{"change .product_tabs input":"render"},initialize:function(){this.render()},render:function(){var c=this.el.getElementsByClassName("product_tabs")[0].getElementsByTagName("input");var d=0;var b;for(b=0;b<c.length;b++){if(c[b].checked){d=b;break}}var a=this.el.getElementsByClassName("panel");for(b=0;b<a.length;b++){a[b].style.display=(b===d?"block":"none")}}});App.Views.Questions.AssignButton=Backbone.View.extend({events:{click:"setTitleForAssignedQuestion","ajax:success":"handleSuccessResponse","ajax:error":"handleErrorResponse"},initialize:function(){this.state=this.options.state;if(this.state==="assigned"){this.setTitleForAssignedQuestion()}else{this.setTitleForUnassignedQuestion()}},setTitleForAssignedQuestion:function(){this.$el.html("Assigned").removeClass("assign_question").addClass("assigned_question");this.state="assigned"},setTitleForUnassignedQuestion:function(){this.$el.html("Assign question").removeClass("assigned_question").addClass("assign_question");this.state="unassigned"},displayError:function(){this.setTitleForUnassignedQuestion();alert("Could not assign this question.")},handleSuccessResponse:function(c,b,a){if(!b.success){this.displayError()}},handleErrorResponse:function(){this.displayError()}});App.Views.Questions.BugReport=Backbone.View.extend({el:".bug_report",events:{click:"launchBugModal"},initialize:function(){var a=this.appIds={};this.appNames=this.options.apps.map(function(e){var d=_.escape(e.get("name"));a[d]=e.get("friendly_id");return d});var c=this.platformIds={};var b=this.githubPlatforms={};this.platformNames=this.options.platforms.map(function(d){var e=_.escape(d.name);c[e]=d.platform;if(d.github){b[d.platform]=d.github}return e})},launchBugModal:function(){this.dialog=new UI.Modal({title:"Report a Bug",template:JST["help/_bug_report_modal"](),className:"ui_bug_report wide",init:(function(d,f,c,e,a){var h=function(j){if(c[j]){$(this.node).find(".support_facebook").hide();$(this.node).find(".support_open_source").show();$(this.node).find(".github_link_button").attr("href",c[j])}else{$(this.node).find(".support_facebook").show();$(this.node).find(".support_open_source").hide()}};var b=function(k){var j="/help/submit";if(k){j+="?appid="+k}$(this.node).find(".facebook_link_button").attr("href",j)};return(function(){if(d.length>0){new UI.Dropdown({name:"platform_dropdown",optionSet:d,defaultOption:"No particular platform",values:f,parent:document.getElementById("select_platform_wrapper"),onChange:h.bind(this)})}else{$(this.node).find(".requires_platforms").remove()}if(e.length>0){new UI.Dropdown({name:"app_dropdown",optionSet:e,defaultOption:"No particular app",values:a,parent:document.getElementById("select_app_wrapper"),onChange:b.bind(this)})}else{$(this.node).find(".requires_apps").remove()}})})(this.platformNames,this.platformIds,this.githubPlatforms,this.appNames,this.appIds)});return false}});App.Views.Questions.Comment=Backbone.View.extend({events:{"click .comment_toggle":"showCommentBox"},initialize:function(){var a=this;this.$el.find(".form").live("ajax:beforeSend",function(b,d,c){if(!App.currentUser.get("name")||App.currentUser.get("name")===""){return false}else{if(a.$el.find(".comment_box").attr("value").length===0){a.$el.find(".comment_box").focus();a.$el.find(".error_explanation").html("Your comment can't be empty").show();return false}else{if(a.$el.find(".comment_box").attr("value").length>2000){a.$el.find(".comment_box").focus();a.$el.find(".error_explanation").html("Your comment must be less than 2000 characters.").show();return false}else{a.$el.find(".comment_button").addClass("disabled_button").attr("disabled","disabled")}}}}).live("ajax:success",function(c,d,b,e){a.$el.find(".comment_box").attr("value","");a.$el.find(".new_comment").css("display","none");a.$el.find(".error_explanation").html("").hide();a.$el.find(".comments").append(e.responseText);a.$el.find(".comment_button").removeClass("disabled_button").removeAttr("disabled","disabled");a.$el.find(".comment_toggle").show();if(typeof(markButton)!=="undefined"){markButton.updateTitleForNewComment()}}).live("ajax:error",function(c,e,b,d){a.$el.find(".comment_button").removeClass("disabled_button").removeAttr("disabled","disabled");a.$el.find(".error_explanation").html("We were unable to post your comment.").show()})},showCommentBox:function(a){this.$el.find(".comment_box").val="";this.$el.find(".new_comment").show();this.$el.find(".comment_box").focus();this.$el.find(".comments").show();this.$el.find(".comment_toggle").hide();return false}});App.Views.Questions.MarkButton=Backbone.View.extend({events:{click:"toggleMarkButtonTitle"},initialize:function(){this.state=this.options.state;if(this.state==="read"){this.setTitleForReadQuestion()}else{this.setTitleForUnreadQuestion()}},toggleMarkButtonTitle:function(){if(this.state==="read"){this.setTitleForUnreadQuestion()}else{this.setTitleForReadQuestion()}},setTitleForReadQuestion:function(){this.$el.html("Mark as unread").removeClass("mark_read").addClass("mark_unread");this.state="read"},setTitleForUnreadQuestion:function(){this.$el.html("Mark as read").removeClass("mark_unread").addClass("mark_read");this.state="unread"},updateTitleForNewComment:function(){this.setTitleForReadQuestion()},updateTitleForNewAnswer:function(){this.setTitleForReadQuestion()}});App.Views.Questions.PaginatedList=Backbone.View.extend({initialize:function(){var a=this;this.listName=this.options.listName;this.$(".pagination a").live("click",function(b){a.$(".loading").show();a.$("pagination a").css("pointer-events","none").css("cursor","default");$.get(this.href,null,function(c){a.$el.html(c)},"html");return false})}});App.Views.Questions.PinButton=Backbone.View.extend({events:{click:"togglePinButtonTitle"},initialize:function(){this.state=this.options.state;if(this.state==="pinned"){this.setTitleForPinnedQuestion();this.showPinnedAssetForQuestion()}else{this.setTitleForUnpinnedQuestion();this.hidePinnedAssetForQuestion()}},togglePinButtonTitle:function(){if(this.state==="pinned"){this.setTitleForUnpinnedQuestion();this.hidePinnedAssetForQuestion()}else{this.setTitleForPinnedQuestion();this.showPinnedAssetForQuestion()}},setTitleForPinnedQuestion:function(){this.$el.html("Unpin").removeClass("unpin_question").addClass("pin_question");this.state="pinned"},setTitleForUnpinnedQuestion:function(){this.$el.html("Pin").removeClass("pin_question").addClass("unpin_question");this.state="unpinned"},showPinnedAssetForQuestion:function(){$(".unpinned_question").removeClass("unpinned_question").addClass("pinned_question")},hidePinnedAssetForQuestion:function(){$(".pinned_question").removeClass("pinned_question").addClass("unpinned_question")}});App.Views.Questions.TakeOfflineButton=Backbone.View.extend({events:{click:"setStatusForTakenOffline","ajax:success":"handleSuccessResponse","ajax:error":"handleErrorResponse"},initialize:function(){this.state=this.options.state;if(this.state==="take_offline"){this.setStatusForTakeOffline()}else{this.setStatusForTakenOffline()}},setStatusForTakeOffline:function(){this.$el.html("Make private").removeClass("taken_offline").addClass("take_offline");this.state="take_offline"},setStatusForTakenOffline:function(){this.$el.hide();this.state="taken_offline";alert("This question has been taken offline. Only the author of the original question will be able to see this thread. You may follow up with the customer by using comments or answers.")},displayError:function(){this.setStatusForTakeOffline();alert("Could not take this question offline.")},handleSuccessResponse:function(c,b,a){if(!b.success){this.displayError()}},handleErrorResponse:function(){this.displayError()}});App.Views.RPC=function(c){var a=c?$(c).data("rpc"):null;if(a){return a}var b={isExecuting:false,view:(function(){var e=$("<div>").addClass("callback");$(c?c:document.body).append(e);return e})(),resetView:function(e){this.view.empty().removeClass("error_bubble greenBubble").remove()},positionView:function(e){if(!e){return}var f=e.el?e.el:e;this.view.appendTo(f);this.view.css({right:e.dx||-30,top:e.dy||15})},displayCustomSuccess:function(e,f){this.resetView();this.positionView(e);this.view.fadeIn(f)},displaySuccess:function(e,f){this.resetView();this.positionView(e);this.view.append(this.success);this.view.fadeIn(f)},displaySuccessMessage:function(e,f,h){this.resetView();this.positionView(e);this.view.append($("<p>").append(_.escape(f)));this.view.addClass("greenBubble");this.view.fadeIn(h)},displayErrors:function(e,h){this.resetView();this.positionView(e);this.view.addClass("error_bubble");var f=this;_(h).each(function(j){f.view.append($("<p>").append(_.escape(j)))});this.view.fadeIn()},success:$("<div class='icon_callback_saved'></div>"),displayThinking:function(e){this.positionView(e);this.view.append($("<div class='settings_spinner'></div>"));$(".settings_spinner").spin("small","#5a6b77");if(this.view.css("display")==="none"){this.view.fadeIn()}}};var d={call:function(e){b.resetView();if(e.spinnerView){b.displayThinking(e.spinnerView,e.offset)}else{b.displayThinking(e.view,e.offset)}b.isExecuting=true;$.ajax(e.url,{dataType:"json",type:e.method,data:e.params,success:function(f){if(f.errors){b.displayErrors(e.view,f.errors)}else{if(f.error){b.displayErrors(e.view,[f.error])}else{var h=function(){if(e.success){e.success(f.data)}};if(e.customSuccess){b.displayCustomSuccess(e.view,h)}else{if(e.successMessage){b.displaySuccessMessage(e.view,e.successMessage(f),h)}else{b.displaySuccess(e.view,h)}}}}b.isExecuting=false},error:function(f,j,h){b.displayErrors(e.view,[h]);b.isExecuting=false}})},delegateEvents:function(){$("body").click(function(e){if(!b.isExecuting){if(!$(e.target).closest(".callback")[0]){b.resetView()}b.isExecuting=false}})},isExecuting:function(){return self.isExecuting},hide:function(){b.resetView()},fadeOut:function(e,f){b.view.fadeOut(e,function(){b.resetView();if(f){f()}})}};d.delegateEvents();if(c){$(c).data("rpc",d)}return d};App.Views.SchemaBrowser=Backbone.View.extend({el:"#schemas",initialize:function(b){var a=this;this.collections=b.collections;this.schemas=b.schemas;this.indexes=b.indexes;var c=this.$el.find(".ui_selection_column");this.collections.each(function(f,e){c.append('<input type="radio" id="classes['+e+']" name="classes" value="'+f.id+'" /><label for="classes['+e+']" data-count="'+f.get("count")+'">'+_.escape(f.get("display_name"))+"</label>")});c.on("change","input",function(f){a.renderSchema(f.target.value)});var d=c.find("input")[0];if(d){d.checked=true;this.renderSchema(d.value)}else{this.renderEmpty()}},renderSchema:function(b){var j=this.collections.get(b).get("count");this.$(".class_info").text(_.escape(b)+": "+j+(j===1?" row":" rows"));var e=this.schemas.get(b).get("keys");var k="";for(var h in e){k+="<div><span>"+_.escape(h)+"</span><span>"+e[h].type.name+"</span></div>"}this.$(".schema .details").html(k);var d=this.indexes.get(b).get("indexes");var a="";var l=Object.keys(d).sort();for(var c=0;c<l.length;c++){a+="<div>"+_.escape(d[l[c]])+"</div>"}this.$(".indexes .details").html(a)},renderEmpty:function(){this.$(".schema").hide();this.$(".class_info").text("No classes to show")}});App.SessionRedirect={initialize:function(){var a=this;this.signUpNextUrl="/?#oauthsignup";this.loginNextUrl="/apps";$(".oauth_login").live("click",function(b){Util.createCookie("signup_next_url",a.signUpNextUrl,0.01);Util.createCookie("login_next_url",a.loginNextUrl,0.01);return true})},setNextUrls:function(b,a){this.signUpNextUrl=b;this.loginNextUrl=a}};App.Views.Support.BillingInquiry=Backbone.View.extend({el:".billing_inquiry",events:{click:"launchBillingInquiryModal"},initialize:function(){_.bindAll(this)},launchBillingInquiryModal:function(){this.dialog=new App.Views.Support.BillingInquiryModal({title:"Billing Support",template:"support/_billing_inquiry_modal",klass:"ui_billing_inquiry",modalOptions:{width:500,beforeClose:(function(){this.parentNode.remove()})}});this.dialog.render();return false}});App.Views.Support.BillingInquiryModal=App.Views.Modal.extend({url:"/support/billing",events:{"submit form":"submitEvent",},submitEvent:function(a){if(this.$("textarea[name='question']").val()===""){this.showError("Your inquiry cannot be blank.");return false}this.$("form button").attr("disabled","disabled").addClass("disabled");this.sendFormData();return false},showError:function(a){this.$(".errors").text(a).show();this.$("form button").removeAttr("disabled").removeClass("disabled")},sendFormData:function(){var a=this;$.ajax({url:this.url,type:"POST",data:this.$("form").serialize(),dataType:"json",success:function(b){if(b.success){a.$(".billing_inquiry_form").hide();a.$(".inquiry_confirmation").show();setTimeout(function(){a.close()},2000)}else{a.showError("Something went wrong. Please try again. If that still doesn't work, email billing@parse.com.")}},error:function(b){a.showError("Something went wrong. Please try again. If that still doesn't work, email billing@parse.com.")}});return false}});App.Views.Tutorials.Filters=Backbone.View.extend({events:{"click .filters li":"activateFilterByEvent"},initialize:function(){this.render();this.activateInitialFilter()},render:function(){var a=this},activateFilter:function(b){if(b.hasClass("active")){b.removeClass("active");$(".section").show();location.hash="#all"}else{var a=b.attr("class");this.$("li").removeClass("active");b.addClass("active");$(".section").hide();$(".section."+a).show();location.hash="#"+a}},activateInitialFilter:function(){var a=location.hash.replace("#","");var b=document.getElementsByTagName("li");for(var c in b){if(b[c].className!==""&&b[c].className===a){this.activateFilter($(b[c]));break}}},activateFilterByEvent:function(b){var a=$(b.target).closest("li");this.activateFilter(a)}});App.Views.Tutorials.ScrollAppKeys=Backbone.View.extend({events:{},scrollToAppKeys:function(a){window.scrollTo("appKeys")},initialize:function(){if(window.location.hash==="#appKeys"){this.scrollToAppKeys()}},render:function(){}});App.Views.Tutorials.ShowAppKeys=Backbone.View.extend({initialize:function(){this.el=$("#"+this.options.el);this.title=this.options.title;this.appKey=this.options.appKey;this.appSecret=this.options.appSecret;this.render()},render:function(){var a=this;a.el.html(JST["tutorials/_app_keys"]({appKey:a.appKey,appSecret:a.appSecret,title:a.title}))}});App.Views.Tutorials.Slides=Backbone.View.extend({initialize:function(){this.render()},render:function(){var a=this;this.$el.slidesjs({pagination:{active:true},navigation:{active:false},play:{auto:true,interval:4000},})}});App.Views.Votes.New=Backbone.View.extend({initialize:function(){var a=this;this.direction=this.options.direction;this.vote=this.options.vote;var b=this.$el.find(".vote_button");if(this.vote>0){if(this.direction==="up"){a.setUpButtonSelected(b)}else{a.setButtonDisabled(b)}}else{if(this.vote<0){if(this.direction==="down"){a.setDownButtonSelected(b)}else{a.setButtonDisabled(b)}}else{b.attr("href","#");b.removeAttr("disabled","disabled")}}this.$el.live("ajax:beforeSend",function(c,f,e){if($(c.target).find(".vote_button").is("[disabled]")){return false}var h=a.direction==="up"?1:-1;var d=$(c.target).parent().find(".vote_num");if(!/[a-zA-Z]+/.test(d.html())){d.html(parseInt(d.html(),10)+h)}if(a.direction==="up"){a.setUpButtonSelected($(c.target).find(".vote_up"));a.setButtonDisabled($(c.target).parent().find(".vote_down"))}else{a.setDownButtonSelected($(c.target).find(".vote_down"));a.setButtonDisabled($(c.target).parent().find(".vote_up"))}}).live("ajax:success",function(d,e,c,f){}).live("ajax:error",function(d,f,c,e){})},setUpButtonSelected:function(a){a.removeAttr("href").attr("disabled","disabled").removeClass("vote_up").addClass("vote_up_selected")},setDownButtonSelected:function(a){a.removeAttr("href").attr("disabled","disabled").removeClass("vote_down").addClass("vote_down_selected")},setButtonDisabled:function(a){a.removeAttr("href").attr("disabled","disabled")}});(function(){window.JST=window.JST||{};window.JST._paginate=_.jammit_template('<% var prevInactive = currentPage === 1 %>\n<% var prevHref = rootUrl + "/page/" %>\n<% prevHref += prevInactive ? currentPage : (currentPage - 1) %>\n\n<a data-pushstate="true" class="prev <%= prevInactive ? "inactive" : ""  %>" rel="prev" href="<%= prevHref %>">\n  <div></div>\n</a>\n\n<% var fromRows = (currentPage - 1) * perPage + 1 %>\n<% var toRows = Math.min(currentPage * perPage, totalRows) %>\n\n<span class="page_info"><%= fromRows %> - <%= toRows %> of <%= totalRows %></span>\n\n<% var nextInactive = currentPage === totalPages %>\n<% var nextHref = rootUrl + "/page/" %>\n<% nextHref += nextInactive ? currentPage : (currentPage + 1) %>\n\n<a data-pushstate="true" class="next <%= nextInactive ? "inactive" : ""  %>" rel="next <%= currentPage === 2 ? "start" : "" %>" href="<%= nextHref %>">\n  <div></div>\n</a>');window.JST._permission_editor=_.jammit_template('<form>\n  <h2><%= title %></h2>\n  <p><small><%= instructions %></small></p>\n\n  <input type="checkbox" name="public_access">Any user can perform this action</input>\n  \n  <div class="textboxes">\n    <label>Roles <div class=\'with_tooltip question_tip\'><span class=\'big mini_tooltip\'>"A comma-separated list of role names that are granted this permission."</span></div></label>\n    <input type="text" name="roles" />\n    <label>Users <div class=\'with_tooltip question_tip\'><span class=\'big mini_tooltip\'>"A comma-separated list of user object ids that are granted this permission."</span></div></label>\n    <input type="text" name="users" />\n  </div>\n\n  <div class="buttons">\n    <button><%= okText %></button>\n    <a href="#" class="cancel along">Cancel</a>\n  </div>\n</form>\n');window.JST._static_modal=_.jammit_template('<div style="display: block; z-index: 1002; outline: 0px; height: auto; width: 350px; top: 122px; left: 324px;" class="ui-dialog ui-widget ui-widget-content ui-corner-all <%= klasses %>" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-2">\n\n  <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">\n    <span class="ui-dialog-title" id="ui-dialog-title-2"><%= title %></span>\n    <% if (closeButton) { %>\n      <a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button">\n        <span class="ui-icon ui-icon-closethick">close</span>\n      </a>\n    <% } %>\n  </div>\n  <div class="lightbox ui-dialog-content ui-widget-content" style="width: auto; min-height: 75px; height: auto; display: block;" scrolltop="0" scrollleft="0">\n    <%- content %>\n  </div>\n</div>');window.JST["apps/_collaborator_list"]=_.jammit_template('<li>\n  <span>\n  <% if (userName) { %>\n    <%= userName %> (<%= userEmail %>)\n  <% } else { %>\n    <%= userEmail %>\n  <% } %>\n  </span>\n  <% if (isOwner) { %>\n    &mdash; <a href="<%= url %>"\n               data-method="delete"\n               rel="nofollow"\n               class="danger">Stop Sharing</a>\n  <% } %>\n</li>\n');window.JST["apps/_key_rows"]=_.jammit_template('<% for (var i = 0; i < row_count; i++) { %>\n  <% var id_name = id_list_name + \'[\' + i + \']\'; %>\n  <% var secret_name = secret_list_name + \'[\' + i + \']\'; %>\n  <li>\n    <input class="noImplicitAjax ui_text" type="text" name="<%= id_name %>" value="<%= _.escape(id_list[i]) %>" placeholder="App ID" />\n    <input class="noImplicitAjax ui_text" type="text" name="<%= secret_name %>" value="<%= _.escape(secret_list[i]) %>" placeholder="App Secret" />\n    <a class="deleteRow"><i class="icon_crossCircle"></i></a>\n  </li>\n<% } %>');window.JST["apps/_new_app_step2"]=_.jammit_template('<div class="header">\n  <div class="title">Getting started</div>\n</div>\n<div class="content">\n  <div class="notice">\n    <p class="confirmation_message"><%= _.escape(result.notice) %></p>\n    <p class="advices">Learn how to use Parse in your app using our\n      Quickstart Guide, or start designing your app\n      in the Data Browser.\n    </p>\n    <div class="action_buttons">\n      <a href="/apps/quickstart?app_id=<%= slug %>">Quickstart Guide</a>\n      <a href="/apps/<%= slug %>/collections">Data Browser</a>\n    </div>\n  </div>\n  \n  <div class="app_keys">\n    <h2>App keys</h2>\n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>Application ID</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= app.applicationId %>" />\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>Client Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= app.clientKey %>" />\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>Javascript Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= app.javascriptKey %>" />\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>.NET Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= app.windowsKey %>" />\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>REST API Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= app.restKey %>" />\n        </div>\n      </div>\n    </div>\n    \n    \n    <div class="line">\n      <div class="alignLeft">\n        <p>Master Key</p>\n      </div>\n      \n      <div class="alignRight">\n        <div class="copy_container">\n          <input type="text" value="<%= app.masterKey %>" />\n        </div>\n      </div>\n    </div>\n\n    <a class="app_keys_link" href="/apps/<%= slug %>/edit#keys">Get all your app keys</a>\n  </div>\n</div>    \n');window.JST["apps/_production_metadata_segment"]=_.jammit_template("<li class=\"first <%= _(indices).contains(0) ? 'active' : '' %>\">\n  <div>iOS</div>\n</li>\n<li class=\"<%= _(indices).contains(1) ? 'active' : '' %>\">\n  <div>Android</div>\n</li>\n<li class=\"<%= _(indices).contains(2) ? 'active' : '' %>\">\n  <div>Web</div>\n</li>\n<li class=\"<%= _(indices).contains(3) ? 'active' : '' %>\">\n  <div>Windows</div>\n</li>\n<li class=\"last <%= _(indices).contains(4) ? 'active' : '' %>\">\n  <div>Other</div>\n</li>");window.JST["apps/_waiting"]=_.jammit_template('<div><img src="/images/docs/icon_checkmark_quick.png" /> Congrats! You saved your first object:</div>\n<div class="obj"><%= object %></div>\n<div class="share_widget">\n  <a class="action_link fb_share" href="#"> \n    <div class="icon"/>\n    Share on Facebook\n  </a>\n  <a class="action_link twitter_share" href="#"> \n    <div class="icon"/>\n    Share on Twitter\n  </a>\n</div>\n');window.JST["apps/analytics/_content_audience"]=_.jammit_template('<% _.each(Analytics.ContentAudience.Types, function(type) { %>\n  <% if (stats[\'total_\' + type]) { %>\n    <div class="audience_date">As of <%= formatDate(date) %>:</div>\n    <% _.each(Analytics.ContentAudience.Frequencies, function(frequency) { %>\n      <% var statBoxData = stats[frequency + \'_\' + type] %>\n      <div class="stat_box">\n        <% if (statBoxData) { %>\n          <span class="audience_stat"><%= humanize(statBoxData.current.stat, 3) %></span>\n          <a class="delta <%= deltaClass(statBoxData.current.delta) %> with_tooltip">\n            <%= deltaStr(statBoxData.current.delta) %>\n            <span class="mini_tooltip">\n              <table>\n                <tr>\n                  <td class="tooltip_date" nowrap><%= formatDate(statBoxData.last.date) %></td>\n                  <td class="tooltip_stat"><%= humanize(statBoxData.last.stat, 4) %></td>\n                </tr>\n\n                <tr>\n                  <td class="tooltip_date" nowrap><%= formatDate(statBoxData.previous.date) %></td>\n                  <td class="tooltip_stat"><%= humanize(statBoxData.previous.stat, 4) %></td>\n                  <td class="tooltip_delta <%= deltaClass(statBoxData.previous.delta) %>">\n                    <%= deltaStr(statBoxData.previous.delta) %>\n                  </td>\n                </tr>\n\n                <tr>\n                  <td class="tooltip_date current" nowrap><%= formatDate(statBoxData.current.date) %></td>\n                  <td class="tooltip_stat current"><%= humanize(statBoxData.current.stat, 4) %></td>\n                  <td class="tooltip_delta <%= deltaClass(statBoxData.current.delta) %>">\n                    <%= deltaStr(statBoxData.current.delta) %>\n                  </span>\n                </tr>\n              </table>\n            </span>\n          </a>\n        <% } %>\n        <div class="label"><%= frequency %> Active <%= type %></div>\n      </div>\n    <% }); %>\n\n    <div class="stat_box total">\n      <span class="audience_stat"><%= humanizeTotal(stats[\'total_\' + type]) %></span>\n      <div class="label">Total <%= type %></div>\n    </div>\n  <% } // end "if total" %>\n<% }); %>\n');window.JST["apps/analytics/_content_events"]=_.jammit_template("<% _.each(dataBySeries, function(seriesParams) { %>\n  <span class='aggr_series' style='color:<%= seriesParams.model.get('color') %>'>\n    <%= seriesParams.aggr + ' ' + seriesParams.model.get('displayName') %>\n  </span>\n<% }); %>\n");window.JST["apps/analytics/_content_performance"]=_.jammit_template('<div class="billing_header">Billing data as of today</div>\n<% _.each(Analytics.ContentPerformance.Types, function(type) { %>\n  <div class="billing_graph" id="billing_graph_<%= type %>">\n    <div class="donut">\n      <div class="donut_fill_second"></div>\n      <div class="donut_mask_second"></div>\n      <div class="donut_fill"></div>\n      <div class="donut_mask"></div>\n      <div class="donut_content">\n        <% if (stats[type]) { %>\n          <div class="percentage">\n            <%= formatPercent(stats[type].total, stats[type].limit) %>\n          </div>\n          <div class="total">\n            <%= formatTotal(type, stats[type].total, stats[type].limit) %>\n          </div>\n        <% } %>\n      </div>\n    </div>\n    <div class="billing_type">\n      <%= formatType(type) %>\n    </div>\n  </div>\n<% }); %>\n');window.JST["apps/analytics/_content_retention"]=_.jammit_template('<% var formatDate = Analytics.ContentRetention.ViewHelpers.formatDate; %>\n<div>\n  <span class="" style="float: right; margin-right: 10px;">View historical:\n    <span id="retention_date_picker"></span>\n  </span>\n  <h3>% of active users X days after signup</h3>\n  <table>\n    <tr>\n      <th class="x_days_after"></th>\n      <th>1</th>\n      <th>2</th>\n      <th>3</th>\n      <th>4</th>\n      <th>5</th>\n      <th>6</th>\n      <th>7</th>\n      <th>8</th>\n      <th>14</th>\n      <th>21</th>\n      <th>28</th>\n    </tr>\n      <tr>\n        <th class="x_days_after">28 days ago</th>\n        <% _.each([1, 2, 3, 4, 5, 6, 7, 8, 14, 21, 28], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_28, t: t }) %>\n        <% }); %>\n      </tr>\n      <tr>\n        <th class="x_days_after">21 days ago</th>\n        <% _.each([1, 2, 3, 4, 5, 6, 7, 8, 14, 21], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_21, t: t }) %>\n        <% }); %>\n        <td class="not_applicable"></td>\n      </tr>\n      <tr>\n        <th class="x_days_after">14 days ago</th>\n        <% _.each([1, 2, 3, 4, 5, 6, 7, 8, 14], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_14, t: t }) %>\n        <% }); %>\n        <% for (var i = 0; i < 2; i++) { %>\n          <td class="not_applicable"></td>\n        <% } %>\n      </tr>\n      <tr>\n        <th class="x_days_after">8 days ago</th>\n        <% _.each([1, 2, 3, 4, 5, 6, 7, 8], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_8, t: t }) %>\n        <% }); %>\n        <% for (var i = 0; i < 3; i++) { %>\n          <td class="not_applicable"></td>\n        <% } %>\n      </tr>\n      <tr>\n        <th class="x_days_after"><%= formatDate(days_old_7.time) %></th>\n        <% _.each([1, 2, 3, 4, 5, 6, 7], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_7, t: t }) %>\n        <% }); %>\n        <% for (var i = 0; i < 4; i++) { %>\n          <td class="not_applicable"></td>\n        <% } %>\n      </tr>\n      <tr>\n        <th class="x_days_after"><%= formatDate(days_old_6.time) %></th>\n        <% _.each([1, 2, 3, 4, 5, 6], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_6, t: t }) %>\n        <% }); %>\n        <% for (var i = 0; i < 5; i++) { %>\n          <td class="not_applicable"></td>\n        <% } %>\n      </tr>\n      <tr>\n        <th class="x_days_after"><%= formatDate(days_old_5.time) %></th>\n        <% _.each([1, 2, 3, 4, 5], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_5, t: t }) %>\n        <% }); %>\n        <% for (var i = 0; i < 6; i++) { %>\n          <td class="not_applicable"></td>\n        <% } %>\n      </tr>\n      <tr>\n        <th class="x_days_after"><%= formatDate(days_old_4.time) %></th>\n        <% _.each([1, 2, 3, 4], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_4, t: t }) %>\n        <% }); %>\n        <% for (var i = 0; i < 7; i++) { %>\n          <td class="not_applicable"></td>\n        <% } %>\n      </tr>\n      <tr>\n        <th class="x_days_after"><%= formatDate(days_old_3.time) %></th>\n        <% _.each([1, 2, 3], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_3, t: t }) %>\n        <% }); %>\n        <% for (var i = 0; i < 8; i++) { %>\n          <td class="not_applicable"></td>\n        <% } %>\n      </tr>\n      <tr>\n        <th class="x_days_after"><%= formatDate(days_old_2.time) %></th>\n        <% _.each([1, 2], function(t) { %>\n          <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_2, t: t }) %>\n        <% }); %>\n        <% for (var i = 0; i < 9; i++) { %>\n          <td class="not_applicable"></td>\n        <% } %>\n      </tr>\n      <tr>\n        <th class="x_days_after"><%= formatDate(days_old_1.time) %></th>\n        <%- JST[\'apps/analytics/_content_retention_cell\']({ day: days_old_1, t: 1 }) %>\n        <% for (var i = 0; i < 7; i++) { %>\n          <td class="not_applicable"></td>\n        <% } %>\n        <td class="not_applicable" colspan="3">\n          <a href="http://blog.parse.com/2014/04/30/the-more-you-grow-the-more-you-know">What does this table mean?</a>\n        </td>\n      </tr>\n  </table>\n</div>\n');window.JST["apps/analytics/_content_retention_cell"]=_.jammit_template('<% var datum = day[\'day_\' + t];\n   var style = Analytics.ContentRetention.ViewHelpers.style(datum);\n   var ratio = Analytics.ContentRetention.ViewHelpers.ratio(datum);\n   var date = Analytics.ContentRetention.ViewHelpers.formatDate(day.time);\n   var percent = Analytics.ContentRetention.ViewHelpers.percentify(datum);\n   var displayInsignificant = Analytics.ContentRetention.ViewHelpers.insignificant(datum);\n   var daysAgoDate = Analytics.ContentRetention.ViewHelpers.formatActivityDate(day.time, t); %>\n\n<% if (ratio < 0) { %>\n  <td></td>\n<% } else { %>\n  <td class="with_tooltip" style="<%= style %>">\n    <%= percent %>\n    <span class="mini_tooltip<%= displayInsignificant ? \' shaded\' : \'\' %><%= t > 7 ? \' right_side\' : \'\' %>">\n      <span class="tooltip_container">\n        Of the <span class="datum"><%= Analytics.ViewHelpers.humanizeTotal(datum.total) %></span> users\n        who signed up on\n        <span class="date"><%= date %></span>,\n        <span class="datum"><%= Analytics.ViewHelpers.humanizeTotal(datum.active) %></span> (<%= percent %>)\n        were active on <span class="date"><%= daysAgoDate %></span>.\n\n        <% if (displayInsignificant) { %>\n          <span class="disclaimer">\n            <span class="icon"></span>\n            There may be too few users to reliably measure retention.\n          </span>\n        <% } %>\n      </span>\n    </span>\n  </td>\n<% } %>\n');window.JST["apps/analytics/_content_retention_no_data"]=_.jammit_template('<div class="ui_empty_state">\n  <i class="icon_graph"></i>\n  <div class="ui_empty_caption">You don\'t have any user retention data for this period.</div>\n  <p>Once you start tracking user signups, we\'ll chart your user retention here.</p>\n  <a href="/apps/quickstart" class="ui_action_button">\n    <i class="icon_documentation"></i>\n    <span>Get started with Users</span>\n  </a>\n</div>\n');window.JST["apps/analytics/_graph"]=_.jammit_template('<div class="graph_container">\n  <div class="graph_toolbar ui_content_header"></div>\n  <div class="graph_breakdown_sidebar" id="graph_breakdown_sidebar_<%= appId %>">\n  </div>\n  <div class="chart_wrapper">\n    <div class="empty_wrapper">\n    </div>\n    <div class="chart_container" id="chart_container_<%= appId %>">\n    </div>\n  </div>\n</div>\n<div class="content_container">\n  <div class="content_audience" id="content_audience_<%= appId %>">\n  </div>\n  <div class="content_events" id="content_events_<%= appId %>">\n  </div>\n  <div class="content_retention" id="content_retention_<%= appId %>">\n  </div>\n  <div class="content_performance" id="content_performance_<%= appId %>">\n  </div>\n</div>\n');window.JST["apps/analytics/_graph_add_button"]=_.jammit_template('<div class="graph_add plus_button"><span></span></div>');window.JST["apps/analytics/_graph_breakdown_sidebar"]=_.jammit_template('<i class="icon_cross graph_breakdown_sidebar_close"></i>\n<p>Custom Breakdown</p>\n<p>\n    <div id="event_select" />\n</p>\n\n<p class="analytics_header_filters">Filters</p>\n\n<ul>\n    <li class="missing">\n        <div class="popover">\n            <i class="icon_questionMark"></i>\n            <div class="popover_menu">\n                We currently only store the first eight dimension pairs\n                provided for a custom event.\n            </div>\n        </div>\n        Missing data?\n    </li>\n</ul>\n\n<div class="add_series_button ui_action_button">Save Breakdown</div>\n');window.JST["apps/analytics/_graph_breakdown_sidebar_default_options"]=_.jammit_template('<li>\n    <div class="sidebar_option_header">\n        Platform\n        <span class="toggle">\n            <input id="breakdown_default_platform" type="checkbox" />\n            <label for="breakdown_default_platform" data-on="" data-off="" />\n        </span>\n    </div>\n\n    <input data-dimension="deviceType" type="hidden" value="false" />\n    <div class="breakdown_select" id="device_type_select" />\n</li>\n<% if (isAPIRequest) { %>\n    <li>\n        <div class="sidebar_option_header">\n            Class\n            <span class="toggle">\n                <input id="breakdown_default_class" type="checkbox" />\n                <label for="breakdown_default_class" data-on="" data-off="" />\n            </span>\n        </div>\n\n        <input data-dimension="className" type="hidden" value="false" />\n        <div class="breakdown_select" id="class_name_select" />\n    </li>\n    <li>\n        <div class="sidebar_option_header">\n            Request Type\n            <span class="toggle">\n                <input id="breakdown_default_req_type" type="checkbox" />\n                <label for="breakdown_default_req_type" data-on="" data-off="" />\n            </span>\n        </div>\n\n        <input data-dimension="refinement" type="hidden" value="false" />\n        <div class="breakdown_select" id="refinement_select" />\n    </li>\n<% } %>\n');window.JST["apps/analytics/_graph_breakdown_sidebar_option"]=_.jammit_template('<li>\n    <div class="sidebar_option_header">\n        <%= dimensionName %>\n        <span class="toggle">\n            <input id="breakdown_toggle_<%= sanitizedDimensionName %>" type="checkbox" />\n            <label for="breakdown_toggle_<%= sanitizedDimensionName %>" data-on="" data-off="" />\n        </span>\n    </div>\n\n    <input data-dimension="<%= dimensionName %>" type="hidden" value="false" />\n    <div class="breakdown_select" id="<%= sanitizedDimensionName %>_select" />\n</li>\n');window.JST["apps/analytics/_graph_dropdown"]=_.jammit_template('<div class="dropdown_button">\n  <div class="legend" style="background-color: <%= seriesModel.get(\'color\') %>"></div>\n  <div class="graph_loading"></div>\n  <span class="tab_label" href="#">\n    <% if (seriesModel.get(\'deviceType\')) { %>\n      <div class="platform_icon <%= seriesModel.get(\'deviceType\') %>"></div>\n    <% } %>\n    <%= seriesModel.get(\'displayName\') %>\n  </span>\n  <a href="#" class="dropdown_remove"></a>\n</div>\n\n<div class="refinement_dropdown">\n  <div class="refinement_titlebar">\n    <div class="legend" style="background-color: <%= seriesModel.get(\'color\') %>"></div>\n    <div class="graph_loading"></div>\n    <span class="tab_label" href="#">\n      <% if (seriesModel.get(\'deviceType\')) { %>\n        <div class="platform_icon <%= seriesModel.get(\'deviceType\') %>"></div>\n      <% } %>\n      <%= seriesModel.get(\'displayName\') %>\n    </span>\n    <a href="#" class="dropdown_remove"></a>\n  </div>\n  <ul class="dropdown_options">\n    <% if (shouldShowBreakdown) { %>\n      <li class="new_series">\n        <a class="new_series_button">Custom Breakdown</a>\n      </li>\n    <% } %>\n  </ul>\n</div>\n');window.JST["apps/analytics/_graph_dropdown_option"]=_.jammit_template('<li class="series_option \n  <%= isSelected ? "selected " : "" %>\n  <%= isSelectedElsewhere ? "unavailable " : "" %>"\n  data-series-id="<%= seriesOption.get(\'seriesId\') %>">\n\n  <% if (isSelected) { %>\n    <span class="checkmark <%= !seriesOption.get("isCustom") ? "" : "option" %>">✓</span>\n  <% } %>\n\n  <a class="item_label" title="<%= seriesOption.generateDisplayDimensions() %>">\n    <% if (seriesOption.get(\'deviceType\')) { %>\n      <div class="platform_icon <%= seriesOption.get(\'deviceType\') %>"></div>\n    <% } %> \n    <%= seriesOption.get(\'displayName\') %>\n  </a>\n    <% if (seriesOption.get("isCustom")) { %>\n      <a class="remove_series_button"></a>\n    <% } %>\n</li>\n');window.JST["apps/analytics/_graph_navigation_sidebar"]=_.jammit_template("<ul class='list'>\n  <% _.each(graphNavigationOptions, function(option, index) { %>\n    <li\n      class='navigationOption <%= (option.name === selectedNavigationOption) ? 'selected' : '' %>'\n      data-navigation='<%= option.name %>'\n    >\n      <div class='icon <%= option.name %>'></div>\n      <div class='name' title='<%= option.displayName %>'>\n        <%= option.displayName %>\n      </div>\n    </li>\n  <% }); %>\n</ul>\n");window.JST["apps/analytics/_graph_toolbar"]=_.jammit_template('<div class="ui_actions_right">\n  <span class="graph_dates">\n  </span>\n  <a href="#" class="refresh_button with_tooltip">\n    <i class="icon_refresh"></i>\n    <span class=\'mini_tooltip right_side bottom\'>Refresh graph</span>\n  </a>\n  <a class="export_button with_tooltip" href="#">\n    <i class="icon_exportData"></i>\n    <span class="mini_tooltip bottom right_side">\n      <span class="export_enabled_text">\n        Download as CSV\n      </span>\n      <span class="export_disabled_text">\n        Maximum date range for export is 6 months\n      </span>\n    </span>\n  </a>\n</div>\n<div class="graph_dropdowns">\n  <%- JST[\'apps/analytics/_graph_add_button\']() %>\n</div>');window.JST["apps/analytics/_no_data"]=_.jammit_template('<div class="ui_empty_state">\n	<i class="icon_graph"></i>\n	<div class="ui_empty_caption"><%= title %></div>\n	<p><%= text %></p>\n	<a href="<%= action %>" class="ui_action_button">\n		<i class="icon_documentation"></i>\n		<span><%= actionText %></span>\n	</a>\n</div>');window.JST["apps/quickstart/_confirmation"]=_.jammit_template('<div class="confirmation">\n  <div class="message"><%- message %></div>\n  <div class="confirmation_feedback"><a class="confirmation_cancel">Cancel</a><a class="confirmation_continue">Continue</a></div>\n</div>');window.JST["cloud_code/_empty_heroku_webhooks"]=_.jammit_template('<div class="ui_empty_state">\n  <% if (userHasHeroku) { %>\n    <p>You have no Heroku apps linked. Create one using the Parse CLI. <a href="https://parse.com/docs/cloudcode/guide#command-line-heroku">Learn more.</a></p>\n    <!-- Creating apps from the website is not currently enabled <a id="create_heroku_app" class="ui_action_button"><span>Link a Heroku app</span></a> -->\n  <% } else { %>\n    <p>Connect your Heroku account to use Heroku for your Webhooks. <a href="https://parse.com/docs/cloudcode/guide#command-line-heroku">Learn more.</a></p>\n    <!-- TODO(drewgross) once we have a parse owned client_id, put it AppConfig or Chef or something. -->\n    <a class="ui_action_button" href="https://id.heroku.com/oauth/authorize?<%= $.param({\n      "client_id": "17ae0773-297f-4437-a640-e70f464ff9f4",\n      "response_type": "code",\n      "scope": "create-apps",\n      "state": JSON.stringify({\n          \'csrf_token\': csrfTokenForHeroku,\n          \'redirect_to_app_slug\': appJson.friendly_id,\n        })}) %>">Connect to Heroku</a>\n  <% } %>\n</div>\n');window.JST["cloud_code/_empty_webhooks"]=_.jammit_template('<div class="ui_empty_state">\n  <p>Use webhooks to connect Parse to your own server. <a href="/docs/cloud_code_guide#webhooks">Learn more.</a></p>\n</div>\n');window.JST["cloud_code/_job_schedules"]=_.jammit_template('<div class="job_table">\n  <% if (jobSchedules.length > 0) { %>\n      <table id="job_schedule" class="full_table">\n        <tr>\n          <th>Name</th>\n          <th>Function</th>\n          <th>Schedule (UTC)</th>\n          <th>Actions</th>\n        </tr>\n        <% jobSchedules.each(function(sched) { %>\n          <% var schedUrl = App.currentApp.dataRequestUrl() + "cloud_code/jobs/" + sched.get("objectId") %>\n          <tr>\n            <td><%= sched.get("description") %></td>\n            <td><%= sched.get("jobName") %></td>\n            <td><%= sched.get("humanizedSchedule") %></td>\n            <td>\n              <a class="run_now ui_button" href="#">Run Now</a>\n              <a class="edit_schedule ui_button" href="<%= schedUrl + "/edit" %>">Edit</a>\n              <a class="delete_schedule ui_button danger" href="<%= schedUrl %>" data-confirm="Deleting is permanent. Are you sure?" data-method="delete" rel="nofollow">Delete</a>\n            </td>\n          </tr>\n        <% }); %>\n      </table>\n  <% } else { %>\n    <div class="no_data">\n      <div class="ui_empty_state">\n        <i class="icon_cloudCode"></i>\n        <div class="ui_empty_caption">Configure Cloud Code</div>\n        <p>Create a job in <a href="/docs/cloud_code_guide#jobs">Cloud Code</a> and put it on a recurring schedule.</p>\n        <a href="<%= App.currentApp.dataRequestUrl() %>cloud_code/jobs/new" class="ui_action_button">\n          <i class="icon_plus"></i>\n          <span>Schedule a job</span>\n        </a>\n      </div>\n    </div>\n  <% } %>\n</div>\n');window.JST["cloud_code/_job_status"]=_.jammit_template('<div class="job_table">\n  <% if (jobStatus.length > 0) { %>\n    <table id="job_status" class="full_table">\n      <tr>\n        <th>Function</th>\n        <th>Started (UTC)</th>\n        <th>Ended (UTC)</th>\n        <th>Status</th>\n        <th>Message</th>\n      </tr>\n      <% jobStatus.each(function(status) { %>\n        <tr>\n          <td><%= status.get("jobName") %></td>\n          <td><%= moment(Parse._decode("date",status.get("createdAt"))).utc().format("MM/DD/YY hh:mm A UTC") %></td>\n          <td><%= status.get("finishedAt") ? moment(Parse._decode("date",status.get("finishedAt"))).utc().format("MM/DD/YY hh:mm A UTC") : "Not completed" %></td>\n          <td class="status <%= status.get("status") %>"><%= status.get("status") %></td>\n          <td class="job_status_message"><%= status.get("message") %></div>\n        </tr>\n      <% }); %>\n    </table>\n  <% } else { %>\n    <div class="no_data">\n      <div class="ui_empty_state">\n        <i class="icon_cloudCode"></i>\n        <div class="ui_empty_caption">You haven\'t run any jobs yet</div>\n        <p>When you run your first job, its status will show here.</p>\n        <a href="/docs/cloud_code_guide#jobs" class="ui_action_button">\n          <i class="icon_documentation"></i>\n          <span>Get started with Jobs</span>\n        </a>\n      </div>\n    </div>\n  <% } %>\n</div>\n');window.JST["cloud_code/_log_content"]=_.jammit_template('<% if(!_.isEmpty(logs)) { %>\n  <div class="logs_list">\n    <ul>\n    <% _.each(_.initial(logs), function(line) { %>\n      <li><pre><%= line %></pre></li>\n    <% }); %>\n      <li class="last_line"><pre><%= _.last(logs) %></pre></li>\n    </ul>\n  </div>\n<% } else { %>\n  <div class="no_data">\n    <div class="empty">\n      <div class="ui_empty_state">\n        <i class="icon_cloudCode"></i>\n        <div class="ui_empty_caption">No logs in past 30 days</div>\n        <p>When you start using <a href="/docs/cloud_code_guide">Cloud Code</a> your logs will appear here.</p>\n        <a href="/docs/cloud_code_guide" class="ui_action_button">\n          <i class="icon_documentation"></i>\n          <span>Get started with Cloud Code</span>\n        </a>\n      </div>\n    </div>\n  </div>\n<% } %>\n');window.JST["cloud_code/_log_control"]=_.jammit_template('<li>\n  <a href="log/info"\n    data-pushstate="true"\n  <% if (selection === \'INFO\') { %>\n    class="selected"\n  <% } %>><div class=\'icon_info\'></div>\n    Info\n  </a>\n</li>\n<li>\n  <a href="log/error"\n    data-pushstate="true"\n  <% if (selection === \'ERROR\') { %>\n    class="selected"\n  <% } %>><div class=\'icon_errors\'></div>\n    Error\n  </a>\n</li>\n');window.JST["cloud_code/_logs_view"]=_.jammit_template('<div class="content_spinner"></div>');window.JST["cloud_code/_script_source"]=_.jammit_template('<% if (_.isString(scriptContents)) { %>\n  <% if (!_.isEmpty(scriptContents)) { %>\n    <div class="script_content">\n      <div class="javascript code_block cloudCodeTheme"><pre class="brush: js; gutter: true; quick-code: false"><%= scriptContents %></pre></div>\n    </div>\n  <% } else { %>\n    <div class="no_data">\n      <div class="empty">\n        <div class="no_script">\n          <img src="/images/glyphs/icon_no_cloudcode.png" />\n          <p>File is empty</p>\n        </div>\n      </div>\n    </div>\n  <% } %>\n<% } else { %>\n  <div class="no_data no_files">\n    <div class="ui_empty_state">\n      <i class="icon_cloudCode"></i>\n      <div class="ui_empty_caption">You haven\'t deployed any files yet</div>\n      <p>When you deploy your cloud code, you\'ll be able to see your files here.</p>\n      <a href="/docs/cloud_code_guide" class="ui_action_button">\n        <i class="icon_documentation"></i>\n        <span>Get started with Cloud Code</span>\n      </a>\n    </div>\n  </div>\n<% } %>\n');window.JST["cloud_code/_script_view"]=_.jammit_template('<div class="left">\n  <div class="left_container">\n    <div class="menu_container">\n    </div>\n  </div>\n</div>\n<div class="right">\n  <div class="content_spinner"></div> \n</div>');window.JST["cloud_code/_webhooks_modal"]=_.jammit_template('<div id="webhook_modal_error" class="modal_errors"></div>\n\n<table class="modal_form">\n  <tr>\n    <td>Webhook Type</td>\n    <td><div class="dropdown_field" id="webhook_type"></div></td>\n  </tr>\n  <tr id="classes_row">\n    <td>Choose a Class</td>\n    <td><div class="dropdown_field" id="webhook_class"></div></td>\n  </tr>\n  <tr id="function_row">\n    <td>Function Name</td>\n    <td><div id="webhook_function"></div></td>\n  </tr>\n  <tr id="authvalidator_row">\n    <td>Auth Validator Name</td>\n    <td><div id="webhook_authvalidator"></div></td>\n  </tr>\n  <tr>\n    <td>URL</td>\n    <td><div id="webhook_url"></div></td>\n  </tr>\n</table>\n\n<div class="centered">\n  <a href="#" id="delete_webhook_button" class="ui_button danger">Delete Webhook</a>\n  <a href="#" id="save_webhook_button" class="ui_action_button">Save Webhook</a>\n</div>\n');window.JST["cloud_jobs/_dd_date_time_row"]=_.jammit_template('<input type="text" class="job_date dd_date" value="<%= toDate %>" />\n\n<input type="text" class="job_time dd_time" value="<%= toTime %>" />');window.JST["cloud_jobs/_interval_selector"]=_.jammit_template('<% if (type === "mins") { %>\n  <% var val = (num > 60 || num < 0) ? 60 : num; %>\n  <select class="minute_quantity time_quantity">\n    <% for(var i = 1; i <= 60; i++) { %>\n      <option <%= val == i ? "selected" : "" %>><%= i %></option>\n    <% } %>\n  </select>\n<% } else { %>\n  <% var val = (num > 24 || num < 0) ? 24 : num; %>\n  <select class="hour_quantity time_quantity">\n    <% for(var i = 1; i <= 24; i++) { %>\n      <option <%= val == i ? "selected" : "" %>><%= i %></option>\n    <% } %>\n  </select>\n<% } %>\n\n<select class="time_unit">\n  <option <%= type === "mins" ? "selected" : "" %>>mins</option>\n  <option <%= type === "hours" ? "selected" : "" %>>hours</option>\n</select>');window.JST["components/_datepicker"]=_.jammit_template('<input type="text" name="<%= name %>" class="ui_dateinput" value="<%= displayValue %>" />\n<div class="ui_datepopup" style="<%= open ? \'display:block\' : \'\' %>">\n  <div class="ui_dateheader">\n    <a class="ui_dateprev" href="#"></a>\n    <span><%= headerString %></span>\n    <a class="ui_datenext" href="#"></a>\n  </div>\n  <% var className = startClass + (monthOffset > 0 ? \' future\' : \'\') + (preventFuture ? \' prevent_future\' : \'\') %>\n  <div class="ui_dateselector clearfix <%= className %>">\n    <span>Su</span><span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span>\n    <div class="week_buffer"></div>\n    <% for (var i = 1; i <= days; i++) { %>\n      <% var className = (!monthOffset && i === currentDay) ? \'class=today\' : \'\'; %>\n      <% var id_i = name + \'_day[\' + i + \']\'; %>\n      <input type="radio" name="<%= name %>_day" id="<%= id_i %>" value="<%= i %>" <%= selected === i ? \'checked\' : \'\' %> /><label <%= className %> for="<%= id_i %>"><%= i %></label>\n    <% } %>\n  </div>\n  <% if (drawer) { %>\n    <div class="ui_datedrawer"></div>\n  <% } %>\n</div>');window.JST["components/_daterange"]=_.jammit_template('<div class="ui_daterange">\n<label>From:</label><div class="from_date" /><span>-</span><label>To:</label><div class="to_date" /><div class="icon"></div>\n</div>');window.JST["components/_dropdown"]=_.jammit_template('<input type="radio" name="<%= name %>" id="<%= id %>" value="<%= value %>" <%= checked ? "checked" : "" %> />\n<label for="<%= id %>"><%= text %></label>');window.JST["components/_import_modal"]=_.jammit_template('<div class="import_modal_content">\n	<div class="drop_file">\n		<i class="icon_download"></i>\n		<span>Drop your file here!</span><br/>\n		<span class="smaller">JSON and CSV files are supported</span>\n	</div>\n	<div class="upload_progress"></div>\n	<div class="collection_info">\n		<h2 class="file_name">New File</h2>\n		<h3>CHOOSE A COLLECTION TYPE</h3>\n		<div class="collection_type block_switches">\n			<input type="radio" name="coll_type" id="custom">\n			<label for="custom">\n				<i class="icon_fileStorage"></i>\n				<div>Custom</div>\n			</label>\n			<input type="radio" name="coll_type" id="user">\n			<label for="user">\n				<i class="icon_users"></i>\n				<div>User</div>\n			</label>\n			<input type="radio" name="coll_type" id="installation" checked>\n			<label for="installation">\n				<i class="icon_device"></i>\n				<div>Installation</div>\n			</label>\n			<input type="radio" name="coll_type" id="role">\n			<label for="role">\n				<i class="icon_permissions"></i>\n				<div>Role</div>\n			</label>\n			<input type="radio" name="coll_type" id="product">\n			<label for="product">\n				<i class="icon_cart"></i>\n				<div>Product</div>\n			</label>\n			<input type="radio" name="coll_type" id="relation" checked>\n			<label for="relation">\n				<i class="icon_chemistry"></i>\n				<div>Relation</div>\n			</label>\n		</div>\n		<div class="more_info custom_info">\n			<span>Collection Name</span>\n			<input class="collection_name" type="text"/>\n		</div>\n		<div class="more_info relation_info">\n			<div class="relation_details">\n				<span>Relation Properties</span>\n				<div class="origin_coll"></div>\n				<div class="origin_field"></div>\n				<i class="icon_arrowRight disabled"></i>\n				<div class="target_coll"></div>\n			</div>\n			<div class="relation_error">\n				<span>To import a Relation you\'ll need at least two Classes, and at least one field of type Relation.</span>\n			</div>\n		</div>\n	</div>\n	<div class="buttons">\n		<a class="cancel ui_button">Cancel</a>\n		<a class="ui_action_button browse">Browse</a>\n		<a class="ui_action_button import disabled">Finish Import</a>\n	</div>\n	<div class="error"></div>\n</div>');window.JST["components/_import_modal_end"]=_.jammit_template('<div class="upload_progress"></div>\n<div class="collection_info">\n	<h2 class="file_name"><%= fileName %></h2>\n</div>\n<div class="summary">\n	Your import is in progress! You\'ll get an email once it\'s complete.\n</div>\n<div class="buttons end_view">\n	<a class="cancel ui_button">Cancel</a>\n	<a class="ui_action_button try_again">Try Again</a>\n	<a class="cancel ui_action_button got_it">Got it!</a>\n</div>');window.JST["components/_import_modal_schema"]=_.jammit_template('<div class="schema_file_info">\n	<h2><%= fileName %></h2>\n	<h3>DEFINE YOUR SCHEMA</h3>\n</div>\n\n<div class="browser_wrapper">\n	<div class="preview_browser">\n		<div class="header">\n			<% _.each(schemaTypes, function(t, i) { %>\n				<div class="header_col">\n					<input type="text" value="<%= schemaKeys[i] %>" placeholder="Field Name" tabindex="<%= (2*i-1) + 100 %>"/>\n					<select tabindex="<%= (2*i) + 100 %>">\n						<option value="string"<%= t === "string" ? " selected" : "" %>>String</option>\n						<option value="number"<%= t === "number" ? " selected" : "" %>>Number</option>\n						<option value="boolean"<%= t === "boolean" ? " selected" : "" %>>Boolean</option>\n					</select>\n				</div>\n			<% }); %>\n		</div>\n	</div>\n</div>\n<div class="buttons">\n	<a class="cancel ui_button">Cancel</a>\n	<a class="ui_action_button csv_import">Finish Import</a>\n</div>\n<div class="error"></div>\n');window.JST["components/_toggle"]=_.jammit_template('<div class="ui_toggle">\n<input type="radio" name="<%= name %>" id="<%= name %>[0]" value="<%= values[0] %>" <%= selection === values[0] ? "checked" : "" %> />\n<label for="<%= name %>[0]"><%= labels[0] %></label>\n<input type="radio" name="<%= name %>" id="<%= name %>[1]" value="<%= values[1] %>" <%= selection === values[1] ? "checked" : "" %> />\n<label for="<%= name %>[1]"><%= labels[1] %></label>\n</div>');window.JST["components/_web_bug_form"]=_.jammit_template('<div>\n  <label>Task title:</label>\n  <input type="text" class="task_title" />\n</div>\n<div>\n  <label>Bug details (or steps to repro):</label>\n  <textarea class="task_content" />\n</div>\n<p>If you have screenshots, attach them to the email before sending it.</p>\n\n<a href="#" class="task_button">#fileatask</a>');window.JST["components/permissions/_permissions_editor_modal"]=_.jammit_template('<a class="gear has_tooltip hidden">\n  <i class="icon_gear"></i>\n  <span class="tooltip_wrap to_left">\n    <span class="tip">\n      Access advanced class level permissions settings.\n    </span>\n  </span>\n</a>\n<div class="permissions_container">\n  <div class="column_overlay second"></div>\n  <div class="column_overlay fourth"></div>\n  <div class="column_overlay sixth"></div>\n  <div class="column_overlay eighth"></div>\n  <div class="clp_settings hidden">\n    <h3 class="left">Permissions Mode</h3>\n    <h3 class="advanced_label">Advanced</h3>\n    <span class="toggle">\n      <input id="clp_type" name="clp_type" type="checkbox">\n      <label for="clp_type">\n    </span>\n    <h3 class="simple_label">Simple</h3>\n  </div>\n  <div class="modal_errors"></div>\n  <div class="advanced_row hidden">\n    <span class="advanced_read"><h4>Read</h4></span>\n    <span class="advanced_write"><h4>Write</h4></span>\n    <span class="advanced_add"><h4>Add</h4></span>\n  </div>\n  <div class="public_row">\n    <i class="icon_people"></i>\n    <span class="public_label">Public</span>\n    <ul class="checkboxes">\n      <li class="public_read simple_checkbox">\n        <span class="checkbox has_tooltip">\n          <span class="tooltip_wrap to_left">\n            <span class="tip">\n              Read includes Get and Find, which are currently set to different values. Go to Advanced Mode to edit these settings.\n            </span>\n          </span>\n          <input class="public_read_checkbox" id="public_read" type="checkbox" />\n          <label for="public_read" data-on="On" data-off="Off">Read</label>\n        </span>\n      </li>\n      <li class="public_write simple_checkbox">\n        <span class="checkbox has_tooltip">\n          <span class="tooltip_wrap to_left">\n            <span class="tip">\n              Write includes Create, Update, and Delete, which are currently set to different values. Go to Advanced Mode to edit these settings.\n            </span>\n          </span>\n          <input class="public_write_checkbox" id="public_write" type="checkbox" />\n          <label for="public_write" data-on="On" data-off="Off">Write</label>\n        </span>\n      </li>\n      <% _.each({\'get\': \'Get\', \'find\': \'Find\', \'create\': \'Create\', \'update\': \'Update\', \'delete\': \'Delete\', \'addField\': \'Add Field\'}, function(display, type) { %>\n        <li class="public_<%= type %> advanced_checkbox hidden">\n          <span class="checkbox">\n            <input class="public_<%= type %>_checkbox" id="public_<%= type %>" type="checkbox" />\n            <label for="public_<%= type %>" data-on="On" data-off="Off"><%= display %></label>\n          </span>\n        </li>\n      <% }); %>\n    </ul>\n    <a class="public_tooltip has_tooltip">\n      <i class="icon_questionMark"></i>\n      <span class="tooltip_wrap to_bottom_left">\n        <span class="tip">\n          Public permissions override all private permissions. Uncheck public permissions to edit private permissions.\n        </span>\n      </span>\n    </a>\n  </div>\n  <ul class="permissions_list">\n  </ul>\n</div>\n<div class="footer">\n  <% if (type === \'ACL\') { %>\n    <a class="learn_more" href="/docs/ios/guide#security-object-level-access-control" target="_blank">Why are ACLs important?</a>\n  <% } else if (type === \'CLP\') { %>\n    <a class="learn_more" href="/docs/ios/guide#security-class-level-permissions" target="_blank">What are CLPs, and why are they important?</a>\n  <% } %>\n  <a class="confirm ui_action_button">Save <%= type %></a>\n  <a class="close ui_button">Cancel</a>\n</div>\n');window.JST["components/permissions/_permissions_editor_row"]=_.jammit_template('<i class="input_icon icon_plusStroke"></i>\n<i class="input_icon icon_user hidden"></i>\n<i class="input_icon icon_permissions hidden"></i>\n<i class="input_icon icon_minimize hidden"></i>\n<i class="input_icon icon_warning hidden"></i>\n<% if (permissionsType === \'CLP\') { %>\n  <input class="ui_text" type="text" name="acl_<%= index %>" placeholder="Role, User, or Pointer&hellip;">\n<% } else { %>\n  <input class="ui_text" type="text" name="acl_<%= index %>" placeholder="Role or User&hellip;">\n<% } %>\n<span class="permission_label hidden">\n  <span class="label_value"></span>\n  <span class="pointer_pill hidden">&lt;_User&gt;</span>\n</span>\n<div class="error_bubble"></div>\n<ul class="checkboxes">\n  <li class="read simple_checkbox">\n    <span class="checkbox has_tooltip">\n      <span class="tooltip_wrap to_left">\n        <span class="tip">\n          Read includes Get and Find, which are currently set to different values. Go to Advanced Mode to edit these settings.\n        </span>\n      </span>\n      <i class="icon_checkmark"></i>\n      <input class="read_checkbox" id="read_<%= index %>" type="checkbox" />\n      <label for="read_<%= index %>">Read</label>\n    </span>\n  </li>\n  <li class="write simple_checkbox">\n    <span class="checkbox has_tooltip">\n      <span class="tooltip_wrap to_left">\n        <span class="tip">\n          Write includes Create, Update, and Delete, which are currently set to different values. Go to Advanced Mode to edit these settings.\n        </span>\n      </span>\n      <i class="icon_checkmark"></i>\n      <input class="write_checkbox" id="write_<%= index %>" type="checkbox" />\n      <label for="write_<%= index %>">Write</label>\n    </span>\n  </li>\n  <% _.each({\'get\': \'Get\', \'find\': \'Find\', \'create\': \'Create\', \'update\': \'Update\', \'delete\': \'Delete\', \'addField\': \'Add Field\'}, function(display, type) { %>\n    <li class="<%= type %> advanced_checkbox hidden">\n      <span class="checkbox">\n        <i class="icon_checkmark"></i>\n        <input class="<%= type %>_checkbox" id="<%= type %>_<%= index %>" type="checkbox" />\n        <label for="<%= type %>_<%= index %>"><%= display %></label>\n      </span>\n    </li>\n  <% }); %>\n  <li class="readPointer pointer_checkbox pointer_hidden advanced_checkbox hidden">\n    <span class="checkbox">\n      <i class="icon_checkmark"></i>\n      <input class="readPointer_checkbox" id="readPointer_<%= index %>" type="checkbox" />\n      <label for="readPointer_<%= index %>">Get and Find</label>\n    </span>\n  </li>\n  <li class="writePointer pointer_checkbox pointer_hidden advanced_checkbox hidden">\n    <span class="checkbox">\n      <i class="icon_checkmark"></i>\n      <input class="writePointer_checkbox" id="writePointer_<%= index %>" type="checkbox" />\n      <label for="writePointer_<%= index %>">Create, Update, Delete and Add Field</label>\n    </span>\n  </li>\n</ul>\n<a class="remove_row_button">\n  <i class="icon_trashcan"></i>\n</a>\n');window.JST["config/_config_table"]=_.jammit_template('<div class="ui_content_header">\n  <div class="ui_actions_left">\n    <span class="search"><input type="text" placeholder="Search parameters" /></span>\n  </div>\n  <div class="ui_actions_right">\n    <a href="#" class="ui_button" id="new_param_button"><i class="icon_plus"></i><span>New Parameter</span></a>\n  </div>\n  <div>Set up your Config</div>\n</div>\n<table class="full_table">\n  <tr>\n    <th style="width: 20%">Parameter</th>\n    <th style="width: 20%">Type</th>\n    <th>Value</th>\n  </tr>\n</table>\n');window.JST["config/_empty_config"]=_.jammit_template('<div class="ui_empty_state">\n  <i class="icon_settingGears"></i>\n  <div class="ui_empty_caption">Store your app configuration</div>\n  <p>Update your app\'s parameters on the fly. <a href="http://blog.parse.com/2014/09/08/announcing-parse-config/">Learn more</a>.</p>\n  <a id="new_param_button" class="ui_action_button"><i class="icon_plus"></i><span>Create your first parameter</span></a>\n</div>');window.JST["config/_modal_footer"]=_.jammit_template('<a href="#" class="ui_delete_button"><i class="icon_trashcan"></i><span>Delete Parameter</span></a>');window.JST["config/_new_parameter_modal"]=_.jammit_template('<div class="modal_errors"></div>\n  \n<table class="modal_form">\n  <tr><td>Name:</td><td id="param_name_wrapper"></td></tr>\n  <tr><td>Type:</td><td><div class="dropdown_field" id="type_dropdown_wrapper"></div></td></tr>\n  <tr><td>Value:</td><td id="param_value_wrapper"></td></tr>\n</table>\n\n<div class="centered">\n  <a href="#" class="ui_action_button confirm"><%- updateParam ? \'<i class="icon_checkmark"></i><span>Update Parameter</span>\' : \'<span>Create Parameter</span><i class="icon_arrowRight"></i>\' %></a>\n</div>\n');window.JST["config/_param_row"]=_.jammit_template('<td class="param_name"><%= param.get(\'name\') %></td>\n<td class="param_type"><%= param.type() %></td>\n<td class="param_value"><%- param.displayValue() /*TODO:renderer*/%> </td>\n');window.JST["data_browser/_boolean_editor"]=_.jammit_template("<select>\n  <option value='true'>true</option>\n  <option value='false'>false</option>\n</select>");window.JST["data_browser/_classes"]=_.jammit_template('<% _(classes).each(function(col) { %>\n  <li class="<%= col.className === selectedClassName && !relationKey ? \'selected\' : \'\' %>\n             <%= col.exporting ? \' exporting\' : \'\' %>\n             <%= col.importing ? \' importing\' : \'\' %>">\n    <a href="#class/<%= col.className %>" data-name="<%= col.className %>">\n      <% if (col.className === \'_Product\') { %>\n        <i class="icon_cart"></i>\n      <% } else if (col.className === \'_Installation\') { %>\n        <i class="icon_device"></i>\n      <% } else if (col.className === \'_User\') { %>\n        <i class="icon_users"></i>\n      <% } else if (col.className === \'_Role\') { %>\n        <i class="icon_permissions"></i>\n      <% } else if (col.className === \'_Session\') { %>\n        <i class="icon_collaborators"></i>\n      <% } %>\n      <% var name = Parse.Schema.beautifyClassName(col.className) %>\n      <span title="<%= name %>">\n        <%= name %>\n      </span>\n      <% if (!_.isUndefined(col.count)) { %>\n        <span><%= col.displayedCount %></span>\n      <% } %>\n    </a>\n  </li>\n  <% if (relationKey && col.className === selectedClassName) { %>\n    <li class="selected">\n      <a href="<%= relationLink %>">\n        <i class="icon_nextCircle"></i>\n        <span><%= relationKey %></span>\n        <span></span>\n      </a>\n    </li>\n  <% } %>\n<% }); %>\n<li class="action">\n  <a href="#" class="ui_button add_class">\n    <i class="icon_plus"></i>\n    <span>Add Class</span>\n  </a>\n  <% if (allowImports) { %>\n    <a href="#" class="ui_button import">\n      <i class="icon_importStroke" style="font-size: 20px; margin-right: 0.25em;"></i><span>Import</span>\n    </a>\n  <% } else { %>\n    <div class="has_tooltip">\n      <a href="#" class="ui_button import disabled">\n        <i class="icon_importStroke" style="font-size: 20px; margin-right: 0.25em;"></i>\n        <span>Import</span>\n        <span class="tooltip_wrap to_top_left"><span class="tip">Importing is not currently available. It should be back soon, come back again in a bit.</span></span>\n      </a>\n    </div>\n  <% } %>\n</li>\n');window.JST["data_browser/_constraint"]=_.jammit_template('<td class="constraint_column"></td>\n<td class="constraint_comparator"></td>\n<td class="constraint_value"></td>\n<td class="constraint_remove">\n  <a class="constraint_remove with_tooltip">\n    <i class="icon_crossCircle"></i>\n    <span class="mini_tooltip bottom" style="width: 120px">Remove condition</span>\n  </a>\n</td>');window.JST["data_browser/_constraint_field"]=_.jammit_template("<div class='dropdown'>\n  <select class='field'>\n    <% _.each(fields, function(field) { %>\n      <option value='<%= field %>'><%= field %></option>\n    <% }); %>\n  </select>\n</div>\n");window.JST["data_browser/_constraint_op"]=_.jammit_template("<div class='dropdown'>\n  <select class='op'>\n    <% Parse._each(ops, function(op, description) { %>\n      <option value='<%= description %>'><%= description %></option>\n    <% }); %>\n  </select>\n</div>");window.JST["data_browser/_date_editor"]=_.jammit_template("<% if (!disableDate) { %><span class='date' /><% } %>\n<div class='time_container'>\n  <div class='time'>00 : 00</div>\n  \n  <div class='time_picker_overlay'></div>\n  <div class='time_picker'>\n    <div class='time_picker_header'>Select time</div>\n    <div class='time_picker_content'>\n      <div class='hour_container'>\n        <select class='hour'>\n          <% for (var hour = 0; hour < 24; hour++) {\n            var formattedHour = App.Views.Editors.Date.doubleDigits(hour);\n          %>\n            <option value=<%= formattedHour %>> <%= formattedHour %></option>\n          <% } %>\n        </select>\n      </div>\n      <div class='colon'>:</div>\n      <div class='minute_container'>\n        <select class='minute'>\n          <% for (var minute = 0; minute < 60; minute++) {\n            var formattedMinute = App.Views.Editors.Date.doubleDigits(minute);\n          %>\n            <option value=<%= formattedMinute %>><%= formattedMinute %></option>\n          <% } %>\n        </select>\n      </div>\n    </div>\n  </div>\n  \n  <div class='time_zone_badge'>UTC</div>\n</div>");window.JST["data_browser/_delete_file"]=_.jammit_template('<img class="remove" src="/images/data_browser/circle_x.png" />\n');window.JST["data_browser/_drop_column"]=_.jammit_template('<form>\n    <div class="errors" style="display:none"></div>\n    \n    <label for="name">Name</label>\n    <div class="styled-select">\n        <select name="name">\n            <% _(columns).each(function(column) { %>\n                <option value="<%= column %>"> <%= column %> </option>\n            <% }); %>\n        </select>\n    </div>\n\n    <div class="buttons">\n        <button>Drop Column</button>\n        <a href="#" class="cancel along">Cancel</a>\n    </div>\n</form>\n');window.JST["data_browser/_file_input"]=_.jammit_template('<a href="javascript: void(0)">Upload File</a>\n<input class="upload" type="file" id="upload_input" name="upload" />\n\n');window.JST["data_browser/_filters"]=_.jammit_template('<div class="filters_overlay"></div>\n<span class="filter_button"></span>\n<div class="title"></div>\n<div class="filters_container">\n  <table class="filters"></table>\n  <a class="collapsed_single_submit submit ui_button"><i class="icon_checkmarkCircle"></i><span>Apply</span></a>\n  <div class="controls">\n    <a class="add_constraint_button ui_button"><i class="icon_plus"></i><span>Add condition</span></a>\n    <a class="submit ui_button"><i class="icon_checkmarkCircle"></i><span>Apply</span></a>\n    <a class="dismiss">Clear All</a>\n    <div class="filter_errors"></div>\n  </div>\n</div>\n');window.JST["data_browser/_geopoint_editor"]=_.jammit_template("<input type='text' class='latitude' /> , <input type='text' class='longitude' />");window.JST["data_browser/_link_to_file"]=_.jammit_template("<a class='new_tab' href=\"<%= url %>\">\n    <%= name %>\n</a>\n");window.JST["data_browser/_new_class"]=_.jammit_template('<form class="new_class">\n\n  <div class="errors"></div>\n\n  <div class="custom">\n    <input type="text" name="name" value="" placeholder="Class name" />\n  </div>\n  \n  <div class="dropdown">\n    <select name="classType">\n      <% _(types).each(function(type) { %>\n        <option value="<%= type %>"> <%= type %> </option>\n      <% }); %>\n    </select>\n  </div>  \n  <div class="special">\n    <small class="description user">The User class is a special class that can be authenticated, allowing users of your app to log in, sign up, and more.</small>\n    <small class="description role">The Role class is a special class that allows you to specify groups of users with shared permissions.</small>\n    <small class="description installation">The Installation class is a special class that stores push notification subscriptions for each device running your app.</small>\n    <small class="description product">The Product class is a special class that stores your in-app product data.</small>\n  </div>\n  \n  <div class="tip">Class names must only contain numbers, letters, and underscore, and can only begin with a letter.</div>\n  \n  \n  <div class="buttons">\n    <button>Create Class</button>\n    <a href="#" class="cancel along">Cancel</a>\n  </div>\n</form>');window.JST["data_browser/_new_column"]=_.jammit_template('<form class=\'new_column\'>\n  <div class=\'errors\' style=\'display: none\'></div>\n  \n  <input type=\'text\' name=\'name\' placeholder=\'Column name\' />\n\n  <div class="dropdown">\n    <select name="type">\n      <option value="">Select a type</option>\n      <% _(types).each(function(type) { %>\n        <option value="<%= type %>"> <%= type %> </option>\n      <% }); %>\n    </select>\n  </div>\n  \n  <div class="dropdown classNameDropdown">\n    <select name="className">\n      <option value="">Target class</option>\n      <% _(classes).each(function(className) { %>\n        <option value="<%= className %>"> <%= className %> </option>\n      <% }); %>\n    </select>\n  </div>\n  \n  <div class="tip">Must only contain alphanumeric or underscore characters, and must begin with a letter or number.</div>\n    \n  \n  \n  \n  <div class="buttons">\n    <button>Create Column</button>\n    <a href="#" class="cancel along">Cancel</a>\n  </div>\n</form>\n');window.JST["data_browser/_new_import"]=_.jammit_template("<form class='import'>\n  <div class='errors'></div>\n\n  <div class='file' />\n\n  <div class='info_tip'><small>We accept .json and .csv files. <a href=\"/docs/data#data-import\" target=\"_blank\" class='info_tip'>Learn more</a>.</small></div>\n\n  <div class='custom'>\n    <input type='text' class='class_name' value='' placeholder='Class Name' />\n  </div>\n\n  <div class=\"dropdown\">\n    <select name=\"classType\">\n      <% _(types).each(function(type) { %>\n        <option value=\"<%= type %>\"> <%= type %> </option>\n      <% }); %>\n    </select>\n  </div>\n  <div class=\"special\">\n    <small class=\"description user\"> (JSON only) The User class is a special class that can be authenticated, allowing users of your app to log in, sign up, and more.</small>\n    <small class=\"description installation\"> (JSON only) The Installation class is a special class that track installation of your app on devices that can receive push notifications.</small>\n  </div>\n  \n  <div class=\"tip\"><small>Class names must only contain numbers, letters, and underscore, and can only begin with a letter.</small></div>\n\n  <div class='buttons'>\n    <button type='submit'>Import</button>\n    <a href=\"#\" class='cancel along'>Cancel</a>\n  </div>\n</form>\n");window.JST["data_browser/_no_data"]=_.jammit_template('<div class="empty ui_empty_state">\n  <!-- No data given the filter -->\n  <% if (hasFilters) { %>\n    <div class="empty_image"></div>\n    <p>There is no data matching your filters for this page.</p>\n\n  <!-- No object given ID -->\n  <% } else if (isSingleObject) { %>\n    <div class="empty_image"></div>\n    <p>There is no object matching the objectId.</p>\n\n  <!-- Simply no data -->\n  <% } else { %>\n    <i class="icon_dataBrowser"></i>\n  	<% if (!hasClasses) { %>\n      <div class="ui_empty_caption">No classes to display</div>\n      <p>In order to store data in Parse, you\'ll need to make a class.</p>\n      <a class="add_class ui_action_button">\n        <i class="icon_plus"></i>\n        <span>Add a class</span>\n      </a>\n    <% } else { %>\n      <div class="ui_empty_caption">No data to display</div>\n      <p>Add a row to store an object in this class.</p>\n      <a class="add ui_action_button">\n        <i class="icon_plus"></i>\n        <span>Add a row</span>\n      </a>\n    <% } %>\n  <% } %>\n</div>');window.JST["docs/_cloud_modules"]=_.jammit_template('<% if (typeof(categories) !== "undefined" && categories.length > 0) { %>\n  <% _.each(categories, function(category) { %>\n    <h4><%= category %></h4>\n\n    <ul class="text">\n      <% _.each(modules[category], function(module) { %>\n        <li>\n          <a href="<%= module.get("url") %>"><%= module.get("name") %></a>\n          <% if (module.get("description")) { %>\n            &mdash; <%= module.get("description") %>\n          <% } %>\n        </li>\n      <% });%>\n    </ul>\n  <% }); %>\n<%} else {%>\n  <p>There are currently no modules available.</p>\n<%}%>\n');window.JST["docs/_third_party_libraries"]=_.jammit_template('<% _(libs).chain().keys().sortBy(function(i) { return i.toLowerCase(); }).each(function(category) { %>\n  <h4><%= category %></h4>\n\n  <ul class="text">\n    <% _(libs[category]).chain().sortBy(function(i) { return i.get("name").toLowerCase(); }).each(function(lib) { %>\n      <li>\n        <a href="<%= lib.get("url") %>"><%= lib.get("name") %></a>\n        <% if (lib.get("description")) { %>\n          &mdash; <%= lib.get("description") %>\n        <% } %>\n      </li>\n    <% });%>\n  </ul>\n<% }); %>\n');window.JST["events/rsvp"]=_.jammit_template('<p>We\'re glad to hear you\'re attending. We just need a couple pieces of information first.</p>\n<div class="modal_errors centered"></div>\n<table class="modal_form">\n  <tr>\n    <td>Name</td><td><input class="ui_text" type="text" id="rsvp_name" /></td>\n  </tr>\n  <tr>\n    <td>Email</td><td><input class="ui_text" type="text" id="rsvp_email" /></td>\n  </tr>\n</table>\n<div class="centered">\n  <a class="ui_action_button confirm" href="#"><i class="icon_send"></i><span>Register</span></a>\n</div>');window.JST["fb_conversion/sign_up"]=_.jammit_template("var fb_param = {};\nfb_param.pixel_id = '6010887695824';\nfb_param.value = '5.00';\nfb_param.currency = 'USD';\n(function(){\n  var fpw = document.createElement('script');\n  fpw.async = true;\n  fpw.src = '//connect.facebook.net/en_US/fp.js';\n  var ref = document.getElementsByTagName('script')[0];\n  ref.parentNode.insertBefore(fpw, ref);\n})();\n\n// Facebook Conversion Code for NEW - PARSE - Sign up\n(function() {\n  var _fbq = window._fbq || (window._fbq = []);\n  if (!_fbq.loaded) {\n    var fbds = document.createElement('script');\n    fbds.async = true;\n    fbds.src = '//connect.facebook.net/en_US/fbds.js';\n    var s = document.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(fbds, s);\n    _fbq.loaded = true;\n  }\n})();\nwindow._fbq = window._fbq || [];\nwindow._fbq.push(['track', '6014412664824', {'value':'0.00','currency':'USD'}]);\n");window.JST["help/_bug_report_modal"]=_.jammit_template('<p class="requires_platforms">Is the issue specific to one of the following platforms?</p>\n<div class="requires_platforms dropdown_wrap" id="select_platform_wrapper"></div>\n\n<div class="support_facebook">\n  <p>We use Facebook&apos;s bug reporting tool to track issues. Please provide as much detail up front to help us triage your issue.</p>\n\n  <p class="requires_apps">Which app is this regarding?</p>\n  <div class="requires_apps dropdown_wrap" id="select_app_wrapper"></div>\n\n  <p>We will do our best to provide a fix or workaround within a reasonable amount of time.</p>\n  <p>See our <a href="/about/support">support policy</a> for more information.</p>\n\n  <a href="/help/submit" class="facebook_link_button">Continue to Facebook</a>\n</div>\n\n<div class="support_open_source" style="display:none">\n  <p>The source code for this platform is available on GitHub. Visit the repository to report an issue or submit a pull request.</p>\n\n  <p>If the issue can be reproduced using the REST API and/or you are confident this is a backend issue, choose <em>REST API or other</em> above.</p>\n\n  <a href="#" class="github_link_button">Continue to GitHub</a>\n<div>\n');window.JST["home/_login_footer_pure"]=_.jammit_template('<a class="login-facebook oauth_login" href="/auth/facebook">\n<span>Log in with Facebook</span>\n</a>\n\n<a class="login-github oauth_login" href="/auth/github">\n<span>Log in with GitHub</span>\n</a>\n\n<a class="login-google oauth_login" href="/auth/google_oauth2">\n<span>Log in with Google</span>\n</a>');window.JST["home/_login_modal"]=_.jammit_template('<form action="/user_session" class="new_user_session" id="new_user_session" method="post">\n  <div style="margin:0;padding:0;display:inline">\n      <input name="authenticity_token" type="hidden" />\n  </div>\n  <div class="field user_email">\n    <div class="icon"></div>\n    <input id="user_session_email" name="user_session[email]" size="30" tabindex="100" type="text" placeholder="email" />\n  </div>\n\n  <div class="field user_password">\n    <div class="icon"></div>\n    <input id="user_session_password" name="user_session[password]" size="30" tabindex="101" type="password" placeholder="password" />\n  </div>\n\n  <a class="forgot_password" href="/password_resets/new" tabindex="103">Forgot password?</a>\n\n  <button type="submit" class="button submit_button" tabindex="102">Log in</button>\n</form>\n<div class="alt_logins">\n  <a class="login-facebook oauth_login" href="/auth/facebook">\n    Log in with Facebook\n  </a>\n\n  <a class="login-github oauth_login" href="/auth/github">\n    Log in with GitHub\n  </a>\n\n  <a class="login-google oauth_login" href="/auth/google_oauth2">\n    Log in with Google\n  </a>\n</div>\n');window.JST["home/_login_modal_pure"]=_.jammit_template('<form action="/user_session" class="new_user_session" id="new_user_session" method="post">\n  <div style="margin:0;padding:0;display:inline">\n      <input name="authenticity_token" type="hidden" />\n  </div>\n  <div class="field user_email">\n    <input id="user_session_email" name="user_session[email]" size="30" tabindex="100" type="text" placeholder="email" />\n  </div>\n\n  <div class="field user_password">\n    <input id="user_session_password" name="user_session[password]" size="30" tabindex="101" type="password" placeholder="password" />\n  </div>\n  <div class="clearfix">\n    <a class="forgot_password" href="/password_resets/new" tabindex="103">Forgot password?</a>\n  </div>\n\n  <a class="ui_action_button submit_button" tabindex="102">Log in</a>\n</form>');window.JST["home/_signup_modal_pure"]=_.jammit_template('<form action="/users" class="new_user" id="new_user" method="post">\n  <div style="margin:0;padding:0;display:inline">\n      <input name="authenticity_token" type="hidden" />\n  </div>\n  <div class="field user_name">\n    <input id="user_name" name="user[name]" size="30" tabindex="100" type="text" placeholder="name" />\n  </div>\n\n  <div class="field user_email">\n    <input id="user_email" name="user[email]" size="30" tabindex="101" type="text" placeholder="email" />\n  </div>\n\n  <div class="field user_password">\n    <input id="user_password" name="user[password]" size="30" tabindex="102" type="password" placeholder="password" />\n  </div>\n\n  <a class="ui_action_button submit_button" tabindex="102">Sign up</a>\n</form>\n');window.JST["keys/_create_token_modal"]=_.jammit_template('<div class="new_token_modal_wrapper">\n	<span>Name your key</span>\n	<input type="text" placeholder="Work laptop" id="token_name_input">\n</div>\n<div id="token_create_errors" class="errors"></div>\n<a class="confirm ui_action_button">Create key</a>');window.JST["keys/_delete_token_modal"]=_.jammit_template('<div class="delete_modal">\n	<div class="token_are_you_sure">Are you sure?</div>\n	<p class="centered">\n		If you delete <span class="token_warning_name">"<%= token_name %>"</span> anything using it will break.</br>\n		<span class="audience_button"><a class="close ui_button">Cancel</a></span>\n		<span><a class="confirm ui_button danger" id="delete_confirm_button">Delete</a></span>\n	</p>\n</div>');window.JST["keys/_new_token_modal"]=_.jammit_template('<i class="icon_checkmarkStroke"></i>\n<div class="token_text">Key created!</div>\n<div class="token_warning">Copy it now, this is the last time you\'ll see it.</div>\n<div class="token_code"><code><%= token %></code></div>\n<a class="confirm ui_action_button">Got it!</a>');window.JST["layouts/query_builder/_query_builder"]=_.jammit_template('<% if (display) { %>\n    <table class="query_builder"></table>\n    <button class="add_constraint_button" type="button">Add condition</button>\n    <div class="errors"></div>\n<% } else { %>\n    <div class="center">Query Builder inaccessible because no valid devices were found!</div>\n<% } %>\n');window.JST["migration/_android_keys"]=_.jammit_template('<div class="keys_img"><i class="icon_android"></i></div>\n<h2>Looks like you have some Android users!</h2>\n<p>We need the GCM API Key to import these. <a class="more_info" href="http://docs.urbanairship.com/platform/android.html#gcm-setup" target="_blank">More info</a></p>\n<span class="key">\n  <h4>GCM API Key</h4>\n  <input class="ui_text" type="text" name="gcm_key" placeholder="AIzaSyCNwhyV-XuKUDni_eCkdB7f3OJTbj3QMO1"/>\n</span>\n<span class="key">\n  <h4>Google API Project Number</h4>\n  <input class="ui_text" type="text" name="sender_id" placeholder="377225441038"/>\n</span>\n<p class="adm_note">Note: Parse does not currently support Amazon Device Messaging (ADM).</p>\n<div class="bottom_buttons">\n  <div class="errors_box"></div>\n  <a class="ui_action_button verify">Verify</a>\n  <a class="close ui_button">Cancel</a>\n</div>\n<div class="spinner_container hidden">\n  <h2>Verifying keys...</h2>\n</div>\n');window.JST["migration/_app_selection"]=_.jammit_template('<span class="migrate_info">\n  <h4>Source</h4>\n  <div class="box ua_box">\n    <i class="icon_iosDevice"></i>\n    <i class="icon_androidDevice"></i>\n    <div class="source_keys">\n      <div class="source_key">\n        <i class="icon_checkmarkStroke"></i>\n        App Key\n      </div>\n      <div class="source_key">\n        <i class="icon_checkmarkStroke"></i>\n        App Master Secret\n      </div>\n      <div class="source_key android">\n        <i class="icon_checkmarkStroke"></i>\n        Android Keys\n      </div>\n    </div>\n  </div>\n  <h3>Urban Airship</h3>\n</span>\n<span class="arrow">\n  <i class="icon_arrowRight"></i>\n</span>\n<span class="migrate_info">\n  <h4>Destination</h4>\n  <div class="box app_box">\n    <div class="apps">\n      <% for (var i=0; i < appNames.length; i++) { %>\n        <input type="radio" name="app" id="app_<%= appSlugs[i] %>" <%= i === 0 ? \'checked\' : \'\' %>>\n        <label for="app_<%= appSlugs[i] %>">\n          <div class="app_name"><%= appNames[i] %></div>\n          <div class="radio_button"></div>\n        </label>\n      <% } %>\n    </div>\n    <a href="#" class="create_app">Create a New App</a>\n    <div class="create_dialog hidden">\n      <input type="text" placeholder="New App Name">\n      <div class="create_error"></div>\n      <a class="create_cancel">Cancel</a>\n      <a class="create_submit">Create App</a>\n    </div>\n  </div>\n  <img class="logo" alt="Parse" src="/images/logo_light.png">\n</span>\n<div class="bottom_buttons">\n  <div class="errors_box"></div>\n  <a class="ui_action_button import">Import</a>\n  <a class="close ui_button">Cancel</a>\n</div>\n');window.JST["migration/_import_confirmation"]=_.jammit_template('<i class="icon_checkmarkStroke"></i>\n<h2>Your import is in progress.</h2>\n<p>We\'ll send you an email when it is complete.</p>\n<a href="/tutorials/migrating-from-urban-airship" class="ui_action_button confirm">Next steps</a>\n');window.JST["migration/_sign_in"]=_.jammit_template('<img class="parachute" src="/images/migration/parachute.png"></img>\n<h2>Let\'s get started with your import!</h2>\n<p class="login_text">Login or create a new Parse account to continue.</p>\n<p class="continue_text">You\'re already logged in to Parse as <%= email %></p>\n<a href="#" class="ui_button signup">Create an account</a>\n<a href="#" class="ui_action_button login">Login to Parse</a>\n<a href="#" class="ui_action_button continue">Continue</a>\n');window.JST["migration/_ua_keys"]=_.jammit_template('<div class="keys_img"><i class="icon_downloadBox"></i></div>\n<h2>Where are we importing from?</h2>\n<p>Enter your Urban Airship credentials. <a class="more_info" href="http://docs.urbanairship.com/reference/app_keys_secrets.html" target="_blank">More info</a></p>\n<span class="key">\n  <h4>App Key</h4>\n  <input class="ui_text" type="text" name="app_key" placeholder="Gp2spGmwSKGyGZDgoEN-wx"/>\n</span>\n<span class="key">\n  <h4>App Master Secret</h4>\n  <input class="ui_text" type="text" name="master_key" placeholder="5s3VgNw9R5ucP0zhuZYxHB"/>\n</span>\n<div class="bottom_buttons">\n  <div class="errors_box"></div>\n  <a class="ui_action_button verify">Verify</a>\n  <a class="close ui_button">Cancel</a>\n</div>\n<div class="spinner_container hidden">\n  <h2>Verifying keys...</h2>\n</div>\n');window.JST["nagging/_client_push_experiment"]=_.jammit_template('<strong>Notice:</strong> You have a possible security vulnerability in your app <%= appname %>. Read more about this <a href="http://blog.parse.com/2014/09/03/the-dangerous-world-of-client-push">here</a>, and consider disabling "client push" in your app\'s <a href="<%= link %>">settings</a>.\n');window.JST["nagging/_failed_charge"]=_.jammit_template('<strong>Notice:</strong> We attempted to charge your credit card for <%= amount %> on <%= date %>, but the card was declined. <a href="/credit_card/new">Add a valid card to ensure your service isn’t interrupted</a>.\n');window.JST["nagging/_has_overages"]=_.jammit_template('<strong>Notice:</strong> You have overages for this month but you don’t have a credit card on file. <a href="/credit_card/new?up=1">Add one to ensure your service isn’t interrupted</a>.\n');window.JST["products/_pigeon_modal"]=_.jammit_template('<h1>April Fools!</h1>\n<p>We wish we could provide you with the very best<br />\nin avian delivery services, but we had trouble<br />\nfinding a place to keep all of our pigeons.</p>\n<p>Instead, enjoy a special April Fools&rsquo; Day coupon<br />from all of us at Parse:</p>\n<a href="https://parse.com/coupon/parsepigeon">parse.com/coupon/parsepigeon</a>');window.JST["push_audiences/_new_audience_modal"]=_.jammit_template('<form>\n	<div class="audience_save_section">\n		Audience Name\n		<input id="push_audience_name" class="push_audience_name_input push_audience_page_name_input" placeholder="Audience Name" type="text"></input>\n	</div>\n	<div class="audience_modal_buttons">\n		<a class="close ui_button">Cancel</a>\n		<a class="ui_action_button" id="push_audience_save_button">Save Audience</a>\n	</div>\n	<div class="push_page_error" id="push_audience_errors"></div>\n</form>');window.JST["push_notifications/_message_translator"]=_.jammit_template('<div class="warning">\n    <div class="message_container">\n        <i class="icon_warning"></i>\n        <span>\n            <% if (options === [] && translations === []) { %>\n                No locales found. All devices will receive the default message above.\n            <% } else { %>\n                In some cases a locale may not be available for a user, either because they are running an earlier version of the SDK or their client has sent up an invalid locale. In those cases, they will receive the default message.\n                <a target="_blank" href="https://parse.com/docs/android/guide#push-notifications-push-localization">More info.</a>\n            <% } %>\n        </span>\n    </div>\n</div>\n<br>\n<% _.each(translations, function(translation, index) { %>\n<div class="parameter_block translation">\n    <div class="parameter_header">\n        Localized Message\n        <a href="#" class="remove_language" id="<%= index %>"></a>\n    </div>\n    <div class="translated_push_message sub_section_body">\n        <textarea name="translation[<%= translation.locale %>]" id="<%= index %>" class="push_text" placeholder="Your message here" id="message_a"><%= translation.data %></textarea>\n    </div>\n    <div class="sub_section_body">\n        <div class="left">Locale Identifier</div>\n        <div class="right translated_push_locale">\n            <div class=\'dropdown\'>\n                <select id="<%= index %>">\n                    <option value="<%= translation.locale %>" selected="selected"><%= translation.locale %></option>\n                    <% _.each(options, function(op, index) { %>\n                        <option value=\'<%= index %>\'><%= op %></option>\n                    <% }); %>\n              </select>\n            </div>\n        </div>\n    </div>\n    <% if (translation.locale in translationCounts) { %>\n        <div class="sub_section_body">\n            <p class="locale_device_count">\n                <span>\n                    <%= translationCounts[translation.locale] %> device<% if (translationCounts[translation.locale] !== 1) {%>s<% } %>\n                </span>\n            </p>\n        </div>\n    <% } %>\n</div>\n<br>\n<% }); %>\n\n<% if (options === null) { %>\n    <span>Loading locales...</span>\n<% } else if (options.length > 0) { %>\n    <button class="add_language_button">Add a Localization</button>\n<% } %>\n');window.JST["support/_billing_inquiry_modal"]=_.jammit_template('<div class="inquiry_confirmation" style="display:none">\n	<h2>Successfully sent! We\'ll get back to you through your account contact email within five business days.</h2>\n</div>\n<form class="billing_inquiry_form">\n  <div class="errors" style="display:none"></div>\n\n	<label>What do you need help with?</label>\n	<textarea name="question"></textarea>\n	<p>\n		<small>\n			This contact form is for requesting assistance with billing issues only.\n			Please note that Parse is designed to be a self-service platform and we provide a lot of information on our site.\n			You may refer to our <a href="/docs">documentation</a>\n			or visit the <a href="/help">Help center</a> for more information on using Parse.\n			If something is not working as expected, please <a href="/help#report">file a bug report</a> with detailed information.\n		</small>\n	</p>\n	<button class="submit">Submit</button>\n</form>\n');window.JST["tutorials/_app_keys"]=_.jammit_template('<div class="caption" id="appKeys">\n	<div class="number">2</div>\n	<p><%= title %></p>\n</div>\n\n<p class="title">App ID</p>\n<div class="copy_container">\n	<input type="text" value="<%= appKey %>" />\n	<a href="copy" id="copy_client_key">Copy</a>\n</div>\n\n<p class="title">Client Key</p>\n<div class="copy_container"> \n	<input type="text" value="<%= appSecret %>" />\n	<a href="#"" id="copy_client_secret">Copy</a>\n</div>')})();